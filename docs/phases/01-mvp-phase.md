# Фаза 1: MVP (3-4 месяца)

## Цели фазы

- Запуск работающего продукта для первых клиентов
- Валидация product-market fit
- Сбор обратной связи для итераций

## Критерии готовности MVP

- [ ] Жители могут подавать заявки через Telegram
- [ ] Диспетчеры видят и обрабатывают заявки в веб-панели
- [ ] Персонал получает назначения в мобильном приложении
- [ ] Работает оплата через Payme/Click
- [ ] Жители получают уведомления о статусах

---

## Спринт 1 (2 недели): Инфраструктура и база

### Backend
- [ ] Настройка проекта FastAPI
- [ ] Docker Compose для development
- [ ] PostgreSQL + базовые миграции
- [ ] Redis для сессий
- [ ] Структура проекта и конфигурация

### Database
- [ ] Таблицы: companies, complexes, buildings, apartments
- [ ] Таблицы: users, residents
- [ ] Таблицы: request_categories, requests
- [ ] Seed data для тестирования

### DevOps
- [ ] Git repository setup
- [ ] CI pipeline (lint, tests)
- [ ] Development environment documentation

### Deliverables
- Работающий API skeleton
- Документация API (OpenAPI/Swagger)
- Development environment ready

---

## Спринт 2 (2 недели): Аутентификация и пользователи

### Backend
- [ ] JWT аутентификация
- [ ] Регистрация/логин админов
- [ ] RBAC (роли и права)
- [ ] API для управления пользователями
- [ ] API для управления жителями

### Frontend (Web Admin)
- [ ] Настройка React + Vite + TypeScript
- [ ] Базовый UI Kit (Glassmorphism компоненты)
- [ ] Layout с sidebar
- [ ] Страница логина
- [ ] Страница списка жителей
- [ ] Форма добавления/редактирования жителя

### Telegram Bot
- [ ] Настройка aiogram 3.x
- [ ] Команда /start
- [ ] Регистрация по номеру телефона
- [ ] Привязка Telegram к resident

### Deliverables
- Работающая авторизация
- Базовая веб-панель
- Telegram бот с регистрацией

---

## Спринт 3 (2 недели): Заявки - Core

### Backend
- [ ] CRUD API для заявок
- [ ] Статусы и переходы
- [ ] Назначение исполнителей
- [ ] История изменений заявки
- [ ] Загрузка фото (MinIO/S3)

### Frontend (Web Admin)
- [ ] Список заявок с фильтрами
- [ ] Kanban-доска статусов
- [ ] Детальная страница заявки
- [ ] Форма создания заявки (от диспетчера)
- [ ] Назначение исполнителя

### Telegram Bot
- [ ] Wizard создания заявки
- [ ] Выбор категории (inline кнопки)
- [ ] Отправка описания + фото
- [ ] Подтверждение и отправка
- [ ] Проверка статуса заявок

### Deliverables
- Полный цикл заявки: создание → выполнение → закрытие
- Telegram и Web интерфейсы синхронизированы

---

## Спринт 4 (2 недели): Заявки - Расширение

### Backend
- [ ] SLA расчет и мониторинг
- [ ] Автоматическая эскалация
- [ ] Уведомления (Celery tasks)
- [ ] WebSocket для real-time обновлений

### Frontend (Web Admin)
- [ ] SLA индикаторы в списке
- [ ] Уведомления в UI
- [ ] Bulk operations (массовое назначение)
- [ ] Экспорт в Excel

### Mobile (Staff App - PWA)
- [ ] Настройка PWA
- [ ] Список назначенных заявок
- [ ] Детали заявки
- [ ] Смена статуса
- [ ] Загрузка фото выполнения
- [ ] Offline режим (базовый)

### Telegram Bot
- [ ] Push-уведомления о новых заявках (для персонала)
- [ ] Уведомления об изменении статуса (для жителей)

### Deliverables
- SLA мониторинг работает
- Персонал работает через PWA
- Real-time обновления

---

## Спринт 5 (2 недели): Платежи

### Backend
- [ ] Интеграция Payme Merchant API
- [ ] Интеграция Click SHOP-API
- [ ] Webhooks обработка
- [ ] API для истории платежей
- [ ] Расчет баланса квартиры

### Frontend (Web Admin)
- [ ] Страница платежей
- [ ] Баланс по квартирам
- [ ] История платежей

### Telegram Bot
- [ ] Команда /pay
- [ ] Показ текущего баланса
- [ ] Ссылка на оплату (Payme/Click)
- [ ] Уведомление об успешной оплате

### Mobile (Resident PWA)
- [ ] Настройка PWA для жителей
- [ ] Главная с балансом
- [ ] Страница оплаты
- [ ] История платежей

### Deliverables
- Оплата работает через Payme и Click
- Жители видят баланс и могут оплатить

---

## Спринт 6 (2 недели): Показания и полировка

### Backend
- [ ] API для показаний счетчиков
- [ ] Валидация показаний
- [ ] Отчеты (базовые)

### Frontend (Web Admin)
- [ ] Страница показаний
- [ ] Dashboard с KPI
- [ ] Настройки компании

### Telegram Bot
- [ ] Команда для передачи показаний
- [ ] Напоминания о передаче показаний
- [ ] Главное меню с иконками

### Mobile Apps
- [ ] Ввод показаний
- [ ] Push уведомления (Firebase)
- [ ] Улучшение offline режима

### QA & Polish
- [ ] End-to-end тестирование
- [ ] Исправление багов
- [ ] Performance оптимизация
- [ ] Документация пользователя

### Deliverables
- MVP готов к пилоту
- Документация готова

---

## Технологический стек MVP

### Backend
```
Python 3.11+
FastAPI
SQLAlchemy 2.0
Alembic (migrations)
Celery + Redis
aiogram 3.x
Pydantic v2
```

### Frontend
```
React 18
TypeScript
Vite
TanStack Query
Zustand
Tailwind CSS
React Router v6
```

### Mobile
```
PWA (Phase 1)
Workbox
Service Workers
```

### Infrastructure
```
Docker + Docker Compose
PostgreSQL 15
Redis 7
MinIO
Nginx
```

---

## Риски и митигация

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| Сложность интеграции Payme/Click | Средняя | Высокое | Раннее начало работы, тестовые аккаунты |
| Telegram API ограничения | Низкая | Среднее | Webhook mode, graceful degradation |
| Offline режим сложнее ожидаемого | Средняя | Среднее | Начать с простого кэширования |
| Локализация данных | Низкая | Высокое | Выбор хостинга в УЗ с первого дня |

---

## Метрики успеха MVP

### Технические
- API response time < 200ms (p95)
- Uptime > 99%
- 0 критических багов

### Продуктовые
- Минимум 1 пилотный клиент
- 100+ заявок обработано
- 50+ платежей проведено
- NPS > 30 от пользователей

---

## Команда MVP

### Минимальный состав
- 1 Backend разработчик (Senior)
- 1 Frontend разработчик (Middle+)
- 1 DevOps / Backend (Part-time)

### Оптимальный состав
- 2 Backend разработчика
- 1 Frontend разработчик
- 1 Mobile разработчик
- 1 QA инженер (Part-time)
- 1 Project Manager / Product Owner
