import{t as Ge,r as j,j as e,a7 as Be,au as Ee,S as $e,F as ne,h as X,B as oe,N as de,ax as Ze,ay as Ve,a3 as ce,m as F,J as Qe,az as et,ab as Fe,A as tt,p as st,av as at,W as Le,V as lt,M as rt,ad as it,ac as nt,aw as ot,q as xe,X as dt}from"./react-vendor-1770493083576-vH-hHAng.js";import{R as L,A as Te,C as me,X as ue,Y as he,T,L as M,d as G,P as ge,b as pe,c as je,B as ct,a as Me}from"./LazyCharts-1770493083576-Cv2n_w-N.js";import{u as xt,h as mt,i as ut,d as ht,e as gt,t as pt,S as ve}from"./index-1770493083576-CfAzBj-W.js";import{f as jt}from"./formatAddress-1770493083576-OwpdX0o2.js";import{L as vt}from"./vendor-1770493083576-DMjXTqd7.js";import"./zustand-1770493083576-wNUYBKDB.js";import"./qr-scanner-1770493083576-B_vB3SDT.js";import"./charts-1770493083576-DQOUODq2.js";const ft={new:"Новая",assigned:"Назначена",accepted:"Принята",in_progress:"В работе",pending_approval:"На проверке",completed:"Выполнена",cancelled:"Отменена"};function Z({isOpen:C,onClose:p,title:f,children:k}){return C?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:p,children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden shadow-xl",onClick:q=>q.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:f}),e.jsx("button",{onClick:p,className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:k})]})}):null}function Dt(){const C=Ge(),{requests:p,executors:f,announcements:k,fetchRequests:q,fetchExecutors:V}=xt(),{buildings:H,residents:fe,fetchBuildings:Q}=mt(),{meetings:W,fetchMeetings:ee}=ut(),{language:r}=ht(),[ye,Ne]=j.useState(!1),[K,y]=j.useState(null),[v,qe]=j.useState(null),[_,we]=j.useState("overview"),[o,He]=j.useState(null),[be,Ce]=j.useState(!1),[Y,Oe]=j.useState(()=>{const t=new Date;return t.setDate(t.getDate()-30),t.toISOString().slice(0,10)}),[I,Pe]=j.useState(()=>new Date().toISOString().slice(0,10));j.useEffect(()=>{q(),V(),Q(),ee(),_e()},[q,V,Q,ee]),j.useEffect(()=>{_==="marketplace"&&Re()},[_,Y,I]);const Re=async()=>{Ce(!0);try{const t=await gt(`/api/marketplace/admin/reports?start_date=${Y}&end_date=${I}`);He(t)}catch{}finally{Ce(!1)}},_e=async()=>{try{const t=await pt.getAll(),s=(t.managers?.length||0)+(t.departmentHeads?.length||0)+(t.executors?.length||0);qe({...t,total:s})}catch{}},c=j.useMemo(()=>{const t=new Date,s=new Date(t.getTime()-10080*60*1e3),x=new Date(t.getTime()-720*60*60*1e3),m=p.length,n=p.filter(h=>h.status==="new").length,u=p.filter(h=>["assigned","accepted","in_progress"].includes(h.status)).length,i=p.filter(h=>h.status==="completed").length,R=p.filter(h=>{if(h.status!=="completed")return!1;const w=h.completedAt?new Date(h.completedAt):null;return w&&w>=s}).length,N=p.filter(h=>{if(h.status!=="completed")return!1;const w=h.completedAt?new Date(h.completedAt):null;return w&&w>=x}).length,J=p.filter(h=>h.status==="pending_approval").length,S=m>0?i/m*100:0,A=v?.managers.length||0,se=v?.departmentHeads.length||0,D=v?.executors.length||f.length,ze=v?.total||0||A+se+D,O=f.filter(h=>h.status!=="offline").length,Se=f.length>0?f.reduce((h,w)=>h+(w.rating||0),0)/f.length:0,P=H.length,Ae=fe.length,b=W.filter(h=>["schedule_poll_open","schedule_confirmed","voting_open"].includes(h.status)).length,U=k.filter(h=>h.isActive).length;return{totalRequests:m,newRequests:n,inProgress:u,completedTotal:i,completedThisWeek:R,completedThisMonth:N,pendingApproval:J,completionRate:S,totalStaff:ze,totalManagers:A,totalDepartmentHeads:se,totalExecutors:D,onlineExecutors:O,avgRating:Se,totalBuildings:P,totalResidents:Ae,activeMeetings:b,activeAnnouncements:U}},[p,f,H,fe,W,k,v]),Ue=j.useMemo(()=>[...p].sort((t,s)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()).slice(0,10),[p]),ke=j.useMemo(()=>H.map(t=>{const s=p.filter(u=>{if(u.building_id===t.id||u.buildingId===t.id)return!0;if(u.address){const i=u.address.toLowerCase(),N=t.name.toLowerCase().replace(/дом\s*/i,"").trim().toLowerCase();if(N&&i.includes(N+"-")||N&&i.includes(N+" "))return!0}return!1}),x=s.filter(u=>u.status==="completed").length,m=s.filter(u=>u.status==="new").length,n=s.filter(u=>["assigned","accepted","in_progress"].includes(u.status)).length;return{id:t.id,name:t.name,address:t.address,totalRequests:s.length,completed:x,pending:m,inProgress:n,completionRate:s.length>0?x/s.length*100:0}}).sort((t,s)=>s.totalRequests-t.totalRequests),[H,p]),te=j.useMemo(()=>{const t=new Map;return f.forEach(s=>{const x=s.specialization||"other";t.has(x)||t.set(x,{total:0,completed:0,avgRating:0,executorCount:0});const m=t.get(x);m.executorCount++,m.avgRating=(m.avgRating*(m.executorCount-1)+(s.rating||0))/m.executorCount}),p.forEach(s=>{const x=s.category||"other";t.has(x)||t.set(x,{total:0,completed:0,avgRating:0,executorCount:0});const m=t.get(x);m.total++,s.status==="completed"&&m.completed++}),Array.from(t.entries()).map(([s,x])=>({specialization:s,label:ve[s]||s,...x,completionRate:x.total>0?x.completed/x.total*100:0})).sort((s,x)=>x.total-s.total)},[f,p]),We=j.useMemo(()=>[...f].sort((t,s)=>(s.rating||0)-(t.rating||0)).slice(0,5),[f]),Ke=async()=>{Ne(!0),await Promise.all([q(),V(),Q(),ee(),_e(),_==="marketplace"?Re():Promise.resolve()]),Ne(!1)},Ye=async()=>{if(!o)return;const t=new vt.Workbook;t.creator="Kamizo",t.created=new Date;const s=a=>`${a.toLocaleString("ru-RU")} сум`,x={font:{bold:!0,size:11},alignment:{horizontal:"center",vertical:"middle"},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE0E0E0"}},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}},m={alignment:{horizontal:"left",vertical:"middle"},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}},n={alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}},u={alignment:{horizontal:"right",vertical:"middle"},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}},i=t.addWorksheet("Сводный отчёт");i.columns=[{width:25},{width:35},{width:18},{width:22},{width:15}];const R=i.addRow(["ОТЧЁТ ПО МАРКЕТПЛЕЙСУ"]);i.mergeCells(`A${R.number}:E${R.number}`),R.getCell(1).style={font:{bold:!0,size:16},alignment:{horizontal:"center"}},i.addRow([]),i.addRow(["Период:",`${o.period.start_date} — ${o.period.end_date}`]),i.addRow(["Дата формирования:",new Date().toLocaleDateString("ru-RU")]),i.addRow([]);const N=i.addRow(["ОБЩАЯ СТАТИСТИКА"]);i.mergeCells(`A${N.number}:E${N.number}`),N.getCell(1).style={font:{bold:!0,size:12},alignment:{horizontal:"center"}},i.addRow([]),i.addRow(["Показатель","Значение"]).eachCell(a=>{a.style=x}),[["Всего заказов",o.overall.total_orders],["Доставлено заказов",o.overall.delivered_orders],["Отменено заказов",o.overall.cancelled_orders],["Общая выручка",s(o.overall.total_revenue)],["Доход от доставки",s(o.overall.total_delivery_fees)],["Средний рейтинг",`${o.overall.avg_rating.toFixed(1)} ⭐`],["Количество оценок",o.overall.rated_orders]].forEach(a=>{const g=i.addRow(a);g.getCell(1).style=m,g.getCell(2).style=n}),i.addRow([]),i.addRow([]);const A=i.addRow(["ТОП-10 ТОВАРОВ ПО ПРОДАЖАМ"]);i.mergeCells(`A${A.number}:E${A.number}`),A.getCell(1).style={font:{bold:!0,size:12},alignment:{horizontal:"center"}},i.addRow([]),i.addRow(["№","Название товара","Продано (шт)","Выручка","Заказов"]).eachCell(a=>{a.style=x}),o.top_products.forEach((a,g)=>{const d=i.addRow([g+1,a.product_name,a.total_sold,s(a.total_revenue),a.order_count]);d.getCell(1).style=n,d.getCell(2).style=m,d.getCell(3).style=n,d.getCell(4).style=u,d.getCell(5).style=n}),i.addRow([]),i.addRow([]);const D=i.addRow(["ПРОДАЖИ ПО КАТЕГОРИЯМ"]);i.mergeCells(`A${D.number}:E${D.number}`),D.getCell(1).style={font:{bold:!0,size:12},alignment:{horizontal:"center"}},i.addRow([]),i.addRow(["№","Категория","Продано (шт)","Выручка","Заказов"]).eachCell(a=>{a.style=x}),o.categories.forEach((a,g)=>{const d=i.addRow([g+1,a.category_name,a.total_sold,s(a.total_revenue),a.order_count]);d.getCell(1).style=n,d.getCell(2).style=m,d.getCell(3).style=n,d.getCell(4).style=u,d.getCell(5).style=n}),i.addRow([]),i.addRow([]);const O=i.addRow(["СТАТИСТИКА КУРЬЕРОВ"]);i.mergeCells(`A${O.number}:E${O.number}`),O.getCell(1).style={font:{bold:!0,size:12},alignment:{horizontal:"center"}},i.addRow([]),i.addRow(["№","Имя курьера","Доставлено заказов","Средний рейтинг"]).eachCell(a=>{a.style=x}),o.executor_stats.forEach((a,g)=>{const d=i.addRow([g+1,a.executor_name,a.delivered_count,`${a.avg_rating.toFixed(1)} ⭐`]);d.getCell(1).style=n,d.getCell(2).style=m,d.getCell(3).style=n,d.getCell(4).style=n}),i.addRow([]),i.addRow([]);const P=i.addRow(["ТОП-10 ПОКУПАТЕЛЕЙ"]);i.mergeCells(`A${P.number}:E${P.number}`),P.getCell(1).style={font:{bold:!0,size:12},alignment:{horizontal:"center"}},i.addRow([]),i.addRow(["№","Имя клиента","Телефон","Заказов","Сумма покупок"]).eachCell(a=>{a.style=x}),o.top_customers.forEach((a,g)=>{const d=i.addRow([g+1,a.user_name,a.user_phone,a.order_count,s(a.total_spent)]);d.getCell(1).style=n,d.getCell(2).style=m,d.getCell(3).style=m,d.getCell(4).style=n,d.getCell(5).style=u});const b=t.addWorksheet("По дням");b.columns=[{width:18},{width:22},{width:25}];const U=b.addRow(["ПРОДАЖИ ПО ДНЯМ"]);b.mergeCells(`A${U.number}:C${U.number}`),U.getCell(1).style={font:{bold:!0,size:14},alignment:{horizontal:"center"}},b.addRow([]),b.addRow(["Дата","Количество заказов","Выручка"]).eachCell(a=>{a.style=x}),o.daily_sales.forEach(a=>{const g=b.addRow([a.date,a.orders,s(a.revenue)]);g.getCell(1).style=n,g.getCell(2).style=n,g.getCell(3).style=u}),b.addRow([]);const w=b.addRow(["ИТОГО:",o.daily_sales.reduce((a,g)=>a+g.orders,0),s(o.daily_sales.reduce((a,g)=>a+g.revenue,0))]);w.getCell(1).style={...m,font:{bold:!0}},w.getCell(2).style={...n,font:{bold:!0}},w.getCell(3).style={...u,font:{bold:!0}};const B=t.addWorksheet("Товары");B.columns=[{width:6},{width:45},{width:16},{width:22},{width:12}];const ae=B.addRow(["ДЕТАЛЬНЫЙ ОТЧЁТ ПО ТОВАРАМ"]);B.mergeCells(`A${ae.number}:E${ae.number}`),ae.getCell(1).style={font:{bold:!0,size:14},alignment:{horizontal:"center"}},B.addRow([]),B.addRow(["№","Название товара","Продано (шт)","Выручка","Заказов"]).eachCell(a=>{a.style=x}),o.top_products.forEach((a,g)=>{const d=B.addRow([g+1,a.product_name,a.total_sold,s(a.total_revenue),a.order_count]);d.getCell(1).style=n,d.getCell(2).style=m,d.getCell(3).style=n,d.getCell(4).style=u,d.getCell(5).style=n});const E=t.addWorksheet("Покупатели");E.columns=[{width:6},{width:30},{width:18},{width:20},{width:25}];const le=E.addRow(["ДЕТАЛЬНЫЙ ОТЧЁТ ПО ПОКУПАТЕЛЯМ"]);E.mergeCells(`A${le.number}:E${le.number}`),le.getCell(1).style={font:{bold:!0,size:14},alignment:{horizontal:"center"}},E.addRow([]),E.addRow(["№","Имя клиента","Телефон","Количество заказов","Сумма покупок"]).eachCell(a=>{a.style=x}),o.top_customers.forEach((a,g)=>{const d=E.addRow([g+1,a.user_name,a.user_phone,a.order_count,s(a.total_spent)]);d.getCell(1).style=n,d.getCell(2).style=m,d.getCell(3).style=n,d.getCell(4).style=n,d.getCell(5).style=u});const $=t.addWorksheet("Курьеры");$.columns=[{width:6},{width:30},{width:22},{width:18}];const re=$.addRow(["ОТЧЁТ ПО КУРЬЕРАМ"]);$.mergeCells(`A${re.number}:D${re.number}`),re.getCell(1).style={font:{bold:!0,size:14},alignment:{horizontal:"center"}},$.addRow([]),$.addRow(["№","Имя курьера","Доставлено заказов","Средний рейтинг"]).eachCell(a=>{a.style=x}),o.executor_stats.forEach((a,g)=>{const d=$.addRow([g+1,a.executor_name,a.delivered_count,`${a.avg_rating.toFixed(1)} ⭐`]);d.getCell(1).style=n,d.getCell(2).style=m,d.getCell(3).style=n,d.getCell(4).style=n});const Je=await t.xlsx.writeBuffer(),Xe=new Blob([Je],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),De=URL.createObjectURL(Xe),ie=document.createElement("a");ie.href=De,ie.download=`Отчёт_маркетплейс_${Y}_${I}.xlsx`,ie.click(),URL.revokeObjectURL(De)},z=j.useMemo(()=>{const t=[];for(let n=6;n>=0;n--){const u=new Date;u.setDate(u.getDate()-n);const i=u.toISOString().split("T")[0],R=u.toLocaleDateString(r==="ru"?"ru-RU":"uz-UZ",{weekday:"short"}),N=p.filter(S=>S.createdAt.startsWith(i)).length,J=p.filter(S=>S.completedAt?.startsWith(i)).length;t.push({day:R,created:N,completed:J})}const s=[{name:r==="ru"?"Новые":"Yangi",value:c.newRequests,color:"#3B82F6"},{name:r==="ru"?"В работе":"Jarayonda",value:c.inProgress,color:"#F59E0B"},{name:r==="ru"?"На проверке":"Tekshiruvda",value:c.pendingApproval,color:"#8B5CF6"},{name:r==="ru"?"Выполнено":"Bajarildi",value:c.completedTotal,color:"#10B981"}].filter(n=>n.value>0),x=[{name:r==="ru"?"Менеджеры":"Menejerlar",value:c.totalManagers,color:"#8B5CF6"},{name:r==="ru"?"Главы отделов":"Bo'lim boshliklari",value:c.totalDepartmentHeads,color:"#3B82F6"},{name:r==="ru"?"Исполнители":"Ijrochilar",value:c.totalExecutors,color:"#10B981"}].filter(n=>n.value>0),m=te.slice(0,6).map(n=>({name:n.label.length>8?n.label.slice(0,8)+"...":n.label,fullName:n.label,completed:n.completed,pending:n.total-n.completed,rate:Math.round(n.completionRate)}));return{weeklyData:t,statusData:s,staffData:x,deptPerformance:m}},[p,c,te,r]),l=t=>({"director.title":{ru:"Обзор компании",uz:"Kompaniya sharhi"},"director.subtitle":{ru:"Ключевые показатели и статистика",uz:"Asosiy ko'rsatkichlar va statistika"},"director.refresh":{ru:"Обновить",uz:"Yangilash"},"director.requests":{ru:"Заявки",uz:"Arizalar"},"director.new":{ru:"Новые",uz:"Yangi"},"director.inProgress":{ru:"В работе",uz:"Jarayonda"},"director.completed":{ru:"Выполнено",uz:"Bajarildi"},"director.thisWeek":{ru:"за неделю",uz:"hafta uchun"},"director.staff":{ru:"Сотрудники",uz:"Xodimlar"},"director.online":{ru:"Онлайн",uz:"Onlayn"},"director.avgRating":{ru:"Средний рейтинг",uz:"O'rtacha reyting"},"director.buildings":{ru:"Здания",uz:"Binolar"},"director.residents":{ru:"Жители",uz:"Aholisi"},"director.meetings":{ru:"Собрания",uz:"Yig'ilishlar"},"director.active":{ru:"Активные",uz:"Faol"},"director.announcements":{ru:"Объявления",uz:"E'lonlar"},"director.byBuilding":{ru:"По зданиям",uz:"Binolar bo'yicha"},"director.byDepartment":{ru:"По отделам",uz:"Bo'limlar bo'yicha"},"director.topPerformers":{ru:"Лучшие сотрудники",uz:"Eng yaxshi xodimlar"},"director.completionRate":{ru:"Выполнение",uz:"Bajarish"},"director.pending":{ru:"Ожидает",uz:"Kutmoqda"},"director.viewAll":{ru:"Смотреть все",uz:"Hammasini ko'rish"},"director.recentRequests":{ru:"Последние заявки",uz:"So'nggi arizalar"},"director.staffList":{ru:"Список сотрудников",uz:"Xodimlar ro'yxati"},"director.buildingsList":{ru:"Список зданий",uz:"Binolar ro'yxati"},"director.activityDetails":{ru:"Активность",uz:"Faollik"},"director.overview":{ru:"Обзор",uz:"Umumiy"},"director.marketplace":{ru:"Маркетплейс",uz:"Marketplace"},"director.marketplaceReport":{ru:"Отчёт по маркетплейсу",uz:"Marketplace hisoboti"},"director.period":{ru:"Период",uz:"Davr"},"director.download":{ru:"Скачать Excel",uz:"Excel yuklab olish"},"director.totalOrders":{ru:"Всего заказов",uz:"Jami buyurtmalar"},"director.delivered":{ru:"Доставлено",uz:"Yetkazildi"},"director.cancelled":{ru:"Отменено",uz:"Bekor qilindi"},"director.revenue":{ru:"Выручка",uz:"Daromad"},"director.deliveryFees":{ru:"Доставка",uz:"Yetkazish"},"director.topProducts":{ru:"Топ товаров",uz:"Top mahsulotlar"},"director.sold":{ru:"Продано",uz:"Sotildi"},"director.orders":{ru:"Заказов",uz:"Buyurtmalar"},"director.byCategory":{ru:"По категориям",uz:"Kategoriyalar bo'yicha"},"director.salesChart":{ru:"Динамика продаж",uz:"Sotuvlar dinamikasi"},"director.topCustomers":{ru:"Топ покупателей",uz:"Top xaridorlar"},"director.spent":{ru:"Потрачено",uz:"Sarflangan"},"director.couriers":{ru:"Курьеры",uz:"Kuryerlar"},"director.deliveredCount":{ru:"Доставок",uz:"Yetkazishlar"},"director.noData":{ru:"Нет данных",uz:"Ma'lumot yo'q"},"director.loading":{ru:"Загрузка...",uz:"Yuklanmoqda..."}})[t]?.[r]||t,Ie=t=>{switch(t){case"new":return"bg-blue-100 text-blue-700";case"assigned":return"bg-yellow-100 text-yellow-700";case"in_progress":return"bg-orange-100 text-orange-700";case"completed":return"bg-green-100 text-green-700";case"pending_approval":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l("director.title")}),e.jsx("p",{className:"text-gray-500",children:l("director.subtitle")})]}),e.jsxs("button",{onClick:Ke,disabled:ye,className:"btn-secondary flex items-center gap-2",children:[e.jsx(Be,{className:`w-4 h-4 ${ye?"animate-spin":""}`}),l("director.refresh")]})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>we("overview"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${_==="overview"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(Ee,{className:"w-4 h-4 inline mr-2"}),l("director.overview")]}),e.jsxs("button",{onClick:()=>we("marketplace"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${_==="marketplace"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx($e,{className:"w-4 h-4 inline mr-2"}),l("director.marketplace")]})]}),_==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow active:scale-[0.98]",onClick:()=>y("requests"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(ne,{className:"w-8 h-8 text-blue-500"}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${c.newRequests>10?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:[c.newRequests," ",l("director.new")]})]}),e.jsx("div",{className:"text-2xl font-bold",children:c.totalRequests}),e.jsx("div",{className:"text-sm text-gray-500",children:l("director.requests")}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"text-yellow-600",children:[c.inProgress," ",l("director.inProgress")]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("span",{className:"text-green-600",children:[c.completedThisWeek," ",l("director.thisWeek")]})]})]}),e.jsxs("div",{className:"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow active:scale-[0.98]",onClick:()=>y("staff"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(X,{className:"w-8 h-8 text-purple-500"}),e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-green-100 text-green-700",children:[c.onlineExecutors," ",l("director.online")]})]}),e.jsx("div",{className:"text-2xl font-bold",children:c.totalStaff}),e.jsx("div",{className:"text-sm text-gray-500",children:l("director.staff")}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs flex-wrap",children:[e.jsxs("span",{className:"text-purple-600",children:[c.totalManagers," ",r==="ru"?"мен.":"men."]}),e.jsxs("span",{className:"text-blue-600",children:[c.totalDepartmentHeads," ",r==="ru"?"гл.":"bosh."]}),e.jsxs("span",{className:"text-green-600",children:[c.totalExecutors," ",r==="ru"?"исп.":"ijr."]})]})]}),e.jsxs("div",{className:"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow active:scale-[0.98]",onClick:()=>y("buildings"),children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(oe,{className:"w-8 h-8 text-teal-500"})}),e.jsx("div",{className:"text-2xl font-bold",children:c.totalBuildings}),e.jsx("div",{className:"text-sm text-gray-500",children:l("director.buildings")}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[c.totalResidents," ",l("director.residents")]})]}),e.jsxs("div",{className:"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow active:scale-[0.98]",onClick:()=>y("activity"),children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(Ee,{className:"w-8 h-8 text-orange-500"})}),e.jsxs("div",{className:"flex items-baseline gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.activeMeetings}),e.jsx("div",{className:"text-xs text-gray-500",children:l("director.meetings")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.activeAnnouncements}),e.jsx("div",{className:"text-xs text-gray-500",children:l("director.announcements")})]})]})]})]}),e.jsxs("div",{className:"glass-card p-5 bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:l("director.completionRate")}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[c.completionRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:c.completionRate>=80?e.jsx(de,{className:"w-8 h-8 text-green-500"}):c.completionRate>=50?e.jsx(Ze,{className:"w-8 h-8 text-yellow-500"}):e.jsx(Ve,{className:"w-8 h-8 text-red-500"})})]}),e.jsx("div",{className:"mt-3 w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${c.completionRate>=80?"bg-green-500":c.completionRate>=50?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.min(c.completionRate,100)}%`}})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5 text-blue-500"}),r==="ru"?"Динамика заявок за неделю":"Haftalik arizalar dinamikasi"]}),e.jsx(L,{width:"100%",height:240,children:e.jsxs(Te,{data:z.weeklyData,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorCreated",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorCompleted",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})]}),e.jsx(me,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(ue,{dataKey:"day",tick:{fontSize:12}}),e.jsx(he,{tick:{fontSize:12}}),e.jsx(T,{}),e.jsx(M,{}),e.jsx(G,{type:"monotone",dataKey:"created",stroke:"#3B82F6",strokeWidth:2,fill:"url(#colorCreated)",name:r==="ru"?"Создано":"Yaratilgan"}),e.jsx(G,{type:"monotone",dataKey:"completed",stroke:"#10B981",strokeWidth:2,fill:"url(#colorCompleted)",name:r==="ru"?"Выполнено":"Bajarilgan"})]})})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-purple-500"}),r==="ru"?"Статусы заявок":"Ariza holatlari"]}),e.jsx(L,{width:"100%",height:240,children:e.jsxs(ge,{children:[e.jsx(pe,{data:z.statusData,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,dataKey:"value",label:({name:t,percent:s})=>`${t} ${(s*100).toFixed(0)}%`,children:z.statusData.map((t,s)=>e.jsx(je,{fill:t.color},`cell-${s}`))}),e.jsx(T,{}),e.jsx(M,{})]})})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-green-500"}),r==="ru"?"Состав персонала":"Xodimlar tarkibi"]}),e.jsx(L,{width:"100%",height:240,children:e.jsxs(ge,{children:[e.jsx(pe,{data:z.staffData,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,dataKey:"value",label:({name:t,percent:s})=>`${t} ${(s*100).toFixed(0)}%`,children:z.staffData.map((t,s)=>e.jsx(je,{fill:t.color},`cell-${s}`))}),e.jsx(T,{}),e.jsx(M,{})]})})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-orange-500"}),r==="ru"?"Эффективность отделов":"Bo'limlar samaradorligi"]}),e.jsx(L,{width:"100%",height:240,children:e.jsxs(ct,{data:z.deptPerformance,children:[e.jsx(me,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(ue,{dataKey:"name",tick:{fontSize:10}}),e.jsx(he,{tick:{fontSize:12}}),e.jsx(T,{}),e.jsx(M,{}),e.jsx(Me,{dataKey:"completed",stackId:"a",fill:"#10B981",name:r==="ru"?"Выполнено":"Bajarildi"}),e.jsx(Me,{dataKey:"pending",stackId:"a",fill:"#F59E0B",name:r==="ru"?"В работе":"Jarayonda"})]})})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-teal-500"}),l("director.byBuilding")]}),e.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[ke.slice(0,10).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:t.address})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-2",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium",children:t.totalRequests}),e.jsx("div",{className:"text-xs text-gray-500",children:l("director.requests")})]}),e.jsxs("div",{className:`w-12 text-center text-xs font-medium px-2 py-1 rounded ${t.completionRate>=80?"bg-green-100 text-green-700":t.completionRate>=50?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[t.completionRate.toFixed(0),"%"]})]})]},t.id)),ke.length===0&&e.jsx("div",{className:"text-center text-gray-400 py-8",children:r==="ru"?"Нет данных":"Ma'lumot yo'q"})]})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-purple-500"}),l("director.byDepartment")]}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:te.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:t.label}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.executorCount," ",r==="ru"?"сотр.":"xod.",t.avgRating>0&&e.jsxs("span",{className:"ml-2 text-yellow-600",children:[e.jsx(F,{className:"w-3 h-3 inline"})," ",t.avgRating.toFixed(1)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-2",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[t.completed,"/",t.total]}),e.jsx("div",{className:"text-xs text-gray-500",children:l("director.completed")})]}),e.jsxs("div",{className:`w-12 text-center text-xs font-medium px-2 py-1 rounded ${t.completionRate>=80?"bg-green-100 text-green-700":t.completionRate>=50?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[t.completionRate.toFixed(0),"%"]})]})]},t.specialization))})]})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-yellow-500"}),l("director.topPerformers")]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:We.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${s===0?"bg-orange-500":s===1?"bg-gray-400":s===2?"bg-orange-400":"bg-gray-300"}`,children:s+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:t.name}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-yellow-600",children:[e.jsx(F,{className:"w-3 h-3"}),(t.rating||0).toFixed(1)]})]})]},t.id))})]}),c.pendingApproval>0&&e.jsx("div",{className:"glass-card p-4 border-2 border-orange-400 bg-orange-50 cursor-pointer hover:bg-orange-100 transition-colors",onClick:()=>C("/requests"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qe,{className:"w-6 h-6 text-yellow-600"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"font-medium text-yellow-800",children:[c.pendingApproval," ",r==="ru"?"заявок ожидают подтверждения":"arizalar tasdiqlanishni kutmoqda"]})}),e.jsx(et,{className:"w-5 h-5 text-yellow-600"})]})}),e.jsx(Z,{isOpen:K==="requests",onClose:()=>y(null),title:l("director.recentRequests"),children:e.jsxs("div",{className:"space-y-3",children:[Ue.map(t=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.title}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2 mt-1",children:[e.jsx(Fe,{className:"w-3 h-3"}),jt(t.address,t.apartment)]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1 flex items-center gap-2",children:[e.jsx(tt,{className:"w-3 h-3"}),new Date(t.createdAt).toLocaleDateString()]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Ie(t.status)}`,children:ft[t.status]})]}),t.executorName&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(X,{className:"w-3 h-3"}),t.executorName]})]},t.id)),e.jsxs("button",{onClick:()=>{y(null),C("/requests")},className:"w-full py-2 text-center text-blue-600 font-medium hover:bg-blue-50 rounded-xl",children:[l("director.viewAll")," →"]})]})}),e.jsx(Z,{isOpen:K==="staff",onClose:()=>y(null),title:l("director.staffList"),children:e.jsxs("div",{className:"space-y-4",children:[v&&v.managers.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm text-purple-700 mb-2 flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"}),r==="ru"?"Менеджеры":"Menejerlar"," (",v.managers.length,")"]}),e.jsx("div",{className:"space-y-2",children:v.managers.map(t=>e.jsxs("div",{className:"p-3 bg-purple-50 rounded-xl flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold bg-purple-500",children:t.name.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.phone})]}),e.jsx("div",{className:"text-xs text-purple-600 bg-purple-100 px-2 py-1 rounded",children:r==="ru"?"Менеджер":"Menejer"})]},t.id))})]}),v&&v.departmentHeads.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx(at,{className:"w-4 h-4"}),r==="ru"?"Главы отделов":"Bo'lim boshliklari"," (",v.departmentHeads.length,")"]}),e.jsx("div",{className:"space-y-2",children:v.departmentHeads.map(t=>e.jsxs("div",{className:"p-3 bg-blue-50 rounded-xl flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold bg-blue-500",children:t.name.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:ve[t.specialization]||t.specialization||""})]}),e.jsx("div",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:r==="ru"?"Глава":"Boshlik"})]},t.id))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm text-green-700 mb-2 flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),r==="ru"?"Исполнители":"Ijrochilar"," (",v?.executors.length||f.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(v?.executors||f).slice(0,10).map(t=>e.jsxs("div",{className:"p-3 bg-green-50 rounded-xl flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${t.status==="available"?"bg-green-500":t.status==="busy"?"bg-orange-500":"bg-gray-400"}`,children:t.name.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:ve[t.specialization]||t.specialization||""})]}),e.jsxs("div",{className:"text-right",children:[(t.avg_rating||t.rating)&&e.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[e.jsx(F,{className:"w-4 h-4"}),(t.avg_rating||t.rating||0).toFixed(1)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.completed_count||0," ",r==="ru"?"вып.":"baj."]})]})]},t.id))})]}),e.jsxs("button",{onClick:()=>{y(null),C("/team")},className:"w-full py-2 text-center text-blue-600 font-medium hover:bg-blue-50 rounded-xl",children:[l("director.viewAll")," →"]})]})}),e.jsx(Z,{isOpen:K==="buildings",onClose:()=>y(null),title:l("director.buildingsList"),children:e.jsxs("div",{className:"space-y-3",children:[H.slice(0,15).map(t=>e.jsx("div",{className:"p-3 bg-gray-50 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(oe,{className:"w-8 h-8 text-teal-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1 mt-1",children:[e.jsx(Fe,{className:"w-3 h-3"}),t.address]}),t.totalApartments&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[t.totalApartments," ",r==="ru"?"квартир":"xonadon"]})]})]})},t.id)),e.jsxs("button",{onClick:()=>{y(null),C("/buildings")},className:"w-full py-2 text-center text-blue-600 font-medium hover:bg-blue-50 rounded-xl",children:[l("director.viewAll")," →"]})]})}),e.jsx(Z,{isOpen:K==="activity",onClose:()=>y(null),title:l("director.activityDetails"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 mb-3",children:[e.jsx(lt,{className:"w-5 h-5 text-purple-500"}),l("director.meetings")," (",c.activeMeetings,")"]}),e.jsxs("div",{className:"space-y-2",children:[W.filter(t=>["schedule_poll_open","schedule_confirmed","voting_open"].includes(t.status)).slice(0,5).map(t=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"font-medium text-sm",children:["#",t.number]}),e.jsx("div",{className:"text-xs text-gray-500",children:t.buildingAddress}),e.jsx("div",{className:`text-xs mt-1 ${t.status==="voting_open"?"text-green-600":"text-blue-600"}`,children:t.status==="voting_open"?r==="ru"?"Голосование открыто":"Ovoz berish ochiq":t.status==="schedule_poll_open"?r==="ru"?"Опрос по дате":"Sana so'rovi":r==="ru"?"Дата подтверждена":"Sana tasdiqlandi"})]},t.id)),W.filter(t=>["schedule_poll_open","schedule_confirmed","voting_open"].includes(t.status)).length===0&&e.jsx("div",{className:"text-gray-400 text-sm text-center py-4",children:r==="ru"?"Нет активных собраний":"Faol yig'ilishlar yo'q"})]}),e.jsxs("button",{onClick:()=>{y(null),C("/meetings")},className:"w-full py-2 text-center text-blue-600 font-medium hover:bg-blue-50 rounded-xl mt-2",children:[l("director.viewAll")," →"]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2 mb-3",children:[e.jsx(rt,{className:"w-5 h-5 text-orange-500"}),l("director.announcements")," (",c.activeAnnouncements,")"]}),e.jsxs("div",{className:"space-y-2",children:[k.filter(t=>t.isActive).slice(0,5).map(t=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"font-medium text-sm",children:t.title}),e.jsx("div",{className:"text-xs text-gray-500 line-clamp-2 mt-1",children:t.content}),e.jsx("div",{className:`text-xs mt-1 px-2 py-0.5 rounded inline-block ${t.priority==="urgent"?"bg-red-100 text-red-700":t.priority==="important"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-600"}`,children:t.priority==="urgent"?r==="ru"?"Срочно":"Shoshilinch":t.priority==="important"?r==="ru"?"Важно":"Muhim":r==="ru"?"Обычный":"Oddiy"})]},t.id)),k.filter(t=>t.isActive).length===0&&e.jsx("div",{className:"text-gray-400 text-sm text-center py-4",children:r==="ru"?"Нет активных объявлений":"Faol e'lonlar yo'q"})]}),e.jsxs("button",{onClick:()=>{y(null),C("/announcements")},className:"w-full py-2 text-center text-blue-600 font-medium hover:bg-blue-50 rounded-xl mt-2",children:[l("director.viewAll")," →"]})]})]})})]}),_==="marketplace"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(it,{className:"w-5 h-5 text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[l("director.period"),":"]}),e.jsx("input",{type:"date",value:Y,onChange:t=>Oe(t.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm"}),e.jsx("span",{className:"text-gray-400",children:"—"}),e.jsx("input",{type:"date",value:I,onChange:t=>Pe(t.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("button",{onClick:Ye,disabled:!o||be,className:"btn-primary flex items-center gap-2",children:[e.jsx(nt,{className:"w-4 h-4"}),l("director.download")]})]})}),be?e.jsxs("div",{className:"flex items-center justify-center py-20",children:[e.jsx(Be,{className:"w-8 h-8 animate-spin text-orange-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:l("director.loading")})]}):o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"glass-card p-5",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx($e,{className:"w-8 h-8 text-blue-500"})}),e.jsx("div",{className:"text-2xl font-bold",children:o.overall.total_orders}),e.jsx("div",{className:"text-sm text-gray-500",children:l("director.totalOrders")}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("span",{className:"text-green-600",children:[o.overall.delivered_orders," ",l("director.delivered")]}),e.jsx("span",{className:"text-gray-400 mx-1",children:"|"}),e.jsxs("span",{className:"text-red-600",children:[o.overall.cancelled_orders," ",l("director.cancelled")]})]})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx(ot,{className:"w-8 h-8 text-green-500"})}),e.jsx("div",{className:"text-2xl font-bold",children:o.overall.total_revenue.toLocaleString()}),e.jsxs("div",{className:"text-sm text-gray-500",children:[l("director.revenue")," (сум)"]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[l("director.deliveryFees"),": ",o.overall.total_delivery_fees.toLocaleString()," сум"]})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx(F,{className:"w-8 h-8 text-yellow-500"})}),e.jsx("div",{className:"text-2xl font-bold",children:o.overall.avg_rating.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-500",children:l("director.avgRating")}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[o.overall.rated_orders," ",r==="ru"?"оценок":"baho"]})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx(xe,{className:"w-8 h-8 text-purple-500"})}),e.jsx("div",{className:"text-2xl font-bold",children:o.top_products.reduce((t,s)=>t+s.total_sold,0)}),e.jsxs("div",{className:"text-sm text-gray-500",children:[l("director.sold")," (шт)"]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[o.top_products.length," ",r==="ru"?"товаров":"mahsulot"]})]})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5 text-blue-500"}),l("director.salesChart")]}),e.jsx(L,{width:"100%",height:280,children:e.jsxs(Te,{data:o.daily_sales,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})}),e.jsx(me,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(ue,{dataKey:"date",tick:{fontSize:10},tickFormatter:t=>new Date(t).toLocaleDateString(r==="ru"?"ru-RU":"uz-UZ",{day:"numeric",month:"short"})}),e.jsx(he,{tick:{fontSize:12}}),e.jsx(T,{formatter:(t,s)=>[s==="revenue"?`${t.toLocaleString()} сум`:t,l(s==="revenue"?"director.revenue":"director.orders")],labelFormatter:t=>new Date(t).toLocaleDateString(r==="ru"?"ru-RU":"uz-UZ")}),e.jsx(M,{}),e.jsx(G,{type:"monotone",dataKey:"revenue",stroke:"#10B981",strokeWidth:2,fill:"url(#colorRevenue)",name:l("director.revenue")}),e.jsx(G,{type:"monotone",dataKey:"orders",stroke:"#3B82F6",strokeWidth:2,fill:"none",name:l("director.orders")})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-purple-500"}),l("director.topProducts")]}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[o.top_products.slice(0,10).map((t,s)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center font-bold text-purple-600",children:s+1}),t.image_url?e.jsx("img",{src:t.image_url,alt:"",className:"w-10 h-10 object-cover rounded-lg"}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(xe,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:t.product_name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.total_sold," шт • ",t.order_count," ",l("director.orders")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-sm text-green-600",children:t.total_revenue.toLocaleString()}),e.jsx("div",{className:"text-xs text-gray-400",children:"сум"})]})]},t.product_id)),o.top_products.length===0&&e.jsx("div",{className:"text-center text-gray-400 py-8",children:l("director.noData")})]})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-orange-500"}),l("director.byCategory")]}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[o.categories.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:t.category_name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.total_sold," шт • ",t.order_count," ",l("director.orders")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-sm text-green-600",children:t.total_revenue.toLocaleString()}),e.jsx("div",{className:"text-xs text-gray-400",children:"сум"})]})]},t.category_name)),o.categories.length===0&&e.jsx("div",{className:"text-center text-gray-400 py-8",children:l("director.noData")})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-blue-500"}),l("director.topCustomers")]}),e.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[o.top_customers.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center font-bold text-blue-600",children:s+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:t.user_name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.user_phone})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-sm",children:[t.order_count," ",l("director.orders")]}),e.jsxs("div",{className:"text-xs text-green-600",children:[t.total_spent.toLocaleString()," сум"]})]})]},t.user_id)),o.top_customers.length===0&&e.jsx("div",{className:"text-center text-gray-400 py-8",children:l("director.noData")})]})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-green-500"}),l("director.couriers")]}),e.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[o.executor_stats.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold",children:t.executor_name.charAt(0)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:t.executor_name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.delivered_count," ",l("director.deliveredCount")]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:t.avg_rating.toFixed(1)})]})]},t.executor_id)),o.executor_stats.length===0&&e.jsx("div",{className:"text-center text-gray-400 py-8",children:l("director.noData")})]})]})]}),e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-purple-500"}),r==="ru"?"Заказы по статусам":"Buyurtmalar holati"]}),e.jsx(L,{width:"100%",height:240,children:e.jsxs(ge,{children:[e.jsx(pe,{data:o.orders_by_status.map(t=>({name:{new:r==="ru"?"Новые":"Yangi",confirmed:r==="ru"?"Подтверждённые":"Tasdiqlangan",preparing:r==="ru"?"Готовятся":"Tayyorlanmoqda",ready:r==="ru"?"Готовы":"Tayyor",delivering:r==="ru"?"В доставке":"Yetkazilmoqda",delivered:r==="ru"?"Доставлены":"Yetkazildi",cancelled:r==="ru"?"Отменены":"Bekor qilindi"}[t.status]||t.status,value:t.count,color:{new:"#3B82F6",confirmed:"#8B5CF6",preparing:"#F59E0B",ready:"#06B6D4",delivering:"#F97316",delivered:"#10B981",cancelled:"#EF4444"}[t.status]||"#9CA3AF"})),cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,dataKey:"value",label:({name:t,percent:s})=>`${t} ${(s*100).toFixed(0)}%`,children:o.orders_by_status.map((t,s)=>e.jsx(je,{fill:{new:"#3B82F6",confirmed:"#8B5CF6",preparing:"#F59E0B",ready:"#06B6D4",delivering:"#F97316",delivered:"#10B981",cancelled:"#EF4444"}[t.status]||"#9CA3AF"},`cell-${s}`))}),e.jsx(T,{}),e.jsx(M,{})]})})]})]}):e.jsx("div",{className:"text-center text-gray-400 py-20",children:l("director.noData")})]})]})}export{Dt as DirectorDashboard};
//# sourceMappingURL=DirectorDashboard-1770493083576-5qiZ-PAw.js.map
