{"version":3,"file":"DirectorDashboard-1769968761754-DvRftcHt.js","sources":["../../src/pages/DirectorDashboard.tsx"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react';\r\nimport {\r\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend,\r\n  ResponsiveContainer, PieChart, Pie, Cell, AreaChart, Area\r\n} from '../components/LazyCharts';\r\nimport {\r\n  Building2, Users, FileText, TrendingUp, TrendingDown, Minus,\r\n  AlertTriangle, Briefcase, Star, Activity, ArrowRight, RefreshCw,\r\n  X, Clock, MapPin, Megaphone, Vote, Shield, UserCheck, Wrench,\r\n  ShoppingBag, Download, Calendar, Package, DollarSign\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useDataStore } from '../stores/dataStore';\r\nimport { useCRMStore } from '../stores/crmStore';\r\nimport { useMeetingStore } from '../stores/meetingStore';\r\nimport { useLanguageStore } from '../stores/languageStore';\r\nimport { formatAddress } from '../utils/formatAddress';\r\nimport { SPECIALIZATION_LABELS } from '../types';\r\nimport { teamApi, apiRequest } from '../services/api';\r\nimport ExcelJS from 'exceljs';\r\n\r\nconst REQUEST_STATUS_LABELS: Record<string, string> = {\r\n  new: 'Новая',\r\n  assigned: 'Назначена',\r\n  accepted: 'Принята',\r\n  in_progress: 'В работе',\r\n  pending_approval: 'На проверке',\r\n  completed: 'Выполнена',\r\n  cancelled: 'Отменена',\r\n};\r\n\r\n// Modal component for details\r\nfunction DetailModal({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  children\r\n}: {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: React.ReactNode;\r\n}) {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50\" onClick={onClose}>\r\n      <div\r\n        className=\"bg-white rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden shadow-xl\"\r\n        onClick={e => e.stopPropagation()}\r\n      >\r\n        <div className=\"flex items-center justify-between p-4 border-b\">\r\n          <h3 className=\"text-lg font-semibold\">{title}</h3>\r\n          <button onClick={onClose} className=\"p-1 hover:bg-gray-100 rounded-full\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n        <div className=\"p-4 overflow-y-auto max-h-[60vh]\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface TeamMember {\r\n  id: string;\r\n  name: string;\r\n  phone: string;\r\n  role: 'manager' | 'department_head' | 'executor';\r\n  specialization?: string;\r\n  status?: string;\r\n  completed_count?: number;\r\n  active_count?: number;\r\n  avg_rating?: number;\r\n}\r\n\r\ninterface TeamData {\r\n  managers: TeamMember[];\r\n  departmentHeads: TeamMember[];\r\n  executors: TeamMember[];\r\n  total: number;\r\n}\r\n\r\ninterface MarketplaceReport {\r\n  period: { start_date: string; end_date: string };\r\n  overall: {\r\n    total_orders: number;\r\n    delivered_orders: number;\r\n    cancelled_orders: number;\r\n    total_revenue: number;\r\n    total_delivery_fees: number;\r\n    avg_rating: number;\r\n    rated_orders: number;\r\n  };\r\n  top_products: Array<{\r\n    product_id: string;\r\n    product_name: string;\r\n    image_url: string;\r\n    total_sold: number;\r\n    total_revenue: number;\r\n    order_count: number;\r\n  }>;\r\n  categories: Array<{\r\n    category_name: string;\r\n    total_sold: number;\r\n    total_revenue: number;\r\n    order_count: number;\r\n  }>;\r\n  daily_sales: Array<{\r\n    date: string;\r\n    orders: number;\r\n    revenue: number;\r\n  }>;\r\n  orders_by_status: Array<{\r\n    status: string;\r\n    count: number;\r\n  }>;\r\n  top_customers: Array<{\r\n    user_id: string;\r\n    user_name: string;\r\n    user_phone: string;\r\n    order_count: number;\r\n    total_spent: number;\r\n  }>;\r\n  executor_stats: Array<{\r\n    executor_id: string;\r\n    executor_name: string;\r\n    delivered_count: number;\r\n    avg_rating: number;\r\n  }>;\r\n}\r\n\r\ntype TabType = 'overview' | 'marketplace';\r\n\r\nexport function DirectorDashboard() {\r\n  const navigate = useNavigate();\r\n  const { requests, executors, announcements, fetchRequests, fetchExecutors } = useDataStore();\r\n  const { buildings, residents, fetchBuildings } = useCRMStore();\r\n  const { meetings, fetchMeetings } = useMeetingStore();\r\n  const { language } = useLanguageStore();\r\n\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [activeModal, setActiveModal] = useState<'requests' | 'staff' | 'buildings' | 'activity' | null>(null);\r\n  const [teamData, setTeamData] = useState<TeamData | null>(null);\r\n  const [activeTab, setActiveTab] = useState<TabType>('overview');\r\n  const [marketplaceReport, setMarketplaceReport] = useState<MarketplaceReport | null>(null);\r\n  const [isLoadingReport, setIsLoadingReport] = useState(false);\r\n  const [reportStartDate, setReportStartDate] = useState(() => {\r\n    const d = new Date();\r\n    d.setDate(d.getDate() - 30);\r\n    return d.toISOString().slice(0, 10);\r\n  });\r\n  const [reportEndDate, setReportEndDate] = useState(() => new Date().toISOString().slice(0, 10));\r\n\r\n  // Load data on mount\r\n  useEffect(() => {\r\n    fetchRequests();\r\n    fetchExecutors();\r\n    fetchBuildings();\r\n    fetchMeetings();\r\n    loadTeamData();\r\n  }, [fetchRequests, fetchExecutors, fetchBuildings, fetchMeetings]);\r\n\r\n  // Load marketplace report when tab changes or dates change\r\n  useEffect(() => {\r\n    if (activeTab === 'marketplace') {\r\n      loadMarketplaceReport();\r\n    }\r\n  }, [activeTab, reportStartDate, reportEndDate]);\r\n\r\n  const loadMarketplaceReport = async () => {\r\n    setIsLoadingReport(true);\r\n    try {\r\n      const data = await apiRequest<MarketplaceReport>(\r\n        `/api/marketplace/admin/reports?start_date=${reportStartDate}&end_date=${reportEndDate}`\r\n      );\r\n      setMarketplaceReport(data);\r\n    } catch (err) {\r\n      console.error('Failed to load marketplace report:', err);\r\n    } finally {\r\n      setIsLoadingReport(false);\r\n    }\r\n  };\r\n\r\n  const loadTeamData = async () => {\r\n    try {\r\n      const data = await teamApi.getAll();\r\n      // Add total count to match TeamData interface\r\n      const totalCount = (data.managers?.length || 0) + (data.departmentHeads?.length || 0) + (data.executors?.length || 0);\r\n      setTeamData({\r\n        ...data,\r\n        total: totalCount,\r\n      });\r\n    } catch (err) {\r\n      console.error('Failed to load team data:', err);\r\n    }\r\n  };\r\n\r\n  // Calculate company-wide statistics\r\n  const companyStats = useMemo(() => {\r\n    const now = new Date();\r\n    const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n    const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\r\n\r\n    // Request stats\r\n    const totalRequests = requests.length;\r\n    const newRequests = requests.filter(r => r.status === 'new').length;\r\n    const inProgress = requests.filter(r => ['assigned', 'accepted', 'in_progress'].includes(r.status)).length;\r\n    const completedTotal = requests.filter(r => r.status === 'completed').length;\r\n    const completedThisWeek = requests.filter(r => {\r\n      if (r.status !== 'completed') return false;\r\n      const completedAt = r.completedAt ? new Date(r.completedAt) : null;\r\n      return completedAt && completedAt >= weekAgo;\r\n    }).length;\r\n    const completedThisMonth = requests.filter(r => {\r\n      if (r.status !== 'completed') return false;\r\n      const completedAt = r.completedAt ? new Date(r.completedAt) : null;\r\n      return completedAt && completedAt >= monthAgo;\r\n    }).length;\r\n    const pendingApproval = requests.filter(r => r.status === 'pending_approval').length;\r\n\r\n    // Calculate completion rate\r\n    const completionRate = totalRequests > 0 ? (completedTotal / totalRequests * 100) : 0;\r\n\r\n    // Team stats from teamApi\r\n    const totalManagers = teamData?.managers.length || 0;\r\n    const totalDepartmentHeads = teamData?.departmentHeads.length || 0;\r\n    const totalExecutorsFromTeam = teamData?.executors.length || executors.length;\r\n    const totalStaff = (teamData?.total || 0) || (totalManagers + totalDepartmentHeads + totalExecutorsFromTeam);\r\n\r\n    const onlineExecutors = executors.filter(e => e.status !== 'offline').length;\r\n    const avgRating = executors.length > 0\r\n      ? executors.reduce((sum, e) => sum + (e.rating || 0), 0) / executors.length\r\n      : 0;\r\n\r\n    // Building stats\r\n    const totalBuildings = buildings.length;\r\n    const totalResidents = residents.length;\r\n\r\n    // Active meetings\r\n    const activeMeetings = meetings.filter(m =>\r\n      ['schedule_poll_open', 'schedule_confirmed', 'voting_open'].includes(m.status)\r\n    ).length;\r\n\r\n    // Active announcements\r\n    const activeAnnouncements = announcements.filter(a => a.isActive).length;\r\n\r\n    return {\r\n      totalRequests,\r\n      newRequests,\r\n      inProgress,\r\n      completedTotal,\r\n      completedThisWeek,\r\n      completedThisMonth,\r\n      pendingApproval,\r\n      completionRate,\r\n      totalStaff,\r\n      totalManagers,\r\n      totalDepartmentHeads,\r\n      totalExecutors: totalExecutorsFromTeam,\r\n      onlineExecutors,\r\n      avgRating,\r\n      totalBuildings,\r\n      totalResidents,\r\n      activeMeetings,\r\n      activeAnnouncements,\r\n    };\r\n  }, [requests, executors, buildings, residents, meetings, announcements, teamData]);\r\n\r\n  // Recent requests for modal\r\n  const recentRequests = useMemo(() => {\r\n    return [...requests]\r\n      .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\r\n      .slice(0, 10);\r\n  }, [requests]);\r\n\r\n  // Stats by building\r\n  const buildingStats = useMemo(() => {\r\n    return buildings.map(building => {\r\n      const buildingRequests = requests.filter(r => {\r\n        // Check building_id directly (returned from API via resident's building_id)\r\n        if ((r as any).building_id === building.id || (r as any).buildingId === building.id) return true;\r\n        // Fallback: check by building name match in address\r\n        if (r.address) {\r\n          const addr = r.address.toLowerCase();\r\n          const bName = building.name.toLowerCase();\r\n          const buildingNum = bName.replace(/дом\\s*/i, '').trim().toLowerCase();\r\n          if (buildingNum && addr.includes(buildingNum + '-')) return true;\r\n          if (buildingNum && addr.includes(buildingNum + ' ')) return true;\r\n        }\r\n        return false;\r\n      });\r\n      const completed = buildingRequests.filter(r => r.status === 'completed').length;\r\n      const pending = buildingRequests.filter(r => r.status === 'new').length;\r\n      const inProgress = buildingRequests.filter(r => ['assigned', 'accepted', 'in_progress'].includes(r.status)).length;\r\n\r\n      return {\r\n        id: building.id,\r\n        name: building.name,\r\n        address: building.address,\r\n        totalRequests: buildingRequests.length,\r\n        completed,\r\n        pending,\r\n        inProgress,\r\n        completionRate: buildingRequests.length > 0 ? (completed / buildingRequests.length * 100) : 0,\r\n      };\r\n    }).sort((a, b) => b.totalRequests - a.totalRequests);\r\n  }, [buildings, requests]);\r\n\r\n  // Stats by specialization (department)\r\n  const departmentStats = useMemo(() => {\r\n    const specs = new Map<string, { total: number; completed: number; avgRating: number; executorCount: number }>();\r\n\r\n    executors.forEach(executor => {\r\n      const spec = executor.specialization || 'other';\r\n      if (!specs.has(spec)) {\r\n        specs.set(spec, { total: 0, completed: 0, avgRating: 0, executorCount: 0 });\r\n      }\r\n      const data = specs.get(spec)!;\r\n      data.executorCount++;\r\n      data.avgRating = (data.avgRating * (data.executorCount - 1) + (executor.rating || 0)) / data.executorCount;\r\n    });\r\n\r\n    requests.forEach(req => {\r\n      const spec = req.category || 'other';\r\n      if (!specs.has(spec)) {\r\n        specs.set(spec, { total: 0, completed: 0, avgRating: 0, executorCount: 0 });\r\n      }\r\n      const data = specs.get(spec)!;\r\n      data.total++;\r\n      if (req.status === 'completed') {\r\n        data.completed++;\r\n      }\r\n    });\r\n\r\n    return Array.from(specs.entries())\r\n      .map(([spec, data]) => ({\r\n        specialization: spec,\r\n        label: SPECIALIZATION_LABELS[spec as keyof typeof SPECIALIZATION_LABELS] || spec,\r\n        ...data,\r\n        completionRate: data.total > 0 ? (data.completed / data.total * 100) : 0,\r\n      }))\r\n      .sort((a, b) => b.total - a.total);\r\n  }, [executors, requests]);\r\n\r\n  // Top performers\r\n  const topExecutors = useMemo(() => {\r\n    return [...executors]\r\n      .sort((a, b) => (b.rating || 0) - (a.rating || 0))\r\n      .slice(0, 5);\r\n  }, [executors]);\r\n\r\n  const handleRefresh = async () => {\r\n    setIsRefreshing(true);\r\n    await Promise.all([\r\n      fetchRequests(),\r\n      fetchExecutors(),\r\n      fetchBuildings(),\r\n      fetchMeetings(),\r\n      loadTeamData(),\r\n      activeTab === 'marketplace' ? loadMarketplaceReport() : Promise.resolve(),\r\n    ]);\r\n    setIsRefreshing(false);\r\n  };\r\n\r\n  const exportMarketplaceReport = async () => {\r\n    if (!marketplaceReport) return;\r\n\r\n    const workbook = new ExcelJS.Workbook();\r\n    workbook.creator = 'Kamizo';\r\n    workbook.created = new Date();\r\n\r\n    const formatCurrency = (value: number) => `${value.toLocaleString('ru-RU')} сум`;\r\n\r\n    // Common styles\r\n    const headerStyle: Partial<ExcelJS.Style> = {\r\n      font: { bold: true, size: 11 },\r\n      alignment: { horizontal: 'center', vertical: 'middle' },\r\n      fill: { type: 'pattern', pattern: 'solid', fgColor: { argb: 'FFE0E0E0' } },\r\n      border: {\r\n        top: { style: 'thin' },\r\n        bottom: { style: 'thin' },\r\n        left: { style: 'thin' },\r\n        right: { style: 'thin' },\r\n      },\r\n    };\r\n    const cellStyle: Partial<ExcelJS.Style> = {\r\n      alignment: { horizontal: 'left', vertical: 'middle' },\r\n      border: {\r\n        top: { style: 'thin' },\r\n        bottom: { style: 'thin' },\r\n        left: { style: 'thin' },\r\n        right: { style: 'thin' },\r\n      },\r\n    };\r\n    const centerStyle: Partial<ExcelJS.Style> = {\r\n      alignment: { horizontal: 'center', vertical: 'middle' },\r\n      border: {\r\n        top: { style: 'thin' },\r\n        bottom: { style: 'thin' },\r\n        left: { style: 'thin' },\r\n        right: { style: 'thin' },\r\n      },\r\n    };\r\n    const currencyStyle: Partial<ExcelJS.Style> = {\r\n      alignment: { horizontal: 'right', vertical: 'middle' },\r\n      border: {\r\n        top: { style: 'thin' },\r\n        bottom: { style: 'thin' },\r\n        left: { style: 'thin' },\r\n        right: { style: 'thin' },\r\n      },\r\n    };\r\n\r\n    // ============ Sheet 1: Summary ============\r\n    const ws1 = workbook.addWorksheet('Сводный отчёт');\r\n    ws1.columns = [\r\n      { width: 25 }, { width: 35 }, { width: 18 }, { width: 22 }, { width: 15 }\r\n    ];\r\n\r\n    // Title - merged and centered\r\n    const titleRow = ws1.addRow(['ОТЧЁТ ПО МАРКЕТПЛЕЙСУ']);\r\n    ws1.mergeCells(`A${titleRow.number}:E${titleRow.number}`);\r\n    titleRow.getCell(1).style = { font: { bold: true, size: 16 }, alignment: { horizontal: 'center' } };\r\n    ws1.addRow([]);\r\n    ws1.addRow(['Период:', `${marketplaceReport.period.start_date} — ${marketplaceReport.period.end_date}`]);\r\n    ws1.addRow(['Дата формирования:', new Date().toLocaleDateString('ru-RU')]);\r\n    ws1.addRow([]);\r\n\r\n    // Overall Stats Section\r\n    const statsTitle = ws1.addRow(['ОБЩАЯ СТАТИСТИКА']);\r\n    ws1.mergeCells(`A${statsTitle.number}:E${statsTitle.number}`);\r\n    statsTitle.getCell(1).style = { font: { bold: true, size: 12 }, alignment: { horizontal: 'center' } };\r\n    ws1.addRow([]);\r\n    const statsHeader = ws1.addRow(['Показатель', 'Значение']);\r\n    statsHeader.eachCell((cell) => { cell.style = headerStyle; });\r\n\r\n    const statsData = [\r\n      ['Всего заказов', marketplaceReport.overall.total_orders],\r\n      ['Доставлено заказов', marketplaceReport.overall.delivered_orders],\r\n      ['Отменено заказов', marketplaceReport.overall.cancelled_orders],\r\n      ['Общая выручка', formatCurrency(marketplaceReport.overall.total_revenue)],\r\n      ['Доход от доставки', formatCurrency(marketplaceReport.overall.total_delivery_fees)],\r\n      ['Средний рейтинг', `${marketplaceReport.overall.avg_rating.toFixed(1)} ⭐`],\r\n      ['Количество оценок', marketplaceReport.overall.rated_orders],\r\n    ];\r\n    statsData.forEach(row => {\r\n      const r = ws1.addRow(row);\r\n      r.getCell(1).style = cellStyle;\r\n      r.getCell(2).style = centerStyle;\r\n    });\r\n\r\n    ws1.addRow([]);\r\n    ws1.addRow([]);\r\n\r\n    // Top Products Section\r\n    const prodTitle = ws1.addRow(['ТОП-10 ТОВАРОВ ПО ПРОДАЖАМ']);\r\n    ws1.mergeCells(`A${prodTitle.number}:E${prodTitle.number}`);\r\n    prodTitle.getCell(1).style = { font: { bold: true, size: 12 }, alignment: { horizontal: 'center' } };\r\n    ws1.addRow([]);\r\n    const prodHeader = ws1.addRow(['№', 'Название товара', 'Продано (шт)', 'Выручка', 'Заказов']);\r\n    prodHeader.eachCell((cell) => { cell.style = headerStyle; });\r\n\r\n    marketplaceReport.top_products.forEach((p, i) => {\r\n      const r = ws1.addRow([i + 1, p.product_name, p.total_sold, formatCurrency(p.total_revenue), p.order_count]);\r\n      r.getCell(1).style = centerStyle;\r\n      r.getCell(2).style = cellStyle;\r\n      r.getCell(3).style = centerStyle;\r\n      r.getCell(4).style = currencyStyle;\r\n      r.getCell(5).style = centerStyle;\r\n    });\r\n\r\n    ws1.addRow([]);\r\n    ws1.addRow([]);\r\n\r\n    // Categories Section\r\n    const catTitle = ws1.addRow(['ПРОДАЖИ ПО КАТЕГОРИЯМ']);\r\n    ws1.mergeCells(`A${catTitle.number}:E${catTitle.number}`);\r\n    catTitle.getCell(1).style = { font: { bold: true, size: 12 }, alignment: { horizontal: 'center' } };\r\n    ws1.addRow([]);\r\n    const catHeader = ws1.addRow(['№', 'Категория', 'Продано (шт)', 'Выручка', 'Заказов']);\r\n    catHeader.eachCell((cell) => { cell.style = headerStyle; });\r\n\r\n    marketplaceReport.categories.forEach((c, i) => {\r\n      const r = ws1.addRow([i + 1, c.category_name, c.total_sold, formatCurrency(c.total_revenue), c.order_count]);\r\n      r.getCell(1).style = centerStyle;\r\n      r.getCell(2).style = cellStyle;\r\n      r.getCell(3).style = centerStyle;\r\n      r.getCell(4).style = currencyStyle;\r\n      r.getCell(5).style = centerStyle;\r\n    });\r\n\r\n    ws1.addRow([]);\r\n    ws1.addRow([]);\r\n\r\n    // Couriers Stats Section on Summary sheet\r\n    const courSummaryTitle = ws1.addRow(['СТАТИСТИКА КУРЬЕРОВ']);\r\n    ws1.mergeCells(`A${courSummaryTitle.number}:E${courSummaryTitle.number}`);\r\n    courSummaryTitle.getCell(1).style = { font: { bold: true, size: 12 }, alignment: { horizontal: 'center' } };\r\n    ws1.addRow([]);\r\n    const courSummaryHeader = ws1.addRow(['№', 'Имя курьера', 'Доставлено заказов', 'Средний рейтинг']);\r\n    courSummaryHeader.eachCell((cell) => { cell.style = headerStyle; });\r\n\r\n    marketplaceReport.executor_stats.forEach((e, i) => {\r\n      const r = ws1.addRow([i + 1, e.executor_name, e.delivered_count, `${e.avg_rating.toFixed(1)} ⭐`]);\r\n      r.getCell(1).style = centerStyle;\r\n      r.getCell(2).style = cellStyle;\r\n      r.getCell(3).style = centerStyle;\r\n      r.getCell(4).style = centerStyle;\r\n    });\r\n\r\n    ws1.addRow([]);\r\n    ws1.addRow([]);\r\n\r\n    // Top Customers Section on Summary sheet\r\n    const custSummaryTitle = ws1.addRow(['ТОП-10 ПОКУПАТЕЛЕЙ']);\r\n    ws1.mergeCells(`A${custSummaryTitle.number}:E${custSummaryTitle.number}`);\r\n    custSummaryTitle.getCell(1).style = { font: { bold: true, size: 12 }, alignment: { horizontal: 'center' } };\r\n    ws1.addRow([]);\r\n    const custSummaryHeader = ws1.addRow(['№', 'Имя клиента', 'Телефон', 'Заказов', 'Сумма покупок']);\r\n    custSummaryHeader.eachCell((cell) => { cell.style = headerStyle; });\r\n\r\n    marketplaceReport.top_customers.forEach((c, i) => {\r\n      const r = ws1.addRow([i + 1, c.user_name, c.user_phone, c.order_count, formatCurrency(c.total_spent)]);\r\n      r.getCell(1).style = centerStyle;\r\n      r.getCell(2).style = cellStyle;\r\n      r.getCell(3).style = cellStyle;\r\n      r.getCell(4).style = centerStyle;\r\n      r.getCell(5).style = currencyStyle;\r\n    });\r\n\r\n    // ============ Sheet 2: Daily Sales ============\r\n    const ws2 = workbook.addWorksheet('По дням');\r\n    ws2.columns = [{ width: 18 }, { width: 22 }, { width: 25 }];\r\n\r\n    const dailyTitle = ws2.addRow(['ПРОДАЖИ ПО ДНЯМ']);\r\n    ws2.mergeCells(`A${dailyTitle.number}:C${dailyTitle.number}`);\r\n    dailyTitle.getCell(1).style = { font: { bold: true, size: 14 }, alignment: { horizontal: 'center' } };\r\n    ws2.addRow([]);\r\n    const dailyHeader = ws2.addRow(['Дата', 'Количество заказов', 'Выручка']);\r\n    dailyHeader.eachCell((cell) => { cell.style = headerStyle; });\r\n\r\n    marketplaceReport.daily_sales.forEach(d => {\r\n      const r = ws2.addRow([d.date, d.orders, formatCurrency(d.revenue)]);\r\n      r.getCell(1).style = centerStyle;\r\n      r.getCell(2).style = centerStyle;\r\n      r.getCell(3).style = currencyStyle;\r\n    });\r\n\r\n    ws2.addRow([]);\r\n    const totalRow = ws2.addRow([\r\n      'ИТОГО:',\r\n      marketplaceReport.daily_sales.reduce((sum, d) => sum + d.orders, 0),\r\n      formatCurrency(marketplaceReport.daily_sales.reduce((sum, d) => sum + d.revenue, 0))\r\n    ]);\r\n    totalRow.getCell(1).style = { ...cellStyle, font: { bold: true } };\r\n    totalRow.getCell(2).style = { ...centerStyle, font: { bold: true } };\r\n    totalRow.getCell(3).style = { ...currencyStyle, font: { bold: true } };\r\n\r\n    // ============ Sheet 3: Products ============\r\n    const ws3 = workbook.addWorksheet('Товары');\r\n    ws3.columns = [{ width: 6 }, { width: 45 }, { width: 16 }, { width: 22 }, { width: 12 }];\r\n\r\n    const prodListTitle = ws3.addRow(['ДЕТАЛЬНЫЙ ОТЧЁТ ПО ТОВАРАМ']);\r\n    ws3.mergeCells(`A${prodListTitle.number}:E${prodListTitle.number}`);\r\n    prodListTitle.getCell(1).style = { font: { bold: true, size: 14 }, alignment: { horizontal: 'center' } };\r\n    ws3.addRow([]);\r\n    const prodListHeader = ws3.addRow(['№', 'Название товара', 'Продано (шт)', 'Выручка', 'Заказов']);\r\n    prodListHeader.eachCell((cell) => { cell.style = headerStyle; });\r\n\r\n    marketplaceReport.top_products.forEach((p, i) => {\r\n      const r = ws3.addRow([i + 1, p.product_name, p.total_sold, formatCurrency(p.total_revenue), p.order_count]);\r\n      r.getCell(1).style = centerStyle;\r\n      r.getCell(2).style = cellStyle;\r\n      r.getCell(3).style = centerStyle;\r\n      r.getCell(4).style = currencyStyle;\r\n      r.getCell(5).style = centerStyle;\r\n    });\r\n\r\n    // ============ Sheet 4: Customers ============\r\n    const ws4 = workbook.addWorksheet('Покупатели');\r\n    ws4.columns = [{ width: 6 }, { width: 30 }, { width: 18 }, { width: 20 }, { width: 25 }];\r\n\r\n    const custTitle = ws4.addRow(['ДЕТАЛЬНЫЙ ОТЧЁТ ПО ПОКУПАТЕЛЯМ']);\r\n    ws4.mergeCells(`A${custTitle.number}:E${custTitle.number}`);\r\n    custTitle.getCell(1).style = { font: { bold: true, size: 14 }, alignment: { horizontal: 'center' } };\r\n    ws4.addRow([]);\r\n    const custHeader = ws4.addRow(['№', 'Имя клиента', 'Телефон', 'Количество заказов', 'Сумма покупок']);\r\n    custHeader.eachCell((cell) => { cell.style = headerStyle; });\r\n\r\n    marketplaceReport.top_customers.forEach((c, i) => {\r\n      const r = ws4.addRow([i + 1, c.user_name, c.user_phone, c.order_count, formatCurrency(c.total_spent)]);\r\n      r.getCell(1).style = centerStyle;\r\n      r.getCell(2).style = cellStyle;\r\n      r.getCell(3).style = centerStyle;\r\n      r.getCell(4).style = centerStyle;\r\n      r.getCell(5).style = currencyStyle;\r\n    });\r\n\r\n    // ============ Sheet 5: Couriers ============\r\n    const ws5 = workbook.addWorksheet('Курьеры');\r\n    ws5.columns = [{ width: 6 }, { width: 30 }, { width: 22 }, { width: 18 }];\r\n\r\n    const courTitle = ws5.addRow(['ОТЧЁТ ПО КУРЬЕРАМ']);\r\n    ws5.mergeCells(`A${courTitle.number}:D${courTitle.number}`);\r\n    courTitle.getCell(1).style = { font: { bold: true, size: 14 }, alignment: { horizontal: 'center' } };\r\n    ws5.addRow([]);\r\n    const courHeader = ws5.addRow(['№', 'Имя курьера', 'Доставлено заказов', 'Средний рейтинг']);\r\n    courHeader.eachCell((cell) => { cell.style = headerStyle; });\r\n\r\n    marketplaceReport.executor_stats.forEach((e, i) => {\r\n      const r = ws5.addRow([i + 1, e.executor_name, e.delivered_count, `${e.avg_rating.toFixed(1)} ⭐`]);\r\n      r.getCell(1).style = centerStyle;\r\n      r.getCell(2).style = cellStyle;\r\n      r.getCell(3).style = centerStyle;\r\n      r.getCell(4).style = centerStyle;\r\n    });\r\n\r\n    // Generate and download file\r\n    const buffer = await workbook.xlsx.writeBuffer();\r\n    const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `Отчёт_маркетплейс_${reportStartDate}_${reportEndDate}.xlsx`;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  // Data for charts\r\n  const chartData = useMemo(() => {\r\n    // Weekly request trends (last 7 days)\r\n    const weeklyData = [];\r\n    for (let i = 6; i >= 0; i--) {\r\n      const date = new Date();\r\n      date.setDate(date.getDate() - i);\r\n      const dateStr = date.toISOString().split('T')[0];\r\n      const dayName = date.toLocaleDateString(language === 'ru' ? 'ru-RU' : 'uz-UZ', { weekday: 'short' });\r\n\r\n      const created = requests.filter(r => r.createdAt.startsWith(dateStr)).length;\r\n      const completed = requests.filter(r => r.completedAt?.startsWith(dateStr)).length;\r\n\r\n      weeklyData.push({ day: dayName, created, completed });\r\n    }\r\n\r\n    // Request status distribution\r\n    const statusData = [\r\n      { name: language === 'ru' ? 'Новые' : 'Yangi', value: companyStats.newRequests, color: '#3B82F6' },\r\n      { name: language === 'ru' ? 'В работе' : 'Jarayonda', value: companyStats.inProgress, color: '#F59E0B' },\r\n      { name: language === 'ru' ? 'На проверке' : 'Tekshiruvda', value: companyStats.pendingApproval, color: '#8B5CF6' },\r\n      { name: language === 'ru' ? 'Выполнено' : 'Bajarildi', value: companyStats.completedTotal, color: '#10B981' },\r\n    ].filter(d => d.value > 0);\r\n\r\n    // Staff distribution by role\r\n    const staffData = [\r\n      { name: language === 'ru' ? 'Менеджеры' : 'Menejerlar', value: companyStats.totalManagers, color: '#8B5CF6' },\r\n      { name: language === 'ru' ? 'Главы отделов' : 'Bo\\'lim boshliklari', value: companyStats.totalDepartmentHeads, color: '#3B82F6' },\r\n      { name: language === 'ru' ? 'Исполнители' : 'Ijrochilar', value: companyStats.totalExecutors, color: '#10B981' },\r\n    ].filter(d => d.value > 0);\r\n\r\n    // Department performance\r\n    const deptPerformance = departmentStats.slice(0, 6).map(d => ({\r\n      name: d.label.length > 8 ? d.label.slice(0, 8) + '...' : d.label,\r\n      fullName: d.label,\r\n      completed: d.completed,\r\n      pending: d.total - d.completed,\r\n      rate: Math.round(d.completionRate),\r\n    }));\r\n\r\n    return { weeklyData, statusData, staffData, deptPerformance };\r\n  }, [requests, companyStats, departmentStats, language]);\r\n\r\n  const t = (key: string) => {\r\n    const translations: Record<string, Record<string, string>> = {\r\n      'director.title': { ru: 'Обзор компании', uz: 'Kompaniya sharhi' },\r\n      'director.subtitle': { ru: 'Ключевые показатели и статистика', uz: 'Asosiy ko\\'rsatkichlar va statistika' },\r\n      'director.refresh': { ru: 'Обновить', uz: 'Yangilash' },\r\n      'director.requests': { ru: 'Заявки', uz: 'Arizalar' },\r\n      'director.new': { ru: 'Новые', uz: 'Yangi' },\r\n      'director.inProgress': { ru: 'В работе', uz: 'Jarayonda' },\r\n      'director.completed': { ru: 'Выполнено', uz: 'Bajarildi' },\r\n      'director.thisWeek': { ru: 'за неделю', uz: 'hafta uchun' },\r\n      'director.staff': { ru: 'Сотрудники', uz: 'Xodimlar' },\r\n      'director.online': { ru: 'Онлайн', uz: 'Onlayn' },\r\n      'director.avgRating': { ru: 'Средний рейтинг', uz: 'O\\'rtacha reyting' },\r\n      'director.buildings': { ru: 'Здания', uz: 'Binolar' },\r\n      'director.residents': { ru: 'Жители', uz: 'Aholisi' },\r\n      'director.meetings': { ru: 'Собрания', uz: 'Yig\\'ilishlar' },\r\n      'director.active': { ru: 'Активные', uz: 'Faol' },\r\n      'director.announcements': { ru: 'Объявления', uz: 'E\\'lonlar' },\r\n      'director.byBuilding': { ru: 'По зданиям', uz: 'Binolar bo\\'yicha' },\r\n      'director.byDepartment': { ru: 'По отделам', uz: 'Bo\\'limlar bo\\'yicha' },\r\n      'director.topPerformers': { ru: 'Лучшие сотрудники', uz: 'Eng yaxshi xodimlar' },\r\n      'director.completionRate': { ru: 'Выполнение', uz: 'Bajarish' },\r\n      'director.pending': { ru: 'Ожидает', uz: 'Kutmoqda' },\r\n      'director.viewAll': { ru: 'Смотреть все', uz: 'Hammasini ko\\'rish' },\r\n      'director.recentRequests': { ru: 'Последние заявки', uz: 'So\\'nggi arizalar' },\r\n      'director.staffList': { ru: 'Список сотрудников', uz: 'Xodimlar ro\\'yxati' },\r\n      'director.buildingsList': { ru: 'Список зданий', uz: 'Binolar ro\\'yxati' },\r\n      'director.activityDetails': { ru: 'Активность', uz: 'Faollik' },\r\n      // Marketplace translations\r\n      'director.overview': { ru: 'Обзор', uz: 'Umumiy' },\r\n      'director.marketplace': { ru: 'Маркетплейс', uz: 'Marketplace' },\r\n      'director.marketplaceReport': { ru: 'Отчёт по маркетплейсу', uz: 'Marketplace hisoboti' },\r\n      'director.period': { ru: 'Период', uz: 'Davr' },\r\n      'director.download': { ru: 'Скачать Excel', uz: 'Excel yuklab olish' },\r\n      'director.totalOrders': { ru: 'Всего заказов', uz: 'Jami buyurtmalar' },\r\n      'director.delivered': { ru: 'Доставлено', uz: 'Yetkazildi' },\r\n      'director.cancelled': { ru: 'Отменено', uz: 'Bekor qilindi' },\r\n      'director.revenue': { ru: 'Выручка', uz: 'Daromad' },\r\n      'director.deliveryFees': { ru: 'Доставка', uz: 'Yetkazish' },\r\n      'director.topProducts': { ru: 'Топ товаров', uz: 'Top mahsulotlar' },\r\n      'director.sold': { ru: 'Продано', uz: 'Sotildi' },\r\n      'director.orders': { ru: 'Заказов', uz: 'Buyurtmalar' },\r\n      'director.byCategory': { ru: 'По категориям', uz: 'Kategoriyalar bo\\'yicha' },\r\n      'director.salesChart': { ru: 'Динамика продаж', uz: 'Sotuvlar dinamikasi' },\r\n      'director.topCustomers': { ru: 'Топ покупателей', uz: 'Top xaridorlar' },\r\n      'director.spent': { ru: 'Потрачено', uz: 'Sarflangan' },\r\n      'director.couriers': { ru: 'Курьеры', uz: 'Kuryerlar' },\r\n      'director.deliveredCount': { ru: 'Доставок', uz: 'Yetkazishlar' },\r\n      'director.noData': { ru: 'Нет данных', uz: 'Ma\\'lumot yo\\'q' },\r\n      'director.loading': { ru: 'Загрузка...', uz: 'Yuklanmoqda...' },\r\n    };\r\n    return translations[key]?.[language] || key;\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'new': return 'bg-blue-100 text-blue-700';\r\n      case 'assigned': return 'bg-yellow-100 text-yellow-700';\r\n      case 'in_progress': return 'bg-orange-100 text-orange-700';\r\n      case 'completed': return 'bg-green-100 text-green-700';\r\n      case 'pending_approval': return 'bg-purple-100 text-purple-700';\r\n      default: return 'bg-gray-100 text-gray-700';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">{t('director.title')}</h1>\r\n          <p className=\"text-gray-500\">{t('director.subtitle')}</p>\r\n        </div>\r\n        <button\r\n          onClick={handleRefresh}\r\n          disabled={isRefreshing}\r\n          className=\"btn-secondary flex items-center gap-2\"\r\n        >\r\n          <RefreshCw className={`w-4 h-4 ${isRefreshing ? 'animate-spin' : ''}`} />\r\n          {t('director.refresh')}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex gap-2 border-b border-gray-200\">\r\n        <button\r\n          onClick={() => setActiveTab('overview')}\r\n          className={`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${\r\n            activeTab === 'overview'\r\n              ? 'border-orange-500 text-orange-600'\r\n              : 'border-transparent text-gray-500 hover:text-gray-700'\r\n          }`}\r\n        >\r\n          <Activity className=\"w-4 h-4 inline mr-2\" />\r\n          {t('director.overview')}\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('marketplace')}\r\n          className={`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${\r\n            activeTab === 'marketplace'\r\n              ? 'border-orange-500 text-orange-600'\r\n              : 'border-transparent text-gray-500 hover:text-gray-700'\r\n          }`}\r\n        >\r\n          <ShoppingBag className=\"w-4 h-4 inline mr-2\" />\r\n          {t('director.marketplace')}\r\n        </button>\r\n      </div>\r\n\r\n      {activeTab === 'overview' && (\r\n        <>\r\n      {/* Main Stats - Clickable Cards */}\r\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        {/* Requests - Clickable */}\r\n        <div\r\n          className=\"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow active:scale-[0.98]\"\r\n          onClick={() => setActiveModal('requests')}\r\n        >\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <FileText className=\"w-8 h-8 text-blue-500\" />\r\n            <span className={`text-xs px-2 py-1 rounded-full ${\r\n              companyStats.newRequests > 10 ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'\r\n            }`}>\r\n              {companyStats.newRequests} {t('director.new')}\r\n            </span>\r\n          </div>\r\n          <div className=\"text-2xl font-bold\">{companyStats.totalRequests}</div>\r\n          <div className=\"text-sm text-gray-500\">{t('director.requests')}</div>\r\n          <div className=\"mt-2 flex items-center gap-2 text-xs\">\r\n            <span className=\"text-yellow-600\">{companyStats.inProgress} {t('director.inProgress')}</span>\r\n            <span className=\"text-gray-400\">|</span>\r\n            <span className=\"text-green-600\">{companyStats.completedThisWeek} {t('director.thisWeek')}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Staff - Clickable */}\r\n        <div\r\n          className=\"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow active:scale-[0.98]\"\r\n          onClick={() => setActiveModal('staff')}\r\n        >\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <Users className=\"w-8 h-8 text-purple-500\" />\r\n            <span className=\"text-xs px-2 py-1 rounded-full bg-green-100 text-green-700\">\r\n              {companyStats.onlineExecutors} {t('director.online')}\r\n            </span>\r\n          </div>\r\n          <div className=\"text-2xl font-bold\">{companyStats.totalStaff}</div>\r\n          <div className=\"text-sm text-gray-500\">{t('director.staff')}</div>\r\n          <div className=\"mt-2 flex items-center gap-2 text-xs flex-wrap\">\r\n            <span className=\"text-purple-600\">{companyStats.totalManagers} {language === 'ru' ? 'мен.' : 'men.'}</span>\r\n            <span className=\"text-blue-600\">{companyStats.totalDepartmentHeads} {language === 'ru' ? 'гл.' : 'bosh.'}</span>\r\n            <span className=\"text-green-600\">{companyStats.totalExecutors} {language === 'ru' ? 'исп.' : 'ijr.'}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Buildings - Clickable */}\r\n        <div\r\n          className=\"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow active:scale-[0.98]\"\r\n          onClick={() => setActiveModal('buildings')}\r\n        >\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <Building2 className=\"w-8 h-8 text-teal-500\" />\r\n          </div>\r\n          <div className=\"text-2xl font-bold\">{companyStats.totalBuildings}</div>\r\n          <div className=\"text-sm text-gray-500\">{t('director.buildings')}</div>\r\n          <div className=\"mt-2 text-xs text-gray-600\">\r\n            {companyStats.totalResidents} {t('director.residents')}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Meetings & Announcements - Clickable */}\r\n        <div\r\n          className=\"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow active:scale-[0.98]\"\r\n          onClick={() => setActiveModal('activity')}\r\n        >\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <Activity className=\"w-8 h-8 text-orange-500\" />\r\n          </div>\r\n          <div className=\"flex items-baseline gap-4\">\r\n            <div>\r\n              <div className=\"text-2xl font-bold\">{companyStats.activeMeetings}</div>\r\n              <div className=\"text-xs text-gray-500\">{t('director.meetings')}</div>\r\n            </div>\r\n            <div>\r\n              <div className=\"text-2xl font-bold\">{companyStats.activeAnnouncements}</div>\r\n              <div className=\"text-xs text-gray-500\">{t('director.announcements')}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Completion Rate Banner */}\r\n      <div className=\"glass-card p-5 bg-gradient-to-r from-blue-50 to-purple-50\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <div className=\"text-sm text-gray-600 mb-1\">{t('director.completionRate')}</div>\r\n            <div className=\"text-3xl font-bold text-gray-900\">{companyStats.completionRate.toFixed(1)}%</div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            {companyStats.completionRate >= 80 ? (\r\n              <TrendingUp className=\"w-8 h-8 text-green-500\" />\r\n            ) : companyStats.completionRate >= 50 ? (\r\n              <Minus className=\"w-8 h-8 text-yellow-500\" />\r\n            ) : (\r\n              <TrendingDown className=\"w-8 h-8 text-red-500\" />\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-3 w-full bg-gray-200 rounded-full h-3\">\r\n          <div\r\n            className={`h-3 rounded-full ${\r\n              companyStats.completionRate >= 80 ? 'bg-green-500' :\r\n              companyStats.completionRate >= 50 ? 'bg-orange-500' : 'bg-red-500'\r\n            }`}\r\n            style={{ width: `${Math.min(companyStats.completionRate, 100)}%` }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Charts Section */}\r\n      <div className=\"grid lg:grid-cols-2 gap-6\">\r\n        {/* Weekly Trends Chart */}\r\n        <div className=\"glass-card p-5\">\r\n          <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n            <TrendingUp className=\"w-5 h-5 text-blue-500\" />\r\n            {language === 'ru' ? 'Динамика заявок за неделю' : 'Haftalik arizalar dinamikasi'}\r\n          </h3>\r\n          <ResponsiveContainer width=\"100%\" height={240}>\r\n            <AreaChart data={chartData.weeklyData}>\r\n              <defs>\r\n                <linearGradient id=\"colorCreated\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                  <stop offset=\"5%\" stopColor=\"#3B82F6\" stopOpacity={0.3}/>\r\n                  <stop offset=\"95%\" stopColor=\"#3B82F6\" stopOpacity={0}/>\r\n                </linearGradient>\r\n                <linearGradient id=\"colorCompleted\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                  <stop offset=\"5%\" stopColor=\"#10B981\" stopOpacity={0.3}/>\r\n                  <stop offset=\"95%\" stopColor=\"#10B981\" stopOpacity={0}/>\r\n                </linearGradient>\r\n              </defs>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\r\n              <XAxis dataKey=\"day\" tick={{ fontSize: 12 }} />\r\n              <YAxis tick={{ fontSize: 12 }} />\r\n              <Tooltip />\r\n              <Legend />\r\n              <Area\r\n                type=\"monotone\"\r\n                dataKey=\"created\"\r\n                stroke=\"#3B82F6\"\r\n                strokeWidth={2}\r\n                fill=\"url(#colorCreated)\"\r\n                name={language === 'ru' ? 'Создано' : 'Yaratilgan'}\r\n              />\r\n              <Area\r\n                type=\"monotone\"\r\n                dataKey=\"completed\"\r\n                stroke=\"#10B981\"\r\n                strokeWidth={2}\r\n                fill=\"url(#colorCompleted)\"\r\n                name={language === 'ru' ? 'Выполнено' : 'Bajarilgan'}\r\n              />\r\n            </AreaChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n\r\n        {/* Request Status Distribution */}\r\n        <div className=\"glass-card p-5\">\r\n          <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n            <FileText className=\"w-5 h-5 text-purple-500\" />\r\n            {language === 'ru' ? 'Статусы заявок' : 'Ariza holatlari'}\r\n          </h3>\r\n          <ResponsiveContainer width=\"100%\" height={240}>\r\n            <PieChart>\r\n              <Pie\r\n                data={chartData.statusData}\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                labelLine={false}\r\n                outerRadius={80}\r\n                dataKey=\"value\"\r\n                label={({ name, percent }: { name: string; percent: number }) => `${name} ${(percent * 100).toFixed(0)}%`}\r\n              >\r\n                {chartData.statusData.map((entry, index) => (\r\n                  <Cell key={`cell-${index}`} fill={entry.color} />\r\n                ))}\r\n              </Pie>\r\n              <Tooltip />\r\n              <Legend />\r\n            </PieChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Second row of charts */}\r\n      <div className=\"grid lg:grid-cols-2 gap-6\">\r\n        {/* Staff Distribution */}\r\n        <div className=\"glass-card p-5\">\r\n          <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n            <Users className=\"w-5 h-5 text-green-500\" />\r\n            {language === 'ru' ? 'Состав персонала' : 'Xodimlar tarkibi'}\r\n          </h3>\r\n          <ResponsiveContainer width=\"100%\" height={240}>\r\n            <PieChart>\r\n              <Pie\r\n                data={chartData.staffData}\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                labelLine={false}\r\n                outerRadius={80}\r\n                dataKey=\"value\"\r\n                label={({ name, percent }: { name: string; percent: number }) => `${name} ${(percent * 100).toFixed(0)}%`}\r\n              >\r\n                {chartData.staffData.map((entry, index) => (\r\n                  <Cell key={`cell-${index}`} fill={entry.color} />\r\n                ))}\r\n              </Pie>\r\n              <Tooltip />\r\n              <Legend />\r\n            </PieChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n\r\n        {/* Department Performance */}\r\n        <div className=\"glass-card p-5\">\r\n          <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n            <Briefcase className=\"w-5 h-5 text-orange-500\" />\r\n            {language === 'ru' ? 'Эффективность отделов' : 'Bo\\'limlar samaradorligi'}\r\n          </h3>\r\n          <ResponsiveContainer width=\"100%\" height={240}>\r\n            <BarChart data={chartData.deptPerformance}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\r\n              <XAxis dataKey=\"name\" tick={{ fontSize: 10 }} />\r\n              <YAxis tick={{ fontSize: 12 }} />\r\n              <Tooltip />\r\n              <Legend />\r\n              <Bar\r\n                dataKey=\"completed\"\r\n                stackId=\"a\"\r\n                fill=\"#10B981\"\r\n                name={language === 'ru' ? 'Выполнено' : 'Bajarildi'}\r\n              />\r\n              <Bar\r\n                dataKey=\"pending\"\r\n                stackId=\"a\"\r\n                fill=\"#F59E0B\"\r\n                name={language === 'ru' ? 'В работе' : 'Jarayonda'}\r\n              />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Two Column Layout */}\r\n      <div className=\"grid lg:grid-cols-2 gap-6\">\r\n        {/* Stats by Building */}\r\n        <div className=\"glass-card p-5\">\r\n          <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n            <Building2 className=\"w-5 h-5 text-teal-500\" />\r\n            {t('director.byBuilding')}\r\n          </h3>\r\n          <div className=\"space-y-3 max-h-80 overflow-y-auto\">\r\n            {buildingStats.slice(0, 10).map((building) => (\r\n              <div key={building.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-xl\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"font-medium text-sm truncate\">{building.name}</div>\r\n                  <div className=\"text-xs text-gray-500 truncate\">{building.address}</div>\r\n                </div>\r\n                <div className=\"flex items-center gap-3 ml-2\">\r\n                  <div className=\"text-right\">\r\n                    <div className=\"text-sm font-medium\">{building.totalRequests}</div>\r\n                    <div className=\"text-xs text-gray-500\">{t('director.requests')}</div>\r\n                  </div>\r\n                  <div className={`w-12 text-center text-xs font-medium px-2 py-1 rounded ${\r\n                    building.completionRate >= 80 ? 'bg-green-100 text-green-700' :\r\n                    building.completionRate >= 50 ? 'bg-yellow-100 text-yellow-700' :\r\n                    'bg-red-100 text-red-700'\r\n                  }`}>\r\n                    {building.completionRate.toFixed(0)}%\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n            {buildingStats.length === 0 && (\r\n              <div className=\"text-center text-gray-400 py-8\">\r\n                {language === 'ru' ? 'Нет данных' : 'Ma\\'lumot yo\\'q'}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats by Department */}\r\n        <div className=\"glass-card p-5\">\r\n          <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n            <Briefcase className=\"w-5 h-5 text-purple-500\" />\r\n            {t('director.byDepartment')}\r\n          </h3>\r\n          <div className=\"space-y-3 max-h-80 overflow-y-auto\">\r\n            {departmentStats.map((dept) => (\r\n              <div key={dept.specialization} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-xl\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"font-medium text-sm\">{dept.label}</div>\r\n                  <div className=\"text-xs text-gray-500\">\r\n                    {dept.executorCount} {language === 'ru' ? 'сотр.' : 'xod.'}\r\n                    {dept.avgRating > 0 && (\r\n                      <span className=\"ml-2 text-yellow-600\">\r\n                        <Star className=\"w-3 h-3 inline\" /> {dept.avgRating.toFixed(1)}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-3 ml-2\">\r\n                  <div className=\"text-right\">\r\n                    <div className=\"text-sm font-medium\">{dept.completed}/{dept.total}</div>\r\n                    <div className=\"text-xs text-gray-500\">{t('director.completed')}</div>\r\n                  </div>\r\n                  <div className={`w-12 text-center text-xs font-medium px-2 py-1 rounded ${\r\n                    dept.completionRate >= 80 ? 'bg-green-100 text-green-700' :\r\n                    dept.completionRate >= 50 ? 'bg-yellow-100 text-yellow-700' :\r\n                    'bg-red-100 text-red-700'\r\n                  }`}>\r\n                    {dept.completionRate.toFixed(0)}%\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Top Performers */}\r\n      <div className=\"glass-card p-5\">\r\n        <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n          <Star className=\"w-5 h-5 text-yellow-500\" />\r\n          {t('director.topPerformers')}\r\n        </h3>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4\">\r\n          {topExecutors.map((executor, index) => (\r\n            <div key={executor.id} className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-xl\">\r\n              <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${\r\n                index === 0 ? 'bg-orange-500' :\r\n                index === 1 ? 'bg-gray-400' :\r\n                index === 2 ? 'bg-orange-400' :\r\n                'bg-gray-300'\r\n              }`}>\r\n                {index + 1}\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"font-medium text-sm truncate\">{executor.name}</div>\r\n                <div className=\"flex items-center gap-1 text-xs text-yellow-600\">\r\n                  <Star className=\"w-3 h-3\" />\r\n                  {(executor.rating || 0).toFixed(1)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Alerts */}\r\n      {companyStats.pendingApproval > 0 && (\r\n        <div\r\n          className=\"glass-card p-4 border-2 border-orange-400 bg-orange-50 cursor-pointer hover:bg-orange-100 transition-colors\"\r\n          onClick={() => navigate('/requests')}\r\n        >\r\n          <div className=\"flex items-center gap-3\">\r\n            <AlertTriangle className=\"w-6 h-6 text-yellow-600\" />\r\n            <div className=\"flex-1\">\r\n              <div className=\"font-medium text-yellow-800\">\r\n                {companyStats.pendingApproval} {language === 'ru' ? 'заявок ожидают подтверждения' : 'arizalar tasdiqlanishni kutmoqda'}\r\n              </div>\r\n            </div>\r\n            <ArrowRight className=\"w-5 h-5 text-yellow-600\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Requests Modal */}\r\n      <DetailModal\r\n        isOpen={activeModal === 'requests'}\r\n        onClose={() => setActiveModal(null)}\r\n        title={t('director.recentRequests')}\r\n      >\r\n        <div className=\"space-y-3\">\r\n          {recentRequests.map(req => (\r\n            <div key={req.id} className=\"p-3 bg-gray-50 rounded-xl\">\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"font-medium\">{req.title}</div>\r\n                  <div className=\"text-sm text-gray-500 flex items-center gap-2 mt-1\">\r\n                    <MapPin className=\"w-3 h-3\" />\r\n                    {formatAddress(req.address, req.apartment)}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-400 mt-1 flex items-center gap-2\">\r\n                    <Clock className=\"w-3 h-3\" />\r\n                    {new Date(req.createdAt).toLocaleDateString()}\r\n                  </div>\r\n                </div>\r\n                <span className={`text-xs px-2 py-1 rounded-full ${getStatusColor(req.status)}`}>\r\n                  {REQUEST_STATUS_LABELS[req.status]}\r\n                </span>\r\n              </div>\r\n              {req.executorName && (\r\n                <div className=\"mt-2 text-sm text-gray-600 flex items-center gap-2\">\r\n                  <Users className=\"w-3 h-3\" />\r\n                  {req.executorName}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n          <button\r\n            onClick={() => { setActiveModal(null); navigate('/requests'); }}\r\n            className=\"w-full py-2 text-center text-blue-600 font-medium hover:bg-blue-50 rounded-xl\"\r\n          >\r\n            {t('director.viewAll')} →\r\n          </button>\r\n        </div>\r\n      </DetailModal>\r\n\r\n      {/* Staff Modal */}\r\n      <DetailModal\r\n        isOpen={activeModal === 'staff'}\r\n        onClose={() => setActiveModal(null)}\r\n        title={t('director.staffList')}\r\n      >\r\n        <div className=\"space-y-4\">\r\n          {/* Managers */}\r\n          {teamData && teamData.managers.length > 0 && (\r\n            <div>\r\n              <h4 className=\"font-medium text-sm text-purple-700 mb-2 flex items-center gap-2\">\r\n                <Shield className=\"w-4 h-4\" />\r\n                {language === 'ru' ? 'Менеджеры' : 'Menejerlar'} ({teamData.managers.length})\r\n              </h4>\r\n              <div className=\"space-y-2\">\r\n                {teamData.managers.map(member => (\r\n                  <div key={member.id} className=\"p-3 bg-purple-50 rounded-xl flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold bg-purple-500\">\r\n                      {member.name.charAt(0)}\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"font-medium\">{member.name}</div>\r\n                      <div className=\"text-sm text-gray-500\">{member.phone}</div>\r\n                    </div>\r\n                    <div className=\"text-xs text-purple-600 bg-purple-100 px-2 py-1 rounded\">\r\n                      {language === 'ru' ? 'Менеджер' : 'Menejer'}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Department Heads */}\r\n          {teamData && teamData.departmentHeads.length > 0 && (\r\n            <div>\r\n              <h4 className=\"font-medium text-sm text-blue-700 mb-2 flex items-center gap-2\">\r\n                <UserCheck className=\"w-4 h-4\" />\r\n                {language === 'ru' ? 'Главы отделов' : 'Bo\\'lim boshliklari'} ({teamData.departmentHeads.length})\r\n              </h4>\r\n              <div className=\"space-y-2\">\r\n                {teamData.departmentHeads.map(member => (\r\n                  <div key={member.id} className=\"p-3 bg-blue-50 rounded-xl flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold bg-blue-500\">\r\n                      {member.name.charAt(0)}\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"font-medium\">{member.name}</div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {SPECIALIZATION_LABELS[member.specialization as keyof typeof SPECIALIZATION_LABELS] || member.specialization || ''}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded\">\r\n                      {language === 'ru' ? 'Глава' : 'Boshlik'}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Executors */}\r\n          <div>\r\n            <h4 className=\"font-medium text-sm text-green-700 mb-2 flex items-center gap-2\">\r\n              <Wrench className=\"w-4 h-4\" />\r\n              {language === 'ru' ? 'Исполнители' : 'Ijrochilar'} ({teamData?.executors.length || executors.length})\r\n            </h4>\r\n            <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n              {(teamData?.executors || executors).slice(0, 10).map((member: any) => (\r\n                <div key={member.id} className=\"p-3 bg-green-50 rounded-xl flex items-center gap-3\">\r\n                  <div className={`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${\r\n                    member.status === 'available' ? 'bg-green-500' :\r\n                    member.status === 'busy' ? 'bg-orange-500' : 'bg-gray-400'\r\n                  }`}>\r\n                    {member.name.charAt(0)}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium\">{member.name}</div>\r\n                    <div className=\"text-sm text-gray-500\">\r\n                      {SPECIALIZATION_LABELS[member.specialization as keyof typeof SPECIALIZATION_LABELS] || member.specialization || ''}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    {(member.avg_rating || member.rating) && (\r\n                      <div className=\"flex items-center gap-1 text-yellow-600\">\r\n                        <Star className=\"w-4 h-4\" />\r\n                        {(member.avg_rating || member.rating || 0).toFixed(1)}\r\n                      </div>\r\n                    )}\r\n                    <div className=\"text-xs text-gray-500\">\r\n                      {member.completed_count || 0} {language === 'ru' ? 'вып.' : 'baj.'}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={() => { setActiveModal(null); navigate('/team'); }}\r\n            className=\"w-full py-2 text-center text-blue-600 font-medium hover:bg-blue-50 rounded-xl\"\r\n          >\r\n            {t('director.viewAll')} →\r\n          </button>\r\n        </div>\r\n      </DetailModal>\r\n\r\n      {/* Buildings Modal */}\r\n      <DetailModal\r\n        isOpen={activeModal === 'buildings'}\r\n        onClose={() => setActiveModal(null)}\r\n        title={t('director.buildingsList')}\r\n      >\r\n        <div className=\"space-y-3\">\r\n          {buildings.slice(0, 15).map(building => (\r\n            <div key={building.id} className=\"p-3 bg-gray-50 rounded-xl\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <Building2 className=\"w-8 h-8 text-teal-500 flex-shrink-0\" />\r\n                <div className=\"flex-1\">\r\n                  <div className=\"font-medium\">{building.name}</div>\r\n                  <div className=\"text-sm text-gray-500 flex items-center gap-1 mt-1\">\r\n                    <MapPin className=\"w-3 h-3\" />\r\n                    {building.address}\r\n                  </div>\r\n                  {building.totalApartments && (\r\n                    <div className=\"text-xs text-gray-400 mt-1\">\r\n                      {building.totalApartments} {language === 'ru' ? 'квартир' : 'xonadon'}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          <button\r\n            onClick={() => { setActiveModal(null); navigate('/buildings'); }}\r\n            className=\"w-full py-2 text-center text-blue-600 font-medium hover:bg-blue-50 rounded-xl\"\r\n          >\r\n            {t('director.viewAll')} →\r\n          </button>\r\n        </div>\r\n      </DetailModal>\r\n\r\n      {/* Activity Modal */}\r\n      <DetailModal\r\n        isOpen={activeModal === 'activity'}\r\n        onClose={() => setActiveModal(null)}\r\n        title={t('director.activityDetails')}\r\n      >\r\n        <div className=\"space-y-4\">\r\n          {/* Meetings section */}\r\n          <div>\r\n            <h4 className=\"font-medium flex items-center gap-2 mb-3\">\r\n              <Vote className=\"w-5 h-5 text-purple-500\" />\r\n              {t('director.meetings')} ({companyStats.activeMeetings})\r\n            </h4>\r\n            <div className=\"space-y-2\">\r\n              {meetings.filter(m => ['schedule_poll_open', 'schedule_confirmed', 'voting_open'].includes(m.status)).slice(0, 5).map(meeting => (\r\n                <div key={meeting.id} className=\"p-3 bg-gray-50 rounded-xl\">\r\n                  <div className=\"font-medium text-sm\">#{meeting.number}</div>\r\n                  <div className=\"text-xs text-gray-500\">{meeting.buildingAddress}</div>\r\n                  <div className={`text-xs mt-1 ${\r\n                    meeting.status === 'voting_open' ? 'text-green-600' : 'text-blue-600'\r\n                  }`}>\r\n                    {meeting.status === 'voting_open' ? (language === 'ru' ? 'Голосование открыто' : 'Ovoz berish ochiq') :\r\n                     meeting.status === 'schedule_poll_open' ? (language === 'ru' ? 'Опрос по дате' : 'Sana so\\'rovi') :\r\n                     (language === 'ru' ? 'Дата подтверждена' : 'Sana tasdiqlandi')}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              {meetings.filter(m => ['schedule_poll_open', 'schedule_confirmed', 'voting_open'].includes(m.status)).length === 0 && (\r\n                <div className=\"text-gray-400 text-sm text-center py-4\">\r\n                  {language === 'ru' ? 'Нет активных собраний' : 'Faol yig\\'ilishlar yo\\'q'}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <button\r\n              onClick={() => { setActiveModal(null); navigate('/meetings'); }}\r\n              className=\"w-full py-2 text-center text-blue-600 font-medium hover:bg-blue-50 rounded-xl mt-2\"\r\n            >\r\n              {t('director.viewAll')} →\r\n            </button>\r\n          </div>\r\n\r\n          {/* Announcements section */}\r\n          <div>\r\n            <h4 className=\"font-medium flex items-center gap-2 mb-3\">\r\n              <Megaphone className=\"w-5 h-5 text-orange-500\" />\r\n              {t('director.announcements')} ({companyStats.activeAnnouncements})\r\n            </h4>\r\n            <div className=\"space-y-2\">\r\n              {announcements.filter(a => a.isActive).slice(0, 5).map(announcement => (\r\n                <div key={announcement.id} className=\"p-3 bg-gray-50 rounded-xl\">\r\n                  <div className=\"font-medium text-sm\">{announcement.title}</div>\r\n                  <div className=\"text-xs text-gray-500 line-clamp-2 mt-1\">{announcement.content}</div>\r\n                  <div className={`text-xs mt-1 px-2 py-0.5 rounded inline-block ${\r\n                    announcement.priority === 'urgent' ? 'bg-red-100 text-red-700' :\r\n                    announcement.priority === 'important' ? 'bg-orange-100 text-orange-700' :\r\n                    'bg-gray-100 text-gray-600'\r\n                  }`}>\r\n                    {announcement.priority === 'urgent' ? (language === 'ru' ? 'Срочно' : 'Shoshilinch') :\r\n                     announcement.priority === 'important' ? (language === 'ru' ? 'Важно' : 'Muhim') :\r\n                     (language === 'ru' ? 'Обычный' : 'Oddiy')}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              {announcements.filter(a => a.isActive).length === 0 && (\r\n                <div className=\"text-gray-400 text-sm text-center py-4\">\r\n                  {language === 'ru' ? 'Нет активных объявлений' : 'Faol e\\'lonlar yo\\'q'}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <button\r\n              onClick={() => { setActiveModal(null); navigate('/announcements'); }}\r\n              className=\"w-full py-2 text-center text-blue-600 font-medium hover:bg-blue-50 rounded-xl mt-2\"\r\n            >\r\n              {t('director.viewAll')} →\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </DetailModal>\r\n        </>\r\n      )}\r\n\r\n      {/* Marketplace Tab */}\r\n      {activeTab === 'marketplace' && (\r\n        <div className=\"space-y-6\">\r\n          {/* Period selector and download button */}\r\n          <div className=\"glass-card p-4\">\r\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\r\n              <div className=\"flex items-center gap-2 flex-wrap\">\r\n                <Calendar className=\"w-5 h-5 text-gray-500\" />\r\n                <span className=\"text-sm text-gray-600\">{t('director.period')}:</span>\r\n                <input\r\n                  type=\"date\"\r\n                  value={reportStartDate}\r\n                  onChange={(e) => setReportStartDate(e.target.value)}\r\n                  className=\"px-3 py-1.5 border border-gray-300 rounded-lg text-sm\"\r\n                />\r\n                <span className=\"text-gray-400\">—</span>\r\n                <input\r\n                  type=\"date\"\r\n                  value={reportEndDate}\r\n                  onChange={(e) => setReportEndDate(e.target.value)}\r\n                  className=\"px-3 py-1.5 border border-gray-300 rounded-lg text-sm\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={exportMarketplaceReport}\r\n                disabled={!marketplaceReport || isLoadingReport}\r\n                className=\"btn-primary flex items-center gap-2\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                {t('director.download')}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {isLoadingReport ? (\r\n            <div className=\"flex items-center justify-center py-20\">\r\n              <RefreshCw className=\"w-8 h-8 animate-spin text-orange-500\" />\r\n              <span className=\"ml-3 text-gray-600\">{t('director.loading')}</span>\r\n            </div>\r\n          ) : marketplaceReport ? (\r\n            <>\r\n              {/* Overall Stats */}\r\n              <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                <div className=\"glass-card p-5\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <ShoppingBag className=\"w-8 h-8 text-blue-500\" />\r\n                  </div>\r\n                  <div className=\"text-2xl font-bold\">{marketplaceReport.overall.total_orders}</div>\r\n                  <div className=\"text-sm text-gray-500\">{t('director.totalOrders')}</div>\r\n                  <div className=\"mt-2 text-xs\">\r\n                    <span className=\"text-green-600\">{marketplaceReport.overall.delivered_orders} {t('director.delivered')}</span>\r\n                    <span className=\"text-gray-400 mx-1\">|</span>\r\n                    <span className=\"text-red-600\">{marketplaceReport.overall.cancelled_orders} {t('director.cancelled')}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"glass-card p-5\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <DollarSign className=\"w-8 h-8 text-green-500\" />\r\n                  </div>\r\n                  <div className=\"text-2xl font-bold\">{marketplaceReport.overall.total_revenue.toLocaleString()}</div>\r\n                  <div className=\"text-sm text-gray-500\">{t('director.revenue')} (сум)</div>\r\n                  <div className=\"mt-2 text-xs text-gray-600\">\r\n                    {t('director.deliveryFees')}: {marketplaceReport.overall.total_delivery_fees.toLocaleString()} сум\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"glass-card p-5\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <Star className=\"w-8 h-8 text-yellow-500\" />\r\n                  </div>\r\n                  <div className=\"text-2xl font-bold\">{marketplaceReport.overall.avg_rating.toFixed(1)}</div>\r\n                  <div className=\"text-sm text-gray-500\">{t('director.avgRating')}</div>\r\n                  <div className=\"mt-2 text-xs text-gray-600\">\r\n                    {marketplaceReport.overall.rated_orders} {language === 'ru' ? 'оценок' : 'baho'}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"glass-card p-5\">\r\n                  <div className=\"flex items-center gap-3 mb-2\">\r\n                    <Package className=\"w-8 h-8 text-purple-500\" />\r\n                  </div>\r\n                  <div className=\"text-2xl font-bold\">\r\n                    {marketplaceReport.top_products.reduce((sum, p) => sum + p.total_sold, 0)}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-500\">{t('director.sold')} (шт)</div>\r\n                  <div className=\"mt-2 text-xs text-gray-600\">\r\n                    {marketplaceReport.top_products.length} {language === 'ru' ? 'товаров' : 'mahsulot'}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Sales Chart */}\r\n              <div className=\"glass-card p-5\">\r\n                <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n                  <TrendingUp className=\"w-5 h-5 text-blue-500\" />\r\n                  {t('director.salesChart')}\r\n                </h3>\r\n                <ResponsiveContainer width=\"100%\" height={280}>\r\n                  <AreaChart data={marketplaceReport.daily_sales}>\r\n                    <defs>\r\n                      <linearGradient id=\"colorRevenue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                        <stop offset=\"5%\" stopColor=\"#10B981\" stopOpacity={0.3}/>\r\n                        <stop offset=\"95%\" stopColor=\"#10B981\" stopOpacity={0}/>\r\n                      </linearGradient>\r\n                    </defs>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\r\n                    <XAxis\r\n                      dataKey=\"date\"\r\n                      tick={{ fontSize: 10 }}\r\n                      tickFormatter={(val: string) => new Date(val).toLocaleDateString(language === 'ru' ? 'ru-RU' : 'uz-UZ', { day: 'numeric', month: 'short' })}\r\n                    />\r\n                    <YAxis tick={{ fontSize: 12 }} />\r\n                    <Tooltip\r\n                      formatter={(value: number, name: string) => [\r\n                        name === 'revenue' ? `${value.toLocaleString()} сум` : value,\r\n                        name === 'revenue' ? t('director.revenue') : t('director.orders')\r\n                      ]}\r\n                      labelFormatter={(label: string) => new Date(label).toLocaleDateString(language === 'ru' ? 'ru-RU' : 'uz-UZ')}\r\n                    />\r\n                    <Legend />\r\n                    <Area\r\n                      type=\"monotone\"\r\n                      dataKey=\"revenue\"\r\n                      stroke=\"#10B981\"\r\n                      strokeWidth={2}\r\n                      fill=\"url(#colorRevenue)\"\r\n                      name={t('director.revenue')}\r\n                    />\r\n                    <Area\r\n                      type=\"monotone\"\r\n                      dataKey=\"orders\"\r\n                      stroke=\"#3B82F6\"\r\n                      strokeWidth={2}\r\n                      fill=\"none\"\r\n                      name={t('director.orders')}\r\n                    />\r\n                  </AreaChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n\r\n              {/* Two column layout */}\r\n              <div className=\"grid lg:grid-cols-2 gap-6\">\r\n                {/* Top Products */}\r\n                <div className=\"glass-card p-5\">\r\n                  <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n                    <Package className=\"w-5 h-5 text-purple-500\" />\r\n                    {t('director.topProducts')}\r\n                  </h3>\r\n                  <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n                    {marketplaceReport.top_products.slice(0, 10).map((product, idx) => (\r\n                      <div key={product.product_id} className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-xl\">\r\n                        <div className=\"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center font-bold text-purple-600\">\r\n                          {idx + 1}\r\n                        </div>\r\n                        {product.image_url ? (\r\n                          <img src={product.image_url} alt=\"\" className=\"w-10 h-10 object-cover rounded-lg\" />\r\n                        ) : (\r\n                          <div className=\"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center\">\r\n                            <Package className=\"w-5 h-5 text-gray-400\" />\r\n                          </div>\r\n                        )}\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"font-medium text-sm truncate\">{product.product_name}</div>\r\n                          <div className=\"text-xs text-gray-500\">\r\n                            {product.total_sold} шт • {product.order_count} {t('director.orders')}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <div className=\"font-semibold text-sm text-green-600\">\r\n                            {product.total_revenue.toLocaleString()}\r\n                          </div>\r\n                          <div className=\"text-xs text-gray-400\">сум</div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    {marketplaceReport.top_products.length === 0 && (\r\n                      <div className=\"text-center text-gray-400 py-8\">{t('director.noData')}</div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Categories */}\r\n                <div className=\"glass-card p-5\">\r\n                  <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n                    <Briefcase className=\"w-5 h-5 text-orange-500\" />\r\n                    {t('director.byCategory')}\r\n                  </h3>\r\n                  <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n                    {marketplaceReport.categories.map((cat) => (\r\n                      <div key={cat.category_name} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-xl\">\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"font-medium text-sm\">{cat.category_name}</div>\r\n                          <div className=\"text-xs text-gray-500\">\r\n                            {cat.total_sold} шт • {cat.order_count} {t('director.orders')}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <div className=\"font-semibold text-sm text-green-600\">\r\n                            {cat.total_revenue.toLocaleString()}\r\n                          </div>\r\n                          <div className=\"text-xs text-gray-400\">сум</div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    {marketplaceReport.categories.length === 0 && (\r\n                      <div className=\"text-center text-gray-400 py-8\">{t('director.noData')}</div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Bottom section */}\r\n              <div className=\"grid lg:grid-cols-2 gap-6\">\r\n                {/* Top Customers */}\r\n                <div className=\"glass-card p-5\">\r\n                  <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n                    <Users className=\"w-5 h-5 text-blue-500\" />\r\n                    {t('director.topCustomers')}\r\n                  </h3>\r\n                  <div className=\"space-y-3 max-h-80 overflow-y-auto\">\r\n                    {marketplaceReport.top_customers.map((customer, idx) => (\r\n                      <div key={customer.user_id} className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-xl\">\r\n                        <div className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center font-bold text-blue-600\">\r\n                          {idx + 1}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"font-medium text-sm\">{customer.user_name}</div>\r\n                          <div className=\"text-xs text-gray-500\">{customer.user_phone}</div>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <div className=\"font-semibold text-sm\">{customer.order_count} {t('director.orders')}</div>\r\n                          <div className=\"text-xs text-green-600\">{customer.total_spent.toLocaleString()} сум</div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    {marketplaceReport.top_customers.length === 0 && (\r\n                      <div className=\"text-center text-gray-400 py-8\">{t('director.noData')}</div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Couriers */}\r\n                <div className=\"glass-card p-5\">\r\n                  <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n                    <Wrench className=\"w-5 h-5 text-green-500\" />\r\n                    {t('director.couriers')}\r\n                  </h3>\r\n                  <div className=\"space-y-3 max-h-80 overflow-y-auto\">\r\n                    {marketplaceReport.executor_stats.map((executor) => (\r\n                      <div key={executor.executor_id} className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-xl\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold\">\r\n                          {executor.executor_name.charAt(0)}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"font-medium text-sm\">{executor.executor_name}</div>\r\n                          <div className=\"text-xs text-gray-500\">\r\n                            {executor.delivered_count} {t('director.deliveredCount')}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1 text-yellow-600\">\r\n                          <Star className=\"w-4 h-4\" />\r\n                          <span className=\"font-medium\">{executor.avg_rating.toFixed(1)}</span>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    {marketplaceReport.executor_stats.length === 0 && (\r\n                      <div className=\"text-center text-gray-400 py-8\">{t('director.noData')}</div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Orders by Status pie chart */}\r\n              <div className=\"glass-card p-5\">\r\n                <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n                  <FileText className=\"w-5 h-5 text-purple-500\" />\r\n                  {language === 'ru' ? 'Заказы по статусам' : 'Buyurtmalar holati'}\r\n                </h3>\r\n                <ResponsiveContainer width=\"100%\" height={240}>\r\n                  <PieChart>\r\n                    <Pie\r\n                      data={marketplaceReport.orders_by_status.map(s => ({\r\n                        name: {\r\n                          new: language === 'ru' ? 'Новые' : 'Yangi',\r\n                          confirmed: language === 'ru' ? 'Подтверждённые' : 'Tasdiqlangan',\r\n                          preparing: language === 'ru' ? 'Готовятся' : 'Tayyorlanmoqda',\r\n                          ready: language === 'ru' ? 'Готовы' : 'Tayyor',\r\n                          delivering: language === 'ru' ? 'В доставке' : 'Yetkazilmoqda',\r\n                          delivered: language === 'ru' ? 'Доставлены' : 'Yetkazildi',\r\n                          cancelled: language === 'ru' ? 'Отменены' : 'Bekor qilindi',\r\n                        }[s.status] || s.status,\r\n                        value: s.count,\r\n                        color: {\r\n                          new: '#3B82F6',\r\n                          confirmed: '#8B5CF6',\r\n                          preparing: '#F59E0B',\r\n                          ready: '#06B6D4',\r\n                          delivering: '#F97316',\r\n                          delivered: '#10B981',\r\n                          cancelled: '#EF4444',\r\n                        }[s.status] || '#9CA3AF',\r\n                      }))}\r\n                      cx=\"50%\"\r\n                      cy=\"50%\"\r\n                      labelLine={false}\r\n                      outerRadius={80}\r\n                      dataKey=\"value\"\r\n                      label={({ name, percent }: { name: string; percent: number }) => `${name} ${(percent * 100).toFixed(0)}%`}\r\n                    >\r\n                      {marketplaceReport.orders_by_status.map((entry, index) => (\r\n                        <Cell key={`cell-${index}`} fill={{\r\n                          new: '#3B82F6',\r\n                          confirmed: '#8B5CF6',\r\n                          preparing: '#F59E0B',\r\n                          ready: '#06B6D4',\r\n                          delivering: '#F97316',\r\n                          delivered: '#10B981',\r\n                          cancelled: '#EF4444',\r\n                        }[entry.status] || '#9CA3AF'} />\r\n                      ))}\r\n                    </Pie>\r\n                    <Tooltip />\r\n                    <Legend />\r\n                  </PieChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"text-center text-gray-400 py-20\">{t('director.noData')}</div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["REQUEST_STATUS_LABELS","DetailModal","isOpen","onClose","title","children","jsx","jsxs","e","X","DirectorDashboard","navigate","useNavigate","requests","executors","announcements","fetchRequests","fetchExecutors","useDataStore","buildings","residents","fetchBuildings","useCRMStore","meetings","fetchMeetings","useMeetingStore","language","useLanguageStore","isRefreshing","setIsRefreshing","useState","activeModal","setActiveModal","teamData","setTeamData","activeTab","setActiveTab","marketplaceReport","setMarketplaceReport","isLoadingReport","setIsLoadingReport","reportStartDate","setReportStartDate","d","reportEndDate","setReportEndDate","useEffect","loadTeamData","loadMarketplaceReport","data","apiRequest","teamApi","totalCount","companyStats","useMemo","now","weekAgo","monthAgo","totalRequests","newRequests","r","inProgress","completedTotal","completedThisWeek","completedAt","completedThisMonth","pendingApproval","completionRate","totalManagers","totalDepartmentHeads","totalExecutorsFromTeam","totalStaff","onlineExecutors","avgRating","sum","totalBuildings","totalResidents","activeMeetings","m","activeAnnouncements","a","recentRequests","b","buildingStats","building","buildingRequests","addr","buildingNum","completed","pending","departmentStats","specs","executor","spec","req","SPECIALIZATION_LABELS","topExecutors","handleRefresh","exportMarketplaceReport","workbook","ExcelJS","formatCurrency","value","headerStyle","cellStyle","centerStyle","currencyStyle","ws1","titleRow","statsTitle","cell","row","prodTitle","p","i","catTitle","c","courSummaryTitle","custSummaryTitle","ws2","dailyTitle","totalRow","ws3","prodListTitle","ws4","custTitle","ws5","courTitle","buffer","blob","url","chartData","weeklyData","date","dateStr","dayName","created","statusData","staffData","deptPerformance","t","key","getStatusColor","status","RefreshCw","Activity","ShoppingBag","Fragment","FileText","Users","Building2","TrendingUp","Minus","TrendingDown","ResponsiveContainer","AreaChart","CartesianGrid","XAxis","YAxis","Tooltip","Legend","Area","PieChart","Pie","name","percent","entry","index","Cell","Briefcase","BarChart","Bar","dept","Star","AlertTriangle","ArrowRight","MapPin","formatAddress","Clock","Shield","member","UserCheck","Wrench","Vote","meeting","Megaphone","announcement","Calendar","Download","DollarSign","Package","val","label","product","idx","cat","customer","s"],"mappings":"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"}