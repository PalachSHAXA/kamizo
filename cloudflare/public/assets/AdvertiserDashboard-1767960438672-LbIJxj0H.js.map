{"version":3,"file":"AdvertiserDashboard-1767960438672-LbIJxj0H.js","sources":["../../src/pages/AdvertiserDashboard.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport {\n  LayoutDashboard, Plus, Eye, Ticket, CheckCircle, AlertTriangle,\n  Edit, Trash2, X, Loader2, Phone,\n  Calendar, TrendingUp,\n  Star, Flame, Sparkles, Globe, BadgeCheck\n} from 'lucide-react';\nimport { useAuthStore } from '../stores/authStore';\n\ninterface Branch {\n  id: string;\n  code: string;\n  name: string;\n  address?: string;\n}\n\ninterface AdCategory {\n  id: string;\n  name_ru: string;\n  name_uz: string;\n  icon: string;\n  active_ads_count: number;\n}\n\ninterface Ad {\n  id: string;\n  category_id: string;\n  category_name: string;\n  title: string;\n  description: string;\n  phone: string;\n  phone2?: string;\n  telegram?: string;\n  address?: string;\n  work_hours?: string;\n  work_days?: string;\n  logo_url?: string;\n  photos?: string[];\n  discount_percent: number;\n  badges?: { recommended?: boolean; new?: boolean; hot?: boolean; verified?: boolean };\n  target_type: 'all' | 'branches';\n  target_branches?: string[];\n  starts_at: string;\n  expires_at: string;\n  duration_type: 'week' | 'month' | 'custom';\n  status: 'draft' | 'active' | 'paused' | 'expired' | 'archived';\n  views_count: number;\n  coupons_issued: number;\n  coupons_activated: number;\n  created_at: string;\n}\n\ninterface DashboardStats {\n  active_ads: number;\n  expired_ads: number;\n  draft_ads: number;\n  total_views: number;\n  total_coupons_issued: number;\n  total_coupons_activated: number;\n}\n\ninterface Coupon {\n  id: string;\n  code: string;\n  user_name: string;\n  user_phone: string;\n  discount_percent: number;\n  status: string;\n  issued_at: string;\n  activated_at?: string;\n  activated_by_name?: string;\n  activation_amount?: number;\n  discount_amount?: number;\n}\n\n// Instagram-style verified badge component\nconst VerifiedBadge = ({ size = 'md' }: { size?: 'sm' | 'md' | 'lg' }) => {\n  const sizes = {\n    sm: 'w-4 h-4',\n    md: 'w-5 h-5',\n    lg: 'w-6 h-6'\n  };\n  return (\n    <svg className={`${sizes[size]} text-[#1DA1F2]`} viewBox=\"0 0 24 24\" fill=\"currentColor\">\n      <path d=\"M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z\"/>\n    </svg>\n  );\n};\n\nconst categoryIcons: Record<string, string> = {\n  'cleaning': 'üßπ',\n  'renovation': 'üè†',\n  'minor_repair': 'üîß',\n  'electrical': '‚ö°',\n  'plumbing': 'üöø',\n  'moving': 'üöö',\n  'auto': 'üöó',\n  'construction': 'üß±',\n  'ac': '‚ùÑÔ∏è',\n  'beauty': 'üíÑ',\n  'tailoring': 'üßµ',\n  'it': 'üíª',\n  'domestic': 'üë©‚Äçüç≥',\n  'pest_control': 'ü¶†',\n  'dry_cleaning': 'üß¥',\n  'delivery': 'üì¶',\n  'other': 'üìã'\n};\n\nexport function AdvertiserDashboard() {\n  const { token } = useAuthStore();\n  const [categories, setCategories] = useState<AdCategory[]>([]);\n  const [branches, setBranches] = useState<Branch[]>([]);\n  const [ads, setAds] = useState<Ad[]>([]);\n  const [stats, setStats] = useState<DashboardStats | null>(null);\n  const [expiringSoon, setExpiringSoon] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<'all' | 'active' | 'expired' | 'draft'>('all');\n  const [showAdModal, setShowAdModal] = useState(false);\n  const [showCouponsModal, setShowCouponsModal] = useState(false);\n  const [selectedAd, setSelectedAd] = useState<Ad | null>(null);\n  const [coupons, setCoupons] = useState<Coupon[]>([]);\n  const [loadingCoupons, setLoadingCoupons] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n\n  const [adForm, setAdForm] = useState({\n    category_id: '',\n    title: '',\n    description: '',\n    phone: '',\n    phone2: '',\n    telegram: '',\n    instagram: '',\n    facebook: '',\n    website: '',\n    address: '',\n    work_hours: '',\n    work_days: '',\n    logo_url: '',\n    discount_percent: 10,\n    duration_type: 'month' as 'week' | '2weeks' | 'month' | '3months' | '6months' | 'year',\n    target_type: 'all' as 'all' | 'branches',\n    badges: { recommended: false, new: true, hot: false, verified: false },\n    target_branches: [] as string[]\n  });\n\n  const API_BASE = import.meta.env.VITE_API_URL || '';\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    try {\n      const [catRes, dashRes, adsRes, branchRes] = await Promise.all([\n        fetch(`${API_BASE}/api/ads/categories`, { headers: { Authorization: `Bearer ${token}` } }),\n        fetch(`${API_BASE}/api/ads/dashboard`, { headers: { Authorization: `Bearer ${token}` } }),\n        fetch(`${API_BASE}/api/ads/my`, { headers: { Authorization: `Bearer ${token}` } }),\n        fetch(`${API_BASE}/api/branches`, { headers: { Authorization: `Bearer ${token}` } })\n      ]);\n\n      if (catRes.ok) {\n        const data = await catRes.json();\n        setCategories(data.categories || []);\n      }\n      if (dashRes.ok) {\n        const data = await dashRes.json();\n        setStats(data.stats);\n        setExpiringSoon(data.expiringSoon || []);\n      }\n      if (adsRes.ok) {\n        const data = await adsRes.json();\n        setAds(data.ads?.map((ad: any) => ({\n          ...ad,\n          badges: ad.badges ? JSON.parse(ad.badges) : {},\n          photos: ad.photos ? JSON.parse(ad.photos) : [],\n          target_branches: ad.target_branches ? JSON.parse(ad.target_branches) : []\n        })) || []);\n      }\n      if (branchRes.ok) {\n        const data = await branchRes.json();\n        setBranches(data.branches || []);\n      }\n    } catch (err) {\n      console.error('Failed to fetch data:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [token, API_BASE]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  const fetchCoupons = async (adId: string) => {\n    setLoadingCoupons(true);\n    try {\n      const res = await fetch(`${API_BASE}/api/ads/${adId}/coupons`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      if (res.ok) {\n        const data = await res.json();\n        setCoupons(data.coupons || []);\n      }\n    } catch (err) {\n      console.error('Failed to fetch coupons:', err);\n    } finally {\n      setLoadingCoupons(false);\n    }\n  };\n\n  const handleCreateAd = async () => {\n    if (!adForm.category_id || !adForm.title || !adForm.phone) return;\n\n    setSubmitting(true);\n    try {\n      const res = await fetch(`${API_BASE}/api/ads`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(adForm)\n      });\n\n      if (res.ok) {\n        setShowAdModal(false);\n        resetForm();\n        fetchData();\n      }\n    } catch (err) {\n      console.error('Failed to create ad:', err);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleUpdateAd = async () => {\n    if (!selectedAd) return;\n\n    setSubmitting(true);\n    try {\n      const res = await fetch(`${API_BASE}/api/ads/${selectedAd.id}`, {\n        method: 'PATCH',\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(adForm)\n      });\n\n      if (res.ok) {\n        setShowAdModal(false);\n        setSelectedAd(null);\n        resetForm();\n        fetchData();\n      }\n    } catch (err) {\n      console.error('Failed to update ad:', err);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleDeleteAd = async (adId: string) => {\n    if (!confirm('–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ?')) return;\n\n    try {\n      await fetch(`${API_BASE}/api/ads/${adId}`, {\n        method: 'DELETE',\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      fetchData();\n    } catch (err) {\n      console.error('Failed to delete ad:', err);\n    }\n  };\n\n  const resetForm = () => {\n    setAdForm({\n      category_id: '',\n      title: '',\n      description: '',\n      phone: '',\n      phone2: '',\n      telegram: '',\n      instagram: '',\n      facebook: '',\n      website: '',\n      address: '',\n      work_hours: '',\n      work_days: '',\n      logo_url: '',\n      discount_percent: 10,\n      duration_type: 'month',\n      target_type: 'all',\n      badges: { recommended: false, new: true, hot: false, verified: false },\n      target_branches: []\n    });\n  };\n\n  const openEditModal = (ad: Ad) => {\n    setSelectedAd(ad);\n    setAdForm({\n      category_id: ad.category_id,\n      title: ad.title,\n      description: ad.description || '',\n      phone: ad.phone,\n      phone2: ad.phone2 || '',\n      telegram: ad.telegram || '',\n      instagram: (ad as any).instagram || '',\n      facebook: (ad as any).facebook || '',\n      website: (ad as any).website || '',\n      address: ad.address || '',\n      work_hours: ad.work_hours || '',\n      work_days: ad.work_days || '',\n      logo_url: ad.logo_url || '',\n      discount_percent: ad.discount_percent,\n      duration_type: ad.duration_type as any,\n      target_type: ad.target_type,\n      badges: {\n        recommended: ad.badges?.recommended ?? false,\n        new: ad.badges?.new ?? false,\n        hot: ad.badges?.hot ?? false,\n        verified: ad.badges?.verified ?? false\n      },\n      target_branches: ad.target_branches || []\n    });\n    setShowAdModal(true);\n  };\n\n  const openCouponsModal = (ad: Ad) => {\n    setSelectedAd(ad);\n    fetchCoupons(ad.id);\n    setShowCouponsModal(true);\n  };\n\n  const filteredAds = ads.filter(ad => {\n    if (activeTab === 'all') return true;\n    if (activeTab === 'active') return ad.status === 'active';\n    if (activeTab === 'expired') return ad.status === 'expired' || ad.status === 'archived';\n    if (activeTab === 'draft') return ad.status === 'draft';\n    return true;\n  });\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-blue-600\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-6xl mx-auto\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">–†–µ–∫–ª–∞–º–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>\n          <p className=\"text-gray-500\">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏ –∏ –∫—É–ø–æ–Ω–∞–º–∏</p>\n        </div>\n        <button\n          onClick={() => { resetForm(); setSelectedAd(null); setShowAdModal(true); }}\n          className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          –ù–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ\n        </button>\n      </div>\n\n      {/* Stats Cards */}\n      {stats && (\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n          <div className=\"bg-white rounded-xl p-4 shadow-sm border\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center\">\n                <CheckCircle className=\"w-5 h-5 text-green-600\" />\n              </div>\n              <div>\n                <div className=\"text-2xl font-bold\">{stats.active_ads || 0}</div>\n                <div className=\"text-sm text-gray-500\">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl p-4 shadow-sm border\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center\">\n                <Eye className=\"w-5 h-5 text-blue-600\" />\n              </div>\n              <div>\n                <div className=\"text-2xl font-bold\">{stats.total_views || 0}</div>\n                <div className=\"text-sm text-gray-500\">–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl p-4 shadow-sm border\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center\">\n                <Ticket className=\"w-5 h-5 text-purple-600\" />\n              </div>\n              <div>\n                <div className=\"text-2xl font-bold\">{stats.total_coupons_issued || 0}</div>\n                <div className=\"text-sm text-gray-500\">–í—ã–¥–∞–Ω–æ –∫—É–ø–æ–Ω–æ–≤</div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl p-4 shadow-sm border\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center\">\n                <TrendingUp className=\"w-5 h-5 text-orange-600\" />\n              </div>\n              <div>\n                <div className=\"text-2xl font-bold\">{stats.total_coupons_activated || 0}</div>\n                <div className=\"text-sm text-gray-500\">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Expiring Soon Warning */}\n      {expiringSoon.length > 0 && (\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6\">\n          <div className=\"flex items-center gap-2 text-yellow-700 mb-2\">\n            <AlertTriangle className=\"w-5 h-5\" />\n            <span className=\"font-medium\">–°–∫–æ—Ä–æ –∏—Å—Ç–µ–∫–∞—é—Ç ({expiringSoon.length})</span>\n          </div>\n          <div className=\"flex flex-wrap gap-2\">\n            {expiringSoon.map((ad: any) => (\n              <span key={ad.id} className=\"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm\">\n                {ad.title} - {new Date(ad.expires_at).toLocaleDateString('ru-RU')}\n              </span>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Tabs */}\n      <div className=\"flex gap-2 mb-4 border-b\">\n        {(['all', 'active', 'expired', 'draft'] as const).map(tab => (\n          <button\n            key={tab}\n            onClick={() => setActiveTab(tab)}\n            className={`px-4 py-2 font-medium border-b-2 -mb-px transition-colors ${\n              activeTab === tab\n                ? 'border-blue-600 text-blue-600'\n                : 'border-transparent text-gray-500 hover:text-gray-700'\n            }`}\n          >\n            {tab === 'all' && '–í—Å–µ'}\n            {tab === 'active' && '–ê–∫—Ç–∏–≤–Ω—ã–µ'}\n            {tab === 'expired' && '–ò—Å—Ç—ë–∫—à–∏–µ'}\n            {tab === 'draft' && '–ß–µ—Ä–Ω–æ–≤–∏–∫–∏'}\n          </button>\n        ))}\n      </div>\n\n      {/* Ads List - OLX style */}\n      <div className=\"space-y-2\">\n        {filteredAds.length === 0 ? (\n          <div className=\"text-center py-12 bg-white rounded-xl border\">\n            <LayoutDashboard className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n            <p className=\"text-gray-500\">–ù–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π</p>\n            <button\n              onClick={() => { resetForm(); setShowAdModal(true); }}\n              className=\"mt-4 text-blue-600 hover:text-blue-700 font-medium\"\n            >\n              –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ\n            </button>\n          </div>\n        ) : (\n          filteredAds.map(ad => (\n            <div key={ad.id} className=\"w-full flex bg-white rounded-xl border border-gray-100 hover:border-blue-200 hover:shadow-lg transition-all overflow-hidden\">\n              {/* Image/Logo - left side */}\n              <div className=\"w-32 sm:w-40 h-32 sm:h-36 bg-gray-50 flex-shrink-0 flex items-center justify-center relative p-2\">\n                {ad.logo_url ? (\n                  <img\n                    src={ad.logo_url}\n                    alt=\"\"\n                    className=\"max-w-full max-h-full object-contain\"\n                  />\n                ) : (\n                  <span className=\"text-5xl\">{categoryIcons[(categories.find(c => c.id === ad.category_id)?.icon) || 'other'] || 'üìã'}</span>\n                )}\n\n                {/* Status ribbon */}\n                <div className={`absolute top-0 left-0 text-white text-[9px] font-bold px-2 py-0.5 rounded-br-lg ${\n                  ad.status === 'active' ? 'bg-green-500' :\n                  ad.status === 'expired' ? 'bg-red-500' :\n                  ad.status === 'draft' ? 'bg-gray-500' :\n                  'bg-yellow-500'\n                }`}>\n                  {ad.status === 'active' ? '–ê–∫—Ç–∏–≤–Ω–æ' :\n                   ad.status === 'expired' ? '–ò—Å—Ç–µ–∫–ª–æ' :\n                   ad.status === 'draft' ? '–ß–µ—Ä–Ω–æ–≤–∏–∫' : '–ü–∞—É–∑–∞'}\n                </div>\n\n                {/* Verified ribbon */}\n                {ad.badges?.verified && (\n                  <div className=\"absolute top-0 right-0 bg-[#1DA1F2] text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg flex items-center gap-0.5\">\n                    <svg className=\"w-2.5 h-2.5\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                      <path d=\"M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z\"/>\n                    </svg>\n                  </div>\n                )}\n\n                {/* Discount badge */}\n                {ad.discount_percent > 0 && (\n                  <div className=\"absolute bottom-2 left-2 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded\">\n                    -{ad.discount_percent}%\n                  </div>\n                )}\n              </div>\n\n              {/* Content - right side */}\n              <div className=\"flex-1 p-3 sm:p-4 flex flex-col min-w-0\">\n                {/* Title row */}\n                <div className=\"flex items-start justify-between gap-2\">\n                  <div className=\"min-w-0\">\n                    <div className=\"flex items-center gap-1.5\">\n                      <h3 className=\"font-semibold text-gray-900 truncate text-sm sm:text-base\">{ad.title}</h3>\n                      {ad.badges?.verified && <VerifiedBadge size=\"sm\" />}\n                    </div>\n\n                    {/* Badges */}\n                    <div className=\"flex items-center gap-1.5 mt-1 flex-wrap\">\n                      {ad.badges?.new && (\n                        <span className=\"px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded text-[10px] font-semibold\">–ù–æ–≤–æ–µ</span>\n                      )}\n                      {ad.badges?.hot && (\n                        <span className=\"px-2 py-0.5 bg-orange-100 text-orange-700 rounded text-[10px] font-semibold\">–¢–æ–ø</span>\n                      )}\n                      {ad.badges?.recommended && (\n                        <span className=\"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-[10px] font-semibold\">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º</span>\n                      )}\n                      {ad.target_type === 'branches' && ad.target_branches && ad.target_branches.length > 0 && (\n                        <span className=\"px-2 py-0.5 bg-purple-100 text-purple-700 rounded text-[10px] font-semibold\">\n                          {ad.target_branches.join(', ')}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex items-center gap-1 flex-shrink-0\">\n                    <button\n                      onClick={() => openCouponsModal(ad)}\n                      className=\"p-1.5 hover:bg-gray-100 rounded-lg text-gray-400 hover:text-purple-600 transition-colors\"\n                      title=\"–ö—É–ø–æ–Ω—ã\"\n                    >\n                      <Ticket className=\"w-4 h-4\" />\n                    </button>\n                    <button\n                      onClick={() => openEditModal(ad)}\n                      className=\"p-1.5 hover:bg-gray-100 rounded-lg text-gray-400 hover:text-blue-600 transition-colors\"\n                      title=\"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å\"\n                    >\n                      <Edit className=\"w-4 h-4\" />\n                    </button>\n                    <button\n                      onClick={() => handleDeleteAd(ad.id)}\n                      className=\"p-1.5 hover:bg-red-50 rounded-lg text-gray-400 hover:text-red-600 transition-colors\"\n                      title=\"–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n\n                {/* Category */}\n                <div className=\"text-xs text-gray-500 mt-1\">{ad.category_name}</div>\n\n                {/* Stats row */}\n                <div className=\"flex items-center gap-3 mt-auto pt-2 text-xs flex-wrap\">\n                  <div className=\"flex items-center gap-1 text-gray-500\">\n                    <Eye className=\"w-3.5 h-3.5\" />\n                    <span>{ad.views_count}</span>\n                  </div>\n                  <div className=\"flex items-center gap-1 text-purple-600\">\n                    <Ticket className=\"w-3.5 h-3.5\" />\n                    <span>{ad.coupons_issued}</span>\n                  </div>\n                  <div className=\"flex items-center gap-1 text-green-600\">\n                    <CheckCircle className=\"w-3.5 h-3.5\" />\n                    <span>{ad.coupons_activated}</span>\n                  </div>\n                  <div className=\"flex items-center gap-1 text-gray-400 ml-auto\">\n                    <Calendar className=\"w-3.5 h-3.5\" />\n                    <span>–¥–æ {new Date(ad.expires_at).toLocaleDateString('ru-RU')}</span>\n                  </div>\n                </div>\n\n                {/* Phone */}\n                <div className=\"flex items-center gap-1.5 text-green-600 font-medium text-sm mt-2\">\n                  <Phone className=\"w-4 h-4\" />\n                  {ad.phone}\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Create/Edit Ad Modal */}\n      {showAdModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10\">\n              <h2 className=\"text-lg font-semibold\">\n                {selectedAd ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ' : '–ù–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ'}\n              </h2>\n              <button onClick={() => { setShowAdModal(false); setSelectedAd(null); }} className=\"p-2 hover:bg-gray-100 rounded-lg\">\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            <div className=\"p-4 space-y-4\">\n              {/* Category */}\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>\n                <select\n                  value={adForm.category_id}\n                  onChange={e => setAdForm({ ...adForm, category_id: e.target.value })}\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                >\n                  <option value=\"\">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>\n                  {categories.map(cat => (\n                    <option key={cat.id} value={cat.id}>{cat.name_ru}</option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Title */}\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>\n                <input\n                  type=\"text\"\n                  value={adForm.title}\n                  onChange={e => setAdForm({ ...adForm, title: e.target.value })}\n                  placeholder=\"–ù–∞–ø—Ä–∏–º–µ—Ä: –•–∏–º—á–∏—Å—Ç–∫–∞ '–ß–∏—Å—Ç—ã–π –¥–æ–º'\"\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                />\n              </div>\n\n              {/* Description */}\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">–û–ø–∏—Å–∞–Ω–∏–µ</label>\n                <textarea\n                  value={adForm.description}\n                  onChange={e => setAdForm({ ...adForm, description: e.target.value })}\n                  placeholder=\"–û–ø–∏—à–∏—Ç–µ —É—Å–ª—É–≥–∏...\"\n                  rows={3}\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                />\n              </div>\n\n              {/* Phone */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">–¢–µ–ª–µ—Ñ–æ–Ω *</label>\n                  <input\n                    type=\"tel\"\n                    value={adForm.phone}\n                    onChange={e => setAdForm({ ...adForm, phone: e.target.value })}\n                    placeholder=\"+998901234567\"\n                    className=\"w-full px-3 py-2 border rounded-lg\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">–î–æ–ø. —Ç–µ–ª–µ—Ñ–æ–Ω</label>\n                  <input\n                    type=\"tel\"\n                    value={adForm.phone2}\n                    onChange={e => setAdForm({ ...adForm, phone2: e.target.value })}\n                    placeholder=\"+998901234567\"\n                    className=\"w-full px-3 py-2 border rounded-lg\"\n                  />\n                </div>\n              </div>\n\n              {/* Social Networks */}\n              <div className=\"space-y-3\">\n                <label className=\"block text-sm font-medium text-gray-700\">–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</label>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                  {/* Telegram */}\n                  <div className=\"relative\">\n                    <div className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 flex items-center justify-center\">\n                      <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5 text-[#0088cc]\" fill=\"currentColor\">\n                        <path d=\"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z\"/>\n                      </svg>\n                    </div>\n                    <input\n                      type=\"text\"\n                      value={adForm.telegram}\n                      onChange={e => setAdForm({ ...adForm, telegram: e.target.value })}\n                      placeholder=\"@username\"\n                      className=\"w-full pl-10 pr-3 py-2.5 border border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-100\"\n                    />\n                  </div>\n\n                  {/* Instagram */}\n                  <div className=\"relative\">\n                    <div className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 flex items-center justify-center\">\n                      <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5 text-[#E4405F]\" fill=\"currentColor\">\n                        <path d=\"M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z\"/>\n                      </svg>\n                    </div>\n                    <input\n                      type=\"text\"\n                      value={adForm.instagram}\n                      onChange={e => setAdForm({ ...adForm, instagram: e.target.value })}\n                      placeholder=\"@username\"\n                      className=\"w-full pl-10 pr-3 py-2.5 border border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-100\"\n                    />\n                  </div>\n\n                  {/* Facebook */}\n                  <div className=\"relative\">\n                    <div className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 flex items-center justify-center\">\n                      <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5 text-[#1877F2]\" fill=\"currentColor\">\n                        <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\n                      </svg>\n                    </div>\n                    <input\n                      type=\"text\"\n                      value={adForm.facebook}\n                      onChange={e => setAdForm({ ...adForm, facebook: e.target.value })}\n                      placeholder=\"facebook.com/page\"\n                      className=\"w-full pl-10 pr-3 py-2.5 border border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-100\"\n                    />\n                  </div>\n\n                  {/* Website */}\n                  <div className=\"relative\">\n                    <div className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 flex items-center justify-center\">\n                      <Globe className=\"w-4 h-4 text-gray-500\" />\n                    </div>\n                    <input\n                      type=\"url\"\n                      value={adForm.website}\n                      onChange={e => setAdForm({ ...adForm, website: e.target.value })}\n                      placeholder=\"https://example.com\"\n                      className=\"w-full pl-10 pr-3 py-2.5 border border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-100\"\n                    />\n                  </div>\n                </div>\n              </div>\n\n              {/* Address */}\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">–ê–¥—Ä–µ—Å</label>\n                <input\n                  type=\"text\"\n                  value={adForm.address}\n                  onChange={e => setAdForm({ ...adForm, address: e.target.value })}\n                  placeholder=\"–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º\"\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                />\n              </div>\n\n              {/* Work hours */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã</label>\n                  <input\n                    type=\"text\"\n                    value={adForm.work_hours}\n                    onChange={e => setAdForm({ ...adForm, work_hours: e.target.value })}\n                    placeholder=\"9:00 - 18:00\"\n                    className=\"w-full px-3 py-2 border rounded-lg\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">–î–Ω–∏ —Ä–∞–±–æ—Ç—ã</label>\n                  <input\n                    type=\"text\"\n                    value={adForm.work_days}\n                    onChange={e => setAdForm({ ...adForm, work_days: e.target.value })}\n                    placeholder=\"–ü–Ω-–°–±\"\n                    className=\"w-full px-3 py-2 border rounded-lg\"\n                  />\n                </div>\n              </div>\n\n              {/* Logo URL */}\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">–°—Å—ã–ª–∫–∞ –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø</label>\n                <input\n                  type=\"url\"\n                  value={adForm.logo_url}\n                  onChange={e => setAdForm({ ...adForm, logo_url: e.target.value })}\n                  placeholder=\"https://...\"\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                />\n              </div>\n\n              {/* Discount */}\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">–°–∫–∏–¥–∫–∞ –ø–æ –∫—É–ø–æ–Ω—É (%)</label>\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  max=\"100\"\n                  value={adForm.discount_percent}\n                  onChange={e => setAdForm({ ...adForm, discount_percent: parseInt(e.target.value) || 0 })}\n                  className=\"w-full px-3 py-2 border rounded-lg\"\n                />\n              </div>\n\n              {/* Duration */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">–°—Ä–æ–∫ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</label>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {[\n                    { value: 'week', label: '1 –Ω–µ–¥–µ–ª—è' },\n                    { value: '2weeks', label: '2 –Ω–µ–¥–µ–ª–∏' },\n                    { value: 'month', label: '1 –º–µ—Å—è—Ü' },\n                    { value: '3months', label: '3 –º–µ—Å—è—Ü–∞' },\n                    { value: '6months', label: '6 –º–µ—Å—è—Ü–µ–≤' },\n                    { value: 'year', label: '1 –≥–æ–¥' },\n                  ].map(opt => (\n                    <button\n                      key={opt.value}\n                      type=\"button\"\n                      onClick={() => setAdForm({ ...adForm, duration_type: opt.value as any })}\n                      className={`px-3 py-2.5 rounded-xl text-sm font-medium transition-all ${\n                        adForm.duration_type === opt.value\n                          ? 'bg-blue-600 text-white shadow-lg shadow-blue-200'\n                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                      }`}\n                    >\n                      {opt.label}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Badges - Telegram style toggles */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">–ë–µ–π–¥–∂–∏</label>\n                <div className=\"space-y-3\">\n                  {/* Recommended */}\n                  <label className=\"flex items-center justify-between p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                        <Star className=\"w-5 h-5 text-blue-600\" />\n                      </div>\n                      <div>\n                        <div className=\"font-medium text-gray-900\">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º</div>\n                        <div className=\"text-xs text-gray-500\">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–µ</div>\n                      </div>\n                    </div>\n                    <div className={`relative w-12 h-7 rounded-full transition-colors ${adForm.badges.recommended ? 'bg-blue-600' : 'bg-gray-300'}`}>\n                      <input\n                        type=\"checkbox\"\n                        checked={adForm.badges.recommended}\n                        onChange={e => setAdForm({ ...adForm, badges: { ...adForm.badges, recommended: e.target.checked } })}\n                        className=\"absolute inset-0 opacity-0 cursor-pointer\"\n                      />\n                      <div className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${adForm.badges.recommended ? 'translate-x-6' : 'translate-x-1'}`} />\n                    </div>\n                  </label>\n\n                  {/* New */}\n                  <label className=\"flex items-center justify-between p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\">\n                        <Sparkles className=\"w-5 h-5 text-green-600\" />\n                      </div>\n                      <div>\n                        <div className=\"font-medium text-gray-900\">–ù–æ–≤–∏–Ω–∫–∞</div>\n                        <div className=\"text-xs text-gray-500\">–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –Ω–æ–≤–æ–µ</div>\n                      </div>\n                    </div>\n                    <div className={`relative w-12 h-7 rounded-full transition-colors ${adForm.badges.new ? 'bg-green-600' : 'bg-gray-300'}`}>\n                      <input\n                        type=\"checkbox\"\n                        checked={adForm.badges.new}\n                        onChange={e => setAdForm({ ...adForm, badges: { ...adForm.badges, new: e.target.checked } })}\n                        className=\"absolute inset-0 opacity-0 cursor-pointer\"\n                      />\n                      <div className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${adForm.badges.new ? 'translate-x-6' : 'translate-x-1'}`} />\n                    </div>\n                  </label>\n\n                  {/* Hot */}\n                  <label className=\"flex items-center justify-between p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center\">\n                        <Flame className=\"w-5 h-5 text-red-600\" />\n                      </div>\n                      <div>\n                        <div className=\"font-medium text-gray-900\">–ì–æ—Ä—è—á–µ–µ</div>\n                        <div className=\"text-xs text-gray-500\">–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</div>\n                      </div>\n                    </div>\n                    <div className={`relative w-12 h-7 rounded-full transition-colors ${adForm.badges.hot ? 'bg-red-600' : 'bg-gray-300'}`}>\n                      <input\n                        type=\"checkbox\"\n                        checked={adForm.badges.hot}\n                        onChange={e => setAdForm({ ...adForm, badges: { ...adForm.badges, hot: e.target.checked } })}\n                        className=\"absolute inset-0 opacity-0 cursor-pointer\"\n                      />\n                      <div className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${adForm.badges.hot ? 'translate-x-6' : 'translate-x-1'}`} />\n                    </div>\n                  </label>\n\n                  {/* Verified - Instagram style */}\n                  <label className=\"flex items-center justify-between p-3 bg-gradient-to-r from-sky-50 to-blue-50 rounded-xl cursor-pointer hover:from-sky-100 hover:to-blue-100 transition-colors border border-sky-100\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 bg-gradient-to-br from-sky-400 to-blue-500 rounded-full flex items-center justify-center shadow-lg shadow-sky-200\">\n                        <BadgeCheck className=\"w-5 h-5 text-white\" />\n                      </div>\n                      <div>\n                        <div className=\"font-medium text-gray-900 flex items-center gap-1.5\">\n                          –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ\n                          <svg className=\"w-4 h-4 text-sky-500\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                            <path d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                          </svg>\n                        </div>\n                        <div className=\"text-xs text-gray-500\">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø–∞—Ä—Ç–Ω—ë—Ä –£–ö</div>\n                      </div>\n                    </div>\n                    <div className={`relative w-12 h-7 rounded-full transition-colors ${adForm.badges.verified ? 'bg-gradient-to-r from-sky-400 to-blue-500' : 'bg-gray-300'}`}>\n                      <input\n                        type=\"checkbox\"\n                        checked={adForm.badges.verified}\n                        onChange={e => setAdForm({ ...adForm, badges: { ...adForm.badges, verified: e.target.checked } })}\n                        className=\"absolute inset-0 opacity-0 cursor-pointer\"\n                      />\n                      <div className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${adForm.badges.verified ? 'translate-x-6' : 'translate-x-1'}`} />\n                    </div>\n                  </label>\n                </div>\n              </div>\n\n              {/* Target Branches */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–ª—è —Ñ–∏–ª–∏–∞–ª–æ–≤</label>\n                <div className=\"space-y-2\">\n                  <label className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors\">\n                    <input\n                      type=\"radio\"\n                      name=\"target_type\"\n                      checked={adForm.target_type === 'all'}\n                      onChange={() => setAdForm({ ...adForm, target_type: 'all', target_branches: [] })}\n                      className=\"w-4 h-4 text-blue-600\"\n                    />\n                    <div>\n                      <div className=\"font-medium text-gray-900\">–í—Å–µ —Ñ–∏–ª–∏–∞–ª—ã</div>\n                      <div className=\"text-xs text-gray-500\">–û–±—ä—è–≤–ª–µ–Ω–∏–µ —É–≤–∏–¥—è—Ç –≤—Å–µ –∂–∏—Ç–µ–ª–∏ ({branches.length} —Ñ–∏–ª–∏–∞–ª–æ–≤)</div>\n                    </div>\n                  </label>\n                  <label className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors\">\n                    <input\n                      type=\"radio\"\n                      name=\"target_type\"\n                      checked={adForm.target_type === 'branches'}\n                      onChange={() => setAdForm({ ...adForm, target_type: 'branches' })}\n                      className=\"w-4 h-4 text-blue-600\"\n                    />\n                    <div>\n                      <div className=\"font-medium text-gray-900\">–í—ã–±—Ä–∞—Ç—å —Ñ–∏–ª–∏–∞–ª—ã</div>\n                      <div className=\"text-xs text-gray-500\">–¢–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤</div>\n                    </div>\n                  </label>\n                </div>\n\n                {adForm.target_type === 'branches' && (\n                  <div className=\"mt-3 grid grid-cols-2 gap-2\">\n                    {branches.map(branch => (\n                      <label\n                        key={branch.code}\n                        className={`flex items-center gap-2 p-3 rounded-xl cursor-pointer border-2 transition-all ${\n                          adForm.target_branches.includes(branch.code)\n                            ? 'border-blue-500 bg-blue-50'\n                            : 'border-gray-200 hover:border-gray-300'\n                        }`}\n                      >\n                        <input\n                          type=\"checkbox\"\n                          checked={adForm.target_branches.includes(branch.code)}\n                          onChange={e => {\n                            if (e.target.checked) {\n                              setAdForm({ ...adForm, target_branches: [...adForm.target_branches, branch.code] });\n                            } else {\n                              setAdForm({ ...adForm, target_branches: adForm.target_branches.filter(b => b !== branch.code) });\n                            }\n                          }}\n                          className=\"w-4 h-4 text-blue-600 rounded\"\n                        />\n                        <div>\n                          <div className=\"font-medium text-sm text-gray-900\">{branch.code}</div>\n                          <div className=\"text-xs text-gray-500\">{branch.name}</div>\n                        </div>\n                      </label>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"p-4 border-t flex gap-3 sticky bottom-0 bg-white\">\n              <button\n                onClick={() => { setShowAdModal(false); setSelectedAd(null); }}\n                className=\"flex-1 py-2.5 border rounded-lg hover:bg-gray-50\"\n              >\n                –û—Ç–º–µ–Ω–∞\n              </button>\n              <button\n                onClick={selectedAd ? handleUpdateAd : handleCreateAd}\n                disabled={submitting || !adForm.category_id || !adForm.title || !adForm.phone}\n                className=\"flex-1 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2\"\n              >\n                {submitting ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : <Plus className=\"w-5 h-5\" />}\n                {selectedAd ? '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å' : '–°–æ–∑–¥–∞—Ç—å'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Coupons Modal */}\n      {showCouponsModal && selectedAd && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10\">\n              <div>\n                <h2 className=\"text-lg font-semibold\">–ö—É–ø–æ–Ω—ã: {selectedAd.title}</h2>\n                <p className=\"text-sm text-gray-500\">\n                  –í—ã–¥–∞–Ω–æ: {selectedAd.coupons_issued} | –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ: {selectedAd.coupons_activated}\n                </p>\n              </div>\n              <button onClick={() => { setShowCouponsModal(false); setSelectedAd(null); }} className=\"p-2 hover:bg-gray-100 rounded-lg\">\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {loadingCoupons ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"w-6 h-6 animate-spin text-blue-600\" />\n                </div>\n              ) : coupons.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500\">\n                  –ö—É–ø–æ–Ω—ã –ø–æ–∫–∞ –Ω–µ –≤—ã–¥–∞–Ω—ã\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {coupons.map(coupon => (\n                    <div key={coupon.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div>\n                        <div className=\"flex items-center gap-2\">\n                          <code className=\"px-2 py-1 bg-white border rounded font-mono text-sm\">{coupon.code}</code>\n                          <span className={`px-2 py-0.5 text-xs rounded-full ${\n                            coupon.status === 'activated' ? 'bg-green-100 text-green-700' :\n                            coupon.status === 'expired' ? 'bg-red-100 text-red-700' :\n                            'bg-yellow-100 text-yellow-700'\n                          }`}>\n                            {coupon.status === 'activated' ? '–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω' :\n                             coupon.status === 'expired' ? '–ò—Å—Ç—ë–∫' : '–í—ã–¥–∞–Ω'}\n                          </span>\n                        </div>\n                        <div className=\"text-sm text-gray-500 mt-1\">\n                          {coupon.user_name} ‚Ä¢ {coupon.user_phone}\n                        </div>\n                        <div className=\"text-xs text-gray-400 mt-0.5\">\n                          –í—ã–¥–∞–Ω: {new Date(coupon.issued_at).toLocaleString('ru-RU')}\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-lg font-bold text-purple-600\">-{coupon.discount_percent}%</div>\n                        {coupon.status === 'activated' && coupon.activation_amount && (\n                          <div className=\"text-sm text-green-600\">\n                            –°–∫–∏–¥–∫–∞: {coupon.discount_amount?.toLocaleString()} —Å—É–º\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["VerifiedBadge","size","sizes","jsx","categoryIcons","AdvertiserDashboard","token","useAuthStore","categories","setCategories","useState","branches","setBranches","ads","setAds","stats","setStats","expiringSoon","setExpiringSoon","loading","setLoading","activeTab","setActiveTab","showAdModal","setShowAdModal","showCouponsModal","setShowCouponsModal","selectedAd","setSelectedAd","coupons","setCoupons","loadingCoupons","setLoadingCoupons","submitting","setSubmitting","adForm","setAdForm","API_BASE","fetchData","useCallback","catRes","dashRes","adsRes","branchRes","data","ad","useEffect","fetchCoupons","adId","res","handleCreateAd","resetForm","handleUpdateAd","handleDeleteAd","openEditModal","openCouponsModal","filteredAds","Loader2","jsxs","Plus","CheckCircle","Eye","Ticket","TrendingUp","AlertTriangle","tab","LayoutDashboard","c","Edit","Trash2","Calendar","Phone","X","e","cat","Globe","opt","Star","Sparkles","Flame","BadgeCheck","branch","b","coupon"],"mappings":"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"}