{"version":3,"file":"ResidentGuestAccessPage-1768905939422-Oriukoyu.js","sources":["../../src/pages/ResidentGuestAccessPage.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\r\nimport {\r\n  QrCode, Plus, X, Clock, Package, Users, Car, User,\r\n  Share2, Download, Copy, ChevronRight, ArrowLeft, Calendar,\r\n  AlertTriangle, Trash2\r\n} from 'lucide-react';\r\nimport { generateQRCodeCanvas } from '../components/LazyQRCode';\r\nimport { useAuthStore } from '../stores/authStore';\r\nimport { useDataStore } from '../stores/dataStore';\r\nimport { useLanguageStore } from '../stores/languageStore';\r\nimport {\r\n  VISITOR_TYPE_LABELS, ACCESS_TYPE_LABELS, GUEST_ACCESS_STATUS_LABELS,\r\n  type GuestAccessCode, type VisitorType, type AccessType\r\n} from '../types';\r\n\r\n// QR Code display component\r\nfunction QRCodeDisplay({ codeId, onClose }: { codeId: string; onClose: () => void }) {\r\n  const { language } = useLanguageStore();\r\n  const { guestAccessCodes } = useDataStore();\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  // Get latest code from store to ensure updated values (like currentUses)\r\n  const code = guestAccessCodes.find(c => c.id === codeId);\r\n\r\n  if (!code) {\r\n    return null;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (canvasRef.current) {\r\n      generateQRCodeCanvas(canvasRef.current, code.qrToken, {\r\n        width: 280,\r\n        margin: 2,\r\n        color: { dark: '#000000', light: '#ffffff' }\r\n      });\r\n    }\r\n  }, [code.qrToken]);\r\n\r\n  const handleCopy = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(code.qrToken);\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n    } catch (err) {\r\n      console.error('Failed to copy:', err);\r\n    }\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    if (canvasRef.current) {\r\n      const link = document.createElement('a');\r\n      link.download = `guest-pass-${code.id}.png`;\r\n      link.href = canvasRef.current.toDataURL('image/png');\r\n      link.click();\r\n    }\r\n  };\r\n\r\n  // Create combined image with QR code and caption text\r\n  const createImageWithCaption = async (): Promise<Blob | null> => {\r\n    if (!canvasRef.current) return null;\r\n\r\n    const qrCanvas = canvasRef.current;\r\n    const qrSize = qrCanvas.width;\r\n\r\n    // Create new canvas with extra space for text\r\n    const combinedCanvas = document.createElement('canvas');\r\n    const ctx = combinedCanvas.getContext('2d');\r\n    if (!ctx) return null;\r\n\r\n    const padding = 30;\r\n    const textAreaHeight = 160;\r\n    combinedCanvas.width = qrSize + padding * 2;\r\n    combinedCanvas.height = qrSize + padding * 2 + textAreaHeight;\r\n\r\n    // White background\r\n    ctx.fillStyle = '#ffffff';\r\n    ctx.fillRect(0, 0, combinedCanvas.width, combinedCanvas.height);\r\n\r\n    // Draw QR code\r\n    ctx.drawImage(qrCanvas, padding, padding);\r\n\r\n    // Add text below QR code\r\n    ctx.fillStyle = '#1f2937';\r\n    ctx.textAlign = 'center';\r\n    const centerX = combinedCanvas.width / 2;\r\n    let y = qrSize + padding + 30;\r\n\r\n    // Title\r\n    ctx.font = 'bold 18px system-ui, -apple-system, sans-serif';\r\n    ctx.fillText(language === 'ru' ? 'Пропуск для гостя' : 'Mehmon uchun ruxsatnoma', centerX, y);\r\n    y += 28;\r\n\r\n    // Address\r\n    ctx.font = '14px system-ui, -apple-system, sans-serif';\r\n    ctx.fillStyle = '#4b5563';\r\n    const addressText = `${code.residentAddress}, ${language === 'ru' ? 'кв.' : 'xon.'} ${code.residentApartment}`;\r\n    ctx.fillText(addressText, centerX, y);\r\n    y += 24;\r\n\r\n    // Resident name\r\n    ctx.fillText(code.residentName, centerX, y);\r\n    y += 28;\r\n\r\n    // Valid until\r\n    ctx.font = 'bold 14px system-ui, -apple-system, sans-serif';\r\n    ctx.fillStyle = '#059669';\r\n    const validUntil = new Date(code.validUntil).toLocaleString(language === 'ru' ? 'ru-RU' : 'uz-UZ');\r\n    ctx.fillText(`${language === 'ru' ? 'Действует до:' : 'Gacha:'} ${validUntil}`, centerX, y);\r\n\r\n    return new Promise((resolve) => {\r\n      combinedCanvas.toBlob(resolve, 'image/png');\r\n    });\r\n  };\r\n\r\n  const handleShare = async () => {\r\n    // Create combined image with QR code and info\r\n    const combinedBlob = await createImageWithCaption();\r\n\r\n    if (!combinedBlob) {\r\n      handleDownload();\r\n      return;\r\n    }\r\n\r\n    const file = new File([combinedBlob], `guest-pass-${code.id}.png`, { type: 'image/png' });\r\n\r\n    // Check if Web Share API is available and supports files\r\n    if (navigator.share) {\r\n      try {\r\n        const shareData = { files: [file] };\r\n\r\n        // Check if we can share files\r\n        if (navigator.canShare && navigator.canShare(shareData)) {\r\n          await navigator.share(shareData);\r\n          return;\r\n        }\r\n      } catch (err) {\r\n        // If user cancelled, don't fallback\r\n        if ((err as Error).name === 'AbortError') {\r\n          return;\r\n        }\r\n        console.log('File sharing failed:', err);\r\n      }\r\n    }\r\n\r\n    // Desktop fallback: copy image to clipboard\r\n    try {\r\n      await navigator.clipboard.write([\r\n        new ClipboardItem({ 'image/png': combinedBlob })\r\n      ]);\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n\r\n      // Show alert that image was copied\r\n      alert(language === 'ru'\r\n        ? 'QR-код скопирован в буфер обмена. Вставьте его в чат (Ctrl+V)'\r\n        : 'QR-kod buferga nusxalandi. Chatga qo\\'ying (Ctrl+V)');\r\n    } catch (clipErr) {\r\n      console.log('Clipboard failed, downloading instead');\r\n      // Final fallback: download the image\r\n      handleDownload();\r\n    }\r\n  };\r\n\r\n  const visitorLabel = VISITOR_TYPE_LABELS[code.visitorType];\r\n  const accessLabel = ACCESS_TYPE_LABELS[code.accessType];\r\n  const statusLabel = GUEST_ACCESS_STATUS_LABELS[code.status];\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-4 border-b\">\r\n          <h2 className=\"text-lg font-bold\">\r\n            {language === 'ru' ? 'QR-код пропуска' : 'Ruxsatnoma QR-kodi'}\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-xl\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* QR Code */}\r\n        <div className=\"p-6 flex flex-col items-center\">\r\n          <div className=\"bg-white p-4 rounded-2xl shadow-lg border-2 border-gray-100\">\r\n            <canvas ref={canvasRef} />\r\n          </div>\r\n\r\n          {/* Status badge */}\r\n          <div className={`mt-4 px-4 py-2 rounded-full text-sm font-medium ${\r\n            code.status === 'active' ? 'bg-green-100 text-green-700' :\r\n            code.status === 'used' ? 'bg-blue-100 text-blue-700' :\r\n            code.status === 'expired' ? 'bg-gray-100 text-gray-700' :\r\n            'bg-red-100 text-red-700'\r\n          }`}>\r\n            {language === 'ru' ? statusLabel.label : statusLabel.labelUz}\r\n          </div>\r\n\r\n          {/* Info */}\r\n          <div className=\"mt-4 w-full space-y-2 text-sm\">\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-gray-500\">{language === 'ru' ? 'Тип' : 'Turi'}:</span>\r\n              <span className=\"font-medium flex items-center gap-1\">\r\n                {visitorLabel.icon} {language === 'ru' ? visitorLabel.label : visitorLabel.labelUz}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-gray-500\">{language === 'ru' ? 'Срок' : 'Muddat'}:</span>\r\n              <span className=\"font-medium\">{language === 'ru' ? accessLabel.label : accessLabel.labelUz}</span>\r\n            </div>\r\n            {code.visitorName && (\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-500\">{language === 'ru' ? 'Гость' : 'Mehmon'}:</span>\r\n                <span className=\"font-medium\">{code.visitorName}</span>\r\n              </div>\r\n            )}\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-gray-500\">{language === 'ru' ? 'Действует до' : 'Gacha amal qiladi'}:</span>\r\n              <span className=\"font-medium\">{new Date(code.validUntil).toLocaleString(language === 'ru' ? 'ru-RU' : 'uz-UZ')}</span>\r\n            </div>\r\n            {code.accessType !== 'single_use' && (\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-500\">{language === 'ru' ? 'Использовано' : 'Ishlatilgan'}:</span>\r\n                <span className=\"font-medium\">{code.currentUses} / {code.maxUses === 999 ? '∞' : code.maxUses}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"p-4 border-t grid grid-cols-3 gap-2\">\r\n          <button\r\n            onClick={handleShare}\r\n            className=\"flex flex-col items-center gap-1 p-3 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors\"\r\n          >\r\n            <Share2 className=\"w-5 h-5 text-blue-600\" />\r\n            <span className=\"text-xs text-blue-700\">{language === 'ru' ? 'Поделиться' : 'Ulashish'}</span>\r\n          </button>\r\n          <button\r\n            onClick={handleDownload}\r\n            className=\"flex flex-col items-center gap-1 p-3 bg-green-50 hover:bg-green-100 rounded-xl transition-colors\"\r\n          >\r\n            <Download className=\"w-5 h-5 text-green-600\" />\r\n            <span className=\"text-xs text-green-700\">{language === 'ru' ? 'Сохранить' : 'Saqlash'}</span>\r\n          </button>\r\n          <button\r\n            onClick={handleCopy}\r\n            className=\"flex flex-col items-center gap-1 p-3 bg-purple-50 hover:bg-purple-100 rounded-xl transition-colors\"\r\n          >\r\n            <Copy className=\"w-5 h-5 text-purple-600\" />\r\n            <span className=\"text-xs text-purple-700\">\r\n              {copied ? (language === 'ru' ? 'Скопировано!' : 'Nusxa olindi!') : (language === 'ru' ? 'Код' : 'Kod')}\r\n            </span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Create pass form component\r\nfunction CreatePassForm({ onClose, onCreated }: { onClose: () => void; onCreated: (code: GuestAccessCode) => void }) {\r\n  const { user } = useAuthStore();\r\n  const { createGuestAccessCode } = useDataStore();\r\n  const { language } = useLanguageStore();\r\n\r\n  const [step, setStep] = useState(1);\r\n  const [visitorType, setVisitorType] = useState<VisitorType | null>(null);\r\n  const [accessType, setAccessType] = useState<AccessType | null>(null);\r\n  const [visitorName, setVisitorName] = useState('');\r\n  const [visitorPhone, setVisitorPhone] = useState('');\r\n  const [visitorVehiclePlate, setVisitorVehiclePlate] = useState('');\r\n  const [customDate, setCustomDate] = useState('');\r\n  const [notes, setNotes] = useState('');\r\n\r\n  const visitorTypes: { type: VisitorType; icon: React.ReactNode }[] = [\r\n    { type: 'courier', icon: <Package className=\"w-8 h-8\" /> },\r\n    { type: 'guest', icon: <Users className=\"w-8 h-8\" /> },\r\n    { type: 'taxi', icon: <Car className=\"w-8 h-8\" /> },\r\n    { type: 'other', icon: <User className=\"w-8 h-8\" /> },\r\n  ];\r\n\r\n  const accessTypes: AccessType[] = ['single_use', 'day', 'week', 'custom'];\r\n\r\n  const [isCreating, setIsCreating] = useState(false);\r\n\r\n  const handleCreate = async () => {\r\n    if (!visitorType || !accessType || !user || isCreating) {\r\n      console.error('Missing required data:', { visitorType, accessType, user });\r\n      return;\r\n    }\r\n\r\n    setIsCreating(true);\r\n\r\n    let validUntil: string | undefined;\r\n    if (accessType === 'custom' && customDate) {\r\n      validUntil = new Date(customDate).toISOString();\r\n    }\r\n\r\n    console.log('Creating guest access code with:', {\r\n      residentId: user.id,\r\n      residentName: user.name,\r\n      residentPhone: user.phone || 'Не указан',\r\n      residentApartment: user.apartment || '',\r\n      residentAddress: user.address || '',\r\n      visitorType,\r\n      accessType,\r\n    });\r\n\r\n    const code = await createGuestAccessCode({\r\n      residentId: user.id,\r\n      residentName: user.name,\r\n      residentPhone: user.phone || 'Не указан',\r\n      residentApartment: user.apartment || '',\r\n      residentAddress: user.address || '',\r\n      visitorType,\r\n      visitorName: visitorName || undefined,\r\n      visitorPhone: visitorPhone || undefined,\r\n      visitorVehiclePlate: visitorVehiclePlate || undefined,\r\n      accessType,\r\n      validUntil,\r\n      notes: notes || undefined,\r\n    });\r\n\r\n    setIsCreating(false);\r\n\r\n    if (code) {\r\n      console.log('Created code:', code);\r\n      onCreated(code);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-4 border-b\">\r\n          <div className=\"flex items-center gap-2\">\r\n            {step > 1 && (\r\n              <button onClick={() => setStep(step - 1)} className=\"p-2 hover:bg-gray-100 rounded-xl\">\r\n                <ArrowLeft className=\"w-5 h-5\" />\r\n              </button>\r\n            )}\r\n            <h2 className=\"text-lg font-bold\">\r\n              {language === 'ru' ? 'Создать пропуск' : 'Ruxsatnoma yaratish'}\r\n            </h2>\r\n          </div>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-xl\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Progress */}\r\n        <div className=\"px-4 pt-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            {[1, 2, 3].map((s) => (\r\n              <div key={s} className=\"flex-1 flex items-center\">\r\n                <div className={`w-full h-1.5 rounded-full ${s <= step ? 'bg-primary-500' : 'bg-gray-200'}`} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"text-xs text-gray-500 mt-2 text-center\">\r\n            {language === 'ru' ? `Шаг ${step} из 3` : `${step}-qadam 3 dan`}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-4\">\r\n          {/* Step 1: Visitor Type */}\r\n          {step === 1 && (\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-medium text-center\">\r\n                {language === 'ru' ? 'Кого ожидаете?' : 'Kimni kutayapsiz?'}\r\n              </h3>\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                {visitorTypes.map(({ type, icon }) => {\r\n                  const label = VISITOR_TYPE_LABELS[type];\r\n                  return (\r\n                    <button\r\n                      key={type}\r\n                      onClick={() => {\r\n                        setVisitorType(type);\r\n                        setStep(2);\r\n                      }}\r\n                      className={`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${\r\n                        visitorType === type\r\n                          ? 'border-primary-500 bg-primary-50'\r\n                          : 'border-gray-200 hover:border-gray-300'\r\n                      }`}\r\n                    >\r\n                      <div className={visitorType === type ? 'text-primary-600' : 'text-gray-600'}>\r\n                        {icon}\r\n                      </div>\r\n                      <span className=\"font-medium text-sm\">\r\n                        {language === 'ru' ? label.label : label.labelUz}\r\n                      </span>\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 2: Access Type */}\r\n          {step === 2 && (\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-medium text-center\">\r\n                {language === 'ru' ? 'На какой срок?' : 'Qancha muddatga?'}\r\n              </h3>\r\n              <div className=\"space-y-2\">\r\n                {accessTypes.map((type) => {\r\n                  const label = ACCESS_TYPE_LABELS[type];\r\n                  return (\r\n                    <button\r\n                      key={type}\r\n                      onClick={() => {\r\n                        setAccessType(type);\r\n                        setStep(3);\r\n                      }}\r\n                      className={`w-full p-4 rounded-xl border-2 flex items-center gap-3 transition-all text-left ${\r\n                        accessType === type\r\n                          ? 'border-primary-500 bg-primary-50'\r\n                          : 'border-gray-200 hover:border-gray-300'\r\n                      }`}\r\n                    >\r\n                      <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n                        accessType === type ? 'bg-primary-500 text-white' : 'bg-gray-100 text-gray-600'\r\n                      }`}>\r\n                        {type === 'single_use' && <span className=\"text-lg font-bold\">1</span>}\r\n                        {type === 'day' && <Clock className=\"w-5 h-5\" />}\r\n                        {type === 'week' && <Calendar className=\"w-5 h-5\" />}\r\n                        {type === 'custom' && <Calendar className=\"w-5 h-5\" />}\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"font-medium\">\r\n                          {language === 'ru' ? label.label : label.labelUz}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500\">\r\n                          {language === 'ru' ? label.description : label.descriptionUz}\r\n                        </div>\r\n                      </div>\r\n                      <ChevronRight className=\"w-5 h-5 text-gray-400\" />\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 3: Details */}\r\n          {step === 3 && (\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-medium text-center\">\r\n                {language === 'ru' ? 'Дополнительно' : 'Qo\\'shimcha'}\r\n              </h3>\r\n\r\n              {accessType === 'custom' && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {language === 'ru' ? 'Действует до *' : 'Gacha amal qiladi *'}\r\n                  </label>\r\n                  <input\r\n                    type=\"datetime-local\"\r\n                    value={customDate}\r\n                    onChange={(e) => setCustomDate(e.target.value)}\r\n                    className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0\"\r\n                    min={new Date().toISOString().slice(0, 16)}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {(visitorType === 'guest' || visitorType === 'other') && (\r\n                <>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      {language === 'ru' ? 'Имя гостя' : 'Mehmon ismi'}\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={visitorName}\r\n                      onChange={(e) => setVisitorName(e.target.value)}\r\n                      placeholder={language === 'ru' ? 'Иван Иванов' : 'Ism Familiya'}\r\n                      className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      {language === 'ru' ? 'Телефон гостя' : 'Mehmon telefoni'}\r\n                    </label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      value={visitorPhone}\r\n                      onChange={(e) => setVisitorPhone(e.target.value)}\r\n                      placeholder=\"+998 90 123 45 67\"\r\n                      className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0\"\r\n                    />\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {visitorType === 'taxi' && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {language === 'ru' ? 'Номер такси' : 'Taksi raqami'}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={visitorVehiclePlate}\r\n                    onChange={(e) => setVisitorVehiclePlate(e.target.value.toUpperCase())}\r\n                    placeholder=\"01 A 123 BC\"\r\n                    className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0\"\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  {language === 'ru' ? 'Примечание' : 'Izoh'}\r\n                </label>\r\n                <textarea\r\n                  value={notes}\r\n                  onChange={(e) => setNotes(e.target.value)}\r\n                  placeholder={language === 'ru' ? 'Опционально...' : 'Ixtiyoriy...'}\r\n                  rows={2}\r\n                  className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0 resize-none\"\r\n                />\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleCreate}\r\n                disabled={(accessType === 'custom' && !customDate) || isCreating}\r\n                className=\"w-full py-4 bg-primary-500 hover:bg-primary-600 disabled:bg-gray-300 text-gray-900 font-bold rounded-xl transition-colors\"\r\n              >\r\n                {isCreating\r\n                  ? (language === 'ru' ? 'Создание...' : 'Yaratilmoqda...')\r\n                  : (language === 'ru' ? 'Создать пропуск' : 'Ruxsatnoma yaratish')}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Main page component\r\nexport function ResidentGuestAccessPage() {\r\n  const { user } = useAuthStore();\r\n  const { guestAccessCodes, fetchGuestCodes, revokeGuestAccessCode, isLoadingGuestCodes } = useDataStore();\r\n  const { language } = useLanguageStore();\r\n\r\n  const [showCreateForm, setShowCreateForm] = useState(false);\r\n  const [selectedCode, setSelectedCode] = useState<GuestAccessCode | null>(null);\r\n  const [filter, setFilter] = useState<'all' | 'active' | 'used' | 'expired'>('all');\r\n  const [showRevokeConfirm, setShowRevokeConfirm] = useState<GuestAccessCode | null>(null);\r\n\r\n  // Fetch codes on mount\r\n  useEffect(() => {\r\n    fetchGuestCodes();\r\n  }, [fetchGuestCodes]);\r\n\r\n  const allCodes = guestAccessCodes;\r\n\r\n  // Update expired status\r\n  const now = new Date();\r\n  const codes = allCodes.map(c => {\r\n    if (c.status === 'active' && now > new Date(c.validUntil)) {\r\n      return { ...c, status: 'expired' as const };\r\n    }\r\n    return c;\r\n  });\r\n\r\n  const filteredCodes = filter === 'all'\r\n    ? codes\r\n    : codes.filter(c => c.status === filter);\r\n\r\n  const activeCodes = codes.filter(c => c.status === 'active');\r\n\r\n  const handleCreated = (code: GuestAccessCode) => {\r\n    setShowCreateForm(false);\r\n    setSelectedCode(code);\r\n  };\r\n\r\n  const handleRevoke = async () => {\r\n    if (!showRevokeConfirm || !user) return;\r\n    await revokeGuestAccessCode(\r\n      showRevokeConfirm.id,\r\n      user.id,\r\n      user.name,\r\n      user.role,\r\n      language === 'ru' ? 'Отменено жителем' : 'Turar joy egasi tomonidan bekor qilindi'\r\n    );\r\n    setShowRevokeConfirm(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6 pb-20 md:pb-0\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-xl md:text-2xl font-bold text-gray-900\">\r\n            {language === 'ru' ? 'Гостевой доступ' : 'Mehmon kirishi'}\r\n          </h1>\r\n          <p className=\"text-sm text-gray-500 mt-1\">\r\n            {language === 'ru'\r\n              ? 'Создавайте QR-пропуска для гостей и курьеров'\r\n              : 'Mehmonlar va kuryerlar uchun QR-ruxsatnomalar yarating'}\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={() => setShowCreateForm(true)}\r\n          className=\"px-4 py-2.5 bg-primary-500 hover:bg-primary-600 text-gray-900 font-medium rounded-xl flex items-center gap-2 transition-colors shadow-sm\"\r\n        >\r\n          <Plus className=\"w-5 h-5\" />\r\n          <span className=\"hidden sm:inline\">{language === 'ru' ? 'Создать' : 'Yaratish'}</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Stats */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n        <div className=\"glass-card p-4\">\r\n          <div className=\"text-2xl font-bold text-green-600\">{activeCodes.length}</div>\r\n          <div className=\"text-sm text-gray-500\">{language === 'ru' ? 'Активных' : 'Faol'}</div>\r\n        </div>\r\n        <div className=\"glass-card p-4\">\r\n          <div className=\"text-2xl font-bold text-blue-600\">\r\n            {codes.filter(c => c.status === 'used').length}\r\n          </div>\r\n          <div className=\"text-sm text-gray-500\">{language === 'ru' ? 'Использовано' : 'Ishlatilgan'}</div>\r\n        </div>\r\n        <div className=\"glass-card p-4\">\r\n          <div className=\"text-2xl font-bold text-gray-600\">\r\n            {codes.filter(c => c.status === 'expired').length}\r\n          </div>\r\n          <div className=\"text-sm text-gray-500\">{language === 'ru' ? 'Истекло' : 'Muddati tugagan'}</div>\r\n        </div>\r\n        <div className=\"glass-card p-4\">\r\n          <div className=\"text-2xl font-bold text-purple-600\">{codes.length}</div>\r\n          <div className=\"text-sm text-gray-500\">{language === 'ru' ? 'Всего' : 'Jami'}</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filter tabs */}\r\n      <div className=\"flex gap-2 overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0\">\r\n        {[\r\n          { id: 'all' as const, label: language === 'ru' ? 'Все' : 'Barchasi' },\r\n          { id: 'active' as const, label: language === 'ru' ? 'Активные' : 'Faol' },\r\n          { id: 'used' as const, label: language === 'ru' ? 'Использованные' : 'Ishlatilgan' },\r\n          { id: 'expired' as const, label: language === 'ru' ? 'Истекшие' : 'Muddati tugagan' },\r\n        ].map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => setFilter(tab.id)}\r\n            className={`px-4 py-2 rounded-xl font-medium whitespace-nowrap transition-colors ${\r\n              filter === tab.id\r\n                ? 'bg-primary-500 text-gray-900'\r\n                : 'bg-white/50 text-gray-600 hover:bg-white'\r\n            }`}\r\n          >\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Codes list */}\r\n      {isLoadingGuestCodes ? (\r\n        <div className=\"glass-card p-8 text-center\">\r\n          <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center animate-pulse\">\r\n            <QrCode className=\"w-8 h-8 text-gray-400\" />\r\n          </div>\r\n          <h3 className=\"font-medium text-gray-500\">\r\n            {language === 'ru' ? 'Загрузка...' : 'Yuklanmoqda...'}\r\n          </h3>\r\n        </div>\r\n      ) : filteredCodes.length === 0 ? (\r\n        <div className=\"glass-card p-8 text-center\">\r\n          <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\r\n            <QrCode className=\"w-8 h-8 text-gray-400\" />\r\n          </div>\r\n          <h3 className=\"font-medium text-gray-900 mb-1\">\r\n            {language === 'ru' ? 'Пропусков нет' : 'Ruxsatnomalar yo\\'q'}\r\n          </h3>\r\n          <p className=\"text-sm text-gray-500 mb-4\">\r\n            {language === 'ru'\r\n              ? 'Создайте первый пропуск для гостя или курьера'\r\n              : 'Mehmon yoki kuryer uchun birinchi ruxsatnomani yarating'}\r\n          </p>\r\n          <button\r\n            onClick={() => setShowCreateForm(true)}\r\n            className=\"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-gray-900 font-medium rounded-xl inline-flex items-center gap-2\"\r\n          >\r\n            <Plus className=\"w-5 h-5\" />\r\n            {language === 'ru' ? 'Создать пропуск' : 'Ruxsatnoma yaratish'}\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          {filteredCodes.map((code) => {\r\n            const visitorLabel = VISITOR_TYPE_LABELS[code.visitorType];\r\n            const statusLabel = GUEST_ACCESS_STATUS_LABELS[code.status];\r\n            const isExpired = code.status === 'expired';\r\n            const isRevoked = code.status === 'revoked';\r\n            const isUsed = code.status === 'used';\r\n\r\n            return (\r\n              <div\r\n                key={code.id}\r\n                className={`glass-card p-4 ${\r\n                  isExpired || isRevoked ? 'opacity-60' : ''\r\n                }`}\r\n              >\r\n                <div className=\"flex items-start gap-3\">\r\n                  {/* Icon */}\r\n                  <button\r\n                    onClick={() => setSelectedCode(code)}\r\n                    className={`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${\r\n                      code.status === 'active' ? 'bg-green-100 text-green-600' :\r\n                      isUsed ? 'bg-blue-100 text-blue-600' :\r\n                      isRevoked ? 'bg-red-100 text-red-600' :\r\n                      'bg-gray-100 text-gray-600'\r\n                    }`}\r\n                  >\r\n                    <QrCode className=\"w-6 h-6\" />\r\n                  </button>\r\n\r\n                  {/* Info */}\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center gap-2 mb-1\">\r\n                      <span className=\"text-lg\">{visitorLabel.icon}</span>\r\n                      <span className=\"font-medium\">\r\n                        {language === 'ru' ? visitorLabel.label : visitorLabel.labelUz}\r\n                      </span>\r\n                      <span className={`px-2 py-0.5 text-xs rounded-full font-medium ${\r\n                        code.status === 'active' ? 'bg-green-100 text-green-700' :\r\n                        isUsed ? 'bg-blue-100 text-blue-700' :\r\n                        isRevoked ? 'bg-red-100 text-red-700' :\r\n                        'bg-gray-100 text-gray-700'\r\n                      }`}>\r\n                        {language === 'ru' ? statusLabel.label : statusLabel.labelUz}\r\n                      </span>\r\n                    </div>\r\n\r\n                    {code.visitorName && (\r\n                      <div className=\"text-sm text-gray-600 flex items-center gap-1\">\r\n                        <User className=\"w-3.5 h-3.5\" />\r\n                        {code.visitorName}\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"text-sm text-gray-500 flex items-center gap-1 mt-0.5\">\r\n                      <Clock className=\"w-3.5 h-3.5\" />\r\n                      {language === 'ru' ? 'до' : 'gacha'} {new Date(code.validUntil).toLocaleString(language === 'ru' ? 'ru-RU' : 'uz-UZ', {\r\n                        day: 'numeric',\r\n                        month: 'short',\r\n                        hour: '2-digit',\r\n                        minute: '2-digit'\r\n                      })}\r\n                    </div>\r\n\r\n                    {code.accessType !== 'single_use' && !isExpired && !isRevoked && (\r\n                      <div className=\"text-xs text-gray-400 mt-1\">\r\n                        {language === 'ru' ? 'Использований' : 'Ishlatilgan'}: {code.currentUses}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Actions */}\r\n                  <div className=\"flex items-center gap-1\">\r\n                    {code.status === 'active' && (\r\n                      <button\r\n                        onClick={() => setShowRevokeConfirm(code)}\r\n                        className=\"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\r\n                        title={language === 'ru' ? 'Отменить' : 'Bekor qilish'}\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    )}\r\n                    <button\r\n                      onClick={() => setSelectedCode(code)}\r\n                      className=\"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                    >\r\n                      <ChevronRight className=\"w-5 h-5\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Modals */}\r\n      {showCreateForm && (\r\n        <CreatePassForm\r\n          onClose={() => setShowCreateForm(false)}\r\n          onCreated={handleCreated}\r\n        />\r\n      )}\r\n\r\n      {selectedCode && (\r\n        <QRCodeDisplay\r\n          codeId={selectedCode.id}\r\n          onClose={() => setSelectedCode(null)}\r\n        />\r\n      )}\r\n\r\n      {/* Revoke confirmation */}\r\n      {showRevokeConfirm && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-2xl max-w-sm w-full p-6\">\r\n            <div className=\"text-center mb-4\">\r\n              <div className=\"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center\">\r\n                <AlertTriangle className=\"w-8 h-8 text-red-600\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-bold mb-2\">\r\n                {language === 'ru' ? 'Отменить пропуск?' : 'Ruxsatnomani bekor qilasizmi?'}\r\n              </h3>\r\n              <p className=\"text-gray-600 text-sm\">\r\n                {language === 'ru'\r\n                  ? 'Пропуск будет деактивирован и не сможет быть использован'\r\n                  : 'Ruxsatnoma o\\'chiriladi va ishlatib bo\\'lmaydi'}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => setShowRevokeConfirm(null)}\r\n                className=\"flex-1 py-3 border-2 border-gray-200 rounded-xl font-medium hover:bg-gray-50\"\r\n              >\r\n                {language === 'ru' ? 'Нет' : 'Yo\\'q'}\r\n              </button>\r\n              <button\r\n                onClick={handleRevoke}\r\n                className=\"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium\"\r\n              >\r\n                {language === 'ru' ? 'Да, отменить' : 'Ha, bekor qilish'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["QRCodeDisplay","codeId","onClose","language","useLanguageStore","guestAccessCodes","useDataStore","canvasRef","useRef","copied","setCopied","useState","code","c","useEffect","generateQRCodeCanvas","handleCopy","handleDownload","link","createImageWithCaption","qrCanvas","qrSize","combinedCanvas","ctx","padding","textAreaHeight","centerX","y","addressText","validUntil","resolve","handleShare","combinedBlob","file","shareData","err","visitorLabel","VISITOR_TYPE_LABELS","accessLabel","ACCESS_TYPE_LABELS","statusLabel","GUEST_ACCESS_STATUS_LABELS","jsxs","jsx","X","Share2","Download","Copy","CreatePassForm","onCreated","user","useAuthStore","createGuestAccessCode","step","setStep","visitorType","setVisitorType","accessType","setAccessType","visitorName","setVisitorName","visitorPhone","setVisitorPhone","visitorVehiclePlate","setVisitorVehiclePlate","customDate","setCustomDate","notes","setNotes","visitorTypes","Package","Users","Car","User","accessTypes","isCreating","setIsCreating","handleCreate","ArrowLeft","s","type","icon","label","Clock","Calendar","ChevronRight","e","Fragment","ResidentGuestAccessPage","fetchGuestCodes","revokeGuestAccessCode","isLoadingGuestCodes","showCreateForm","setShowCreateForm","selectedCode","setSelectedCode","filter","setFilter","showRevokeConfirm","setShowRevokeConfirm","allCodes","now","codes","filteredCodes","activeCodes","handleCreated","handleRevoke","Plus","tab","QrCode","isExpired","isRevoked","isUsed","Trash2","AlertTriangle"],"mappings":"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"}