{"version":3,"file":"ExecutorAnnouncementsPage-1768381324153-CcAqhfnE.js","sources":["../../src/pages/ExecutorAnnouncementsPage.tsx"],"sourcesContent":["import { useEffect } from 'react';\nimport { Megaphone, AlertTriangle, AlertCircle, Info, Clock } from 'lucide-react';\nimport { useAuthStore } from '../stores/authStore';\nimport { useDataStore } from '../stores/dataStore';\nimport { useLanguageStore } from '../stores/languageStore';\nimport type { Announcement, AnnouncementPriority } from '../types';\n\nexport function ExecutorAnnouncementsPage() {\n  const { user } = useAuthStore();\n  const { getAnnouncementsForEmployees, markAnnouncementAsViewed, fetchAnnouncements } = useDataStore();\n  const { language } = useLanguageStore();\n\n  // Fetch announcements on component mount\n  useEffect(() => {\n    fetchAnnouncements();\n  }, [fetchAnnouncements]);\n\n  const employeeAnnouncements = getAnnouncementsForEmployees();\n  const unreadCount = employeeAnnouncements.filter((a: Announcement) => !a.viewedBy.includes(user?.id || '')).length;\n\n  const getPriorityIcon = (priority: AnnouncementPriority) => {\n    switch (priority) {\n      case 'urgent':\n        return <AlertTriangle className=\"w-4 h-4 text-red-500\" />;\n      case 'important':\n        return <AlertCircle className=\"w-4 h-4 text-amber-500\" />;\n      default:\n        return <Info className=\"w-4 h-4 text-blue-500\" />;\n    }\n  };\n\n  const getPriorityBadge = (priority: AnnouncementPriority) => {\n    switch (priority) {\n      case 'urgent':\n        return 'bg-red-100 text-red-700 border-red-200';\n      case 'important':\n        return 'bg-amber-100 text-amber-700 border-amber-200';\n      default:\n        return 'bg-blue-100 text-blue-700 border-blue-200';\n    }\n  };\n\n  const formatDate = (dateStr: string) => {\n    const date = new Date(dateStr);\n    return date.toLocaleDateString(language === 'ru' ? 'ru-RU' : 'uz-UZ', {\n      day: '2-digit',\n      month: 'short',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  const handleView = (announcement: Announcement) => {\n    if (user && !announcement.viewedBy.includes(user.id)) {\n      markAnnouncementAsViewed(announcement.id, user.id);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4 md:space-y-6 pb-20 md:pb-0\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-xl md:text-2xl font-bold flex items-center gap-3\">\n          <Megaphone className=\"w-7 h-7 text-purple-500\" />\n          {language === 'ru' ? 'Объявления для сотрудников' : 'Xodimlar uchun e\\'lonlar'}\n        </h1>\n        {unreadCount > 0 && (\n          <span className=\"px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-sm font-medium\">\n            {unreadCount} {language === 'ru' ? 'новых' : 'yangi'}\n          </span>\n        )}\n      </div>\n\n      {/* Info Card */}\n      <div className=\"glass-card p-4 bg-purple-50 border-purple-200\">\n        <div className=\"flex items-start gap-3\">\n          <Info className=\"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5\" />\n          <p className=\"text-sm text-purple-700\">\n            {language === 'ru'\n              ? 'Здесь вы найдете важную информацию от руководства. Не забывайте читать объявления регулярно.'\n              : 'Bu yerda rahbariyatdan muhim ma\\'lumotlarni topasiz. E\\'lonlarni muntazam o\\'qishni unutmang.'}\n          </p>\n        </div>\n      </div>\n\n      {/* Announcements List */}\n      {employeeAnnouncements.length === 0 ? (\n        <div className=\"glass-card p-12 text-center\">\n          <Megaphone className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-600 mb-2\">\n            {language === 'ru' ? 'Нет объявлений' : 'E\\'lonlar yo\\'q'}\n          </h3>\n          <p className=\"text-gray-400\">\n            {language === 'ru' ? 'Новые объявления появятся здесь' : 'Yangi e\\'lonlar bu yerda paydo bo\\'ladi'}\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {employeeAnnouncements.map((announcement: Announcement) => {\n            const isUnread = !announcement.viewedBy.includes(user?.id || '');\n\n            return (\n              <div\n                key={announcement.id}\n                className={`glass-card p-5 cursor-pointer transition-all hover:shadow-md ${\n                  isUnread ? 'ring-2 ring-purple-400 bg-purple-50/50' : ''\n                }`}\n                onClick={() => handleView(announcement)}\n              >\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"flex-1 min-w-0\">\n                    {/* Header */}\n                    <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\n                      {isUnread && (\n                        <span className=\"px-2 py-0.5 rounded-full bg-purple-500 text-white text-xs font-medium\">\n                          {language === 'ru' ? 'Новое' : 'Yangi'}\n                        </span>\n                      )}\n                      <span className={`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium border ${getPriorityBadge(announcement.priority)}`}>\n                        {getPriorityIcon(announcement.priority)}\n                        {announcement.priority === 'urgent'\n                          ? (language === 'ru' ? 'Срочно' : 'Shoshilinch')\n                          : announcement.priority === 'important'\n                          ? (language === 'ru' ? 'Важно' : 'Muhim')\n                          : (language === 'ru' ? 'Обычное' : 'Oddiy')}\n                      </span>\n                    </div>\n\n                    {/* Title */}\n                    <h3 className=\"font-semibold text-lg text-gray-900 mb-2\">{announcement.title}</h3>\n\n                    {/* Content */}\n                    <p className=\"text-gray-600 whitespace-pre-wrap\">{announcement.content}</p>\n\n                    {/* Meta */}\n                    <div className=\"flex items-center gap-4 mt-4 text-sm text-gray-500\">\n                      <span className=\"flex items-center gap-1\">\n                        <Clock className=\"w-4 h-4\" />\n                        {formatDate(announcement.createdAt)}\n                      </span>\n                      <span>\n                        {language === 'ru' ? 'Автор' : 'Muallif'}: {announcement.authorName}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["ExecutorAnnouncementsPage","user","useAuthStore","getAnnouncementsForEmployees","markAnnouncementAsViewed","fetchAnnouncements","useDataStore","language","useLanguageStore","useEffect","employeeAnnouncements","unreadCount","a","getPriorityIcon","priority","jsx","AlertTriangle","AlertCircle","Info","getPriorityBadge","formatDate","dateStr","handleView","announcement","jsxs","Megaphone","isUnread","Clock"],"mappings":"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"}