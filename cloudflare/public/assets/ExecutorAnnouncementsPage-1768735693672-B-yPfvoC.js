import{r as g,j as e,M as n,as as c,z as b,N as f,I as y}from"./react-vendor-1768735693672-CIWGlI3X.js";import{b as j,u as N,d as w}from"./index-1768735693672-2PgixYDA.js";import"./vendor-1768735693672-B3Qk4aGE.js";import"./qr-scanner-1768735693672-cr32YHjo.js";import"./zustand-1768735693672-wNUYBKDB.js";function k(){const{user:r}=j(),{getAnnouncementsForEmployees:m,markAnnouncementAsViewed:o,fetchAnnouncements:l}=N(),{language:t}=w();g.useEffect(()=>{l()},[l]);const a=m(),d=a.filter(s=>!s.viewedBy.includes(r?.id||"")).length,x=s=>{switch(s){case"urgent":return e.jsx(y,{className:"w-4 h-4 text-red-500"});case"important":return e.jsx(f,{className:"w-4 h-4 text-amber-500"});default:return e.jsx(c,{className:"w-4 h-4 text-blue-500"})}},u=s=>{switch(s){case"urgent":return"bg-red-100 text-red-700 border-red-200";case"important":return"bg-amber-100 text-amber-700 border-amber-200";default:return"bg-blue-100 text-blue-700 border-blue-200"}},p=s=>new Date(s).toLocaleDateString(t==="ru"?"ru-RU":"uz-UZ",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),h=s=>{r&&!s.viewedBy.includes(r.id)&&o(s.id,r.id)};return e.jsxs("div",{className:"space-y-4 md:space-y-6 pb-20 md:pb-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-xl md:text-2xl font-bold flex items-center gap-3",children:[e.jsx(n,{className:"w-7 h-7 text-purple-500"}),t==="ru"?"Объявления для сотрудников":"Xodimlar uchun e'lonlar"]}),d>0&&e.jsxs("span",{className:"px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-sm font-medium",children:[d," ",t==="ru"?"новых":"yangi"]})]}),e.jsx("div",{className:"glass-card p-4 bg-purple-50 border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(c,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:t==="ru"?"Здесь вы найдете важную информацию от руководства. Не забывайте читать объявления регулярно.":"Bu yerda rahbariyatdan muhim ma'lumotlarni topasiz. E'lonlarni muntazam o'qishni unutmang."})]})}),a.length===0?e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(n,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:t==="ru"?"Нет объявлений":"E'lonlar yo'q"}),e.jsx("p",{className:"text-gray-400",children:t==="ru"?"Новые объявления появятся здесь":"Yangi e'lonlar bu yerda paydo bo'ladi"})]}):e.jsx("div",{className:"space-y-4",children:a.map(s=>{const i=!s.viewedBy.includes(r?.id||"");return e.jsx("div",{className:`glass-card p-5 cursor-pointer transition-all hover:shadow-md ${i?"ring-2 ring-purple-400 bg-purple-50/50":""}`,onClick:()=>h(s),children:e.jsx("div",{className:"flex items-start gap-4",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[i&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-purple-500 text-white text-xs font-medium",children:t==="ru"?"Новое":"Yangi"}),e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium border ${u(s.priority)}`,children:[x(s.priority),s.priority==="urgent"?t==="ru"?"Срочно":"Shoshilinch":s.priority==="important"?t==="ru"?"Важно":"Muhim":t==="ru"?"Обычное":"Oddiy"]})]}),e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:s.content}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"w-4 h-4"}),p(s.createdAt)]}),e.jsxs("span",{children:[t==="ru"?"Автор":"Muallif",": ",s.authorName]})]})]})})},s.id)})})]})}export{k as ExecutorAnnouncementsPage};
//# sourceMappingURL=ExecutorAnnouncementsPage-1768735693672-B-yPfvoC.js.map
