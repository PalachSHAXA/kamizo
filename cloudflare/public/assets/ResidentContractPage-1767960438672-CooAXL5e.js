import{r as l,j as e,F as f,Y as p,_ as y,O as N,a9 as b,U as w}from"./react-vendor-1767960438672-BQZVGAFz.js";import{b as o,d as v}from"./index-1767960438672-C3luc8oy.js";import{g as C}from"./LazyQRCode-1767960438672-Cd9gyXIQ.js";import{C as S,g as R}from"./ContractPreview-1767960438672--oizGkfK.js";import"./vendor-1767960438672-DswYihKv.js";import"./qr-scanner-1767960438672-cr32YHjo.js";import"./zustand-1767960438672-wNUYBKDB.js";function $({language:a}){const{user:s,markContractSigned:d}=o(),[n,m]=l.useState(!1),[t,x]=l.useState(""),[i,c]=l.useState(!1),r=!!s?.contractSignedAt;l.useEffect(()=>{if(!s)return;(async()=>{const g=[`ФИО: ${s.name||"Собственник"}`,`Л/С: ${s.login}`,s.address?`Адрес: ${s.address}`:null,s.apartment?`Кв: ${s.apartment}`:null,s.phone?`Тел: ${s.phone}`:null].filter(Boolean).join(`
`),j=await C(g,{width:300,margin:1,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#ffffff"}});x(j)})()},[s]);const h=async()=>{if(!(!s||!t||i)){c(!0);try{await R(s,t,a),r||await d()}catch{alert(a==="ru"?"Ошибка при генерации договора":"Shartnoma yaratishda xatolik")}finally{c(!1)}}};return s?e.jsxs("div",{className:"glass-card p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${r?"from-green-400 to-green-500":"from-yellow-400 to-yellow-500"} rounded-xl flex items-center justify-center shadow-sm`,children:e.jsx(f,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:a==="ru"?"Договор с УК":"UK bilan shartnoma"}),e.jsx("p",{className:"text-sm text-gray-500",children:r?a==="ru"?`Подписан ${new Date(s.contractSignedAt).toLocaleDateString("ru-RU")}`:`Imzolangan ${new Date(s.contractSignedAt).toLocaleDateString("uz-UZ")}`:a==="ru"?"Ваш уникальный QR-код":"Sizning noyob QR-kodingiz"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 mb-4 flex flex-col items-center",children:[t?e.jsx("img",{src:t,alt:"QR Code",className:"w-40 h-40"}):e.jsx("div",{className:"w-40 h-40 bg-gray-100 rounded animate-pulse"}),e.jsx("p",{className:"text-sm text-gray-500 mt-3 text-center",children:a==="ru"?"Сканируйте для просмотра данных":"Ma'lumotlarni ko'rish uchun skanerlang"})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-3 mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:a==="ru"?"Житель:":"Aholi:"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.name||"—"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:a==="ru"?"Адрес:":"Manzil:"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.address?s.apartment?`${s.address}, кв. ${s.apartment}`:s.address:s.apartment?`кв. ${s.apartment}`:"—"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>m(!n),className:"flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl text-sm font-medium text-gray-700 transition-colors touch-manipulation",children:[n?e.jsx(p,{className:"w-4 h-4"}):e.jsx(y,{className:"w-4 h-4"}),n?a==="ru"?"Скрыть":"Yashirish":a==="ru"?"Посмотреть":"Ko'rish"]}),e.jsxs("button",{onClick:h,disabled:i||!t,className:`flex items-center justify-center gap-2 px-4 py-3 ${r?"bg-green-500 hover:bg-green-600":"bg-yellow-400 hover:bg-yellow-500"} disabled:bg-gray-300 disabled:cursor-not-allowed rounded-xl text-sm font-medium text-gray-900 transition-colors touch-manipulation`,children:[i?e.jsx(N,{className:"w-4 h-4 animate-spin"}):e.jsx(b,{className:"w-4 h-4"}),i?a==="ru"?"Подготовка...":"Tayyorlanmoqda...":r?a==="ru"?"Скачать договор":"Shartnomani yuklash":a==="ru"?"Подписать и скачать":"Imzolash va yuklash"]})]}),n&&e.jsx("div",{className:"mt-4",children:e.jsx(S,{user:s,qrCodeUrl:t,language:a})})]}):null}function E(){const{user:a}=o(),{language:s}=v();return a?e.jsxs("div",{className:"space-y-4 md:space-y-6 pb-20 md:pb-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:s==="ru"?"Договор с УК":"UK bilan shartnoma"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s==="ru"?"Ваш договор и уникальный QR-код":"Sizning shartnomangiz va noyob QR-kodingiz"})]}),e.jsx($,{language:s}),e.jsxs("div",{className:"glass-card p-4 md:p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-gray-600"}),s==="ru"?"Данные профиля":"Profil ma'lumotlari"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:s==="ru"?"ФИО":"F.I.O"}),e.jsx("span",{className:"font-medium text-gray-900",children:a.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:s==="ru"?"Логин":"Login"}),e.jsx("span",{className:"font-medium text-gray-900",children:a.login})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:s==="ru"?"Телефон":"Telefon"}),e.jsx("span",{className:"font-medium text-gray-900",children:a.phone||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:s==="ru"?"Адрес":"Manzil"}),e.jsx("span",{className:"font-medium text-gray-900",children:a.address||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:s==="ru"?"Квартира":"Xonadon"}),e.jsx("span",{className:"font-medium text-gray-900",children:a.apartment||"-"})]}),a.branch&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:s==="ru"?"Филиал":"Filial"}),e.jsx("span",{className:"font-medium text-gray-900",children:a.branch})]}),a.building&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:s==="ru"?"Дом":"Uy"}),e.jsx("span",{className:"font-medium text-gray-900",children:a.building})]})]})]})]}):null}export{E as ResidentContractPage};
//# sourceMappingURL=ResidentContractPage-1767960438672-CooAXL5e.js.map
