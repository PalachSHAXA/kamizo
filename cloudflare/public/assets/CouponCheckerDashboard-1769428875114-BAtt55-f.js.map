{"version":3,"file":"CouponCheckerDashboard-1769428875114-BAtt55-f.js","sources":["../../src/pages/CouponCheckerDashboard.tsx"],"sourcesContent":["import { useState } from 'react';\r\nimport {\r\n  Search, CheckCircle, XCircle, Loader2, Clock, User,\r\n  Phone, AlertTriangle, Calculator, History\r\n} from 'lucide-react';\r\nimport { useAuthStore } from '../stores/authStore';\r\n\r\ninterface CouponInfo {\r\n  id: string;\r\n  code: string;\r\n  ad_id: string;\r\n  ad_title: string;\r\n  ad_phone: string;\r\n  ad_description: string;\r\n  user_id: string;\r\n  user_name: string;\r\n  user_phone: string;\r\n  discount_percent: number;\r\n  status: string;\r\n  issued_at: string;\r\n  expires_at: string;\r\n  activated_at?: string;\r\n}\r\n\r\ninterface ActivationRecord {\r\n  id: string;\r\n  code: string;\r\n  ad_title: string;\r\n  user_name: string;\r\n  discount_percent: number;\r\n  activation_amount: number;\r\n  discount_amount: number;\r\n  activated_at: string;\r\n}\r\n\r\nexport function CouponCheckerDashboard() {\r\n  const { token } = useAuthStore();\r\n  const [couponCode, setCouponCode] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [couponInfo, setCouponInfo] = useState<CouponInfo | null>(null);\r\n  const [valid, setValid] = useState<boolean | null>(null);\r\n  const [reason, setReason] = useState<string>('');\r\n  const [activationAmount, setActivationAmount] = useState<string>('');\r\n  const [activating, setActivating] = useState(false);\r\n  const [activationResult, setActivationResult] = useState<{\r\n    discount_amount: number;\r\n    final_amount: number;\r\n  } | null>(null);\r\n  const [history, setHistory] = useState<ActivationRecord[]>([]);\r\n  const [showHistory, setShowHistory] = useState(false);\r\n  const [loadingHistory, setLoadingHistory] = useState(false);\r\n\r\n  const API_BASE = import.meta.env.VITE_API_URL || '';\r\n\r\n  const checkCoupon = async () => {\r\n    if (!couponCode.trim() || couponCode.length < 6) return;\r\n\r\n    setLoading(true);\r\n    setCouponInfo(null);\r\n    setValid(null);\r\n    setReason('');\r\n    setActivationResult(null);\r\n\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/coupons/check/${couponCode.trim().toUpperCase()}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        setCouponInfo(data.coupon);\r\n        setValid(data.valid);\r\n        setReason(data.reason || '');\r\n      } else {\r\n        setValid(false);\r\n        setReason(data.error || 'Купон не найден');\r\n      }\r\n    } catch (err) {\r\n      setValid(false);\r\n      setReason('Ошибка проверки купона');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const activateCoupon = async () => {\r\n    if (!couponInfo || !valid) return;\r\n\r\n    const amount = parseFloat(activationAmount);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      alert('Введите корректную сумму');\r\n      return;\r\n    }\r\n\r\n    setActivating(true);\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/coupons/activate/${couponInfo.code}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ amount })\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        setActivationResult({\r\n          discount_amount: data.discount_amount,\r\n          final_amount: data.final_amount\r\n        });\r\n        setValid(false);\r\n        setReason('Купон успешно активирован!');\r\n      } else {\r\n        alert(data.error || 'Ошибка активации');\r\n      }\r\n    } catch (err) {\r\n      alert('Ошибка активации купона');\r\n    } finally {\r\n      setActivating(false);\r\n    }\r\n  };\r\n\r\n  const fetchHistory = async () => {\r\n    setLoadingHistory(true);\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/coupons/history`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setHistory(data.activations || []);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch history:', err);\r\n    } finally {\r\n      setLoadingHistory(false);\r\n    }\r\n  };\r\n\r\n  const resetCheck = () => {\r\n    setCouponCode('');\r\n    setCouponInfo(null);\r\n    setValid(null);\r\n    setReason('');\r\n    setActivationAmount('');\r\n    setActivationResult(null);\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      checkCoupon();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">Проверка купонов</h1>\r\n          <p className=\"text-gray-500\">Введите код для проверки и активации</p>\r\n        </div>\r\n        <button\r\n          onClick={() => { setShowHistory(true); fetchHistory(); }}\r\n          className=\"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\r\n        >\r\n          <History className=\"w-5 h-5\" />\r\n          История\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search Box */}\r\n      <div className=\"bg-white rounded-2xl shadow-lg border p-6 mb-6\">\r\n        <div className=\"flex gap-3\">\r\n          <div className=\"relative flex-1\">\r\n            <input\r\n              type=\"text\"\r\n              value={couponCode}\r\n              onChange={e => setCouponCode(e.target.value.toUpperCase())}\r\n              onKeyPress={handleKeyPress}\r\n              placeholder=\"Введите код купона (6 символов)\"\r\n              maxLength={6}\r\n              className=\"w-full px-4 py-4 text-2xl font-mono tracking-widest text-center border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 uppercase\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n          <button\r\n            onClick={checkCoupon}\r\n            disabled={loading || couponCode.length < 6}\r\n            className=\"px-6 py-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n          >\r\n            {loading ? (\r\n              <Loader2 className=\"w-6 h-6 animate-spin\" />\r\n            ) : (\r\n              <Search className=\"w-6 h-6\" />\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {couponCode && (\r\n          <button\r\n            onClick={resetCheck}\r\n            className=\"mt-3 text-sm text-gray-500 hover:text-gray-700\"\r\n          >\r\n            Очистить\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Result */}\r\n      {(couponInfo || valid === false) && (\r\n        <div className={`bg-white rounded-2xl shadow-lg border overflow-hidden ${\r\n          activationResult ? 'border-green-300' : valid ? 'border-green-200' : 'border-red-200'\r\n        }`}>\r\n          {/* Status Header */}\r\n          <div className={`p-4 ${\r\n            activationResult ? 'bg-green-500' : valid ? 'bg-green-100' : 'bg-red-100'\r\n          }`}>\r\n            <div className=\"flex items-center gap-3\">\r\n              {activationResult ? (\r\n                <CheckCircle className=\"w-8 h-8 text-white\" />\r\n              ) : valid ? (\r\n                <CheckCircle className=\"w-8 h-8 text-green-600\" />\r\n              ) : (\r\n                <XCircle className=\"w-8 h-8 text-red-600\" />\r\n              )}\r\n              <div>\r\n                <div className={`font-bold text-lg ${\r\n                  activationResult ? 'text-white' : valid ? 'text-green-800' : 'text-red-800'\r\n                }`}>\r\n                  {activationResult ? 'Купон активирован!' : valid ? 'Купон действителен' : 'Купон недействителен'}\r\n                </div>\r\n                {reason && (\r\n                  <div className={`text-sm ${\r\n                    activationResult ? 'text-green-100' : valid ? 'text-green-600' : 'text-red-600'\r\n                  }`}>\r\n                    {reason}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Coupon Info */}\r\n          {couponInfo && (\r\n            <div className=\"p-4 space-y-4\">\r\n              {/* Code */}\r\n              <div className=\"text-center\">\r\n                <code className=\"text-3xl font-mono font-bold tracking-widest text-gray-900\">\r\n                  {couponInfo.code}\r\n                </code>\r\n              </div>\r\n\r\n              {/* Discount */}\r\n              <div className=\"flex items-center justify-center\">\r\n                <div className=\"px-6 py-3 bg-purple-100 rounded-xl\">\r\n                  <span className=\"text-3xl font-bold text-purple-700\">-{couponInfo.discount_percent}%</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Ad Info */}\r\n              <div className=\"bg-gray-50 rounded-xl p-4 space-y-2\">\r\n                <div className=\"font-semibold text-gray-900\">{couponInfo.ad_title}</div>\r\n                {couponInfo.ad_description && (\r\n                  <div className=\"text-sm text-gray-500\">{couponInfo.ad_description}</div>\r\n                )}\r\n                <div className=\"flex items-center gap-2 text-gray-600\">\r\n                  <Phone className=\"w-4 h-4\" />\r\n                  <span>{couponInfo.ad_phone}</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* User Info */}\r\n              <div className=\"flex items-center gap-3 p-3 bg-blue-50 rounded-xl\">\r\n                <div className=\"w-10 h-10 bg-blue-200 rounded-full flex items-center justify-center\">\r\n                  <User className=\"w-5 h-5 text-blue-700\" />\r\n                </div>\r\n                <div>\r\n                  <div className=\"font-medium text-gray-900\">{couponInfo.user_name}</div>\r\n                  <div className=\"text-sm text-gray-500\">{couponInfo.user_phone}</div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Dates */}\r\n              <div className=\"flex items-center gap-4 text-sm text-gray-500\">\r\n                <div className=\"flex items-center gap-1\">\r\n                  <Clock className=\"w-4 h-4\" />\r\n                  Выдан: {new Date(couponInfo.issued_at).toLocaleDateString('ru-RU')}\r\n                </div>\r\n                {couponInfo.expires_at && (\r\n                  <div className=\"flex items-center gap-1\">\r\n                    <AlertTriangle className=\"w-4 h-4\" />\r\n                    Истекает: {new Date(couponInfo.expires_at).toLocaleDateString('ru-RU')}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Activation Form */}\r\n              {valid && !activationResult && (\r\n                <div className=\"border-t pt-4 mt-4\">\r\n                  <label className=\"block text-sm font-medium mb-2\">\r\n                    Сумма покупки (сум)\r\n                  </label>\r\n                  <div className=\"flex gap-3\">\r\n                    <div className=\"relative flex-1\">\r\n                      <Calculator className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n                      <input\r\n                        type=\"number\"\r\n                        value={activationAmount}\r\n                        onChange={e => setActivationAmount(e.target.value)}\r\n                        placeholder=\"0\"\r\n                        className=\"w-full pl-10 pr-4 py-3 border rounded-xl text-lg\"\r\n                        min=\"0\"\r\n                      />\r\n                    </div>\r\n                    <button\r\n                      onClick={activateCoupon}\r\n                      disabled={activating || !activationAmount}\r\n                      className=\"px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 disabled:opacity-50 flex items-center gap-2\"\r\n                    >\r\n                      {activating ? (\r\n                        <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                      ) : (\r\n                        <CheckCircle className=\"w-5 h-5\" />\r\n                      )}\r\n                      Активировать\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Preview */}\r\n                  {activationAmount && parseFloat(activationAmount) > 0 && (\r\n                    <div className=\"mt-3 p-3 bg-green-50 rounded-xl\">\r\n                      <div className=\"flex justify-between text-sm\">\r\n                        <span>Сумма покупки:</span>\r\n                        <span>{parseFloat(activationAmount).toLocaleString()} сум</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between text-sm text-green-600\">\r\n                        <span>Скидка {couponInfo.discount_percent}%:</span>\r\n                        <span>-{(parseFloat(activationAmount) * couponInfo.discount_percent / 100).toLocaleString()} сум</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between font-bold mt-1 pt-1 border-t border-green-200\">\r\n                        <span>К оплате:</span>\r\n                        <span>{(parseFloat(activationAmount) * (1 - couponInfo.discount_percent / 100)).toLocaleString()} сум</span>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Activation Result */}\r\n              {activationResult && (\r\n                <div className=\"border-t pt-4 mt-4\">\r\n                  <div className=\"p-4 bg-green-50 rounded-xl space-y-2\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Сумма покупки:</span>\r\n                      <span className=\"font-medium\">{(activationResult.final_amount + activationResult.discount_amount).toLocaleString()} сум</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between text-green-600\">\r\n                      <span>Скидка:</span>\r\n                      <span className=\"font-medium\">-{activationResult.discount_amount.toLocaleString()} сум</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between text-lg font-bold pt-2 border-t border-green-200\">\r\n                      <span>К оплате:</span>\r\n                      <span className=\"text-green-700\">{activationResult.final_amount.toLocaleString()} сум</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <button\r\n                    onClick={resetCheck}\r\n                    className=\"w-full mt-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700\"\r\n                  >\r\n                    Проверить другой купон\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* History Modal */}\r\n      {showHistory && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10\">\r\n              <h2 className=\"text-lg font-semibold\">История активаций</h2>\r\n              <button\r\n                onClick={() => setShowHistory(false)}\r\n                className=\"p-2 hover:bg-gray-100 rounded-lg\"\r\n              >\r\n                <XCircle className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-4\">\r\n              {loadingHistory ? (\r\n                <div className=\"flex items-center justify-center py-12\">\r\n                  <Loader2 className=\"w-6 h-6 animate-spin text-blue-600\" />\r\n                </div>\r\n              ) : history.length === 0 ? (\r\n                <div className=\"text-center py-12 text-gray-500\">\r\n                  История пуста\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3\">\r\n                  {history.map(item => (\r\n                    <div key={item.id} className=\"p-4 bg-gray-50 rounded-xl\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <code className=\"px-2 py-1 bg-white border rounded font-mono text-sm\">\r\n                              {item.code}\r\n                            </code>\r\n                            <span className=\"text-sm text-gray-500\">{item.ad_title}</span>\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-500 mt-1\">{item.user_name}</div>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <div className=\"text-green-600 font-medium\">\r\n                            -{item.discount_amount?.toLocaleString()} сум\r\n                          </div>\r\n                          <div className=\"text-xs text-gray-400\">\r\n                            {new Date(item.activated_at).toLocaleString('ru-RU')}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CouponCheckerDashboard","token","useAuthStore","couponCode","setCouponCode","useState","loading","setLoading","couponInfo","setCouponInfo","valid","setValid","reason","setReason","activationAmount","setActivationAmount","activating","setActivating","activationResult","setActivationResult","history","setHistory","showHistory","setShowHistory","loadingHistory","setLoadingHistory","API_BASE","checkCoupon","res","data","activateCoupon","amount","fetchHistory","resetCheck","handleKeyPress","e","jsxs","jsx","History","Loader2","Search","CheckCircle","XCircle","Phone","User","Clock","AlertTriangle","Calculator","item"],"mappings":"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"}