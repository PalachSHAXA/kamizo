{"version":3,"file":"WorkOrdersPage-1768905939422-CIgqX9G7.js","sources":["../../src/pages/WorkOrdersPage.tsx"],"sourcesContent":["import { useState } from 'react';\r\nimport {\r\n  Wrench, Search, Plus, X, Calendar, Clock,\r\n  AlertTriangle, CheckCircle, User, Building2,\r\n  FileText, Play, Pause, Check\r\n} from 'lucide-react';\r\nimport { useCRMStore } from '../stores/crmStore';\r\nimport { useDataStore } from '../stores/dataStore';\r\n\r\ntype WorkOrderStatus = 'pending' | 'scheduled' | 'in_progress' | 'completed' | 'cancelled';\r\ntype WorkOrderPriority = 'low' | 'medium' | 'high' | 'urgent';\r\ntype WorkOrderType = 'planned' | 'preventive' | 'emergency' | 'seasonal';\r\n\r\ninterface WorkOrder {\r\n  id: string;\r\n  number: string;\r\n  title: string;\r\n  description: string;\r\n  type: WorkOrderType;\r\n  priority: WorkOrderPriority;\r\n  status: WorkOrderStatus;\r\n\r\n  buildingId: string;\r\n  apartmentId?: string;\r\n\r\n  assignedTo?: string;\r\n  assignedTeam?: string[];\r\n\r\n  scheduledDate?: string;\r\n  scheduledTime?: string;\r\n  startedAt?: string;\r\n  completedAt?: string;\r\n\r\n  estimatedDuration: number; // minutes\r\n  actualDuration?: number;\r\n\r\n  materials?: { name: string; quantity: number; unit: string }[];\r\n  checklist?: { item: string; completed: boolean }[];\r\n  photos?: string[];\r\n\r\n  requestId?: string; // связь с заявкой жильца\r\n\r\n  notes?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\n// Mock data for work orders\r\nconst mockWorkOrders: WorkOrder[] = [\r\n  {\r\n    id: 'wo-1',\r\n    number: 'НР-2024-001',\r\n    title: 'Плановая проверка лифтового оборудования',\r\n    description: 'Ежемесячная проверка и обслуживание лифтов в доме',\r\n    type: 'planned',\r\n    priority: 'medium',\r\n    status: 'scheduled',\r\n    buildingId: 'building-1',\r\n    assignedTo: 'executor-1',\r\n    scheduledDate: '2024-12-25',\r\n    scheduledTime: '09:00',\r\n    estimatedDuration: 180,\r\n    checklist: [\r\n      { item: 'Проверка тросов', completed: false },\r\n      { item: 'Проверка дверей', completed: false },\r\n      { item: 'Проверка кнопок', completed: false },\r\n      { item: 'Смазка механизмов', completed: false },\r\n    ],\r\n    createdAt: '2024-12-20T10:00:00Z',\r\n    updatedAt: '2024-12-20T10:00:00Z',\r\n  },\r\n  {\r\n    id: 'wo-2',\r\n    number: 'НР-2024-002',\r\n    title: 'Замена счетчика холодной воды',\r\n    description: 'Плановая замена ИПУ по истечении срока поверки',\r\n    type: 'planned',\r\n    priority: 'low',\r\n    status: 'pending',\r\n    buildingId: 'building-1',\r\n    apartmentId: 'apt-1',\r\n    assignedTo: 'executor-2',\r\n    scheduledDate: '2024-12-26',\r\n    estimatedDuration: 60,\r\n    materials: [\r\n      { name: 'Счетчик ИПУ', quantity: 1, unit: 'шт' },\r\n      { name: 'Прокладка', quantity: 2, unit: 'шт' },\r\n    ],\r\n    createdAt: '2024-12-20T11:00:00Z',\r\n    updatedAt: '2024-12-20T11:00:00Z',\r\n  },\r\n  {\r\n    id: 'wo-3',\r\n    number: 'АВ-2024-003',\r\n    title: 'Устранение течи в подвале',\r\n    description: 'Аварийный вызов - течь в подвальном помещении',\r\n    type: 'emergency',\r\n    priority: 'urgent',\r\n    status: 'in_progress',\r\n    buildingId: 'building-2',\r\n    assignedTo: 'executor-1',\r\n    startedAt: '2024-12-21T08:30:00Z',\r\n    estimatedDuration: 120,\r\n    createdAt: '2024-12-21T08:00:00Z',\r\n    updatedAt: '2024-12-21T08:30:00Z',\r\n  },\r\n  {\r\n    id: 'wo-4',\r\n    number: 'СЕЗ-2024-004',\r\n    title: 'Подготовка отопительной системы к зиме',\r\n    description: 'Сезонные работы по подготовке системы отопления',\r\n    type: 'seasonal',\r\n    priority: 'high',\r\n    status: 'completed',\r\n    buildingId: 'building-1',\r\n    assignedTeam: ['executor-1', 'executor-2'],\r\n    scheduledDate: '2024-10-15',\r\n    startedAt: '2024-10-15T09:00:00Z',\r\n    completedAt: '2024-10-15T17:00:00Z',\r\n    estimatedDuration: 480,\r\n    actualDuration: 450,\r\n    checklist: [\r\n      { item: 'Проверка котла', completed: true },\r\n      { item: 'Промывка системы', completed: true },\r\n      { item: 'Опрессовка', completed: true },\r\n      { item: 'Запуск отопления', completed: true },\r\n    ],\r\n    createdAt: '2024-10-10T10:00:00Z',\r\n    updatedAt: '2024-10-15T17:00:00Z',\r\n  },\r\n];\r\n\r\nexport function WorkOrdersPage() {\r\n  const { buildings } = useCRMStore();\r\n  const { executors } = useDataStore();\r\n\r\n  const [workOrders, setWorkOrders] = useState<WorkOrder[]>(mockWorkOrders);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState<string>('all');\r\n  const [filterType, setFilterType] = useState<string>('all');\r\n  const [filterPriority, setFilterPriority] = useState<string>('all');\r\n  const [filterBuilding, setFilterBuilding] = useState<string>('all');\r\n  const [selectedOrder, setSelectedOrder] = useState<WorkOrder | null>(null);\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n\r\n  // Filter work orders\r\n  const filteredOrders = workOrders.filter(order => {\r\n    const matchesSearch = searchQuery === '' ||\r\n      order.number.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      order.title.toLowerCase().includes(searchQuery.toLowerCase());\r\n\r\n    const matchesStatus = filterStatus === 'all' || order.status === filterStatus;\r\n    const matchesType = filterType === 'all' || order.type === filterType;\r\n    const matchesPriority = filterPriority === 'all' || order.priority === filterPriority;\r\n    const matchesBuilding = filterBuilding === 'all' || order.buildingId === filterBuilding;\r\n\r\n    return matchesSearch && matchesStatus && matchesType && matchesPriority && matchesBuilding;\r\n  });\r\n\r\n  // Stats\r\n  const stats = {\r\n    total: workOrders.length,\r\n    pending: workOrders.filter(o => o.status === 'pending').length,\r\n    inProgress: workOrders.filter(o => o.status === 'in_progress').length,\r\n    completed: workOrders.filter(o => o.status === 'completed').length,\r\n    urgent: workOrders.filter(o => o.priority === 'urgent' && o.status !== 'completed').length,\r\n  };\r\n\r\n  const getStatusColor = (status: WorkOrderStatus) => {\r\n    switch (status) {\r\n      case 'pending': return 'bg-gray-100 text-gray-700';\r\n      case 'scheduled': return 'bg-blue-100 text-blue-700';\r\n      case 'in_progress': return 'bg-yellow-100 text-yellow-700';\r\n      case 'completed': return 'bg-green-100 text-green-700';\r\n      case 'cancelled': return 'bg-red-100 text-red-700';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status: WorkOrderStatus) => {\r\n    switch (status) {\r\n      case 'pending': return 'Ожидает';\r\n      case 'scheduled': return 'Запланирован';\r\n      case 'in_progress': return 'Выполняется';\r\n      case 'completed': return 'Завершен';\r\n      case 'cancelled': return 'Отменен';\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority: WorkOrderPriority) => {\r\n    switch (priority) {\r\n      case 'low': return 'text-gray-500';\r\n      case 'medium': return 'text-blue-500';\r\n      case 'high': return 'text-orange-500';\r\n      case 'urgent': return 'text-red-500';\r\n    }\r\n  };\r\n\r\n  const getPriorityLabel = (priority: WorkOrderPriority) => {\r\n    switch (priority) {\r\n      case 'low': return 'Низкий';\r\n      case 'medium': return 'Средний';\r\n      case 'high': return 'Высокий';\r\n      case 'urgent': return 'Срочный';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateStr: string | undefined) => {\r\n    if (!dateStr) return '-';\r\n    return new Date(dateStr).toLocaleDateString('ru-RU');\r\n  };\r\n\r\n  const formatDuration = (minutes: number) => {\r\n    const hours = Math.floor(minutes / 60);\r\n    const mins = minutes % 60;\r\n    if (hours > 0) {\r\n      return `${hours}ч ${mins}м`;\r\n    }\r\n    return `${mins}м`;\r\n  };\r\n\r\n  const updateOrderStatus = (orderId: string, newStatus: WorkOrderStatus) => {\r\n    setWorkOrders(prev => prev.map(order => {\r\n      if (order.id === orderId) {\r\n        const updates: Partial<WorkOrder> = { status: newStatus, updatedAt: new Date().toISOString() };\r\n        if (newStatus === 'in_progress' && !order.startedAt) {\r\n          updates.startedAt = new Date().toISOString();\r\n        }\r\n        if (newStatus === 'completed' && !order.completedAt) {\r\n          updates.completedAt = new Date().toISOString();\r\n          if (order.startedAt) {\r\n            updates.actualDuration = Math.round((Date.now() - new Date(order.startedAt).getTime()) / 60000);\r\n          }\r\n        }\r\n        return { ...order, ...updates };\r\n      }\r\n      return order;\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">Наряды на работы</h1>\r\n          <p className=\"text-gray-500 mt-1\">Управление плановыми и аварийными работами</p>\r\n        </div>\r\n        <button\r\n          onClick={() => setShowAddModal(true)}\r\n          className=\"btn-primary flex items-center gap-2\"\r\n        >\r\n          <Plus className=\"w-4 h-4\" />\r\n          Создать наряд\r\n        </button>\r\n      </div>\r\n\r\n      {/* Stats */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n        <div className=\"glass-card p-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center\">\r\n              <FileText className=\"w-5 h-5 text-blue-600\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">Всего</p>\r\n              <p className=\"text-xl font-bold text-gray-900\">{stats.total}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"glass-card p-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center\">\r\n              <Clock className=\"w-5 h-5 text-gray-600\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">Ожидают</p>\r\n              <p className=\"text-xl font-bold text-gray-900\">{stats.pending}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"glass-card p-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center\">\r\n              <Play className=\"w-5 h-5 text-yellow-600\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">В работе</p>\r\n              <p className=\"text-xl font-bold text-yellow-600\">{stats.inProgress}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"glass-card p-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center\">\r\n              <CheckCircle className=\"w-5 h-5 text-green-600\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">Завершено</p>\r\n              <p className=\"text-xl font-bold text-green-600\">{stats.completed}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"glass-card p-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center\">\r\n              <AlertTriangle className=\"w-5 h-5 text-red-600\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">Срочных</p>\r\n              <p className=\"text-xl font-bold text-red-600\">{stats.urgent}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"glass-card p-4\">\r\n        <div className=\"flex flex-wrap gap-4\">\r\n          <div className=\"flex-1 min-w-[200px]\">\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Поиск по номеру или названию...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <select\r\n            value={filterStatus}\r\n            onChange={(e) => setFilterStatus(e.target.value)}\r\n            className=\"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            <option value=\"all\">Все статусы</option>\r\n            <option value=\"pending\">Ожидает</option>\r\n            <option value=\"scheduled\">Запланирован</option>\r\n            <option value=\"in_progress\">Выполняется</option>\r\n            <option value=\"completed\">Завершен</option>\r\n            <option value=\"cancelled\">Отменен</option>\r\n          </select>\r\n\r\n          <select\r\n            value={filterType}\r\n            onChange={(e) => setFilterType(e.target.value)}\r\n            className=\"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            <option value=\"all\">Все типы</option>\r\n            <option value=\"planned\">Плановый</option>\r\n            <option value=\"preventive\">Профилактика</option>\r\n            <option value=\"emergency\">Аварийный</option>\r\n            <option value=\"seasonal\">Сезонный</option>\r\n          </select>\r\n\r\n          <select\r\n            value={filterPriority}\r\n            onChange={(e) => setFilterPriority(e.target.value)}\r\n            className=\"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            <option value=\"all\">Все приоритеты</option>\r\n            <option value=\"low\">Низкий</option>\r\n            <option value=\"medium\">Средний</option>\r\n            <option value=\"high\">Высокий</option>\r\n            <option value=\"urgent\">Срочный</option>\r\n          </select>\r\n\r\n          <select\r\n            value={filterBuilding}\r\n            onChange={(e) => setFilterBuilding(e.target.value)}\r\n            className=\"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            <option value=\"all\">Все дома</option>\r\n            {buildings.map(b => (\r\n              <option key={b.id} value={b.id}>{b.name}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Work Orders List */}\r\n      <div className=\"space-y-3\">\r\n        {filteredOrders.map((order) => {\r\n          const building = buildings.find(b => b.id === order.buildingId);\r\n          const executor = executors.find(e => e.id === order.assignedTo);\r\n\r\n          return (\r\n            <div\r\n              key={order.id}\r\n              className=\"glass-card p-4 hover:shadow-md transition-shadow cursor-pointer\"\r\n              onClick={() => setSelectedOrder(order)}\r\n            >\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex items-start gap-4\">\r\n                  <div className={`w-12 h-12 rounded-lg flex items-center justify-center ${\r\n                    order.type === 'emergency' ? 'bg-red-100' :\r\n                    order.type === 'seasonal' ? 'bg-orange-100' :\r\n                    order.type === 'preventive' ? 'bg-purple-100' :\r\n                    'bg-blue-100'\r\n                  }`}>\r\n                    <Wrench className={`w-6 h-6 ${\r\n                      order.type === 'emergency' ? 'text-red-600' :\r\n                      order.type === 'seasonal' ? 'text-orange-600' :\r\n                      order.type === 'preventive' ? 'text-purple-600' :\r\n                      'text-blue-600'\r\n                    }`} />\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"flex items-center gap-2 mb-1\">\r\n                      <span className=\"font-mono text-sm text-gray-500\">{order.number}</span>\r\n                      <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${getStatusColor(order.status)}`}>\r\n                        {getStatusLabel(order.status)}\r\n                      </span>\r\n                      <span className={`text-xs font-medium ${getPriorityColor(order.priority)}`}>\r\n                        {getPriorityLabel(order.priority)}\r\n                      </span>\r\n                    </div>\r\n                    <h3 className=\"font-medium text-gray-900 mb-1\">{order.title}</h3>\r\n                    <p className=\"text-sm text-gray-500 line-clamp-1\">{order.description}</p>\r\n\r\n                    <div className=\"flex items-center gap-4 mt-2 text-sm text-gray-500\">\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <Building2 className=\"w-4 h-4\" />\r\n                        <span>{building?.name || 'Не указано'}</span>\r\n                      </div>\r\n                      {order.scheduledDate && (\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <Calendar className=\"w-4 h-4\" />\r\n                          <span>{formatDate(order.scheduledDate)} {order.scheduledTime || ''}</span>\r\n                        </div>\r\n                      )}\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <Clock className=\"w-4 h-4\" />\r\n                        <span>{formatDuration(order.estimatedDuration)}</span>\r\n                      </div>\r\n                      {executor && (\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <User className=\"w-4 h-4\" />\r\n                          <span>{executor.name}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2\" onClick={(e) => e.stopPropagation()}>\r\n                  {order.status === 'pending' && (\r\n                    <button\r\n                      onClick={() => updateOrderStatus(order.id, 'scheduled')}\r\n                      className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\r\n                      title=\"Запланировать\"\r\n                    >\r\n                      <Calendar className=\"w-5 h-5\" />\r\n                    </button>\r\n                  )}\r\n                  {order.status === 'scheduled' && (\r\n                    <button\r\n                      onClick={() => updateOrderStatus(order.id, 'in_progress')}\r\n                      className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors\"\r\n                      title=\"Начать выполнение\"\r\n                    >\r\n                      <Play className=\"w-5 h-5\" />\r\n                    </button>\r\n                  )}\r\n                  {order.status === 'in_progress' && (\r\n                    <>\r\n                      <button\r\n                        onClick={() => updateOrderStatus(order.id, 'scheduled')}\r\n                        className=\"p-2 text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors\"\r\n                        title=\"Приостановить\"\r\n                      >\r\n                        <Pause className=\"w-5 h-5\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => updateOrderStatus(order.id, 'completed')}\r\n                        className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors\"\r\n                        title=\"Завершить\"\r\n                      >\r\n                        <Check className=\"w-5 h-5\" />\r\n                      </button>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {filteredOrders.length === 0 && (\r\n          <div className=\"glass-card p-12 text-center\">\r\n            <Wrench className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\r\n            <p className=\"text-gray-500\">Наряды не найдены</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Work Order Detail Modal */}\r\n      {selectedOrder && (\r\n        <WorkOrderDetailModal\r\n          order={selectedOrder}\r\n          onClose={() => setSelectedOrder(null)}\r\n          onUpdateStatus={(status) => {\r\n            updateOrderStatus(selectedOrder.id, status);\r\n            setSelectedOrder({ ...selectedOrder, status });\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Add Modal */}\r\n      {showAddModal && (\r\n        <WorkOrderFormModal\r\n          onClose={() => setShowAddModal(false)}\r\n          onSave={(order) => {\r\n            const newOrder: WorkOrder = {\r\n              ...order,\r\n              id: `wo-${Date.now()}`,\r\n              number: `НР-2024-${String(workOrders.length + 1).padStart(3, '0')}`,\r\n              status: 'pending',\r\n              createdAt: new Date().toISOString(),\r\n              updatedAt: new Date().toISOString(),\r\n            };\r\n            setWorkOrders([...workOrders, newOrder]);\r\n            setShowAddModal(false);\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction WorkOrderDetailModal({\r\n  order,\r\n  onClose,\r\n  onUpdateStatus\r\n}: {\r\n  order: WorkOrder;\r\n  onClose: () => void;\r\n  onUpdateStatus: (status: WorkOrderStatus) => void;\r\n}) {\r\n  const { buildings, apartments } = useCRMStore();\r\n  const { executors } = useDataStore();\r\n\r\n  const building = buildings.find(b => b.id === order.buildingId);\r\n  const apartment = apartments.find(a => a.id === order.apartmentId);\r\n  const executor = executors.find(e => e.id === order.assignedTo);\r\n\r\n  const getStatusColor = (status: WorkOrderStatus) => {\r\n    switch (status) {\r\n      case 'pending': return 'bg-gray-100 text-gray-700';\r\n      case 'scheduled': return 'bg-blue-100 text-blue-700';\r\n      case 'in_progress': return 'bg-yellow-100 text-yellow-700';\r\n      case 'completed': return 'bg-green-100 text-green-700';\r\n      case 'cancelled': return 'bg-red-100 text-red-700';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status: WorkOrderStatus) => {\r\n    switch (status) {\r\n      case 'pending': return 'Ожидает';\r\n      case 'scheduled': return 'Запланирован';\r\n      case 'in_progress': return 'Выполняется';\r\n      case 'completed': return 'Завершен';\r\n      case 'cancelled': return 'Отменен';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateStr: string | undefined) => {\r\n    if (!dateStr) return '-';\r\n    return new Date(dateStr).toLocaleString('ru-RU');\r\n  };\r\n\r\n  const formatDuration = (minutes: number) => {\r\n    const hours = Math.floor(minutes / 60);\r\n    const mins = minutes % 60;\r\n    if (hours > 0) {\r\n      return `${hours}ч ${mins}м`;\r\n    }\r\n    return `${mins}м`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\" onClick={onClose}>\r\n      <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"p-6 border-b border-gray-100\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <span className=\"font-mono text-gray-500\">{order.number}</span>\r\n                <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${getStatusColor(order.status)}`}>\r\n                  {getStatusLabel(order.status)}\r\n                </span>\r\n              </div>\r\n              <h2 className=\"text-xl font-bold text-gray-900\">{order.title}</h2>\r\n            </div>\r\n            <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\">\r\n              <X className=\"w-5 h-5 text-gray-500\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Description */}\r\n          <div>\r\n            <h3 className=\"font-semibold text-gray-900 mb-2\">Описание</h3>\r\n            <p className=\"text-gray-600\">{order.description}</p>\r\n          </div>\r\n\r\n          {/* Details Grid */}\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"bg-gray-50 rounded-lg p-4\">\r\n              <p className=\"text-sm text-gray-500 mb-1\">Объект</p>\r\n              <p className=\"font-medium\">{building?.name || '-'}</p>\r\n              {apartment && <p className=\"text-sm text-gray-500\">Кв. {apartment.number}</p>}\r\n            </div>\r\n            <div className=\"bg-gray-50 rounded-lg p-4\">\r\n              <p className=\"text-sm text-gray-500 mb-1\">Исполнитель</p>\r\n              <p className=\"font-medium\">{executor?.name || 'Не назначен'}</p>\r\n            </div>\r\n            <div className=\"bg-gray-50 rounded-lg p-4\">\r\n              <p className=\"text-sm text-gray-500 mb-1\">Запланировано</p>\r\n              <p className=\"font-medium\">{order.scheduledDate ? `${order.scheduledDate} ${order.scheduledTime || ''}` : '-'}</p>\r\n            </div>\r\n            <div className=\"bg-gray-50 rounded-lg p-4\">\r\n              <p className=\"text-sm text-gray-500 mb-1\">Длительность</p>\r\n              <p className=\"font-medium\">{formatDuration(order.estimatedDuration)}</p>\r\n              {order.actualDuration && (\r\n                <p className=\"text-sm text-gray-500\">Факт: {formatDuration(order.actualDuration)}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Timeline */}\r\n          {(order.startedAt || order.completedAt) && (\r\n            <div>\r\n              <h3 className=\"font-semibold text-gray-900 mb-3\">Хронология</h3>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-2 h-2 bg-gray-400 rounded-full\" />\r\n                  <span className=\"text-sm text-gray-600\">Создан: {formatDate(order.createdAt)}</span>\r\n                </div>\r\n                {order.startedAt && (\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-2 h-2 bg-orange-400 rounded-full\" />\r\n                    <span className=\"text-sm text-gray-600\">Начат: {formatDate(order.startedAt)}</span>\r\n                  </div>\r\n                )}\r\n                {order.completedAt && (\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-2 h-2 bg-green-400 rounded-full\" />\r\n                    <span className=\"text-sm text-gray-600\">Завершен: {formatDate(order.completedAt)}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Checklist */}\r\n          {order.checklist && order.checklist.length > 0 && (\r\n            <div>\r\n              <h3 className=\"font-semibold text-gray-900 mb-3\">Чек-лист</h3>\r\n              <div className=\"space-y-2\">\r\n                {order.checklist.map((item, index) => (\r\n                  <div key={index} className=\"flex items-center gap-3 p-2 bg-gray-50 rounded-lg\">\r\n                    <div className={`w-5 h-5 rounded flex items-center justify-center ${\r\n                      item.completed ? 'bg-green-500 text-white' : 'bg-gray-200'\r\n                    }`}>\r\n                      {item.completed && <Check className=\"w-3 h-3\" />}\r\n                    </div>\r\n                    <span className={item.completed ? 'text-gray-500 line-through' : 'text-gray-700'}>\r\n                      {item.item}\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Materials */}\r\n          {order.materials && order.materials.length > 0 && (\r\n            <div>\r\n              <h3 className=\"font-semibold text-gray-900 mb-3\">Материалы</h3>\r\n              <div className=\"bg-gray-50 rounded-lg overflow-hidden\">\r\n                <table className=\"w-full text-sm\">\r\n                  <thead className=\"bg-gray-100\">\r\n                    <tr>\r\n                      <th className=\"px-4 py-2 text-left text-gray-600\">Наименование</th>\r\n                      <th className=\"px-4 py-2 text-right text-gray-600\">Количество</th>\r\n                      <th className=\"px-4 py-2 text-left text-gray-600\">Ед.</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {order.materials.map((material, index) => (\r\n                      <tr key={index} className=\"border-t border-gray-100\">\r\n                        <td className=\"px-4 py-2\">{material.name}</td>\r\n                        <td className=\"px-4 py-2 text-right\">{material.quantity}</td>\r\n                        <td className=\"px-4 py-2\">{material.unit}</td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Actions */}\r\n          <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-100\">\r\n            {order.status === 'pending' && (\r\n              <button\r\n                onClick={() => onUpdateStatus('scheduled')}\r\n                className=\"btn-primary\"\r\n              >\r\n                Запланировать\r\n              </button>\r\n            )}\r\n            {order.status === 'scheduled' && (\r\n              <button\r\n                onClick={() => onUpdateStatus('in_progress')}\r\n                className=\"btn-primary\"\r\n              >\r\n                Начать выполнение\r\n              </button>\r\n            )}\r\n            {order.status === 'in_progress' && (\r\n              <button\r\n                onClick={() => onUpdateStatus('completed')}\r\n                className=\"btn-primary\"\r\n              >\r\n                Завершить\r\n              </button>\r\n            )}\r\n            {order.status !== 'completed' && order.status !== 'cancelled' && (\r\n              <button\r\n                onClick={() => onUpdateStatus('cancelled')}\r\n                className=\"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n              >\r\n                Отменить\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction WorkOrderFormModal({\r\n  onClose,\r\n  onSave\r\n}: {\r\n  onClose: () => void;\r\n  onSave: (order: Omit<WorkOrder, 'id' | 'number' | 'status' | 'createdAt' | 'updatedAt'>) => void;\r\n}) {\r\n  const { buildings, apartments } = useCRMStore();\r\n  const { executors } = useDataStore();\r\n\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    type: 'planned' as WorkOrderType,\r\n    priority: 'medium' as WorkOrderPriority,\r\n    buildingId: '',\r\n    apartmentId: '',\r\n    assignedTo: '',\r\n    scheduledDate: '',\r\n    scheduledTime: '',\r\n    estimatedDuration: 60,\r\n  });\r\n\r\n  const filteredApartments = apartments.filter(a => a.buildingId === formData.buildingId);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    onSave({\r\n      title: formData.title,\r\n      description: formData.description,\r\n      type: formData.type,\r\n      priority: formData.priority,\r\n      buildingId: formData.buildingId,\r\n      apartmentId: formData.apartmentId || undefined,\r\n      assignedTo: formData.assignedTo || undefined,\r\n      scheduledDate: formData.scheduledDate || undefined,\r\n      scheduledTime: formData.scheduledTime || undefined,\r\n      estimatedDuration: formData.estimatedDuration,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\" onClick={onClose}>\r\n      <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-xl max-h-[90vh] overflow-y-auto\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"p-6 border-b border-gray-100\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h2 className=\"text-xl font-bold text-gray-900\">Новый наряд</h2>\r\n            <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\">\r\n              <X className=\"w-5 h-5 text-gray-500\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Название *</label>\r\n            <input\r\n              type=\"text\"\r\n              required\r\n              value={formData.title}\r\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              placeholder=\"Краткое описание работы\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Описание</label>\r\n            <textarea\r\n              value={formData.description}\r\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              rows={3}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              placeholder=\"Подробное описание работ\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Тип работы</label>\r\n              <select\r\n                value={formData.type}\r\n                onChange={(e) => setFormData({ ...formData, type: e.target.value as WorkOrderType })}\r\n                className=\"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"planned\">Плановый</option>\r\n                <option value=\"preventive\">Профилактика</option>\r\n                <option value=\"emergency\">Аварийный</option>\r\n                <option value=\"seasonal\">Сезонный</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Приоритет</label>\r\n              <select\r\n                value={formData.priority}\r\n                onChange={(e) => setFormData({ ...formData, priority: e.target.value as WorkOrderPriority })}\r\n                className=\"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"low\">Низкий</option>\r\n                <option value=\"medium\">Средний</option>\r\n                <option value=\"high\">Высокий</option>\r\n                <option value=\"urgent\">Срочный</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Дом *</label>\r\n              <select\r\n                required\r\n                value={formData.buildingId}\r\n                onChange={(e) => setFormData({ ...formData, buildingId: e.target.value, apartmentId: '' })}\r\n                className=\"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"\">Выберите дом</option>\r\n                {buildings.map(b => (\r\n                  <option key={b.id} value={b.id}>{b.name}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Квартира</label>\r\n              <select\r\n                value={formData.apartmentId}\r\n                onChange={(e) => setFormData({ ...formData, apartmentId: e.target.value })}\r\n                className=\"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                disabled={!formData.buildingId}\r\n              >\r\n                <option value=\"\">Общедомовые работы</option>\r\n                {filteredApartments.map(a => (\r\n                  <option key={a.id} value={a.id}>Кв. {a.number}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Исполнитель</label>\r\n            <select\r\n              value={formData.assignedTo}\r\n              onChange={(e) => setFormData({ ...formData, assignedTo: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value=\"\">Не назначен</option>\r\n              {executors.map(e => (\r\n                <option key={e.id} value={e.id}>{e.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-3 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Дата</label>\r\n              <input\r\n                type=\"date\"\r\n                value={formData.scheduledDate}\r\n                onChange={(e) => setFormData({ ...formData, scheduledDate: e.target.value })}\r\n                className=\"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Время</label>\r\n              <input\r\n                type=\"time\"\r\n                value={formData.scheduledTime}\r\n                onChange={(e) => setFormData({ ...formData, scheduledTime: e.target.value })}\r\n                className=\"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Длительность (мин)</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"15\"\r\n                step=\"15\"\r\n                value={formData.estimatedDuration}\r\n                onChange={(e) => setFormData({ ...formData, estimatedDuration: parseInt(e.target.value) || 60 })}\r\n                className=\"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-100\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\r\n            >\r\n              Отмена\r\n            </button>\r\n            <button type=\"submit\" className=\"btn-primary\">\r\n              Создать\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["mockWorkOrders","WorkOrdersPage","buildings","useCRMStore","executors","useDataStore","workOrders","setWorkOrders","useState","searchQuery","setSearchQuery","filterStatus","setFilterStatus","filterType","setFilterType","filterPriority","setFilterPriority","filterBuilding","setFilterBuilding","selectedOrder","setSelectedOrder","showAddModal","setShowAddModal","filteredOrders","order","matchesSearch","matchesStatus","matchesType","matchesPriority","matchesBuilding","stats","o","getStatusColor","status","getStatusLabel","getPriorityColor","priority","getPriorityLabel","formatDate","dateStr","formatDuration","minutes","hours","mins","updateOrderStatus","orderId","newStatus","prev","updates","jsxs","jsx","Plus","FileText","Clock","Play","CheckCircle","AlertTriangle","Search","e","b","building","executor","Wrench","Building2","Calendar","User","Fragment","Pause","Check","WorkOrderDetailModal","WorkOrderFormModal","newOrder","onClose","onUpdateStatus","apartments","apartment","a","X","item","index","material","onSave","formData","setFormData","filteredApartments","handleSubmit"],"mappings":"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"}