{"version":3,"file":"ColleaguesSection-1767960438672-Dqk-dMDh.js","sources":["../../src/pages/ColleaguesSection.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Star, X, Users, Award, TrendingUp, Heart, MessageCircle, Loader2 } from 'lucide-react';\nimport { useDataStore } from '../stores/dataStore';\nimport { useAuthStore } from '../stores/authStore';\nimport { useLanguageStore } from '../stores/languageStore';\nimport { SPECIALIZATION_LABELS, type ExecutorSpecialization } from '../types';\n\n// –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö\ninterface Employee {\n  id: string;\n  name: string;\n  position: string;\n  department: string;\n  photo: string;\n  ratings: {\n    professionalKnowledge: number;\n    legislationKnowledge: number;\n    analyticalSkills: number;\n    qualityOfWork: number;\n    execution: number;\n    reliability: number;\n    teamwork: number;\n    communication: number;\n    initiative: number;\n    humanity: number;\n  };\n  totalRatings: number;\n  monthlyRatings: number;\n  badges: string[];\n}\n\ninterface Rating {\n  id: string;\n  raterId: string;\n  targetId: string;\n  month: number;\n  year: number;\n  ratings: {\n    professionalKnowledge: number;\n    legislationKnowledge: number;\n    analyticalSkills: number;\n    qualityOfWork: number;\n    execution: number;\n    reliability: number;\n    teamwork: number;\n    communication: number;\n    initiative: number;\n    humanity: number;\n  };\n  comment: string;\n  createdAt: string;\n}\n\ninterface Thank {\n  id: string;\n  fromId: string;\n  fromName?: string;\n  toId: string;\n  reason: string;\n  isAnonymous: boolean;\n  createdAt: string;\n}\n\ninterface NewsItem {\n  id: string;\n  type: 'top' | 'thank' | 'department';\n  text: string;\n  createdAt: string;\n}\n\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª–∞ –ø–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏\nconst getDepartmentName = (specialization: ExecutorSpecialization): string => {\n  const departments: Record<ExecutorSpecialization, string> = {\n    plumber: '–°–∞–Ω—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ—Ç–¥–µ–ª',\n    electrician: '–≠–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ—Ç–¥–µ–ª',\n    elevator: '–õ–∏—Ñ—Ç–æ–≤–∞—è —Å–ª—É–∂–±–∞',\n    intercom: '–î–æ–º–æ—Ñ–æ–Ω–Ω–∞—è —Å–ª—É–∂–±–∞',\n    cleaning: '–ö–ª–∏–Ω–∏–Ω–≥',\n    security: '–°–ª—É–∂–±–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏',\n    carpenter: '–°—Ç–æ–ª—è—Ä–Ω—ã–π –æ—Ç–¥–µ–ª',\n    boiler: '–ö–æ—Ç–µ–ª—å–Ω–∞—è —Å–ª—É–∂–±–∞',\n    ac: '–ö–ª–∏–º–∞—Ç-–∫–æ–Ω—Ç—Ä–æ–ª—å',\n    other: '–û–±—â–∏–π –æ—Ç–¥–µ–ª',\n  };\n  return departments[specialization] || '–û–±—â–∏–π –æ—Ç–¥–µ–ª';\n};\n\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–≤–∞—Ç–∞—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏\nconst getAvatarUrl = (name: string, id: string): string => {\n  // –ò—Å–ø–æ–ª—å–∑—É–µ–º DiceBear API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–≤–∞—Ç–∞—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏\n  const seed = encodeURIComponent(name + id);\n  return `https://api.dicebear.com/7.x/initials/svg?seed=${seed}&backgroundColor=f59e0b,eab308,84cc16,22c55e,14b8a6,06b6d4,0ea5e9,3b82f6,6366f1,8b5cf6,a855f7,d946ef,ec4899,f43f5e&backgroundType=gradientLinear`;\n};\n\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–µ–π–¥–∂–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–π—Ç–∏–Ω–≥–∞\nconst generateBadges = (rating: number, completedCount: number): string[] => {\n  const badges: string[] = [];\n  if (rating >= 4.8) badges.push('–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª');\n  if (rating >= 4.5) badges.push('–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å');\n  if (completedCount >= 100) badges.push('–û–ø—ã—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä');\n  if (completedCount >= 50) badges.push('–ú–∞—Å—Ç–µ—Ä');\n  return badges.slice(0, 2); // –ú–∞–∫—Å–∏–º—É–º 2 –±–µ–π–¥–∂–∞\n};\n\nconst criteriaLabels = {\n  professionalKnowledge: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–Ω–∞–Ω–∏—è',\n  legislationKnowledge: '–ó–Ω–∞–Ω–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞',\n  analyticalSkills: '–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏',\n  qualityOfWork: '–ö–∞—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã',\n  execution: '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å',\n  reliability: '–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å',\n  teamwork: '–ö–æ–º–∞–Ω–¥–Ω–æ—Å—Ç—å',\n  communication: '–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è',\n  initiative: '–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å',\n  humanity: '–ß–µ–ª–æ–≤–µ—á–Ω–æ—Å—Ç—å',\n};\n\nconst thankReasons = [\n  '–ü–æ–º–æ–≥ —Å –∑–∞–¥–∞—á–µ–π',\n  '–ü–æ–¥–¥–µ—Ä–∂–∞–ª –≤ —Å–ª–æ–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç',\n  '–ù–∞—É—á–∏–ª —á–µ–º—É-—Ç–æ –Ω–æ–≤–æ–º—É',\n  '–í—ã—Ä—É—á–∏–ª –≤ –¥–µ–¥–ª–∞–π–Ω',\n  '–ü—Ä–æ—Å—Ç–æ —Å–ø–∞—Å–∏–±–æ',\n];\n\n// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–≤—ë–∑–¥\nfunction StarRating({ rating, maxStars = 5, size = 'md', onChange }: {\n  rating: number;\n  maxStars?: number;\n  size?: 'sm' | 'md' | 'lg';\n  onChange?: (rating: number) => void;\n}) {\n  const sizeClass = size === 'sm' ? 'w-4 h-4' : size === 'lg' ? 'w-6 h-6' : 'w-5 h-5';\n\n  return (\n    <div className=\"flex gap-1\">\n      {[...Array(maxStars)].map((_, i) => (\n        <Star\n          key={i}\n          className={`${sizeClass} ${\n            i < Math.floor(rating) ? 'fill-yellow-400 text-yellow-400' : 'text-gray-300'\n          } ${onChange ? 'cursor-pointer hover:scale-110 transition-transform' : ''}`}\n          onClick={() => onChange?.(i + 1)}\n        />\n      ))}\n    </div>\n  );\n}\n\n// –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ü–µ–Ω–∫–∏\nfunction RatingModal({ employee, onClose, onSubmit }: {\n  employee: Employee;\n  onClose: () => void;\n  onSubmit: (ratings: Rating['ratings']) => void;\n}) {\n  const [ratings, setRatings] = useState<Rating['ratings']>({\n    professionalKnowledge: 0,\n    legislationKnowledge: 0,\n    analyticalSkills: 0,\n    qualityOfWork: 0,\n    execution: 0,\n    reliability: 0,\n    teamwork: 0,\n    communication: 0,\n    initiative: 0,\n    humanity: 0,\n  });\n  const [comment, setComment] = useState('');\n\n  const handleSubmit = () => {\n    const allRated = Object.values(ratings).every(r => r > 0);\n    if (!allRated) {\n      alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ü–µ–Ω–∏—Ç–µ –≤—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏');\n      return;\n    }\n    onSubmit(ratings);\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center z-10\">\n          <h2 className=\"text-xl font-bold truncate pr-4\">–û—Ü–µ–Ω–∏—Ç—å: {employee.name}</h2>\n          <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 flex-shrink-0\">\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"px-6 py-4\">\n          <div className=\"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\n            <p className=\"text-sm text-yellow-800\">–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞ –∞–±—Å–æ–ª—é—Ç–Ω–æ –∞–Ω–æ–Ω–∏–º–Ω–∞</p>\n          </div>\n\n          <div className=\"space-y-4\">\n            {Object.entries(criteriaLabels).map(([key, label]) => (\n              <div key={key} className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2\">\n                <span className=\"text-sm font-medium\">{label}</span>\n                <StarRating\n                  rating={ratings[key as keyof typeof ratings]}\n                  onChange={(r) => setRatings({ ...ratings, [key]: r })}\n                />\n              </div>\n            ))}\n          </div>\n\n          <div className=\"mt-6\">\n            <label className=\"block text-sm font-medium mb-2\">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>\n            <textarea\n              value={comment}\n              onChange={(e) => setComment(e.target.value)}\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm resize-none\"\n              rows={4}\n              placeholder=\"–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º–∏ –º—ã—Å–ª—è–º–∏...\"\n            />\n          </div>\n\n          <button\n            onClick={handleSubmit}\n            className=\"w-full mt-6 bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-3 rounded-lg transition-colors\"\n          >\n            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏\nfunction ThankModal({ employee, onClose, onSubmit }: {\n  employee: Employee;\n  onClose: () => void;\n  onSubmit: (reason: string, isAnonymous: boolean) => void;\n}) {\n  const [reason, setReason] = useState(thankReasons[0]);\n  const [isAnonymous, setIsAnonymous] = useState(false);\n\n  const handleSubmit = () => {\n    onSubmit(reason, isAnonymous);\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"border-b border-gray-200 px-6 py-4 flex justify-between items-center\">\n          <h2 className=\"text-xl font-bold truncate pr-4\">–ü–æ–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å: {employee.name}</h2>\n          <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 flex-shrink-0\">\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"px-6 py-4\">\n          <label className=\"block text-sm font-medium mb-2\">–ó–∞ —á—Ç–æ —Å–ø–∞—Å–∏–±–æ?</label>\n          <select\n            value={reason}\n            onChange={(e) => setReason(e.target.value)}\n            className=\"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm mb-4\"\n          >\n            {thankReasons.map((r) => (\n              <option key={r} value={r}>{r}</option>\n            ))}\n          </select>\n\n          <label className=\"flex items-center gap-2 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={isAnonymous}\n              onChange={(e) => setIsAnonymous(e.target.checked)}\n              className=\"w-4 h-4\"\n            />\n            <span className=\"text-sm\">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω–æ</span>\n          </label>\n\n          <button\n            onClick={handleSubmit}\n            className=\"w-full mt-6 bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-3 rounded-lg transition-colors\"\n          >\n            –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ø–∞—Å–∏–±–æ\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// –ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞\nfunction EmployeeProfile({ employee, onBack, thanks }: {\n  employee: Employee;\n  onBack: () => void;\n  thanks: Thank[];\n}) {\n  const avgRating = (Object.values(employee.ratings).reduce((a, b) => a + b, 0) / 10).toFixed(1);\n  const employeeThanks = thanks.filter(t => t.toId === employee.id);\n\n  return (\n    <div className=\"space-y-6\">\n      <button\n        onClick={onBack}\n        className=\"mb-4 flex items-center gap-2 text-gray-600 hover:text-gray-800 font-medium\"\n      >\n        ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É\n      </button>\n\n      <div className=\"glass-card p-4 sm:p-6\">\n        <div className=\"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:gap-6\">\n          <img\n            src={employee.photo}\n            alt={employee.name}\n            className=\"w-20 h-20 sm:w-24 sm:h-24 rounded-xl object-cover flex-shrink-0\"\n          />\n          <div className=\"flex-1 text-center sm:text-left min-w-0\">\n            <h1 className=\"text-xl sm:text-2xl font-bold truncate\">{employee.name}</h1>\n            <p className=\"text-gray-600 mb-1\">{employee.position}</p>\n            <p className=\"text-sm text-gray-500\">{employee.department}</p>\n\n            <div className=\"flex flex-wrap items-center justify-center sm:justify-start gap-2 sm:gap-4 mt-4\">\n              <div className=\"flex items-center gap-2\">\n                <StarRating rating={parseFloat(avgRating)} size=\"sm\" />\n                <span className=\"font-bold text-lg\">{avgRating}</span>\n              </div>\n              <div className=\"text-sm text-gray-600\">\n                {employee.totalRatings} –æ—Ü–µ–Ω–æ–∫\n              </div>\n              <div className=\"text-sm text-gray-600\">\n                {employee.monthlyRatings} –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ\n              </div>\n            </div>\n\n            {employee.badges.length > 0 && (\n              <div className=\"flex flex-wrap justify-center sm:justify-start gap-2 mt-4\">\n                {employee.badges.map((badge, i) => (\n                  <span\n                    key={i}\n                    className=\"px-3 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full flex items-center gap-1\"\n                  >\n                    <Award className=\"w-3 h-3\" />\n                    {badge}\n                  </span>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"glass-card p-4 sm:p-6\">\n        <h2 className=\"text-lg font-bold mb-4\">–û—Ü–µ–Ω–∫–∏ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º</h2>\n        <div className=\"space-y-3\">\n          {Object.entries(criteriaLabels).map(([key, label]) => (\n            <div key={key} className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2\">\n              <span className=\"text-sm truncate\">{label}</span>\n              <div className=\"flex items-center gap-2 flex-shrink-0\">\n                <StarRating rating={employee.ratings[key as keyof typeof employee.ratings]} size=\"sm\" />\n                <span className=\"text-sm font-medium w-8 text-right\">\n                  {employee.ratings[key as keyof typeof employee.ratings].toFixed(1)}\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"glass-card p-4 sm:p-6\">\n        <h2 className=\"text-lg font-bold mb-4\">–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ ({employeeThanks.length})</h2>\n        {employeeThanks.length === 0 ? (\n          <p className=\"text-gray-500 text-sm\">–ü–æ–∫–∞ –Ω–µ—Ç –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–µ–π</p>\n        ) : (\n          <div className=\"space-y-3\">\n            {employeeThanks.map((thank) => (\n              <div key={thank.id} className=\"p-3 bg-gray-50 rounded-lg\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <Heart className=\"w-4 h-4 text-red-500 flex-shrink-0\" />\n                  <span className=\"text-sm font-medium truncate\">\n                    {thank.isAnonymous ? '–ê–Ω–æ–Ω–∏–º–Ω–æ' : thank.fromName}\n                  </span>\n                </div>\n                <p className=\"text-sm text-gray-700\">{thank.reason}</p>\n                <p className=\"text-xs text-gray-400 mt-1\">\n                  {new Date(thank.createdAt).toLocaleDateString()}\n                </p>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// –õ–µ–Ω—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π\nfunction NewsFeed({ news }: { news: NewsItem[] }) {\n  return (\n    <div className=\"glass-card p-4 sm:p-6\">\n      <h2 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\n        <TrendingUp className=\"w-5 h-5 text-primary-500 flex-shrink-0\" />\n        <span className=\"truncate\">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è</span>\n      </h2>\n      <div className=\"space-y-3\">\n        {news.slice(0, 5).map((item) => (\n          <div key={item.id} className=\"flex items-start gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors\">\n            <MessageCircle className=\"w-4 h-4 text-gray-400 mt-1 flex-shrink-0\" />\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm break-words\">{item.text}</p>\n              <p className=\"text-xs text-gray-400 mt-1\">\n                {new Date(item.createdAt).toLocaleDateString()}\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// –¢–æ–ø –∫–æ–ª–ª–µ–≥\nfunction TopColleagues({ employees }: { employees: Employee[] }) {\n  const sortedByRating = [...employees].sort((a, b) => {\n    const avgA = Object.values(a.ratings).reduce((sum, r) => sum + r, 0) / 10;\n    const avgB = Object.values(b.ratings).reduce((sum, r) => sum + r, 0) / 10;\n    return avgB - avgA;\n  });\n\n  const topThree = sortedByRating.slice(0, 3);\n\n  const getBestByCategory = (category: keyof Employee['ratings']) => {\n    return [...employees].sort((a, b) => b.ratings[category] - a.ratings[category])[0];\n  };\n\n  if (employees.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"glass-card p-4 sm:p-6 mb-6 overflow-hidden\">\n      <h2 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\n        <Award className=\"w-5 h-5 text-primary-500 flex-shrink-0\" />\n        <span className=\"truncate\">–õ—É—á—à–∏–µ –∫–æ–ª–ª–µ–≥–∏ –º–µ—Å—è—Ü–∞</span>\n      </h2>\n\n      <div className=\"space-y-3 mb-6\">\n        {topThree.map((emp, i) => {\n          const avgRating = (Object.values(emp.ratings).reduce((a, b) => a + b, 0) / 10).toFixed(1);\n          return (\n            <div\n              key={emp.id}\n              className={`p-3 rounded-xl border-2 flex items-center gap-3 ${\n                i === 0 ? 'border-yellow-400 bg-yellow-50' :\n                i === 1 ? 'border-gray-300 bg-gray-50' :\n                'border-orange-300 bg-orange-50'\n              }`}\n            >\n              <span className=\"text-xl flex-shrink-0\">\n                {i === 0 ? 'ü•á' : i === 1 ? 'ü•à' : 'ü•â'}\n              </span>\n              <img\n                src={emp.photo}\n                alt={emp.name}\n                className=\"w-10 h-10 rounded-lg object-cover flex-shrink-0\"\n              />\n              <div className=\"flex-1 min-w-0\">\n                <h3 className=\"font-bold text-sm truncate\">{emp.name}</h3>\n                <p className=\"text-xs text-gray-600 truncate\">{emp.position}</p>\n              </div>\n              <div className=\"flex items-center gap-1 flex-shrink-0\">\n                <Star className=\"w-4 h-4 fill-yellow-400 text-yellow-400\" />\n                <span className=\"text-sm font-bold\">{avgRating}</span>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {employees.length > 0 && (\n        <>\n          <h3 className=\"font-bold mb-3 text-sm\">–õ–∏–¥–µ—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>\n          <div className=\"space-y-2\">\n            {[\n              { key: 'teamwork' as const, label: '–ö–æ–º–∞–Ω–¥–Ω–æ—Å—Ç—å', icon: 'ü§ù' },\n              { key: 'professionalKnowledge' as const, label: '–ó–Ω–∞–Ω–∏—è', icon: 'üéì' },\n              { key: 'communication' as const, label: '–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è', icon: 'üí¨' },\n              { key: 'initiative' as const, label: '–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å', icon: 'üöÄ' },\n            ].map(({ key, label, icon }) => {\n              const best = getBestByCategory(key);\n              if (!best) return null;\n              return (\n                <div key={key} className=\"flex items-center gap-2 p-2 bg-gray-50 rounded-lg\">\n                  <span className=\"flex-shrink-0\">{icon}</span>\n                  <span className=\"text-xs text-gray-500 flex-shrink-0 w-24\">{label}</span>\n                  <span className=\"text-xs font-medium flex-1 min-w-0 truncate\">{best.name}</span>\n                  <span className=\"text-xs font-bold flex-shrink-0 bg-primary-100 text-primary-700 px-1.5 py-0.5 rounded\">{best.ratings[key].toFixed(1)}</span>\n                </div>\n              );\n            })}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\n// ==================== MAIN COMPONENT ====================\n\n// –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç\nexport function ColleaguesSection() {\n  const { language } = useLanguageStore();\n  const { executors, fetchExecutors, isLoadingExecutors } = useDataStore();\n  const { user } = useAuthStore();\n  const [employees, setEmployees] = useState<Employee[]>([]);\n  const [ratedThisMonth, setRatedThisMonth] = useState<Set<string>>(new Set());\n  const [selectedEmployee, setSelectedEmployee] = useState<Employee | null>(null);\n  const [showRatingModal, setShowRatingModal] = useState<Employee | null>(null);\n  const [showThankModal, setShowThankModal] = useState<Employee | null>(null);\n  const [thanks, setThanks] = useState<Thank[]>([]);\n  const [news, setNews] = useState<NewsItem[]>([]);\n\n  // –ó–∞–≥—Ä—É–∂–∞–µ–º –í–°–ï–• –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ (–¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ–ª–ª–µ–≥)\n  useEffect(() => {\n    // Pass true to get all executors regardless of department\n    fetchExecutors(true);\n  }, [fetchExecutors]);\n\n  // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –≤ Employee —Ñ–æ—Ä–º–∞—Ç\n  useEffect(() => {\n    if (executors.length > 0) {\n      const mappedEmployees: Employee[] = executors.map((executor) => {\n        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ–π—Ç–∏–Ω–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—â–µ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è\n        const baseRating = executor.rating || 4.5;\n        const variance = 0.3; // –ù–µ–±–æ–ª—å—à–æ–π —Ä–∞–∑–±—Ä–æ—Å\n\n        const generateRating = () => {\n          const val = baseRating + (Math.random() - 0.5) * variance * 2;\n          return Math.min(5, Math.max(3.5, parseFloat(val.toFixed(1))));\n        };\n\n        return {\n          id: executor.id,\n          name: executor.name,\n          position: SPECIALIZATION_LABELS[executor.specialization] || '–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç',\n          department: getDepartmentName(executor.specialization),\n          photo: getAvatarUrl(executor.name, executor.id),\n          ratings: {\n            professionalKnowledge: generateRating(),\n            legislationKnowledge: generateRating(),\n            analyticalSkills: generateRating(),\n            qualityOfWork: generateRating(),\n            execution: generateRating(),\n            reliability: generateRating(),\n            teamwork: generateRating(),\n            communication: generateRating(),\n            initiative: generateRating(),\n            humanity: generateRating(),\n          },\n          totalRatings: executor.completedCount || Math.floor(Math.random() * 50) + 10,\n          monthlyRatings: Math.floor(Math.random() * 10) + 1,\n          badges: generateBadges(executor.rating || 4.5, executor.completedCount || 0),\n        };\n      });\n\n      setEmployees(mappedEmployees);\n\n      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏\n      if (mappedEmployees.length > 0) {\n        const initialNews: NewsItem[] = [\n          {\n            id: '1',\n            type: 'top',\n            text: `${mappedEmployees[0]?.name || '–°–æ—Ç—Ä—É–¥–Ω–∏–∫'} –≤–æ—à—ë–ª –≤ —Ç–æ–ø –ª—É—á—à–∏—Ö –∫–æ–ª–ª–µ–≥ –º–µ—Å—è—Ü–∞!`,\n            createdAt: new Date().toISOString(),\n          },\n          {\n            id: '2',\n            type: 'department',\n            text: '–ö–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ',\n            createdAt: new Date().toISOString(),\n          },\n        ];\n        setNews(initialNews);\n      }\n    }\n  }, [executors]);\n\n  // –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–¥–ª—è –ø—Ä–∏–º–µ—Ä–∞)\n  const currentUserId = 'current-user';\n\n  const handleSubmitRating = (targetId: string, ratings: Rating['ratings']) => {\n    setEmployees(prev => prev.map(emp => {\n      if (emp.id === targetId) {\n        const newRatings = { ...emp.ratings };\n        Object.keys(ratings).forEach(key => {\n          const k = key as keyof typeof ratings;\n          const current = emp.ratings[k];\n          const totalCount = emp.totalRatings;\n          newRatings[k] = parseFloat((((current * totalCount) + ratings[k]) / (totalCount + 1)).toFixed(1));\n        });\n\n        return {\n          ...emp,\n          ratings: newRatings,\n          totalRatings: emp.totalRatings + 1,\n          monthlyRatings: emp.monthlyRatings + 1,\n        };\n      }\n      return emp;\n    }));\n\n    setRatedThisMonth(prev => new Set([...prev, targetId]));\n\n    const employee = employees.find(e => e.id === targetId);\n    if (employee) {\n      setNews(prev => [{\n        id: Date.now().toString(),\n        type: 'top',\n        text: `${employee.name} –ø–æ–ª—É—á–∏–ª –Ω–æ–≤—É—é –æ—Ü–µ–Ω–∫—É!`,\n        createdAt: new Date().toISOString(),\n      }, ...prev]);\n    }\n  };\n\n  const handleSubmitThank = (targetId: string, reason: string, isAnonymous: boolean) => {\n    const newThank: Thank = {\n      id: Date.now().toString(),\n      fromId: currentUserId,\n      fromName: isAnonymous ? undefined : '–í—ã',\n      toId: targetId,\n      reason,\n      isAnonymous,\n      createdAt: new Date().toISOString(),\n    };\n\n    setThanks(prev => [newThank, ...prev]);\n\n    const employee = employees.find(e => e.id === targetId);\n    if (employee && !isAnonymous) {\n      setNews(prev => [{\n        id: Date.now().toString(),\n        type: 'thank',\n        text: `${employee.name} –ø–æ–ª—É—á–∏–ª –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å: \"${reason}\"`,\n        createdAt: new Date().toISOString(),\n      }, ...prev]);\n    }\n  };\n\n  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É\n  if (isLoadingExecutors && employees.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary-500 mx-auto mb-4\" />\n          <p className=\"text-gray-600\">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–ª–ª–µ–≥...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (selectedEmployee) {\n    return (\n      <EmployeeProfile\n        employee={selectedEmployee}\n        onBack={() => setSelectedEmployee(null)}\n        thanks={thanks}\n      />\n    );\n  }\n\n  // Check user role for department organization\n  const isDepartmentHead = user?.role === 'department_head';\n  const isExecutor = user?.role === 'executor';\n  const userSpecialization = user?.specialization;\n\n  // For executors and department heads, find their executor record to get specialization\n  // Try to find by login first, then by user id\n  const currentExecutor = (isExecutor || isDepartmentHead)\n    ? executors.find(e => e.login === user?.login || e.id === user?.id)\n    : null;\n  // Use user's specialization directly if available (for department_head), otherwise from executor record\n  const mySpecialization = userSpecialization || currentExecutor?.specialization;\n\n  // Debug log\n  console.log('[Colleagues] User:', user?.name, 'Role:', user?.role, 'Specialization:', userSpecialization);\n  console.log('[Colleagues] Found executor:', currentExecutor?.name, 'Spec:', currentExecutor?.specialization);\n  console.log('[Colleagues] mySpecialization:', mySpecialization);\n\n  // Separate employees into department (my team) and others\n  const myTeamEmployees = mySpecialization\n    ? employees.filter(emp => {\n        // Find the original executor to get specialization\n        const executor = executors.find(e => e.id === emp.id);\n        // Also exclude current user from the list (by id or login)\n        const isCurrentUser = executor?.id === user?.id || executor?.login === user?.login;\n        return executor?.specialization === mySpecialization && !isCurrentUser;\n      })\n    : [];\n\n  const otherEmployees = mySpecialization\n    ? employees.filter(emp => {\n        const executor = executors.find(e => e.id === emp.id);\n        const isCurrentUser = executor?.id === user?.id || executor?.login === user?.login;\n        return executor?.specialization !== mySpecialization && !isCurrentUser;\n      })\n    : employees.filter(emp => {\n        const executor = executors.find(e => e.id === emp.id);\n        const isCurrentUser = executor?.id === user?.id || executor?.login === user?.login;\n        return !isCurrentUser;\n      });\n\n  console.log('[Colleagues] myTeamEmployees:', myTeamEmployees.length, 'otherEmployees:', otherEmployees.length);\n\n  // Group other employees by department for better organization\n  const departmentGroups = otherEmployees.reduce((groups, emp) => {\n    const executor = executors.find(e => e.id === emp.id);\n    const dept = executor?.specialization ? getDepartmentName(executor.specialization) : '–î—Ä—É–≥–∏–µ';\n    if (!groups[dept]) groups[dept] = [];\n    groups[dept].push(emp);\n    return groups;\n  }, {} as Record<string, Employee[]>);\n\n  // Sort department groups - own department first\n  const sortedDepartments = Object.keys(departmentGroups).sort((a, b) => {\n    const myDeptName = mySpecialization ? getDepartmentName(mySpecialization) : '';\n    if (a === myDeptName) return -1;\n    if (b === myDeptName) return 1;\n    return a.localeCompare(b);\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <h1 className=\"text-2xl md:text-3xl font-bold flex items-center gap-3\">\n          <Users className=\"w-8 h-8 text-primary-500 flex-shrink-0\" />\n          <span>{language === 'ru' ? '–ú–æ–∏ –∫–æ–ª–ª–µ–≥–∏' : 'Mening hamkasblarim'}</span>\n        </h1>\n      </div>\n\n      {employees.length === 0 ? (\n        <div className=\"glass-card p-8 text-center\">\n          <Users className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-semibold text-gray-700 mb-2\">\n            {language === 'ru' ? '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–ª–µ–≥–∞—Ö' : \"Hamkasblar haqida ma'lumot yo'q\"}\n          </h3>\n          <p className=\"text-gray-500\">\n            {language === 'ru' ? '–°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ–∫–∞ –ø—É—Å—Ç' : \"Xodimlar ro'yxati hali bo'sh\"}\n          </p>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-2 space-y-6\">\n            {/* My Team Section - For Department Heads and Executors */}\n            {(isDepartmentHead || isExecutor) && myTeamEmployees.length > 0 && (\n              <div className=\"glass-card p-4 sm:p-6\">\n                <h2 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\n                  <span className=\"w-2 h-2 bg-blue-500 rounded-full\"></span>\n                  {language === 'ru'\n                    ? (isDepartmentHead ? `–ú–æ–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (${myTeamEmployees.length})` : `–ú–æ–π –æ—Ç–¥–µ–ª: ${getDepartmentName(mySpecialization as ExecutorSpecialization)} (${myTeamEmployees.length})`)\n                    : (isDepartmentHead ? `Mening xodimlarim (${myTeamEmployees.length})` : `Mening bo'limim (${myTeamEmployees.length})`)}\n                </h2>\n                <div className=\"space-y-3\">\n                  {myTeamEmployees.map((emp) => {\n                    const isRated = ratedThisMonth.has(emp.id);\n                    const avgRating = (Object.values(emp.ratings).reduce((a, b) => a + b, 0) / 10).toFixed(1);\n\n                    return (\n                      <div\n                        key={emp.id}\n                        className=\"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 p-4 bg-blue-50/50 border border-blue-200 rounded-xl hover:bg-blue-50 hover:shadow-md transition-all\"\n                      >\n                        <img\n                          src={emp.photo}\n                          alt={emp.name}\n                          className=\"w-14 h-14 sm:w-16 sm:h-16 rounded-xl object-cover cursor-pointer flex-shrink-0\"\n                          onClick={() => setSelectedEmployee(emp)}\n                        />\n                        <div className=\"flex-1 min-w-0 cursor-pointer\" onClick={() => setSelectedEmployee(emp)}>\n                          <h3 className=\"font-bold truncate\">{emp.name}</h3>\n                          <p className=\"text-sm text-gray-600 truncate\">{emp.position}</p>\n                          <div className=\"flex items-center gap-2 mt-1\">\n                            <StarRating rating={parseFloat(avgRating)} size=\"sm\" />\n                            <span className=\"text-sm font-medium\">{avgRating}</span>\n                          </div>\n                        </div>\n                        <div className=\"flex flex-row sm:flex-col gap-2 w-full sm:w-auto\">\n                          <button\n                            onClick={() => !isRated && setShowRatingModal(emp)}\n                            disabled={isRated}\n                            className={`flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap ${\n                              isRated\n                                ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\n                                : 'bg-primary-500 hover:bg-primary-600 text-gray-900'\n                            }`}\n                          >\n                            {isRated ? '‚úì –û—Ü–µ–Ω–µ–Ω–æ' : '–û—Ü–µ–Ω–∏—Ç—å'}\n                          </button>\n                          <button\n                            onClick={() => setShowThankModal(emp)}\n                            className=\"flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm bg-purple-50 hover:bg-purple-100 text-purple-700 transition-colors whitespace-nowrap\"\n                          >\n                            ‚ù§Ô∏è –°–ø–∞—Å–∏–±–æ\n                          </button>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n            {/* Other Colleagues Section - Organized by Department */}\n            {(isDepartmentHead || isExecutor) && sortedDepartments.length > 0 ? (\n              // Show grouped by department\n              sortedDepartments.map((deptName) => (\n                <div key={deptName} className=\"glass-card p-4 sm:p-6\">\n                  <h2 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\n                    <span className=\"w-2 h-2 bg-gray-400 rounded-full\"></span>\n                    {deptName} ({departmentGroups[deptName].length})\n                  </h2>\n                  <div className=\"space-y-3\">\n                    {departmentGroups[deptName].map((emp) => {\n                      const isRated = ratedThisMonth.has(emp.id);\n                      const avgRating = (Object.values(emp.ratings).reduce((a, b) => a + b, 0) / 10).toFixed(1);\n\n                      return (\n                        <div\n                          key={emp.id}\n                          className=\"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 p-4 bg-white/60 border border-gray-200 rounded-xl hover:bg-white/80 hover:shadow-md transition-all\"\n                        >\n                          <img\n                            src={emp.photo}\n                            alt={emp.name}\n                            className=\"w-14 h-14 sm:w-16 sm:h-16 rounded-xl object-cover cursor-pointer flex-shrink-0\"\n                            onClick={() => setSelectedEmployee(emp)}\n                          />\n                          <div className=\"flex-1 min-w-0 cursor-pointer\" onClick={() => setSelectedEmployee(emp)}>\n                            <h3 className=\"font-bold truncate\">{emp.name}</h3>\n                            <p className=\"text-sm text-gray-600 truncate\">{emp.position}</p>\n                            <div className=\"flex items-center gap-2 mt-1\">\n                              <StarRating rating={parseFloat(avgRating)} size=\"sm\" />\n                              <span className=\"text-sm font-medium\">{avgRating}</span>\n                            </div>\n                          </div>\n                          <div className=\"flex flex-row sm:flex-col gap-2 w-full sm:w-auto\">\n                            <button\n                              onClick={() => !isRated && setShowRatingModal(emp)}\n                              disabled={isRated}\n                              className={`flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap ${\n                                isRated\n                                  ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\n                                  : 'bg-primary-500 hover:bg-primary-600 text-gray-900'\n                              }`}\n                            >\n                              {isRated ? '‚úì –û—Ü–µ–Ω–µ–Ω–æ' : '–û—Ü–µ–Ω–∏—Ç—å'}\n                            </button>\n                            <button\n                              onClick={() => setShowThankModal(emp)}\n                              className=\"flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm bg-purple-50 hover:bg-purple-100 text-purple-700 transition-colors whitespace-nowrap\"\n                            >\n                              ‚ù§Ô∏è –°–ø–∞—Å–∏–±–æ\n                            </button>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n              ))\n            ) : (\n              // Default view - all employees\n              <div className=\"glass-card p-4 sm:p-6\">\n                <h2 className=\"text-lg font-bold mb-4\">\n                  {language === 'ru' ? `–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (${otherEmployees.length})` : `Barcha xodimlar (${otherEmployees.length})`}\n                </h2>\n                <div className=\"space-y-3\">\n                  {otherEmployees.map((emp) => {\n                    const isRated = ratedThisMonth.has(emp.id);\n                    const avgRating = (Object.values(emp.ratings).reduce((a, b) => a + b, 0) / 10).toFixed(1);\n\n                    return (\n                      <div\n                        key={emp.id}\n                        className=\"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 p-4 bg-white/60 border border-gray-200 rounded-xl hover:bg-white/80 hover:shadow-md transition-all\"\n                      >\n                        <img\n                          src={emp.photo}\n                          alt={emp.name}\n                          className=\"w-14 h-14 sm:w-16 sm:h-16 rounded-xl object-cover cursor-pointer flex-shrink-0\"\n                          onClick={() => setSelectedEmployee(emp)}\n                        />\n                        <div className=\"flex-1 min-w-0 cursor-pointer\" onClick={() => setSelectedEmployee(emp)}>\n                          <h3 className=\"font-bold truncate\">{emp.name}</h3>\n                          <p className=\"text-sm text-gray-600 truncate\">{emp.position}</p>\n                          <div className=\"flex items-center gap-2 mt-1\">\n                            <StarRating rating={parseFloat(avgRating)} size=\"sm\" />\n                            <span className=\"text-sm font-medium\">{avgRating}</span>\n                          </div>\n                        </div>\n                        <div className=\"flex flex-row sm:flex-col gap-2 w-full sm:w-auto\">\n                          <button\n                            onClick={() => !isRated && setShowRatingModal(emp)}\n                            disabled={isRated}\n                            className={`flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap ${\n                              isRated\n                                ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\n                                : 'bg-primary-500 hover:bg-primary-600 text-gray-900'\n                            }`}\n                          >\n                            {isRated ? '‚úì –û—Ü–µ–Ω–µ–Ω–æ' : '–û—Ü–µ–Ω–∏—Ç—å'}\n                          </button>\n                          <button\n                            onClick={() => setShowThankModal(emp)}\n                            className=\"flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm bg-purple-50 hover:bg-purple-100 text-purple-700 transition-colors whitespace-nowrap\"\n                          >\n                            ‚ù§Ô∏è –°–ø–∞—Å–∏–±–æ\n                          </button>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div>\n            <TopColleagues employees={employees} />\n            <NewsFeed news={news} />\n          </div>\n        </div>\n      )}\n\n      {showRatingModal && (\n        <RatingModal\n          employee={showRatingModal}\n          onClose={() => setShowRatingModal(null)}\n          onSubmit={(ratings) => {\n            handleSubmitRating(showRatingModal.id, ratings);\n            setShowRatingModal(null);\n          }}\n        />\n      )}\n\n      {showThankModal && (\n        <ThankModal\n          employee={showThankModal}\n          onClose={() => setShowThankModal(null)}\n          onSubmit={(reason, isAnonymous) => {\n            handleSubmitThank(showThankModal.id, reason, isAnonymous);\n            setShowThankModal(null);\n          }}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":["getDepartmentName","specialization","getAvatarUrl","name","id","generateBadges","rating","completedCount","badges","criteriaLabels","thankReasons","StarRating","maxStars","size","onChange","sizeClass","jsx","_","i","Star","RatingModal","employee","onClose","onSubmit","ratings","setRatings","useState","comment","setComment","handleSubmit","r","jsxs","X","key","label","e","ThankModal","reason","setReason","isAnonymous","setIsAnonymous","EmployeeProfile","onBack","thanks","avgRating","b","employeeThanks","t","badge","Award","thank","Heart","NewsFeed","news","TrendingUp","item","MessageCircle","TopColleagues","employees","topThree","a","avgA","sum","getBestByCategory","category","emp","Fragment","icon","best","ColleaguesSection","language","useLanguageStore","executors","fetchExecutors","isLoadingExecutors","useDataStore","user","useAuthStore","setEmployees","ratedThisMonth","setRatedThisMonth","selectedEmployee","setSelectedEmployee","showRatingModal","setShowRatingModal","showThankModal","setShowThankModal","setThanks","setNews","useEffect","mappedEmployees","executor","baseRating","variance","generateRating","val","SPECIALIZATION_LABELS","initialNews","currentUserId","handleSubmitRating","targetId","prev","newRatings","k","current","totalCount","handleSubmitThank","newThank","Loader2","isDepartmentHead","isExecutor","userSpecialization","currentExecutor","mySpecialization","myTeamEmployees","isCurrentUser","otherEmployees","departmentGroups","groups","dept","sortedDepartments","myDeptName","Users","isRated","deptName"],"mappings":"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"}