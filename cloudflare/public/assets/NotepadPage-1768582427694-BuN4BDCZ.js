import{r as n,j as e,i as g,au as p,aZ as y,a8 as v,X as w,a_ as S}from"./react-vendor-1768582427694-B6y3o6MK.js";import{b as k}from"./index-1768582427694-DBI_CkbW.js";import"./vendor-1768582427694-CXLiVVVA.js";import"./qr-scanner-1768582427694-cr32YHjo.js";import"./zustand-1768582427694-wNUYBKDB.js";function C({userId:a}){const[r,h]=n.useState([]),[s,l]=n.useState(null),[c,d]=n.useState(""),[u,x]=n.useState(""),[N,i]=n.useState(!1);n.useEffect(()=>{const t=localStorage.getItem(`notes_${a}`);if(t)try{h(JSON.parse(t))}catch{}},[a]);const m=t=>{h(t),localStorage.setItem(`notes_${a}`,JSON.stringify(t))},b=()=>{if(!c.trim())return;const t={id:Date.now().toString(),title:c,content:u,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};m([t,...r]),d(""),x(""),i(!1)},j=()=>{if(!s)return;const t=r.map(o=>o.id===s.id?{...s,updatedAt:new Date().toISOString()}:o);m(t),l(null)},f=t=>{confirm("Удалить эту заметку?")&&m(r.filter(o=>o.id!==t))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5 text-amber-500"}),e.jsx("h3",{className:"font-semibold",children:"Мои заметки"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",r.length,")"]})]}),e.jsxs("button",{onClick:()=>i(!0),className:"btn-primary flex items-center gap-2 py-2 px-3 text-sm",children:[e.jsx(p,{className:"w-4 h-4"}),"Добавить"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(t=>e.jsxs("div",{className:"glass-card p-4 hover:shadow-lg transition-shadow group",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 line-clamp-1",children:t.title}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>l(t),className:"p-1.5 hover:bg-white/50 rounded-lg text-gray-500 hover:text-blue-600",title:"Редактировать",children:e.jsx(y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(t.id),className:"p-1.5 hover:bg-red-50 rounded-lg text-gray-500 hover:text-red-600",title:"Удалить",children:e.jsx(v,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-wrap line-clamp-4",children:t.content||e.jsx("span",{className:"italic text-gray-400",children:"Нет содержимого"})}),e.jsx("div",{className:"text-xs text-gray-400 mt-3 pt-2 border-t border-gray-100",children:new Date(t.updatedAt).toLocaleDateString("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]},t.id))}),r.length===0&&e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(g,{className:"w-8 h-8 text-amber-500"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Нет заметок"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Создавайте заметки для планирования задач и важных записей"}),e.jsxs("button",{onClick:()=>i(!0),className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Создать первую заметку"]})]}),(N||s)&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[e.jsx("h2",{className:"text-lg font-bold",children:s?"Редактировать заметку":"Новая заметка"}),e.jsx("button",{onClick:()=>{i(!1),l(null),d(""),x("")},className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:e.jsx(w,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Заголовок ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s?s.title:c,onChange:t=>s?l({...s,title:t.target.value}):d(t.target.value),placeholder:"Название заметки...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-400 focus:border-transparent transition-all",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Содержание"}),e.jsx("textarea",{value:s?s.content:u,onChange:t=>s?l({...s,content:t.target.value}):x(t.target.value),placeholder:"Ваши заметки, задачи, планы...",rows:8,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-400 focus:border-transparent transition-all resize-none"})]})]}),e.jsxs("div",{className:"flex gap-3 p-4 border-t border-gray-100 bg-gray-50",children:[e.jsx("button",{onClick:()=>{i(!1),l(null),d(""),x("")},className:"flex-1 py-2.5 px-4 bg-white border border-gray-200 rounded-xl font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Отмена"}),e.jsxs("button",{onClick:()=>s?j():b(),disabled:s?!s.title.trim():!c.trim(),className:"flex-1 py-2.5 px-4 bg-orange-400 hover:bg-orange-500 rounded-xl font-medium text-gray-900 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(S,{className:"w-4 h-4"}),"Сохранить"]})]})]})})]})}function P(){const{user:a}=k();return a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Заметки"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ваши личные заметки и напоминания"})]}),e.jsx(C,{userId:a.id})]}):e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx(g,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Требуется авторизация"})]})}export{P as NotepadPage};
//# sourceMappingURL=NotepadPage-1768582427694-BuN4BDCZ.js.map
