{"version":3,"file":"ResidentVehiclesPage-1768935444692-ygrRRFlx.js","sources":["../../src/pages/ResidentVehiclesPage.tsx"],"sourcesContent":["import { useState, useRef, useEffect, useMemo } from 'react';\r\nimport { Car, Plus, X, Edit2, Trash2, AlertTriangle, AlertCircle, Search, MapPin, Calendar, Building2, User, Phone, Home } from 'lucide-react';\r\nimport { useAuthStore } from '../stores/authStore';\r\nimport { useDataStore } from '../stores/dataStore';\r\nimport { useLanguageStore } from '../stores/languageStore';\r\nimport type { Vehicle, VehicleType, VehicleOwnerType } from '../types';\r\nimport { VEHICLE_TYPE_LABELS, VEHICLE_OWNER_TYPE_LABELS } from '../types';\r\n\r\n// Uzbekistan plate number formats:\r\n// Individual (Физ. лицо): 01 A 123 EA (region + 1 letter + 3 digits + 2 letters)\r\n// Legal entity (Юр. лицо): 01 123 EAA (region + 3 digits + 3 letters)\r\n\r\n// Region codes of Uzbekistan\r\nconst UZ_REGIONS = [\r\n  { code: '01', name: 'Ташкент', nameUz: 'Toshkent' },\r\n  { code: '10', name: 'Ташкентская область', nameUz: 'Toshkent viloyati' },\r\n  { code: '20', name: 'Сырдарьинская область', nameUz: 'Sirdaryo viloyati' },\r\n  { code: '25', name: 'Джизакская область', nameUz: 'Jizzax viloyati' },\r\n  { code: '30', name: 'Самаркандская область', nameUz: 'Samarqand viloyati' },\r\n  { code: '40', name: 'Ферганская область', nameUz: 'Farg\\'ona viloyati' },\r\n  { code: '50', name: 'Наманганская область', nameUz: 'Namangan viloyati' },\r\n  { code: '60', name: 'Андижанская область', nameUz: 'Andijon viloyati' },\r\n  { code: '70', name: 'Кашкадарьинская область', nameUz: 'Qashqadaryo viloyati' },\r\n  { code: '75', name: 'Сурхандарьинская область', nameUz: 'Surxondaryo viloyati' },\r\n  { code: '80', name: 'Бухарская область', nameUz: 'Buxoro viloyati' },\r\n  { code: '85', name: 'Навоийская область', nameUz: 'Navoiy viloyati' },\r\n  { code: '90', name: 'Хорезмская область', nameUz: 'Xorazm viloyati' },\r\n  { code: '95', name: 'Республика Каракалпакстан', nameUz: 'Qoraqalpog\\'iston Respublikasi' },\r\n];\r\n\r\ninterface PlateNumberInputProps {\r\n  ownerType: VehicleOwnerType;\r\n  value: { region: string; letters1: string; digits: string; letters2: string };\r\n  onChange: (value: { region: string; letters1: string; digits: string; letters2: string }) => void;\r\n  language: string;\r\n}\r\n\r\n// UZ Flag component - responsive\r\nconst UZFlag = ({ className = \"w-8 h-5 sm:w-12 sm:h-8\" }: { className?: string }) => (\r\n  <svg viewBox=\"0 0 30 20\" className={className}>\r\n    <rect width=\"30\" height=\"6.67\" fill=\"#1EB53A\"/>\r\n    <rect y=\"6.67\" width=\"30\" height=\"6.67\" fill=\"#FFFFFF\"/>\r\n    <rect y=\"13.33\" width=\"30\" height=\"6.67\" fill=\"#0099B5\"/>\r\n    <rect y=\"6.17\" width=\"30\" height=\"1\" fill=\"#CE1126\"/>\r\n    <rect y=\"12.83\" width=\"30\" height=\"1\" fill=\"#CE1126\"/>\r\n    <circle cx=\"8\" cy=\"3.33\" r=\"2\" fill=\"#FFFFFF\"/>\r\n    <circle cx=\"9\" cy=\"3.33\" r=\"2\" fill=\"#0099B5\"/>\r\n    {[0,1,2,3,4,5,6,7,8,9,10,11].map((i) => (\r\n      <circle key={i} cx={14 + (i % 4) * 2.5} cy={1.5 + Math.floor(i / 4) * 2} r=\"0.6\" fill=\"#FFFFFF\"/>\r\n    ))}\r\n  </svg>\r\n);\r\n\r\n// Search Plate Input Component - universal search supporting both formats\r\ninterface SearchPlateInputProps {\r\n  value: { region: string; letters1: string; digits: string; letters2: string };\r\n  onChange: (value: { region: string; letters1: string; digits: string; letters2: string }) => void;\r\n  language: string;\r\n  onSearch?: () => void;\r\n}\r\n\r\nfunction SearchPlateInput({ value, onChange, language, onSearch }: SearchPlateInputProps) {\r\n  const letters1Ref = useRef<HTMLInputElement>(null);\r\n  const digitsRef = useRef<HTMLInputElement>(null);\r\n  const letters2Ref = useRef<HTMLInputElement>(null);\r\n  const [showRegionDropdown, setShowRegionDropdown] = useState(false);\r\n\r\n  const handleRegionSelect = (code: string) => {\r\n    onChange({ ...value, region: code });\r\n    setShowRegionDropdown(false);\r\n    setTimeout(() => {\r\n      letters1Ref.current?.focus();\r\n    }, 100);\r\n  };\r\n\r\n  const handleLetters1Change = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const val = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '').slice(0, 1);\r\n    if (/^\\d$/.test(val)) {\r\n      onChange({ ...value, letters1: '', digits: val });\r\n      digitsRef.current?.focus();\r\n    } else {\r\n      onChange({ ...value, letters1: val });\r\n      if (val.length === 1) {\r\n        digitsRef.current?.focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDigitsChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const val = e.target.value.replace(/\\D/g, '').slice(0, 3);\r\n    onChange({ ...value, digits: val });\r\n    if (val.length === 3) {\r\n      letters2Ref.current?.focus();\r\n    }\r\n  };\r\n\r\n  const handleLetters2Change = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const val = e.target.value.toUpperCase().replace(/[^A-Z]/g, '').slice(0, 3);\r\n    onChange({ ...value, letters2: val });\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>, field: 'letters1' | 'digits' | 'letters2') => {\r\n    if (e.key === 'Backspace' && (e.target as HTMLInputElement).value === '') {\r\n      if (field === 'letters2') digitsRef.current?.focus();\r\n      else if (field === 'digits') letters1Ref.current?.focus();\r\n    }\r\n    if (e.key === 'Enter' && onSearch) {\r\n      onSearch();\r\n    }\r\n  };\r\n\r\n  const selectedRegion = UZ_REGIONS.find(r => r.code === value.region);\r\n  const isLegalFormat = value.letters1 === '' && value.digits.length > 0;\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center w-full\">\r\n      <div className=\"relative bg-white border-[3px] border-black rounded-xl shadow-xl overflow-visible w-full max-w-[380px]\">\r\n        <div className=\"flex items-center h-14 sm:h-20 bg-white rounded-xl\">\r\n          <div className=\"relative flex items-center justify-center border-r-2 border-black h-full px-2 sm:px-3 bg-gray-50 rounded-l-xl\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowRegionDropdown(!showRegionDropdown)}\r\n              className=\"text-2xl sm:text-4xl font-bold text-center hover:text-primary-600 transition-colors cursor-pointer min-w-[36px] sm:min-w-[50px]\"\r\n            >\r\n              {value.region || <span className=\"text-gray-300\">01</span>}\r\n            </button>\r\n\r\n            {showRegionDropdown && (\r\n              <>\r\n                <div className=\"fixed inset-0 z-[89]\" onClick={() => setShowRegionDropdown(false)} />\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-2xl z-50 max-h-72 overflow-y-auto min-w-[280px]\">\r\n                  {UZ_REGIONS.map((region) => (\r\n                    <button\r\n                      key={region.code}\r\n                      type=\"button\"\r\n                      onClick={() => handleRegionSelect(region.code)}\r\n                      className={`w-full px-4 py-3 text-left hover:bg-primary-50 flex items-center gap-4 transition-colors first:rounded-t-xl last:rounded-b-xl ${\r\n                        value.region === region.code ? 'bg-primary-100 text-primary-700' : ''\r\n                      }`}\r\n                    >\r\n                      <span className=\"text-2xl font-bold text-gray-700 w-10\">{region.code}</span>\r\n                      <span className=\"text-sm text-gray-600\">\r\n                        {language === 'ru' ? region.name : region.nameUz}\r\n                      </span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex-1 flex items-center justify-center px-1 sm:px-2 gap-0.5 sm:gap-1\">\r\n            <input\r\n              ref={letters1Ref}\r\n              type=\"text\"\r\n              value={value.letters1}\r\n              onChange={handleLetters1Change}\r\n              onKeyDown={(e) => handleKeyDown(e, 'letters1')}\r\n              className=\"w-6 sm:w-10 text-2xl sm:text-4xl font-bold text-center outline-none bg-transparent uppercase\"\r\n              placeholder=\"A\"\r\n              maxLength={1}\r\n            />\r\n            <input\r\n              ref={digitsRef}\r\n              type=\"text\"\r\n              inputMode=\"numeric\"\r\n              value={value.digits}\r\n              onChange={handleDigitsChange}\r\n              onKeyDown={(e) => handleKeyDown(e, 'digits')}\r\n              className=\"w-14 sm:w-20 text-2xl sm:text-4xl font-bold text-center outline-none bg-transparent tracking-wider\"\r\n              placeholder=\"123\"\r\n              maxLength={3}\r\n            />\r\n            <input\r\n              ref={letters2Ref}\r\n              type=\"text\"\r\n              value={value.letters2}\r\n              onChange={handleLetters2Change}\r\n              onKeyDown={(e) => handleKeyDown(e, 'letters2')}\r\n              className=\"w-12 sm:w-20 text-2xl sm:text-4xl font-bold text-center outline-none bg-transparent uppercase\"\r\n              placeholder={isLegalFormat ? 'ABC' : 'BC'}\r\n              maxLength={3}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex flex-col items-center justify-center border-l-2 border-black h-full px-1.5 sm:px-3 bg-gray-50 rounded-r-xl\">\r\n            <UZFlag />\r\n            <span className=\"text-xs sm:text-sm font-bold mt-0.5\">UZ</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {selectedRegion && (\r\n        <p className=\"text-sm text-primary-600 mt-3 font-medium\">\r\n          {language === 'ru' ? selectedRegion.name : selectedRegion.nameUz}\r\n        </p>\r\n      )}\r\n\r\n      <p className=\"text-xs text-gray-400 mt-1\">\r\n        {language === 'ru' ? 'Введите любую часть номера для поиска' : 'Qidirish uchun raqamning istalgan qismini kiriting'}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Beautiful plate number input component like avtoraqam.uzex.uz\r\nfunction PlateNumberInput({ ownerType, value, onChange, language }: PlateNumberInputProps) {\r\n  const letters1Ref = useRef<HTMLInputElement>(null);\r\n  const digitsRef = useRef<HTMLInputElement>(null);\r\n  const letters2Ref = useRef<HTMLInputElement>(null);\r\n  const [showRegionDropdown, setShowRegionDropdown] = useState(false);\r\n\r\n  const handleRegionSelect = (code: string) => {\r\n    onChange({ ...value, region: code });\r\n    setShowRegionDropdown(false);\r\n    setTimeout(() => {\r\n      if (ownerType === 'legal_entity' || ownerType === 'service') {\r\n        digitsRef.current?.focus();\r\n      } else {\r\n        letters1Ref.current?.focus();\r\n      }\r\n    }, 100);\r\n  };\r\n\r\n  const handleLetters1Change = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const val = e.target.value.toUpperCase().replace(/[^A-Z]/g, '').slice(0, 1);\r\n    onChange({ ...value, letters1: val });\r\n    if (val.length === 1) {\r\n      digitsRef.current?.focus();\r\n    }\r\n  };\r\n\r\n  const handleDigitsChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const val = e.target.value.replace(/\\D/g, '').slice(0, 3);\r\n    onChange({ ...value, digits: val });\r\n    if (val.length === 3) {\r\n      letters2Ref.current?.focus();\r\n    }\r\n  };\r\n\r\n  const handleLetters2Change = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const maxLen = ownerType === 'legal_entity' || ownerType === 'service' ? 3 : 2;\r\n    const val = e.target.value.toUpperCase().replace(/[^A-Z]/g, '').slice(0, maxLen);\r\n    onChange({ ...value, letters2: val });\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>, field: 'letters1' | 'digits' | 'letters2') => {\r\n    if (e.key === 'Backspace' && (e.target as HTMLInputElement).value === '') {\r\n      if (field === 'letters2') digitsRef.current?.focus();\r\n      else if (field === 'digits') {\r\n        if (ownerType !== 'legal_entity' && ownerType !== 'service') {\r\n          letters1Ref.current?.focus();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // Get selected region name\r\n  const selectedRegion = UZ_REGIONS.find(r => r.code === value.region);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center w-full\">\r\n      {/* License plate like avtoraqam.uzex.uz */}\r\n      <div className=\"relative bg-white border-[3px] border-black rounded-xl shadow-xl overflow-visible w-full max-w-[420px]\">\r\n        <div className=\"flex items-center h-16 sm:h-24 bg-white rounded-xl\">\r\n          {/* Region section with dropdown */}\r\n          <div className=\"relative flex items-center justify-center border-r-2 border-black h-full px-2 sm:px-4 bg-gray-50 rounded-l-xl\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowRegionDropdown(!showRegionDropdown)}\r\n              className=\"text-3xl sm:text-5xl font-bold text-center hover:text-primary-600 transition-colors cursor-pointer min-w-[40px] sm:min-w-[60px]\"\r\n            >\r\n              {value.region || <span className=\"text-gray-300\">01</span>}\r\n            </button>\r\n\r\n            {/* Region dropdown */}\r\n            {showRegionDropdown && (\r\n              <>\r\n                <div className=\"fixed inset-0 z-[100]\" onClick={() => setShowRegionDropdown(false)} />\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-2xl z-[101] max-h-72 overflow-y-auto min-w-[280px]\">\r\n                  {UZ_REGIONS.map((region) => (\r\n                    <button\r\n                      key={region.code}\r\n                      type=\"button\"\r\n                      onClick={() => handleRegionSelect(region.code)}\r\n                      className={`w-full px-4 py-3 text-left hover:bg-primary-50 flex items-center gap-4 transition-colors first:rounded-t-xl last:rounded-b-xl ${\r\n                        value.region === region.code ? 'bg-primary-100 text-primary-700' : ''\r\n                      }`}\r\n                    >\r\n                      <span className=\"text-2xl font-bold text-gray-700 w-10\">{region.code}</span>\r\n                      <span className=\"text-sm text-gray-600\">\r\n                        {language === 'ru' ? region.name : region.nameUz}\r\n                      </span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Number section */}\r\n          <div className=\"flex-1 flex items-center justify-center px-1 sm:px-4\">\r\n            {ownerType !== 'legal_entity' && ownerType !== 'service' ? (\r\n              // Individual: A 123 EA\r\n              <div className=\"flex items-center gap-1 sm:gap-3\">\r\n                <input\r\n                  ref={letters1Ref}\r\n                  type=\"text\"\r\n                  value={value.letters1}\r\n                  onChange={handleLetters1Change}\r\n                  onKeyDown={(e) => handleKeyDown(e, 'letters1')}\r\n                  className=\"w-8 sm:w-14 text-3xl sm:text-5xl font-bold text-center outline-none bg-transparent uppercase\"\r\n                  placeholder=\"A\"\r\n                  maxLength={1}\r\n                />\r\n                <input\r\n                  ref={digitsRef}\r\n                  type=\"text\"\r\n                  inputMode=\"numeric\"\r\n                  value={value.digits}\r\n                  onChange={handleDigitsChange}\r\n                  onKeyDown={(e) => handleKeyDown(e, 'digits')}\r\n                  className=\"w-16 sm:w-28 text-3xl sm:text-5xl font-bold text-center outline-none bg-transparent tracking-wider\"\r\n                  placeholder=\"123\"\r\n                  maxLength={3}\r\n                />\r\n                <input\r\n                  ref={letters2Ref}\r\n                  type=\"text\"\r\n                  value={value.letters2}\r\n                  onChange={handleLetters2Change}\r\n                  onKeyDown={(e) => handleKeyDown(e, 'letters2')}\r\n                  className=\"w-12 sm:w-20 text-3xl sm:text-5xl font-bold text-center outline-none bg-transparent uppercase\"\r\n                  placeholder=\"EA\"\r\n                  maxLength={2}\r\n                />\r\n              </div>\r\n            ) : (\r\n              // Legal entity/Service: 123 EAA\r\n              <div className=\"flex items-center gap-1 sm:gap-3\">\r\n                <input\r\n                  ref={digitsRef}\r\n                  type=\"text\"\r\n                  inputMode=\"numeric\"\r\n                  value={value.digits}\r\n                  onChange={handleDigitsChange}\r\n                  onKeyDown={(e) => handleKeyDown(e, 'digits')}\r\n                  className=\"w-16 sm:w-28 text-3xl sm:text-5xl font-bold text-center outline-none bg-transparent tracking-wider\"\r\n                  placeholder=\"123\"\r\n                  maxLength={3}\r\n                />\r\n                <input\r\n                  ref={letters2Ref}\r\n                  type=\"text\"\r\n                  value={value.letters2}\r\n                  onChange={handleLetters2Change}\r\n                  onKeyDown={(e) => handleKeyDown(e, 'letters2')}\r\n                  className=\"w-16 sm:w-28 text-3xl sm:text-5xl font-bold text-center outline-none bg-transparent uppercase\"\r\n                  placeholder=\"EAA\"\r\n                  maxLength={3}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Flag section */}\r\n          <div className=\"flex flex-col items-center justify-center border-l-2 border-black h-full px-1.5 sm:px-3 bg-gray-50 rounded-r-xl\">\r\n            <UZFlag />\r\n            <span className=\"text-xs sm:text-base font-bold mt-0.5 sm:mt-1\">UZ</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Selected region hint */}\r\n      {selectedRegion && (\r\n        <p className=\"text-sm text-primary-600 mt-3 font-medium\">\r\n          {language === 'ru' ? selectedRegion.name : selectedRegion.nameUz}\r\n        </p>\r\n      )}\r\n\r\n      {/* Format hint */}\r\n      <p className=\"text-xs text-gray-400 mt-1\">\r\n        {language === 'ru' ? 'Нажмите на код региона для выбора' : 'Viloyat kodini tanlash uchun bosing'}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Parse plate number to parts\r\nfunction parsePlateNumber(plate: string, ownerType: VehicleOwnerType): { region: string; letters1: string; digits: string; letters2: string } {\r\n  const cleaned = plate.toUpperCase().replace(/[^A-Z0-9]/g, '');\r\n\r\n  if (ownerType === 'legal_entity' || ownerType === 'service') {\r\n    // Format: 01123EAA\r\n    return {\r\n      region: cleaned.slice(0, 2),\r\n      letters1: '',\r\n      digits: cleaned.slice(2, 5),\r\n      letters2: cleaned.slice(5, 8),\r\n    };\r\n  } else {\r\n    // Format: 01A123EA\r\n    return {\r\n      region: cleaned.slice(0, 2),\r\n      letters1: cleaned.slice(2, 3),\r\n      digits: cleaned.slice(3, 6),\r\n      letters2: cleaned.slice(6, 8),\r\n    };\r\n  }\r\n}\r\n\r\n// Combine parts to plate number\r\nfunction combinePlateNumber(parts: { region: string; letters1: string; digits: string; letters2: string }, ownerType: VehicleOwnerType): string {\r\n  if (ownerType === 'legal_entity' || ownerType === 'service') {\r\n    return `${parts.region}${parts.digits}${parts.letters2}`.toUpperCase();\r\n  } else {\r\n    return `${parts.region}${parts.letters1}${parts.digits}${parts.letters2}`.toUpperCase();\r\n  }\r\n}\r\n\r\n// Validate plate number\r\nfunction validatePlateNumber(parts: { region: string; letters1: string; digits: string; letters2: string }, ownerType: VehicleOwnerType): boolean {\r\n  const region = parseInt(parts.region);\r\n  if (isNaN(region) || region < 1 || region > 99) return false;\r\n\r\n  if (ownerType === 'legal_entity' || ownerType === 'service') {\r\n    return parts.digits.length === 3 && parts.letters2.length === 3;\r\n  } else {\r\n    return parts.letters1.length === 1 && parts.digits.length === 3 && parts.letters2.length === 2;\r\n  }\r\n}\r\n\r\nexport function ResidentVehiclesPage() {\r\n  const { user } = useAuthStore();\r\n  const { addVehicle, updateVehicle, deleteVehicle, fetchVehicles, searchVehiclesByPlate } = useDataStore();\r\n  const { language } = useLanguageStore();\r\n\r\n  // Fetch vehicles from D1 database on mount (run once using ref to prevent duplicates)\r\n  // Only fetch when user is authenticated to prevent 401 errors\r\n  const hasFetched = useRef(false);\r\n  useEffect(() => {\r\n    if (!hasFetched.current && user) {\r\n      hasFetched.current = true;\r\n      fetchVehicles();\r\n    }\r\n  }, [fetchVehicles, user]);\r\n\r\n  const [activeTab, setActiveTab] = useState<'my_vehicles' | 'search'>('my_vehicles');\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingVehicle, setEditingVehicle] = useState<Vehicle | null>(null);\r\n  const [deleteConfirm, setDeleteConfirm] = useState<string | null>(null);\r\n  const [plateError, setPlateError] = useState<string | null>(null);\r\n\r\n  // Search state\r\n  const [searchPlateParts, setSearchPlateParts] = useState({ region: '', letters1: '', digits: '', letters2: '' });\r\n  // State for manually selected search result (when user clicks on a vehicle)\r\n  const [manuallySelectedResult, setManuallySelectedResult] = useState<Vehicle | null>(null);\r\n  // API search results (for searching all vehicles in the system)\r\n  const [apiSearchResults, setApiSearchResults] = useState<Vehicle[]>([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n\r\n  // Owner type for form\r\n  const [selectedOwnerType, setSelectedOwnerType] = useState<VehicleOwnerType>('individual');\r\n\r\n  // Plate number parts\r\n  const [plateParts, setPlateParts] = useState({ region: '', letters1: '', digits: '', letters2: '' });\r\n\r\n  const [formData, setFormData] = useState({\r\n    brand: '',\r\n    model: '',\r\n    color: '',\r\n    year: '',\r\n    type: 'car' as VehicleType,\r\n    companyName: '',\r\n    parkingSpot: '',\r\n    notes: '',\r\n  });\r\n\r\n  // Memoize vehicles to prevent infinite useEffect loop\r\n  // getVehiclesByOwner creates a new array on each call, causing reference changes\r\n  const vehiclesData = useDataStore(state => state.vehicles);\r\n  const vehicles = useMemo(() => {\r\n    if (!user) return [];\r\n    return vehiclesData.filter(v => v.ownerId === user.id);\r\n  }, [vehiclesData, user]);\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      brand: '',\r\n      model: '',\r\n      color: '',\r\n      year: '',\r\n      type: 'car',\r\n      companyName: '',\r\n      parkingSpot: '',\r\n      notes: '',\r\n    });\r\n    setPlateParts({ region: '', letters1: '', digits: '', letters2: '' });\r\n    setSelectedOwnerType('individual');\r\n    setEditingVehicle(null);\r\n    setPlateError(null);\r\n  };\r\n\r\n  const handleOpenModal = (vehicle?: Vehicle) => {\r\n    if (vehicle) {\r\n      setEditingVehicle(vehicle);\r\n      const ownerType = vehicle.ownerType || 'individual';\r\n      setSelectedOwnerType(ownerType);\r\n      setPlateParts(parsePlateNumber(vehicle.plateNumber, ownerType));\r\n      setFormData({\r\n        brand: vehicle.brand,\r\n        model: vehicle.model,\r\n        color: vehicle.color,\r\n        year: vehicle.year?.toString() || '',\r\n        type: vehicle.type,\r\n        companyName: vehicle.companyName || '',\r\n        parkingSpot: vehicle.parkingSpot || '',\r\n        notes: vehicle.notes || '',\r\n      });\r\n    } else {\r\n      resetForm();\r\n    }\r\n    setShowModal(true);\r\n  };\r\n\r\n  // Reset plate parts when owner type changes\r\n  useEffect(() => {\r\n    if (!editingVehicle) {\r\n      setPlateParts(prev => ({ region: prev.region, letters1: '', digits: '', letters2: '' }));\r\n    }\r\n  }, [selectedOwnerType, editingVehicle]);\r\n\r\n  // Filter vehicles based on search plate parts - memoized to prevent unnecessary re-renders\r\n  const searchPattern = useMemo(() => {\r\n    const { region, letters1, digits, letters2 } = searchPlateParts;\r\n    return `${region}${letters1}${digits}${letters2}`.toUpperCase();\r\n  }, [searchPlateParts]);\r\n\r\n  const hasSearchInput = useMemo(() => {\r\n    const { region, letters1, digits, letters2 } = searchPlateParts;\r\n    return !!(region || letters1 || digits || letters2);\r\n  }, [searchPlateParts]);\r\n\r\n  // Search via API when search pattern changes (debounced)\r\n  useEffect(() => {\r\n    if (!hasSearchInput || searchPattern.length < 2) {\r\n      setApiSearchResults([]);\r\n      return;\r\n    }\r\n\r\n    const timeoutId = setTimeout(async () => {\r\n      setIsSearching(true);\r\n      try {\r\n        // Use API to search all vehicles in the system\r\n        console.log('[Vehicle Search] Searching for:', searchPattern);\r\n        const results = await searchVehiclesByPlate(searchPattern);\r\n        console.log('[Vehicle Search] Results:', results);\r\n        setApiSearchResults(results);\r\n      } catch (err) {\r\n        console.error('[Vehicle Search] Error:', err);\r\n        setApiSearchResults([]);\r\n      } finally {\r\n        setIsSearching(false);\r\n      }\r\n    }, 300); // 300ms debounce\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [searchPattern, hasSearchInput, searchVehiclesByPlate]);\r\n\r\n  // Combined search result: either manually selected or auto-selected when only 1 match\r\n  const searchResult = useMemo(() => {\r\n    if (manuallySelectedResult) return manuallySelectedResult;\r\n    if (apiSearchResults.length === 1) return apiSearchResults[0];\r\n    return null;\r\n  }, [apiSearchResults, manuallySelectedResult]);\r\n\r\n  // Alias for filtered vehicles\r\n  const filteredVehicles = apiSearchResults;\r\n  const hasSearched = hasSearchInput;\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!user) return;\r\n\r\n    // Validate plate number\r\n    if (!validatePlateNumber(plateParts, selectedOwnerType)) {\r\n      setPlateError(\r\n        language === 'ru'\r\n          ? 'Заполните все поля номера авто'\r\n          : 'Avto raqamining barcha maydonlarini to\\'ldiring'\r\n      );\r\n      return;\r\n    }\r\n\r\n    const plateNumber = combinePlateNumber(plateParts, selectedOwnerType);\r\n\r\n    const vehicleData = {\r\n      ownerId: user.id,\r\n      ownerName: user.name,\r\n      ownerPhone: user.phone,\r\n      apartment: (user as any).apartment || '',\r\n      address: (user as any).address || 'ул. Мустакиллик, 15',\r\n      plateNumber,\r\n      brand: formData.brand,\r\n      model: formData.model,\r\n      color: formData.color,\r\n      year: formData.year ? parseInt(formData.year) : undefined,\r\n      type: formData.type,\r\n      ownerType: selectedOwnerType,\r\n      companyName: selectedOwnerType !== 'individual' ? formData.companyName : undefined,\r\n      parkingSpot: formData.parkingSpot || undefined,\r\n      notes: formData.notes || undefined,\r\n    };\r\n\r\n    if (editingVehicle) {\r\n      updateVehicle(editingVehicle.id, vehicleData);\r\n    } else {\r\n      addVehicle(vehicleData);\r\n    }\r\n\r\n    setShowModal(false);\r\n    resetForm();\r\n  };\r\n\r\n  const handleDelete = (id: string) => {\r\n    deleteVehicle(id);\r\n    setDeleteConfirm(null);\r\n  };\r\n\r\n  const handleQuickSearch = (vehicle: Vehicle) => {\r\n    setManuallySelectedResult(vehicle);\r\n  };\r\n\r\n  const formatDate = (dateStr: string) => {\r\n    return new Date(dateStr).toLocaleDateString(language === 'ru' ? 'ru-RU' : 'uz-UZ', {\r\n      day: '2-digit',\r\n      month: 'short',\r\n      year: 'numeric',\r\n    });\r\n  };\r\n\r\n  const formatPlateDisplay = (plate: string) => {\r\n    // Format for display: 01 A 123 EA or 01 123 EAA\r\n    const cleaned = plate.toUpperCase().replace(/[^A-Z0-9]/g, '');\r\n    if (cleaned.length === 8 && /^\\d{2}[A-Z]\\d{3}[A-Z]{2}$/.test(cleaned)) {\r\n      return `${cleaned.slice(0,2)} ${cleaned.slice(2,3)} ${cleaned.slice(3,6)} ${cleaned.slice(6,8)}`;\r\n    }\r\n    if (cleaned.length === 8 && /^\\d{5}[A-Z]{3}$/.test(cleaned)) {\r\n      return `${cleaned.slice(0,2)} ${cleaned.slice(2,5)} ${cleaned.slice(5,8)}`;\r\n    }\r\n    return plate;\r\n  };\r\n\r\n  const getOwnerTypeIcon = (type: VehicleOwnerType) => {\r\n    switch (type) {\r\n      case 'individual': return <User className=\"w-4 h-4\" />;\r\n      case 'legal_entity': return <Building2 className=\"w-4 h-4\" />;\r\n      case 'service': return <Car className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    {\r\n      id: 'my_vehicles' as const,\r\n      label: language === 'ru' ? 'Мои авто' : 'Avtomobillarim',\r\n      icon: Car,\r\n      count: vehicles.length\r\n    },\r\n    {\r\n      id: 'search' as const,\r\n      label: language === 'ru' ? 'Поиск' : 'Qidirish',\r\n      icon: Search\r\n    },\r\n  ];\r\n\r\n  const ownerTypes: VehicleOwnerType[] = ['individual', 'legal_entity'];\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6 pb-20 md:pb-0\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-xl md:text-2xl font-bold flex items-center gap-3\">\r\n          <Car className=\"w-7 h-7 text-blue-500\" />\r\n          {language === 'ru' ? 'Мои автомобили' : 'Mening avtomobillarim'}\r\n        </h1>\r\n        <button\r\n          onClick={() => handleOpenModal()}\r\n          className=\"btn-primary flex items-center gap-2\"\r\n        >\r\n          <Plus className=\"w-5 h-5\" />\r\n          <span className=\"hidden sm:inline\">\r\n            {language === 'ru' ? 'Добавить' : 'Qo\\'shish'}\r\n          </span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"glass-card p-1.5 md:p-1 overflow-x-auto scrollbar-hide -mx-4 px-4 md:mx-0 md:px-0\">\r\n        <div className=\"flex gap-1 md:inline-flex min-w-max\">\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => {\r\n                setActiveTab(tab.id);\r\n                if (tab.id === 'my_vehicles') {\r\n                  setSearchPlateParts({ region: '', letters1: '', digits: '', letters2: '' });\r\n                  setManuallySelectedResult(null);\r\n                }\r\n              }}\r\n              className={`px-4 py-3 md:py-2 rounded-xl font-medium transition-all flex items-center gap-2 whitespace-nowrap touch-manipulation ${\r\n                activeTab === tab.id\r\n                  ? 'bg-primary-500 text-gray-900 shadow-md'\r\n                  : 'hover:bg-white/30 active:bg-white/50 text-gray-600'\r\n              }`}\r\n            >\r\n              <tab.icon className=\"w-5 h-5 md:w-4 md:h-4\" />\r\n              <span className=\"text-sm md:text-base\">{tab.label}</span>\r\n              {tab.count !== undefined && tab.count > 0 && (\r\n                <span className={`px-2 py-0.5 rounded-full text-xs text-white font-medium bg-blue-500`}>\r\n                  {tab.count}\r\n                </span>\r\n              )}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* My Vehicles Tab */}\r\n      {activeTab === 'my_vehicles' && (\r\n        <>\r\n          {/* Info Card */}\r\n          <div className=\"glass-card p-4 bg-blue-50 border-blue-200\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <Car className=\"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5\" />\r\n              <p className=\"text-sm text-blue-700\">\r\n                {language === 'ru'\r\n                  ? 'Зарегистрируйте свои автомобили для быстрой идентификации на территории комплекса. Это поможет охране и управляющей компании.'\r\n                  : 'Avtomobillaringizni majmua hududida tez aniqlash uchun ro\\'yxatdan o\\'tkazing. Bu qo\\'riqlash va boshqaruv kompaniyasiga yordam beradi.'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Vehicles List */}\r\n          {vehicles.length === 0 ? (\r\n            <div className=\"glass-card p-12 text-center\">\r\n              <Car className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-600 mb-2\">\r\n                {language === 'ru' ? 'Нет зарегистрированных авто' : 'Ro\\'yxatdan o\\'tgan avtomobillar yo\\'q'}\r\n              </h3>\r\n              <p className=\"text-gray-400 mb-4\">\r\n                {language === 'ru'\r\n                  ? 'Добавьте свой автомобиль, нажав кнопку выше'\r\n                  : 'Yuqoridagi tugmani bosib avtomobilingizni qo\\'shing'}\r\n              </p>\r\n              <button\r\n                onClick={() => handleOpenModal()}\r\n                className=\"btn-primary inline-flex items-center gap-2\"\r\n              >\r\n                <Plus className=\"w-5 h-5\" />\r\n                {language === 'ru' ? 'Добавить первый авто' : 'Birinchi avtoni qo\\'shish'}\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid gap-4 md:grid-cols-2\">\r\n              {vehicles.map((vehicle) => (\r\n                <div key={vehicle.id} className=\"glass-card p-5\">\r\n                  <div className=\"flex items-start justify-between mb-3\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center\">\r\n                        <Car className=\"w-6 h-6 text-blue-500\" />\r\n                      </div>\r\n                      <div>\r\n                        <h3 className=\"font-bold text-lg text-gray-900 tracking-wider\">\r\n                          {formatPlateDisplay(vehicle.plateNumber)}\r\n                        </h3>\r\n                        <p className=\"text-sm text-gray-500\">\r\n                          {vehicle.brand} {vehicle.model}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex gap-1\">\r\n                      <button\r\n                        onClick={() => handleOpenModal(vehicle)}\r\n                        className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                      >\r\n                        <Edit2 className=\"w-4 h-4 text-gray-500\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setDeleteConfirm(vehicle.id)}\r\n                        className=\"p-2 hover:bg-red-50 rounded-lg transition-colors\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4 text-red-500\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    {vehicle.ownerType && (\r\n                      <div className=\"flex items-center gap-2 mb-2\">\r\n                        <span className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${\r\n                          vehicle.ownerType === 'individual' ? 'bg-blue-100 text-blue-700' :\r\n                          vehicle.ownerType === 'legal_entity' ? 'bg-purple-100 text-purple-700' :\r\n                          'bg-orange-100 text-orange-700'\r\n                        }`}>\r\n                          {getOwnerTypeIcon(vehicle.ownerType)}\r\n                          {language === 'ru'\r\n                            ? VEHICLE_OWNER_TYPE_LABELS[vehicle.ownerType].label\r\n                            : VEHICLE_OWNER_TYPE_LABELS[vehicle.ownerType].labelUz}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                    {vehicle.companyName && (\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-500\">{language === 'ru' ? 'Компания' : 'Kompaniya'}:</span>\r\n                        <span className=\"text-gray-900 font-medium\">{vehicle.companyName}</span>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-500\">{language === 'ru' ? 'Тип' : 'Turi'}:</span>\r\n                      <span className=\"text-gray-900\">\r\n                        {language === 'ru'\r\n                          ? VEHICLE_TYPE_LABELS[vehicle.type].label\r\n                          : VEHICLE_TYPE_LABELS[vehicle.type].labelUz}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-500\">{language === 'ru' ? 'Цвет' : 'Rangi'}:</span>\r\n                      <span className=\"text-gray-900\">{vehicle.color}</span>\r\n                    </div>\r\n                    {vehicle.year && (\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-500\">{language === 'ru' ? 'Год' : 'Yili'}:</span>\r\n                        <span className=\"text-gray-900\">{vehicle.year}</span>\r\n                      </div>\r\n                    )}\r\n                    {vehicle.parkingSpot && (\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-500\">{language === 'ru' ? 'Парковка' : 'Avtoturargoh'}:</span>\r\n                        <span className=\"text-gray-900\">{vehicle.parkingSpot}</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Search Tab */}\r\n      {activeTab === 'search' && (\r\n        <div className=\"space-y-4\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <h2 className=\"text-lg font-bold flex items-center gap-2\">\r\n              <Search className=\"w-5 h-5 text-blue-500\" />\r\n              {language === 'ru' ? 'Поиск автомобиля' : 'Avtomobil qidirish'}\r\n            </h2>\r\n            <span className=\"text-sm text-gray-500\">\r\n              {language === 'ru' ? 'Всего:' : 'Jami:'} {vehicles.length}\r\n            </span>\r\n          </div>\r\n\r\n          {/* Search Form with Beautiful Plate Input */}\r\n          <div className=\"glass-card p-6 relative z-10 overflow-visible\">\r\n            <div className=\"flex flex-col items-center relative\">\r\n              <SearchPlateInput\r\n                value={searchPlateParts}\r\n                onChange={setSearchPlateParts}\r\n                language={language}\r\n                onSearch={() => {\r\n                  if (filteredVehicles.length === 1) {\r\n                    setManuallySelectedResult(filteredVehicles[0]);\r\n                  }\r\n                }}\r\n              />\r\n\r\n              {/* Clear search button */}\r\n              {(searchPlateParts.region || searchPlateParts.letters1 || searchPlateParts.digits || searchPlateParts.letters2) && (\r\n                <button\r\n                  onClick={() => {\r\n                    setSearchPlateParts({ region: '', letters1: '', digits: '', letters2: '' });\r\n                    setManuallySelectedResult(null);\r\n                  }}\r\n                  className=\"mt-4 px-4 py-2 text-sm text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2\"\r\n                >\r\n                  <X className=\"w-4 h-4\" />\r\n                  {language === 'ru' ? 'Очистить поиск' : 'Qidiruvni tozalash'}\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Filtered Results List */}\r\n          {hasSearched && filteredVehicles.length > 1 && !searchResult && (\r\n            <div className=\"glass-card p-4\">\r\n              <h3 className=\"font-medium text-gray-700 mb-3 flex items-center gap-2\">\r\n                <Search className=\"w-5 h-5 text-primary-500\" />\r\n                {language === 'ru' ? 'Найденные автомобили' : 'Topilgan avtomobillar'}\r\n                <span className=\"px-2 py-0.5 rounded-full bg-primary-100 text-primary-600 text-sm\">\r\n                  {filteredVehicles.length}\r\n                </span>\r\n              </h3>\r\n              <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                {filteredVehicles.map((vehicle) => (\r\n                  <button\r\n                    key={vehicle.id}\r\n                    type=\"button\"\r\n                    className=\"w-full flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-primary-50 cursor-pointer transition-colors border-2 border-transparent hover:border-primary-300 active:scale-[0.99] text-left\"\r\n                    onClick={() => setManuallySelectedResult(vehicle)}\r\n                  >\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center\">\r\n                        <Car className=\"w-5 h-5 text-blue-500\" />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"font-bold text-gray-900 tracking-wider\">{formatPlateDisplay(vehicle.plateNumber)}</p>\r\n                        <p className=\"text-sm text-gray-500\">\r\n                          {vehicle.brand} {vehicle.model} • {vehicle.color}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 text-primary-500\">\r\n                      <span className=\"text-sm font-medium hidden sm:inline\">\r\n                        {language === 'ru' ? 'Подробнее' : 'Batafsil'}\r\n                      </span>\r\n                      <Search className=\"w-4 h-4\" />\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Search Result */}\r\n          {searchResult && (\r\n            <div className=\"glass-card p-6 border-2 border-green-200 bg-green-50/50\">\r\n              <div className=\"flex items-center gap-2 mb-4\">\r\n                <div className=\"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center\">\r\n                  <Car className=\"w-4 h-4 text-green-600\" />\r\n                </div>\r\n                <h2 className=\"text-lg font-bold text-green-700\">\r\n                  {language === 'ru' ? 'Автомобиль найден!' : 'Avtomobil topildi!'}\r\n                </h2>\r\n              </div>\r\n\r\n              <div className=\"bg-white rounded-xl p-4 mb-4\">\r\n                <div className=\"flex items-center gap-4 mb-4\">\r\n                  <div className=\"w-16 h-16 rounded-xl bg-blue-100 flex items-center justify-center\">\r\n                    <Car className=\"w-8 h-8 text-blue-500\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-2xl font-bold text-gray-900 tracking-wider\">\r\n                      {formatPlateDisplay(searchResult.plateNumber)}\r\n                    </h3>\r\n                    <p className=\"text-gray-500\">\r\n                      {searchResult.brand} {searchResult.model} • {searchResult.color}\r\n                      {searchResult.year && ` • ${searchResult.year}`}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-3\">\r\n                    {/* Owner info */}\r\n                    {searchResult.ownerName && (\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <User className=\"w-5 h-5 text-gray-400\" />\r\n                        <div>\r\n                          <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Владелец' : 'Egasi'}</p>\r\n                          <p className=\"font-medium\">{searchResult.ownerName}</p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {/* Phone */}\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Phone className=\"w-5 h-5 text-gray-400\" />\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Телефон' : 'Telefon'}</p>\r\n                        {searchResult.ownerPhone ? (\r\n                          <a href={`tel:${searchResult.ownerPhone}`} className=\"font-medium text-primary-600 hover:underline\">\r\n                            {searchResult.ownerPhone}\r\n                          </a>\r\n                        ) : (\r\n                          <p className=\"font-medium text-gray-400\">{language === 'ru' ? 'Не указан' : 'Ko\\'rsatilmagan'}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    {/* Apartment */}\r\n                    {searchResult.apartment && (\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <Building2 className=\"w-5 h-5 text-gray-400\" />\r\n                        <div>\r\n                          <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Квартира' : 'Kvartira'}</p>\r\n                          <p className=\"font-medium\">{language === 'ru' ? 'Кв.' : ''} {searchResult.apartment}</p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {/* Address */}\r\n                    {searchResult.address && searchResult.address !== 'Служебный автомобиль' && (\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <Home className=\"w-5 h-5 text-gray-400\" />\r\n                        <div>\r\n                          <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Адрес' : 'Manzil'}</p>\r\n                          <p className=\"font-medium\">{searchResult.address}</p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Car className=\"w-5 h-5 text-gray-400\" />\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Тип транспорта' : 'Transport turi'}</p>\r\n                        <p className=\"font-medium\">\r\n                          {language === 'ru'\r\n                            ? VEHICLE_TYPE_LABELS[searchResult.type].label\r\n                            : VEHICLE_TYPE_LABELS[searchResult.type].labelUz}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    {searchResult.parkingSpot && (\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <MapPin className=\"w-5 h-5 text-gray-400\" />\r\n                        <div>\r\n                          <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Парковочное место' : 'Avtoturargoh joyi'}</p>\r\n                          <p className=\"font-medium\">{searchResult.parkingSpot}</p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Calendar className=\"w-5 h-5 text-gray-400\" />\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Дата регистрации' : 'Ro\\'yxatga olingan sana'}</p>\r\n                        <p className=\"font-medium\">{formatDate(searchResult.createdAt)}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Only show edit button if user owns this vehicle */}\r\n              {user && searchResult.ownerId === user.id && (\r\n                <button\r\n                  onClick={() => handleOpenModal(searchResult)}\r\n                  className=\"w-full py-3 px-4 rounded-xl font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 transition-colors flex items-center justify-center gap-2\"\r\n                >\r\n                  <Edit2 className=\"w-4 h-4\" />\r\n                  {language === 'ru' ? 'Редактировать' : 'Tahrirlash'}\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Loading State */}\r\n          {isSearching && (\r\n            <div className=\"glass-card p-8 text-center\">\r\n              <div className=\"w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-3\" />\r\n              <p className=\"text-gray-500\">\r\n                {language === 'ru' ? 'Поиск...' : 'Qidirilmoqda...'}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Not Found State */}\r\n          {!isSearching && hasSearched && filteredVehicles.length === 0 && (searchPlateParts.region || searchPlateParts.digits) && (\r\n            <div className=\"glass-card p-8 text-center border-2 border-amber-200 bg-amber-50/50\">\r\n              <AlertCircle className=\"w-12 h-12 mx-auto text-amber-400 mb-3\" />\r\n              <h3 className=\"text-lg font-semibold text-amber-700 mb-2\">\r\n                {language === 'ru' ? 'Автомобиль не найден' : 'Avtomobil topilmadi'}\r\n              </h3>\r\n              <p className=\"text-amber-600 text-sm\">\r\n                {language === 'ru'\r\n                  ? 'По введённым данным автомобиль не найден в системе'\r\n                  : 'Kiritilgan ma\\'lumotlar bo\\'yicha avtomobil topilmadi'}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Quick list - show when no search */}\r\n          {vehicles.length > 0 && !hasSearched && (\r\n            <div className=\"glass-card p-4\">\r\n              <h3 className=\"font-medium text-gray-700 mb-3\">\r\n                {language === 'ru' ? 'Ваши автомобили' : 'Sizning avtomobillaringiz'}\r\n              </h3>\r\n              <div className=\"space-y-2\">\r\n                {vehicles.map((vehicle) => (\r\n                  <button\r\n                    key={vehicle.id}\r\n                    type=\"button\"\r\n                    className=\"w-full flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-primary-50 cursor-pointer transition-colors border-2 border-transparent hover:border-primary-300 active:scale-[0.99] text-left\"\r\n                    onClick={() => handleQuickSearch(vehicle)}\r\n                  >\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center\">\r\n                        <Car className=\"w-5 h-5 text-blue-500\" />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"font-bold text-gray-900 tracking-wider\">{formatPlateDisplay(vehicle.plateNumber)}</p>\r\n                        <p className=\"text-sm text-gray-500\">\r\n                          {vehicle.brand} {vehicle.model}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 text-primary-500\">\r\n                      <span className=\"text-sm font-medium hidden sm:inline\">\r\n                        {language === 'ru' ? 'Подробнее' : 'Batafsil'}\r\n                      </span>\r\n                      <Search className=\"w-4 h-4\" />\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Empty State */}\r\n          {vehicles.length === 0 && !hasSearched && (\r\n            <div className=\"glass-card p-12 text-center\">\r\n              <Car className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-600 mb-2\">\r\n                {language === 'ru' ? 'Нет автомобилей для поиска' : 'Qidirish uchun avtomobillar yo\\'q'}\r\n              </h3>\r\n              <p className=\"text-gray-400 mb-4\">\r\n                {language === 'ru'\r\n                  ? 'Сначала добавьте свои автомобили'\r\n                  : 'Avval avtomobillaringizni qo\\'shing'}\r\n              </p>\r\n              <button\r\n                onClick={() => {\r\n                  setActiveTab('my_vehicles');\r\n                  handleOpenModal();\r\n                }}\r\n                className=\"btn-primary inline-flex items-center gap-2\"\r\n              >\r\n                <Plus className=\"w-5 h-5\" />\r\n                {language === 'ru' ? 'Добавить авто' : 'Avto qo\\'shish'}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Add/Edit Modal - Mobile full-screen, centered on desktop */}\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 z-50 md:flex md:items-center md:justify-center\">\r\n          <div className=\"h-full md:h-auto w-full md:max-w-2xl md:mx-4 bg-white md:rounded-2xl overflow-hidden md:max-h-[85vh] flex flex-col\">\r\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-100 bg-white\">\r\n              <h2 className=\"text-lg font-bold\">\r\n                {editingVehicle\r\n                  ? (language === 'ru' ? 'Редактировать авто' : 'Avtoni tahrirlash')\r\n                  : (language === 'ru' ? 'Добавить авто' : 'Avto qo\\'shish')}\r\n              </h2>\r\n              <button\r\n                onClick={() => { setShowModal(false); resetForm(); }}\r\n                className=\"p-3 hover:bg-gray-100 active:bg-gray-200 rounded-xl transition-colors touch-manipulation\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n              {/* Owner Type + Plate Number - side by side on desktop */}\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n                {/* Owner Type Selection */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    {language === 'ru' ? 'Тип владельца' : 'Egasi turi'}\r\n                  </label>\r\n                  <div className=\"flex gap-2\">\r\n                    {ownerTypes.map((type) => (\r\n                      <button\r\n                        key={type}\r\n                        type=\"button\"\r\n                        onClick={() => setSelectedOwnerType(type)}\r\n                        className={`flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl border-2 transition-all ${\r\n                          selectedOwnerType === type\r\n                            ? 'border-primary-500 bg-primary-50 text-primary-700'\r\n                            : 'border-gray-200 hover:border-gray-300'\r\n                        }`}\r\n                      >\r\n                        <span className=\"text-base\">{VEHICLE_OWNER_TYPE_LABELS[type].icon}</span>\r\n                        <span className=\"font-medium text-sm\">\r\n                          {language === 'ru' ? VEHICLE_OWNER_TYPE_LABELS[type].label : VEHICLE_OWNER_TYPE_LABELS[type].labelUz}\r\n                        </span>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Company Name (for legal entity) - shows in same row */}\r\n                {selectedOwnerType !== 'individual' && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      {language === 'ru' ? 'Название компании' : 'Kompaniya nomi'}\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={formData.companyName}\r\n                      onChange={(e) => setFormData({ ...formData, companyName: e.target.value })}\r\n                      placeholder={language === 'ru' ? 'ООО \"Компания\"' : '\"Kompaniya\" MChJ'}\r\n                      className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none\"\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Plate Number Input - Compact */}\r\n              <div className=\"bg-gray-50 rounded-xl p-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2 text-center\">\r\n                  {language === 'ru' ? 'Номер автомобиля' : 'Avtomobil raqami'}\r\n                </label>\r\n                <PlateNumberInput\r\n                  ownerType={selectedOwnerType}\r\n                  value={plateParts}\r\n                  onChange={(newParts) => {\r\n                    setPlateParts(newParts);\r\n                    setPlateError(null);\r\n                  }}\r\n                  language={language}\r\n                />\r\n                {plateError && (\r\n                  <div className=\"flex items-center justify-center gap-1 mt-2 text-red-500 text-sm\">\r\n                    <AlertCircle className=\"w-4 h-4\" />\r\n                    {plateError}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Vehicle Details - 2 columns */}\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                {/* Type */}\r\n                <div className=\"col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {language === 'ru' ? 'Тип транспорта' : 'Transport turi'}\r\n                  </label>\r\n                  <select\r\n                    value={formData.type}\r\n                    onChange={(e) => setFormData({ ...formData, type: e.target.value as VehicleType })}\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm\"\r\n                    required\r\n                  >\r\n                    {Object.entries(VEHICLE_TYPE_LABELS).map(([key, labels]) => (\r\n                      <option key={key} value={key}>\r\n                        {language === 'ru' ? labels.label : labels.labelUz}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Brand */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {language === 'ru' ? 'Марка' : 'Markasi'}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.brand}\r\n                    onChange={(e) => setFormData({ ...formData, brand: e.target.value })}\r\n                    placeholder=\"Chevrolet\"\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                {/* Model */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {language === 'ru' ? 'Модель' : 'Modeli'}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.model}\r\n                    onChange={(e) => setFormData({ ...formData, model: e.target.value })}\r\n                    placeholder=\"Malibu\"\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                {/* Color */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {language === 'ru' ? 'Цвет' : 'Rangi'}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.color}\r\n                    onChange={(e) => setFormData({ ...formData, color: e.target.value })}\r\n                    placeholder={language === 'ru' ? 'Белый' : 'Oq'}\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                {/* Year */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {language === 'ru' ? 'Год' : 'Yili'}\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.year}\r\n                    onChange={(e) => setFormData({ ...formData, year: e.target.value })}\r\n                    placeholder=\"2020\"\r\n                    min=\"1990\"\r\n                    max={new Date().getFullYear()}\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Parking Spot */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {language === 'ru' ? 'Парковка' : 'Avtoturargoh'}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.parkingSpot}\r\n                    onChange={(e) => setFormData({ ...formData, parkingSpot: e.target.value })}\r\n                    placeholder=\"A-15\"\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Notes - full width */}\r\n                <div className=\"col-span-2 md:col-span-4\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    {language === 'ru' ? 'Примечания' : 'Izohlar'}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.notes}\r\n                    onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\r\n                    placeholder={language === 'ru' ? 'Дополнительная информация...' : 'Qo\\'shimcha ma\\'lumot...'}\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </form>\r\n\r\n            <div className=\"p-4 border-t border-gray-100 bg-white safe-area-bottom\">\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => { setShowModal(false); resetForm(); }}\r\n                  className=\"flex-1 py-4 px-4 rounded-xl font-medium bg-gray-100 hover:bg-gray-200 active:bg-gray-300 transition-colors touch-manipulation\"\r\n                >\r\n                  {language === 'ru' ? 'Отмена' : 'Bekor qilish'}\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  onClick={handleSubmit}\r\n                  className=\"flex-1 py-4 px-4 rounded-xl font-semibold text-gray-900 bg-gradient-to-r from-primary-400 to-primary-500 hover:from-primary-500 hover:to-primary-600 active:from-primary-600 active:to-primary-700 transition-all touch-manipulation\"\r\n                >\r\n                  {editingVehicle\r\n                    ? (language === 'ru' ? 'Сохранить' : 'Saqlash')\r\n                    : (language === 'ru' ? 'Добавить' : 'Qo\\'shish')}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      {deleteConfirm && (\r\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white rounded-2xl p-6 max-w-sm w-full\">\r\n            <div className=\"flex items-center justify-center w-12 h-12 rounded-full bg-red-100 mx-auto mb-4\">\r\n              <AlertTriangle className=\"w-6 h-6 text-red-500\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-bold text-center mb-2\">\r\n              {language === 'ru' ? 'Удалить автомобиль?' : 'Avtomobilni o\\'chirish?'}\r\n            </h3>\r\n            <p className=\"text-gray-500 text-center text-sm mb-6\">\r\n              {language === 'ru'\r\n                ? 'Это действие нельзя отменить'\r\n                : 'Bu amalni bekor qilib bo\\'lmaydi'}\r\n            </p>\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => setDeleteConfirm(null)}\r\n                className=\"flex-1 py-3 px-4 rounded-xl font-medium bg-gray-100 hover:bg-gray-200 transition-colors\"\r\n              >\r\n                {language === 'ru' ? 'Отмена' : 'Bekor qilish'}\r\n              </button>\r\n              <button\r\n                onClick={() => handleDelete(deleteConfirm)}\r\n                className=\"flex-1 py-3 px-4 rounded-xl font-medium text-white bg-red-500 hover:bg-red-600 transition-colors\"\r\n              >\r\n                {language === 'ru' ? 'Удалить' : 'O\\'chirish'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["UZ_REGIONS","UZFlag","className","jsxs","jsx","i","SearchPlateInput","value","onChange","language","onSearch","letters1Ref","useRef","digitsRef","letters2Ref","showRegionDropdown","setShowRegionDropdown","useState","handleRegionSelect","code","handleLetters1Change","e","val","handleDigitsChange","handleLetters2Change","handleKeyDown","field","selectedRegion","isLegalFormat","Fragment","region","PlateNumberInput","ownerType","maxLen","r","parsePlateNumber","plate","cleaned","combinePlateNumber","parts","validatePlateNumber","ResidentVehiclesPage","user","useAuthStore","addVehicle","updateVehicle","deleteVehicle","fetchVehicles","searchVehiclesByPlate","useDataStore","useLanguageStore","hasFetched","useEffect","activeTab","setActiveTab","showModal","setShowModal","editingVehicle","setEditingVehicle","deleteConfirm","setDeleteConfirm","plateError","setPlateError","searchPlateParts","setSearchPlateParts","manuallySelectedResult","setManuallySelectedResult","apiSearchResults","setApiSearchResults","isSearching","setIsSearching","selectedOwnerType","setSelectedOwnerType","plateParts","setPlateParts","formData","setFormData","vehiclesData","state","vehicles","useMemo","v","resetForm","handleOpenModal","vehicle","prev","searchPattern","letters1","digits","letters2","hasSearchInput","timeoutId","results","searchResult","filteredVehicles","hasSearched","handleSubmit","plateNumber","vehicleData","handleDelete","id","handleQuickSearch","formatDate","dateStr","formatPlateDisplay","getOwnerTypeIcon","type","User","Building2","Car","tabs","Search","ownerTypes","Plus","tab","Edit2","Trash2","VEHICLE_OWNER_TYPE_LABELS","VEHICLE_TYPE_LABELS","X","Phone","Home","MapPin","Calendar","AlertCircle","newParts","key","labels","AlertTriangle"],"mappings":"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"}