import{r as n,F as oe,A,ag as ke,y as k,S as O,j as e,a7 as X,D as cs,m as xe,U as C,N as ds,ah as Se,ai as Fe,aj as ve,a2 as Q,q as U,l as E,ab as I,ak as Ce,C as Ve,O as we,al as He,X as Z,am as Be,an as ms}from"./react-vendor-1769428875114-t_MJ7TI5.js";import{b as os,u as xs,d as hs,e as H,S as Ke,f as us,R as K,c as ps}from"./index-1769428875114-CG_16j_e.js";import{f as Re}from"./formatAddress-1769428875114-OwpdX0o2.js";import"./vendor-1769428875114-wOrLRiCI.js";import"./qr-scanner-1769428875114-B_vB3SDT.js";import"./zustand-1769428875114-wNUYBKDB.js";function Ts(){const{user:s}=os(),{requests:d,executors:c,acceptRequest:t,startWork:i,pauseWork:h,resumeWork:b,completeWork:u,assignRequest:g,declineRequest:N,createRescheduleRequest:y,respondToRescheduleRequest:j,getPendingRescheduleForUser:m,fetchRequests:o,fetchPendingReschedules:T}=xs(),{language:l}=hs(),[r,S]=n.useState("available");n.useEffect(()=>{s?.specialization==="courier"&&S("marketplace")},[s?.specialization]);const[M,Qe]=n.useState(null),[J,ze]=n.useState(!0),[G,he]=n.useState([]),[P,Xe]=n.useState([]),[Ze,Je]=n.useState([]),L=G.filter(a=>a.status==="confirmed"),ue=G.filter(a=>["preparing","ready","delivering"].includes(a.status)),pe=Ze,[_e,Te]=n.useState(!1),[Me,Y]=n.useState(null),$=n.useCallback(async()=>{Te(!0);try{const a=await H("/api/marketplace/executor/orders");he(a.orders||[])}catch{}finally{Te(!1)}},[]),B=n.useCallback(async()=>{try{const a=await H("/api/marketplace/executor/available");Xe(a.orders||[])}catch{}},[]),W=n.useCallback(async()=>{try{const a=await H("/api/marketplace/executor/delivered");Je(a.orders||[])}catch{}},[]),Ge=async a=>{try{await H(`/api/marketplace/executor/orders/${a}/take`,{method:"POST"}),await Promise.all([$(),B()])}catch(p){alert(l==="ru"?p?.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∑—è—Ç–∏–∏ –∑–∞–∫–∞–∑–∞":"Buyurtmani olishda xatolik"),B()}},ge=async(a,p)=>{try{await H(`/api/marketplace/executor/orders/${a}`,{method:"PATCH",body:JSON.stringify({status:p})}),he(p==="delivered"?x=>x.filter(f=>f.id!==a):x=>x.map(f=>f.id===a?{...f,status:p}:f)),Y(null),await Promise.all([$(),W()])}catch(x){await Promise.all([$(),W()]);const f=x?.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞";alert(l==="ru"?f:"Status yangilashda xatolik")}};n.useEffect(()=>{o(),T(),s?.specialization==="courier"&&($(),B(),W());const a=setInterval(()=>{T(),s?.specialization==="courier"&&($(),B(),W())},3e4);return()=>clearInterval(a)},[o,T,$,B,W,s?.specialization]);const[R,z]=n.useState(null),[q,qe]=n.useState({}),[es,be]=n.useState({}),[De,ee]=n.useState(!1),[se,ae]=n.useState(null),[ss,te]=n.useState(!1),[je,le]=n.useState(null),[as,ie]=n.useState(!1),[ne,re]=n.useState(null),F=c.find(a=>a.login===s?.login);n.useEffect(()=>{const a=async()=>{if(s?.id){ze(!0);try{const x=await us.getStats(s.id);Qe(x.stats)}catch{}finally{ze(!1)}}};a();const p=setInterval(a,3e4);return()=>clearInterval(p)},[s?.id]);const ts=F?.specialization||s?.specialization,fe=d.filter(a=>a.executorId===s?.id),Ne=d.filter(a=>a.status==="new"&&a.category===ts),ce=fe.filter(a=>a.status==="assigned"||a.status==="accepted"),w=fe.filter(a=>a.status==="in_progress"),Ae=fe.filter(a=>a.status==="completed"||a.status==="pending_approval"),Pe=s?.id?m(s.id):[],V=n.useCallback(a=>{if(!a)return 0;const p=a.includes("Z")||a.includes("+")?a:a.replace(" ","T")+"Z";return new Date(p).getTime()},[]);n.useEffect(()=>{const a=setInterval(()=>{const p={};w.forEach(x=>{if(x.startedAt){const f=V(x.startedAt),v=x.totalPausedTime||0;if(x.isPaused&&x.pausedAt){const _=V(x.pausedAt),D=Math.floor((_-f)/1e3)-v;p[x.id]=Math.max(0,D)}else{const _=Math.floor((Date.now()-f)/1e3)-v;p[x.id]=Math.max(0,_)}}}),qe(p)},1e3);return()=>clearInterval(a)},[w,V]),n.useEffect(()=>{const a=G.filter(v=>v.status==="delivering");if(a.length===0){be({});return}const p=v=>{if(v.delivering_at){const _=V(v.delivering_at);return Math.max(0,Math.floor((Date.now()-_)/1e3))}return 0},x={};a.forEach(v=>{x[v.id]=p(v)}),be(x);const f=setInterval(()=>{be(v=>{const _={};return a.forEach(D=>{v[D.id]!==void 0?_[D.id]=v[D.id]+1:_[D.id]=p(D)}),_})},1e3);return()=>clearInterval(f)},[G,V]);const Le=s?.specialization==="courier"?Ne.length+P.length:Ne.length,ls=[{id:"available",label:l==="ru"?"–î–æ—Å—Ç—É–ø–Ω—ã–µ":"Mavjud",count:Le,color:"bg-purple-500",icon:oe},{id:"assigned",label:l==="ru"?"–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ":"Tayinlangan",count:ce.length,color:"bg-blue-500",icon:A},{id:"in_progress",label:l==="ru"?"–í —Ä–∞–±–æ—Ç–µ":"Ishda",count:w.length,color:"bg-amber-500",icon:ke},{id:"completed",label:l==="ru"?"–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ":"Bajarilgan",count:Ae.length,color:"bg-green-500",icon:k}],is=s?.specialization==="courier"?ce.length+L.length:ce.length,ns=s?.specialization==="courier"?[{id:"marketplace",label:l==="ru"?"–ú–æ–∏ –¥–æ—Å—Ç–∞–≤–∫–∏":"Mening yetkazishlarim",count:ue.length,color:"bg-orange-500",icon:O},{id:"available",label:l==="ru"?"–î–æ—Å—Ç—É–ø–Ω—ã–µ":"Mavjud",count:Le,color:"bg-purple-500",icon:oe},{id:"assigned",label:l==="ru"?"–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ":"Tayinlangan",count:is,color:"bg-blue-500",icon:A},{id:"delivered",label:l==="ru"?"–î–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ":"Yetkazilganlar",count:pe.length,color:"bg-emerald-500",icon:k}]:ls,de=r==="marketplace"||r==="delivered"?[]:{available:Ne,assigned:ce,in_progress:w,completed:Ae}[r]||[],me=a=>{const p=Math.floor(a/3600),x=Math.floor(a%3600/60),f=a%60;return p>0?`${p}:${x.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`:`${x}:${f.toString().padStart(2,"0")}`},$e=a=>{s?.id&&(g(a,s.id),S("assigned"))},Oe=a=>{t(a)},Ue=a=>{if(w.length>0){alert("–°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ç–µ–∫—É—â—É—é —Ä–∞–±–æ—Ç—É");return}i(a)},Ee=a=>{h(a)},Ie=a=>{b(a)},ye=a=>{const p=q[a]||0;u(a,p)},Ye=a=>{ae(a),ee(!0)},rs=async a=>{if(se)try{await N(se.id,a),ee(!1),ae(null),z(null)}catch{ee(!1),ae(null)}};return e.jsxs("div",{className:"space-y-4 md:space-y-6 pb-20 md:pb-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:s?.specialization==="courier"?"–ú–æ–∏ –∑–∞–∫–∞–∑—ã":"–ú–æ–∏ –∑–∞—è–≤–∫–∏"}),e.jsxs("p",{className:"text-sm md:text-base text-gray-500 mt-1 truncate",children:[s?.name," ‚Ä¢ ",Ke[s?.specialization]||"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å"]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`px-3 py-2 rounded-xl text-sm font-medium ${F?.status==="available"?"bg-green-100 text-green-700":F?.status==="busy"?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-600"}`,children:F?.status==="available"?"–î–æ—Å—Ç—É–ø–µ–Ω":F?.status==="busy"?"–ó–∞–Ω—è—Ç":"–û—Ñ—Ñ–ª–∞–π–Ω"})})]}),Pe.length>0&&e.jsxs("div",{className:"glass-card p-4 border-2 border-amber-400 bg-amber-50/50 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(X,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-amber-800",children:l==="ru"?"–ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å –≤—Ä–µ–º–µ–Ω–∏":"Vaqtni o'zgartirish so'rovi"}),e.jsx("div",{className:"text-sm text-amber-600",children:l==="ru"?"–ñ–∏—Ç–µ–ª—å –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞—è–≤–∫—É":"Yashovchi arizani ko'chirishni taklif qiladi"})]})]}),Pe.map(a=>e.jsxs("button",{onClick:()=>{re(a),ie(!0)},className:"w-full p-3 bg-white/60 rounded-xl text-left flex items-center justify-between active:bg-white/80 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-800",children:[l==="ru"?"–ó–∞—è–≤–∫–∞":"Ariza"," #",a.requestNumber]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l==="ru"?"–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–æ:":"Taklif:"," ",a.proposedDate," ",a.proposedTime]})]}),e.jsx(cs,{className:"w-5 h-5 text-amber-500"})]},a.id))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4 md:gap-4",children:[e.jsx("div",{className:"glass-card p-3 md:p-5",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-orange-400 to-amber-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(xe,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:J?"...":M?.rating||5}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500",children:l==="ru"?"–†–µ–π—Ç–∏–Ω–≥":"Reyting"})]})]})}),e.jsx("div",{className:"glass-card p-3 md:p-5",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center flex-shrink-0",children:s?.specialization==="courier"?e.jsx(C,{className:"w-5 h-5 md:w-6 md:h-6 text-white"}):e.jsx(k,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:J?"...":s?.specialization==="courier"?M?.totalDelivered||0:M?.totalCompleted||0}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500",children:s?.specialization==="courier"?l==="ru"?"–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ":"Yetkazildi":l==="ru"?"–í—ã–ø–æ–ª–Ω–µ–Ω–æ":"Bajarildi"})]})]})}),e.jsx("div",{className:"glass-card p-3 md:p-5",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ds,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:J?"...":s?.specialization==="courier"?M?.deliveredThisWeek||0:M?.thisWeek||0}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500",children:l==="ru"?"–ó–∞ –Ω–µ–¥–µ–ª—é":"Hafta"})]})]})}),e.jsx("div",{className:"glass-card p-3 md:p-5",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-purple-400 to-violet-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Se,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:J?"...":s?.specialization==="courier"?M?.avgDeliveryTime||0:M?.avgCompletionTime||0}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500 leading-tight",children:l==="ru"?"–°—Ä–µ–¥. –º–∏–Ω":"O'rt. daq"})]})]})})]}),w.length>0&&e.jsxs("div",{className:`glass-card p-4 md:p-6 border-2 ${w[0]?.isPaused?"border-gray-400 bg-gray-50/50":"border-amber-400 bg-amber-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 md:mb-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${w[0]?.isPaused?"bg-gray-500":"bg-amber-500 animate-pulse"}`}),e.jsx("span",{className:`font-medium ${w[0]?.isPaused?"text-gray-700":"text-amber-700"}`,children:w[0]?.isPaused?"–†–∞–±–æ—Ç–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞":"–ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞"})]}),w.map(a=>e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-semibold text-base md:text-lg truncate",children:["#",a.number," - ",a.title]}),e.jsx("div",{className:"text-sm md:text-base text-gray-600 truncate",children:Re(a.address,a.apartment)})]}),e.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 md:gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-3xl md:text-4xl font-mono font-bold ${a.isPaused?"text-gray-500":"text-amber-600"}`,children:me(q[a.id]||0)}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500",children:a.isPaused?"–ü–∞—É–∑–∞":"–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã"})]}),e.jsxs("div",{className:"flex gap-2",children:[a.isPaused?e.jsxs("button",{onClick:()=>Ie(a.id),className:"py-3 px-4 md:px-5 rounded-xl font-semibold text-white flex items-center gap-2 active:scale-95 transition-transform touch-manipulation",style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)"},children:[e.jsx(Fe,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:inline",children:"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"})]}):e.jsxs("button",{onClick:()=>Ee(a.id),className:"py-3 px-4 md:px-5 rounded-xl font-semibold text-gray-700 bg-white border-2 border-gray-300 flex items-center gap-2 active:scale-95 transition-transform touch-manipulation",children:[e.jsx(ve,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:inline",children:"–ü–∞—É–∑–∞"})]}),e.jsxs("button",{onClick:()=>ye(a.id),className:"py-3 px-4 md:px-5 rounded-xl font-semibold text-white flex items-center gap-2 active:scale-95 transition-transform touch-manipulation",style:{background:"linear-gradient(135deg, #10b981, #059669)"},children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:inline",children:"–ó–∞–≤–µ—Ä—à–∏—Ç—å"}),e.jsx("span",{className:"md:hidden",children:"–ì–æ—Ç–æ–≤–æ"})]})]})]})]},a.id))]}),e.jsx("div",{className:"overflow-x-auto scrollbar-hide -mx-4 px-4 md:mx-0 md:px-0",children:e.jsx("div",{className:"glass-card p-1.5 md:p-1 flex gap-1 min-w-max md:min-w-0 md:inline-flex",children:ns.map(a=>e.jsxs("button",{onClick:()=>S(a.id),className:`px-4 py-3 md:py-2 rounded-xl font-medium transition-all flex items-center gap-2 whitespace-nowrap touch-manipulation ${r===a.id?"bg-primary-500 text-gray-900 shadow-md":"hover:bg-white/30 active:bg-white/50 text-gray-600"}`,children:[e.jsx("span",{className:"text-sm md:text-base",children:a.label}),a.count>0&&e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs text-white font-medium ${a.color}`,children:a.count})]},a.id))})}),r==="marketplace"?e.jsx("div",{className:"space-y-4",children:_e?e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:l==="ru"?"–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤...":"Buyurtmalar yuklanmoqda..."})]}):ue.length===0?e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(O,{className:"w-8 h-8 text-orange-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-600",children:l==="ru"?"–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ—Å—Ç–∞–≤–æ–∫":"Faol yetkazishlar yo'q"}),e.jsx("p",{className:"text-gray-400 mt-1",children:l==="ru"?'–í–æ–∑—å–º–∏—Ç–µ –∑–∞–∫–∞–∑ –∏–∑ –≤–∫–ª–∞–¥–∫–∏ "–î–æ—Å—Ç—É–ø–Ω—ã–µ"':`"Mavjud" bo'limidan buyurtma oling`})]}):e.jsx("div",{className:"space-y-3",children:ue.map(a=>e.jsx(We,{order:a,onView:()=>Y(a),onUpdateStatus:ge,language:l,deliveryTimer:es[a.id],formatTime:me},a.id))})}):r==="delivered"?e.jsx("div",{className:"space-y-4",children:_e?e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:l==="ru"?"–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤...":"Buyurtmalar yuklanmoqda..."})]}):pe.length===0?e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(k,{className:"w-8 h-8 text-emerald-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-600",children:l==="ru"?"–ù–µ—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤":"Yetkazilgan buyurtmalar yo'q"}),e.jsx("p",{className:"text-gray-400 mt-1",children:l==="ru"?"–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã":"Bu yerda yetkazilgan buyurtmalar ko'rsatiladi"})]}):e.jsx("div",{className:"space-y-3",children:pe.map(a=>e.jsx(vs,{order:a,onView:()=>Y(a),language:l},a.id))})}):e.jsxs("div",{className:"space-y-4",children:[r==="available"&&s?.specialization==="courier"&&P.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-orange-500"}),l==="ru"?"–ó–∞–∫–∞–∑—ã –º–∞–≥–∞–∑–∏–Ω–∞":"Do'kon buyurtmalari",e.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full text-xs",children:P.length})]}),P.map(a=>e.jsx(ys,{order:a,onTake:()=>Ge(a.id),language:l},a.id))]}),r==="assigned"&&s?.specialization==="courier"&&L.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-blue-500"}),l==="ru"?"–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã":"Tayinlangan buyurtmalar",e.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full text-xs",children:L.length})]}),L.map(a=>e.jsx(We,{order:a,onView:()=>Y(a),onUpdateStatus:ge,language:l},a.id))]}),de.length>0&&e.jsxs("div",{className:"space-y-3",children:[(r==="available"&&s?.specialization==="courier"&&P.length>0||r==="assigned"&&s?.specialization==="courier"&&L.length>0)&&e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4 text-purple-500"}),l==="ru"?"–ó–∞—è–≤–∫–∏ –Ω–∞ —É—Å–ª—É–≥–∏":"Xizmat so'rovlari",e.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs",children:de.length})]}),de.map(a=>e.jsx(gs,{request:a,timerSeconds:q[a.id],hasActiveWork:w.length>0,onView:()=>z(a),onTakeRequest:()=>$e(a.id),onAccept:()=>Oe(a.id),onStartWork:()=>Ue(a.id),onPauseWork:()=>Ee(a.id),onResumeWork:()=>Ie(a.id),onComplete:()=>ye(a.id),onDecline:()=>Ye(a),onReschedule:()=>{le(a),te(!0)},formatTime:me},a.id))]}),de.length===0&&!(r==="available"&&s?.specialization==="courier"&&P.length>0)&&!(r==="assigned"&&s?.specialization==="courier"&&L.length>0)&&e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(oe,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-600",children:s?.specialization==="courier"?"–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤":"–ù–µ—Ç –∑–∞—è–≤–æ–∫"}),e.jsxs("p",{className:"text-gray-400 mt-1",children:[r==="available"&&(s?.specialization==="courier"?"–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –ø–æ –≤–∞—à–µ–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏":"–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞—è–≤–æ–∫ –ø–æ –≤–∞—à–µ–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏"),r==="assigned"&&(s?.specialization==="courier"?"–ù–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤":"–ù–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫"),r==="in_progress"&&"–ù–µ—Ç –∑–∞—è–≤–æ–∫ –≤ —Ä–∞–±–æ—Ç–µ",r==="completed"&&"–ù–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫"]})]})]}),R&&!De&&e.jsx(bs,{request:R,timerSeconds:q[R.id],onClose:()=>z(null),onTakeRequest:()=>{$e(R.id),z(null)},onAccept:()=>{Oe(R.id),z(null)},onStartWork:()=>{Ue(R.id),z(null)},onComplete:()=>{ye(R.id),z(null)},onDecline:()=>Ye(R),onReschedule:()=>{le(R),te(!0),z(null)},formatTime:me}),De&&se&&e.jsx(js,{request:se,onClose:()=>{ee(!1),ae(null)},onConfirm:rs}),ss&&je&&e.jsx(fs,{request:je,onClose:()=>{te(!1),le(null)},onSubmit:a=>{y({requestId:je.id,...a}),te(!1),le(null),z(null)},language:l}),as&&ne&&e.jsx(Ns,{reschedule:ne,onClose:()=>{ie(!1),re(null)},onAccept:()=>{j(ne.id,!0),ie(!1),re(null)},onReject:a=>{j(ne.id,!1,a),ie(!1),re(null)},language:l}),Me&&e.jsx(ws,{order:Me,onClose:()=>Y(null),onUpdateStatus:ge,language:l})]})}function gs({request:s,timerSeconds:d,hasActiveWork:c,onView:t,onTakeRequest:i,onAccept:h,onStartWork:b,onPauseWork:u,onResumeWork:g,onComplete:N,onDecline:y,onReschedule:j,formatTime:m}){const o=["assigned","accepted","in_progress"].includes(s.status),T=r=>{switch(r){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-amber-500";default:return"bg-gray-400"}},l=r=>{const S="px-2 py-1 rounded-lg text-xs font-medium";switch(r){case"new":return e.jsx("span",{className:`${S} bg-purple-100 text-purple-700`,children:"–ù–æ–≤–∞—è"});case"assigned":return e.jsx("span",{className:`${S} bg-blue-100 text-blue-700`,children:"–ù–∞–∑–Ω–∞—á–µ–Ω–∞"});case"accepted":return e.jsx("span",{className:`${S} bg-cyan-100 text-cyan-700`,children:"–ü—Ä–∏–Ω—è—Ç–∞"});case"in_progress":return e.jsx("span",{className:`${S} bg-amber-100 text-amber-700`,children:"–í —Ä–∞–±–æ—Ç–µ"});case"pending_approval":return e.jsx("span",{className:`${S} bg-purple-100 text-purple-700`,children:"–û–∂–∏–¥–∞–µ—Ç"});case"completed":return e.jsx("span",{className:`${S} bg-green-100 text-green-700`,children:"–í—ã–ø–æ–ª–Ω–µ–Ω–∞"});default:return e.jsx("span",{className:S,children:ps[r]})}};return e.jsxs("div",{className:"glass-card p-4 cursor-pointer hover:bg-white/40 active:bg-white/60 active:scale-[0.99] transition-all touch-manipulation",onClick:t,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-2 h-full min-h-[20px] rounded-full ${T(s.priority)} flex-shrink-0`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["#",s.number]}),l(s.status),s.status==="in_progress"&&d!==void 0&&e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-lg font-mono text-xs ${s.isPaused?"bg-gray-100 text-gray-600":"bg-amber-100 text-amber-700"}`,children:[s.isPaused?e.jsx(ve,{className:"w-3 h-3"}):e.jsx(Se,{className:"w-3 h-3"}),m(d)]})]}),e.jsx("h3",{className:"font-semibold text-base md:text-lg leading-tight truncate",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mt-1",children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3 text-xs md:text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"truncate max-w-[100px]",children:s.residentName})]}),e.jsxs("a",{href:`tel:${s.residentPhone}`,onClick:r=>r.stopPropagation(),className:"flex items-center gap-1 text-primary-600 active:text-primary-800",children:[e.jsx(E,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"–ü–æ–∑–≤–æ–Ω–∏—Ç—å"})]})]}),e.jsx("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:e.jsxs("span",{className:"flex items-center gap-1 truncate",children:[e.jsx(I,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:Re(s.address,s.apartment)})]})}),s.scheduledDate&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-2 py-1 bg-blue-50 text-blue-700 rounded-lg text-xs",children:[e.jsx(Ve,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:new Date(s.scheduledDate).toLocaleDateString("ru-RU",{day:"numeric",month:"short"})}),s.scheduledTime&&e.jsx("span",{children:s.scheduledTime})]}),["assigned","accepted","in_progress"].includes(s.status)&&e.jsx("div",{className:"mt-3 p-2 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"text-gray-400",children:"–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: "}),e.jsx("span",{className:`font-medium ${s.priority==="urgent"?"text-red-600":s.priority==="high"?"text-orange-600":s.priority==="medium"?"text-amber-600":"text-gray-600"}`,children:s.priority==="urgent"?"–°—Ä–æ—á–Ω—ã–π":s.priority==="high"?"–í—ã—Å–æ–∫–∏–π":s.priority==="medium"?"–°—Ä–µ–¥–Ω–∏–π":"–ù–∏–∑–∫–∏–π"})]})}),["assigned","accepted","in_progress"].includes(s.status)&&e.jsxs("button",{onClick:r=>{r.stopPropagation(),j()},className:"mt-3 w-full py-2.5 bg-amber-100 hover:bg-amber-200 text-amber-700 rounded-xl font-medium flex items-center justify-center gap-2 transition-all active:scale-[0.98] touch-manipulation",children:[e.jsx(X,{className:"w-4 h-4"}),"–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è"]}),s.status==="completed"&&s.rating&&e.jsx("div",{className:"flex items-center gap-1 mt-2",children:[1,2,3,4,5].map(r=>e.jsx(xe,{className:`w-4 h-4 ${r<=s.rating?"text-yellow-500 fill-yellow-500":"text-gray-300"}`},r))}),s.status==="pending_approval"&&e.jsxs("div",{className:"mt-2 text-xs text-purple-600 flex items-center gap-1",children:[e.jsx(A,{className:"w-3.5 h-3.5"}),"–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"]}),s.status==="in_progress"&&s.rejectionReason&&e.jsxs("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-1 text-red-700 font-medium text-xs",children:[e.jsx(we,{className:"w-3.5 h-3.5"}),"–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞"]}),e.jsx("p",{className:"text-xs text-red-600 mt-1 line-clamp-2",children:s.rejectionReason})]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t border-gray-200/50",onClick:r=>r.stopPropagation(),children:[o&&e.jsxs("button",{onClick:y,className:"py-3 px-4 text-red-600 bg-red-50 hover:bg-red-100 active:bg-red-200 rounded-xl font-medium text-sm flex items-center justify-center gap-2 transition-colors touch-manipulation",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:s.status==="in_progress"?"–û—Å–≤–æ–±–æ–¥–∏—Ç—å":"–û—Ç–∫–∞–∑–∞—Ç—å—Å—è"})]}),s.status==="new"&&e.jsxs("button",{onClick:i,className:"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)"},children:[e.jsx(Ce,{className:"w-5 h-5"}),"–í–∑—è—Ç—å –∑–∞—è–≤–∫—É"]}),s.status==="assigned"&&e.jsxs("button",{onClick:h,className:"flex-1 py-3 px-4 rounded-xl font-semibold bg-white border-2 border-gray-200 text-gray-700 flex items-center justify-center gap-2 active:scale-[0.98] active:bg-gray-50 transition-all touch-manipulation",children:[e.jsx(Q,{className:"w-5 h-5"}),"–ü—Ä–∏–Ω—è—Ç—å"]}),s.status==="accepted"&&(c?e.jsxs("div",{className:"flex-1 py-3 px-4 rounded-xl font-medium bg-gray-100 text-gray-500 flex items-center justify-center gap-2 text-sm",children:[e.jsx(we,{className:"w-4 h-4"}),"–°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ç–µ–∫—É—â—É—é —Ä–∞–±–æ—Ç—É"]}):e.jsxs("button",{onClick:b,className:"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation",style:{background:"linear-gradient(135deg, #FFE500, #FFC700)",color:"#000"},children:[e.jsx(ke,{className:"w-5 h-5"}),"–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É"]})),s.status==="in_progress"&&e.jsxs("div",{className:"flex-1 flex gap-2",children:[s.isPaused?e.jsxs("button",{onClick:g,className:"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation",style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)"},children:[e.jsx(Fe,{className:"w-5 h-5"}),"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"]}):e.jsx("button",{onClick:u,className:"py-3 px-4 rounded-xl font-semibold text-gray-700 bg-white border-2 border-gray-300 flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation",children:e.jsx(ve,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:N,className:"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation",style:{background:"linear-gradient(135deg, #10b981, #059669)"},children:[e.jsx(Q,{className:"w-5 h-5"}),"–ó–∞–≤–µ—Ä—à–∏—Ç—å"]})]})]})]})}function bs({request:s,timerSeconds:d,onClose:c,onTakeRequest:t,onAccept:i,onStartWork:h,onComplete:b,onDecline:u,onReschedule:g,formatTime:N}){const y=["assigned","accepted","in_progress"].includes(s.status),j=["assigned","accepted","in_progress"].includes(s.status),m=l=>new Date(l).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),T=(l=>{switch(l){case"urgent":return{label:"–°—Ä–æ—á–Ω–æ",color:"text-red-600 bg-red-50"};case"high":return{label:"–í—ã—Å–æ–∫–∏–π",color:"text-orange-600 bg-orange-50"};case"medium":return{label:"–°—Ä–µ–¥–Ω–∏–π",color:"text-amber-600 bg-amber-50"};default:return{label:"–ù–∏–∑–∫–∏–π",color:"text-gray-600 bg-gray-50"}}})(s.priority);return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["–ó–∞—è–≤–∫–∞ #",s.number]}),e.jsx("h2",{className:"text-xl font-bold",children:s.title})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-white/30 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5"})})]}),s.status==="in_progress"&&d!==void 0&&e.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full animate-pulse"}),e.jsx("span",{className:"font-medium text-amber-700",children:"–†–∞–±–æ—Ç–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ"})]}),e.jsx("div",{className:"text-3xl font-mono font-bold text-amber-600",children:N(d)})]})}),s.status==="in_progress"&&s.rejectionReason&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-700 font-medium mb-2",children:[e.jsx(we,{className:"w-5 h-5"}),e.jsx("span",{children:"–†–∞–±–æ—Ç–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞"}),s.rejectionCount&&s.rejectionCount>1&&e.jsxs("span",{className:"text-xs bg-red-100 px-2 py-0.5 rounded",children:[s.rejectionCount,"-–π —Ä–∞–∑"]})]}),e.jsxs("p",{className:"text-red-600 mb-3",children:[e.jsx("span",{className:"font-medium",children:"–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è:"})," ",s.rejectionReason]}),e.jsx("p",{className:"text-sm text-red-600/80",children:'–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Å—Ç—Ä–∞–Ω–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ä–∞–±–æ—Ç—É —Å–Ω–æ–≤–∞. –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ "–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É".'})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T.color}`,children:T.label}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700",children:Ke[s.category]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"–û–ø–∏—Å–∞–Ω–∏–µ"}),e.jsx("p",{className:"text-gray-900",children:s.description})]}),s.scheduledDate&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("h3",{className:"font-medium text-blue-800 flex items-center gap-2 mb-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),"–ñ–µ–ª–∞–µ–º–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"]}),e.jsxs("div",{className:"flex items-center gap-4 text-blue-700",children:[e.jsx("span",{children:new Date(s.scheduledDate).toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})}),s.scheduledTime&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-4 h-4"}),s.scheduledTime]})]})]}),e.jsxs("div",{className:"bg-white/30 rounded-xl p-4 space-y-3",children:[e.jsx("h3",{className:"font-medium",children:"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∂–∏—Ç–µ–ª–µ"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:s.residentName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-gray-400"}),e.jsx("a",{href:`tel:${s.residentPhone}`,className:"text-primary-600 hover:underline",children:s.residentPhone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:Re(s.address,s.apartment)})]}),s.accessInfo&&e.jsxs("div",{className:"mt-2 p-2 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("div",{className:"text-xs text-amber-700 font-medium mb-1",children:"üîë –î–æ—Å—Ç—É–ø –≤ –∫–≤–∞—Ä—Ç–∏—Ä—É:"}),e.jsx("div",{className:"text-sm text-amber-900",children:s.accessInfo})]})]})]}),e.jsxs("div",{className:"bg-white/30 rounded-xl p-4 space-y-3",children:[e.jsx("h3",{className:"font-medium",children:"–ò—Å—Ç–æ—Ä–∏—è"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"–°–æ–∑–¥–∞–Ω–∞"}),e.jsx("span",{children:m(s.createdAt)})]}),s.assignedAt&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"–ù–∞–∑–Ω–∞—á–µ–Ω–∞"}),e.jsx("span",{children:m(s.assignedAt)})]}),s.acceptedAt&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"–ü—Ä–∏–Ω—è—Ç–∞"}),e.jsx("span",{children:m(s.acceptedAt)})]}),s.startedAt&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"–†–∞–±–æ—Ç–∞ –Ω–∞—á–∞—Ç–∞"}),e.jsx("span",{children:m(s.startedAt)})]}),s.completedAt&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"–†–∞–±–æ—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"}),e.jsx("span",{children:m(s.completedAt)})]}),s.approvedAt&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞"}),e.jsx("span",{children:m(s.approvedAt)})]}),s.workDuration&&e.jsxs("div",{className:"flex items-center justify-between border-t pt-2 mt-2",children:[e.jsx("span",{className:"text-gray-500",children:"–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã"}),e.jsxs("span",{className:"font-medium",children:[Math.round(s.workDuration/60)," –º–∏–Ω"]})]})]})]}),s.status==="completed"&&s.rating&&e.jsxs("div",{className:"bg-white/30 rounded-xl p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:"–û—Ü–µ–Ω–∫–∞"}),e.jsxs("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(l=>e.jsx(xe,{className:`w-6 h-6 ${l<=s.rating?"text-yellow-500 fill-yellow-500":"text-gray-300"}`},l)),e.jsxs("span",{className:"ml-2 text-lg font-semibold",children:[s.rating,"/5"]})]}),s.feedback&&e.jsxs("p",{className:"mt-2 text-gray-600 italic",children:['"',s.feedback,'"']})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 mt-6",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("a",{href:`tel:${s.residentPhone}`,className:"btn-secondary flex-1 flex items-center justify-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"–ü–æ–∑–≤–æ–Ω–∏—Ç—å"]}),s.status==="new"&&e.jsxs("button",{onClick:t,className:"btn-primary flex-1 flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)"},children:[e.jsx(Ce,{className:"w-4 h-4"}),"–í–∑—è—Ç—å –∑–∞—è–≤–∫—É"]}),s.status==="assigned"&&e.jsxs("button",{onClick:i,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"–ü—Ä–∏–Ω—è—Ç—å –∑–∞—è–≤–∫—É"]}),s.status==="accepted"&&e.jsxs("button",{onClick:h,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4"}),"–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É"]}),s.status==="in_progress"&&e.jsxs("button",{onClick:b,className:"btn-primary flex-1 flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, #10b981, #059669)"},children:[e.jsx(Q,{className:"w-4 h-4"}),"–ó–∞–≤–µ—Ä—à–∏—Ç—å"]})]}),j&&e.jsxs("button",{onClick:g,className:"w-full py-3 bg-amber-100 hover:bg-amber-200 text-amber-700 rounded-xl font-medium flex items-center justify-center gap-2 transition-all",children:[e.jsx(X,{className:"w-4 h-4"}),"–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è"]}),y&&e.jsxs("button",{onClick:u,className:"w-full py-2 px-4 rounded-xl font-medium text-red-600 border border-red-300 hover:bg-red-50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(He,{className:"w-4 h-4"}),s.status==="in_progress"?"–û—Å–≤–æ–±–æ–¥–∏—Ç—å –∑–∞—è–≤–∫—É":"–û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –∑–∞—è–≤–∫–∏"]})]})]})})}function js({request:s,onClose:d,onConfirm:c}){const[t,i]=n.useState(""),h=s.status==="in_progress",b=h?["–ó–∞–±–æ–ª–µ–ª/–ù–µ –º–æ–≥—É –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É","–ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –ø–æ–º–æ—â—å –¥—Ä—É–≥–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞","–ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è","–°—Ä–æ—á–Ω—ã–µ –ª–∏—á–Ω—ã–µ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞","–¢—Ä–µ–±—É–µ—Ç—Å—è –¥—Ä—É–≥–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è"]:["–ù–µ —Å–º–æ–≥—É –ø—Ä–∏–±—ã—Ç—å –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è","–ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤","–ó–∞–±–æ–ª–µ–ª/–ù–µ –º–æ–≥—É —Ä–∞–±–æ—Ç–∞—Ç—å","–°–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è","–ó–∞–≥—Ä—É–∂–µ–Ω –¥—Ä—É–≥–∏–º–∏ –∑–∞—è–≤–∫–∞–º–∏"];return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"glass-card p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-red-600 flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5"}),h?"–û—Å–≤–æ–±–æ–¥–∏—Ç—å –∑–∞—è–≤–∫—É":"–û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –∑–∞—è–≤–∫–∏"]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-white/30 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800",children:["–ó–∞—è–≤–∫–∞ ",e.jsxs("strong",{children:["#",s.number]})," –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –≤ –æ—á–µ—Ä–µ–¥—å –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥—Ä—É–≥–æ–º—É –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é.",h&&" –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–±–æ—Ç—ã –±—É–¥–µ—Ç —Å–±—Ä–æ—à–µ–Ω."]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞–∑–∞"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:b.map(u=>e.jsx("button",{type:"button",onClick:()=>i(u),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${t===u?"bg-red-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:u},u))}),e.jsx("textarea",{value:t,onChange:u=>i(u.target.value),className:"input-field min-h-[80px]",placeholder:"–ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ—é –ø—Ä–∏—á–∏–Ω—É..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:d,className:"btn-secondary flex-1",children:"–û—Ç–º–µ–Ω–∞"}),e.jsxs("button",{onClick:()=>t.trim()&&c(t),className:"flex-1 py-2 px-4 rounded-xl font-medium bg-red-500 text-white hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t.trim(),children:[e.jsx(Be,{className:"w-4 h-4 mr-2 inline"}),h?"–û—Å–≤–æ–±–æ–¥–∏—Ç—å":"–û—Ç–∫–∞–∑–∞—Ç—å—Å—è"]})]})]})]})})}function fs({request:s,onClose:d,onSubmit:c,language:t}){const[i,h]=n.useState(""),[b,u]=n.useState(""),[g,N]=n.useState("busy_time"),[y,j]=n.useState(""),m=new Date().toISOString().split("T")[0];return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"glass-card p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-amber-600 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),t==="ru"?"–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞—è–≤–∫—É":"Arizani ko'chirish"]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-white/30 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:t==="ru"?`–ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ –Ω–æ–≤–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∑–∞—è–≤–∫–∏ #${s.number}. –ñ–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.`:`#${s.number} ariza uchun yangi vaqt taklif qiling.`})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t==="ru"?"–ü—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞":"Ko'chirish sababi"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.keys(K).filter(o=>o!=="not_at_home").map(o=>e.jsx("button",{type:"button",onClick:()=>N(o),className:`px-3 py-2.5 text-sm rounded-xl transition-colors text-left ${g===o?"bg-amber-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:t==="ru"?K[o].label:K[o].labelUz},o))})]}),g==="other"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t==="ru"?"–£—Ç–æ—á–Ω–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É":"Sababni aniqlashtiring"}),e.jsx("textarea",{value:y,onChange:o=>j(o.target.value),className:"input-field min-h-[80px]",placeholder:t==="ru"?"–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É...":"Sababni yozing..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t==="ru"?"–ù–æ–≤–∞—è –¥–∞—Ç–∞":"Yangi sana"}),e.jsx("input",{type:"date",min:m,value:i,onChange:o=>h(o.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t==="ru"?"–í—Ä–µ–º—è":"Vaqt"}),e.jsx("input",{type:"time",value:b,onChange:o=>u(o.target.value),className:"input-field"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:d,className:"btn-secondary flex-1",children:t==="ru"?"–û—Ç–º–µ–Ω–∞":"Bekor qilish"}),e.jsxs("button",{onClick:()=>i&&b&&c({proposedDate:i,proposedTime:b,reason:g,reasonText:g==="other"?y:void 0}),className:"flex-1 py-2.5 px-4 rounded-xl font-medium bg-amber-500 text-white hover:bg-amber-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:!i||!b||g==="other"&&!y.trim(),children:[e.jsx(ms,{className:"w-4 h-4"}),t==="ru"?"–û—Ç–ø—Ä–∞–≤–∏—Ç—å":"Yuborish"]})]})]})]})})}function Ns({reschedule:s,onClose:d,onAccept:c,onReject:t,language:i}){const[h,b]=n.useState(""),[u,g]=n.useState(!1);return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"glass-card p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-amber-600 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),i==="ru"?"–ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å":"Ko'chirish so'rovi"]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-white/30 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[i==="ru"?"–ó–∞—è–≤–∫–∞":"Ariza"," #",s.requestNumber]}),e.jsxs("div",{className:"font-medium text-gray-800",children:[s.initiatorName," ",i==="ru"?"–ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞:":"taklif qiladi:"]}),e.jsxs("div",{className:"text-xl font-bold text-amber-600 mt-2",children:[s.proposedDate," –≤ ",s.proposedTime]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("strong",{children:i==="ru"?"–ü—Ä–∏—á–∏–Ω–∞:":"Sabab:"})," ",i==="ru"?K[s.reason].label:K[s.reason].labelUz,s.reasonText&&` - ${s.reasonText}`]})]}),s.currentDate&&e.jsxs("div",{className:"text-sm text-gray-600 text-center",children:[i==="ru"?"–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:":"Hozirgi vaqt:"," ",s.currentDate," ",s.currentTime]}),u?e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:i==="ru"?"–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞–∑–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)":"Rad etish sababi (ixtiyoriy)"}),e.jsx("textarea",{value:h,onChange:N=>b(N.target.value),className:"input-field min-h-[80px]",placeholder:i==="ru"?"–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É...":"Sababni yozing..."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>g(!1),className:"btn-secondary flex-1",children:i==="ru"?"–ù–∞–∑–∞–¥":"Orqaga"}),e.jsx("button",{onClick:()=>t(h||void 0),className:"flex-1 py-2.5 px-4 rounded-xl font-medium bg-red-500 text-white hover:bg-red-600 transition-colors",children:i==="ru"?"–û—Ç–∫–ª–æ–Ω–∏—Ç—å":"Rad etish"})]})]}):e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>g(!0),className:"flex-1 py-3 px-4 rounded-xl font-medium bg-red-100 text-red-600 hover:bg-red-200 transition-colors",children:i==="ru"?"–û—Ç–∫–ª–æ–Ω–∏—Ç—å":"Rad etish"}),e.jsxs("button",{onClick:c,className:"flex-1 py-3 px-4 rounded-xl font-medium bg-green-500 text-white hover:bg-green-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),i==="ru"?"–ü—Ä–∏–Ω—è—Ç—å":"Qabul qilish"]})]})]})]})})}function ys({order:s,onTake:d,language:c}){return e.jsxs("div",{className:"glass-card p-4 border-2 border-purple-200 bg-purple-50/30",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(U,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",s.order_number]}),e.jsx("span",{className:"px-2 py-0.5 rounded-lg text-xs font-medium bg-purple-100 text-purple-700",children:c==="ru"?"–ù–æ–≤—ã–π":"Yangi"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.items_count," ",c==="ru"?"—Ç–æ–≤–∞—Ä(–æ–≤)":"mahsulot"," ‚Ä¢ ",s.total_amount.toLocaleString()," —Å—É–º"]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-2 text-xs text-gray-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"truncate max-w-[120px]",children:s.user_name})]})}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-gray-500",children:[e.jsx(I,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.delivery_address})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-gray-400",children:[e.jsx(A,{className:"w-3 h-3"}),new Date(s.created_at).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]}),s.items&&s.items.length>0&&e.jsxs("div",{className:"mt-3 p-2.5 bg-white/60 border border-purple-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:c==="ru"?"–¢–æ–≤–∞—Ä—ã:":"Mahsulotlar:"}),e.jsx("div",{className:"space-y-1.5",children:s.items.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-700 truncate flex-1",children:t.product_name||(c==="ru"?"–¢–æ–≤–∞—Ä":"Mahsulot")}),e.jsxs("span",{className:"text-gray-500 ml-2 whitespace-nowrap",children:[t.quantity," √ó ",t.unit_price?.toLocaleString()," —Å—É–º"]})]},t.id||i))})]}),s.delivery_notes&&e.jsx("div",{className:"mt-3 p-2.5 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-amber-700",children:[e.jsx("span",{className:"font-medium",children:c==="ru"?"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ":"Izoh: "}),s.delivery_notes]})}),e.jsx("div",{className:"mt-4 pt-3 border-t border-purple-200/50",children:e.jsxs("button",{onClick:d,className:"w-full py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)"},children:[e.jsx(Ce,{className:"w-5 h-5"}),c==="ru"?"–í–∑—è—Ç—å –∑–∞–∫–∞–∑":"Buyurtmani olish"]})})]})}function vs({order:s,onView:d,language:c}){return e.jsxs("div",{className:"glass-card p-4 cursor-pointer hover:bg-white/40 active:bg-white/60 active:scale-[0.99] transition-all touch-manipulation border-2 border-green-200 bg-green-50/30",onClick:d,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(k,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",s.order_number]}),e.jsx("span",{className:"px-2 py-0.5 rounded-lg text-xs font-medium bg-green-100 text-green-700",children:c==="ru"?"–î–æ—Å—Ç–∞–≤–ª–µ–Ω":"Yetkazildi"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.items_count," ",c==="ru"?"—Ç–æ–≤–∞—Ä(–æ–≤)":"mahsulot"," ‚Ä¢ ",s.total_amount.toLocaleString()," —Å—É–º"]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-2 text-xs text-gray-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"truncate max-w-[120px]",children:s.user_name})]})}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-gray-500",children:[e.jsx(I,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.delivery_address})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-gray-400",children:[e.jsx(A,{className:"w-3 h-3"}),new Date(s.created_at).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]}),s.items&&s.items.length>0&&e.jsxs("div",{className:"mt-3 p-2.5 bg-white/60 border border-green-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:c==="ru"?"–¢–æ–≤–∞—Ä—ã:":"Mahsulotlar:"}),e.jsx("div",{className:"space-y-1.5",children:s.items.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-700 truncate flex-1",children:t.product_name||(c==="ru"?"–¢–æ–≤–∞—Ä":"Mahsulot")}),e.jsxs("span",{className:"text-gray-500 ml-2 whitespace-nowrap",children:[t.quantity," √ó ",t.unit_price?.toLocaleString()," —Å—É–º"]})]},t.id||i))})]}),s.rating&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(t=>e.jsx(xe,{className:`w-4 h-4 ${t<=s.rating?"text-yellow-500 fill-yellow-500":"text-gray-300"}`},t))}),e.jsxs("span",{className:"text-sm font-semibold text-yellow-700",children:[s.rating,"/5"]})]}),s.review&&e.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:[e.jsx("span",{className:"font-medium",children:c==="ru"?"–û—Ç–∑—ã–≤: ":"Sharh: "}),s.review]})]})]})}function We({order:s,onView:d,onUpdateStatus:c,language:t,deliveryTimer:i,formatTime:h}){const b={confirmed:{label:"–ù–∞–∑–Ω–∞—á–µ–Ω",labelUz:"Tayinlangan",color:"bg-indigo-100 text-indigo-700",icon:U},preparing:{label:"–°–æ–±–∏—Ä–∞–µ—Ç—Å—è",labelUz:"Yig'ilmoqda",color:"bg-amber-100 text-amber-700",icon:U},delivering:{label:"–î–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è",labelUz:"Yetkazilmoqda",color:"bg-blue-100 text-blue-700",icon:C},ready:{label:"–ì–æ—Ç–æ–≤",labelUz:"Tayyor",color:"bg-green-100 text-green-700",icon:k},delivered:{label:"–î–æ—Å—Ç–∞–≤–ª–µ–Ω",labelUz:"Yetkazildi",color:"bg-gray-100 text-gray-700",icon:k}},u=b[s.status]||b.confirmed,g=u.icon,N=()=>({confirmed:"preparing",preparing:"delivering",delivering:"ready",ready:"delivered"})[s.status],j=(()=>{const m={preparing:{ru:"–ù–∞—á–∞—Ç—å —Å–±–æ—Ä–∫—É",uz:"Yig'ishni boshlash"},delivering:{ru:"–ù–∞—á–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É",uz:"Yetkazishni boshlash"},ready:{ru:"–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–ª–∏–µ–Ω—Ç—É",uz:"Mijozga yetkazildi"},delivered:{ru:"–ó–∞–≤–µ—Ä—à–∏—Ç—å",uz:"Yakunlash"}},o=N();return o?m[o]:null})();return e.jsxs("div",{className:"glass-card p-4 cursor-pointer hover:bg-white/40 active:bg-white/60 active:scale-[0.99] transition-all touch-manipulation",onClick:d,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-amber-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(O,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",s.order_number]}),e.jsxs("span",{className:`px-2 py-0.5 rounded-lg text-xs font-medium flex items-center gap-1 ${u.color}`,children:[e.jsx(g,{className:"w-3 h-3"}),t==="ru"?u.label:u.labelUz]}),s.status==="delivering"&&h&&e.jsxs("span",{className:"px-2 py-0.5 rounded-lg text-xs font-bold flex items-center gap-1 bg-blue-500 text-white animate-pulse",children:[e.jsx(Se,{className:"w-3 h-3"}),h(i??0)]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.items_count," ",t==="ru"?"—Ç–æ–≤–∞—Ä(–æ–≤)":"mahsulot"," ‚Ä¢ ",s.total_amount.toLocaleString()," —Å—É–º"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"truncate max-w-[120px]",children:s.user_name})]}),e.jsxs("a",{href:`tel:${s.user_phone}`,onClick:m=>m.stopPropagation(),className:"flex items-center gap-1 text-primary-600 active:text-primary-800",children:[e.jsx(E,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:t==="ru"?"–ü–æ–∑–≤–æ–Ω–∏—Ç—å":"Qo'ng'iroq"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-gray-500",children:[e.jsx(I,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.delivery_address})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-gray-400",children:[e.jsx(A,{className:"w-3 h-3"}),new Date(s.created_at).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]}),s.items&&s.items.length>0&&e.jsxs("div",{className:"mt-3 p-2.5 bg-white/60 border border-orange-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:t==="ru"?"–¢–æ–≤–∞—Ä—ã:":"Mahsulotlar:"}),e.jsx("div",{className:"space-y-1.5",children:s.items.map((m,o)=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-700 truncate flex-1",children:m.product_name||(t==="ru"?"–¢–æ–≤–∞—Ä":"Mahsulot")}),e.jsxs("span",{className:"text-gray-500 ml-2 whitespace-nowrap",children:[m.quantity," √ó ",m.unit_price?.toLocaleString()," —Å—É–º"]})]},m.id||o))})]}),s.delivery_notes&&e.jsx("div",{className:"mt-3 p-2.5 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-amber-700",children:[e.jsx("span",{className:"font-medium",children:t==="ru"?"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ":"Izoh: "}),s.delivery_notes]})}),j&&e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200/50",onClick:m=>m.stopPropagation(),children:e.jsxs("button",{onClick:()=>c(s.id,N()),className:"w-full py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation",style:{background:s.status==="confirmed"?"linear-gradient(135deg, #f59e0b, #d97706)":s.status==="preparing"?"linear-gradient(135deg, #10b981, #059669)":s.status==="ready"?"linear-gradient(135deg, #3b82f6, #2563eb)":"linear-gradient(135deg, #10b981, #059669)"},children:[s.status==="confirmed"&&e.jsx(U,{className:"w-5 h-5"}),s.status==="preparing"&&e.jsx(C,{className:"w-5 h-5"}),s.status==="delivering"&&e.jsx(k,{className:"w-5 h-5"}),s.status==="ready"&&e.jsx(k,{className:"w-5 h-5"}),t==="ru"?j.ru:j.uz]})})]})}function ws({order:s,onClose:d,onUpdateStatus:c,language:t}){const i={confirmed:{label:"–ù–∞–∑–Ω–∞—á–µ–Ω",labelUz:"Tayinlangan",color:"bg-indigo-100 text-indigo-700"},preparing:{label:"–°–æ–±–∏—Ä–∞–µ—Ç—Å—è",labelUz:"Yig'ilmoqda",color:"bg-amber-100 text-amber-700"},delivering:{label:"–î–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è",labelUz:"Yetkazilmoqda",color:"bg-blue-100 text-blue-700"},ready:{label:"–ì–æ—Ç–æ–≤",labelUz:"Tayyor",color:"bg-green-100 text-green-700"},delivered:{label:"–î–æ—Å—Ç–∞–≤–ª–µ–Ω",labelUz:"Yetkazildi",color:"bg-gray-100 text-gray-700"}},h=i[s.status]||i.confirmed,b=()=>({confirmed:"preparing",preparing:"delivering",delivering:"ready",ready:"delivered"})[s.status],g=(()=>{const y={preparing:{ru:"–ù–∞—á–∞—Ç—å —Å–±–æ—Ä–∫—É",uz:"Yig'ishni boshlash",icon:U},delivering:{ru:"–ù–∞—á–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É",uz:"Yetkazishni boshlash",icon:C},ready:{ru:"–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–ª–∏–µ–Ω—Ç—É",uz:"Mijozga yetkazildi",icon:k},delivered:{ru:"–ó–∞–≤–µ—Ä—à–∏—Ç—å",uz:"Yakunlash",icon:k}},j=b();return j?y[j]:null})(),N=g?.icon||U;return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[t==="ru"?"–ó–∞–∫–∞–∑ –º–∞–≥–∞–∑–∏–Ω–∞":"Do'kon buyurtmasi"," #",s.order_number]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-sm font-medium ${h.color}`,children:t==="ru"?h.label:h.labelUz})})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-white/30 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-amber-500 rounded-xl flex items-center justify-center",children:e.jsx(O,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.items_count," ",t==="ru"?"—Ç–æ–≤–∞—Ä(–æ–≤)":"mahsulot"]}),e.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[s.total_amount.toLocaleString()," —Å—É–º"]})]})]})}),e.jsxs("div",{className:"bg-white/30 rounded-xl p-4 space-y-3",children:[e.jsx("h3",{className:"font-medium",children:t==="ru"?"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ":"Mijoz haqida"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:s.user_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-gray-400"}),e.jsx("a",{href:`tel:${s.user_phone}`,className:"text-primary-600 hover:underline",children:s.user_phone})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsx("span",{children:s.delivery_address})]})]})]}),s.delivery_notes&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("h3",{className:"font-medium text-amber-800 mb-2",children:t==="ru"?"–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –∫ –¥–æ—Å—Ç–∞–≤–∫–µ":"Yetkazish uchun eslatma"}),e.jsx("p",{className:"text-sm text-amber-700",children:s.delivery_notes})]}),e.jsxs("div",{className:"bg-white/30 rounded-xl p-4 space-y-3",children:[e.jsx("h3",{className:"font-medium",children:t==="ru"?"–ò—Å—Ç–æ—Ä–∏—è":"Tarix"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:t==="ru"?"–°–æ–∑–¥–∞–Ω":"Yaratildi"}),e.jsx("span",{children:new Date(s.created_at).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.assigned_at&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:t==="ru"?"–ù–∞–∑–Ω–∞—á–µ–Ω":"Tayinlandi"}),e.jsx("span",{children:new Date(s.assigned_at).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 mt-6",children:[e.jsx("div",{className:"flex gap-3",children:e.jsxs("a",{href:`tel:${s.user_phone}`,className:"btn-secondary flex-1 flex items-center justify-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),t==="ru"?"–ü–æ–∑–≤–æ–Ω–∏—Ç—å":"Qo'ng'iroq"]})}),g&&e.jsxs("button",{onClick:()=>{c(s.id,b())},className:"w-full py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform",style:{background:s.status==="confirmed"?"linear-gradient(135deg, #f59e0b, #d97706)":s.status==="preparing"?"linear-gradient(135deg, #10b981, #059669)":s.status==="ready"?"linear-gradient(135deg, #3b82f6, #2563eb)":"linear-gradient(135deg, #10b981, #059669)"},children:[e.jsx(N,{className:"w-5 h-5"}),t==="ru"?g.ru:g.uz]})]})]})})}export{Ts as ExecutorDashboard};
//# sourceMappingURL=ExecutorDashboard-1769428875114-D6HDQppT.js.map
