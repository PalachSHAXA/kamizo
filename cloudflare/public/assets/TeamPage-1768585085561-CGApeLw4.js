import{r,j as e,Y as F,y as Se,aH as ke,a5 as q,K as ze,au as Y,o as G,a2 as J,W as I,X as K,a0 as h,ad as C,m as V,ar as Le,z as ee,l as se,_ as Ae,$ as Ee,a_ as _e,aZ as Pe,bb as De,bc as Me,a8 as Fe,ai as Ie,bd as Oe,b4 as Te,be as Xe,a4 as $e,bf as Be,v as He,bg as Re,Z as Ze,aF as Ue}from"./react-vendor-1768585085561-CM8YoXKY.js";import{S as z,t as j}from"./index-1768585085561-DY3gV71t.js";import"./vendor-1768585085561-eDq9GBqE.js";import"./qr-scanner-1768585085561-cr32YHjo.js";import"./zustand-1768585085561-wNUYBKDB.js";const ae={manager:"Менеджер",department_head:"Глава отдела",executor:"Исполнитель"},te={manager:"bg-purple-100 text-purple-700",department_head:"bg-blue-100 text-blue-700",executor:"bg-green-100 text-green-700"},We={plumber:e.jsx(Ue,{className:"w-4 h-4"}),electrician:e.jsx(Ze,{className:"w-4 h-4"}),elevator:e.jsx(Re,{className:"w-4 h-4"}),intercom:e.jsx(He,{className:"w-4 h-4"}),cleaning:e.jsx(Be,{className:"w-4 h-4"}),security:e.jsx($e,{className:"w-4 h-4"}),carpenter:e.jsx(Xe,{className:"w-4 h-4"}),boiler:e.jsx(Te,{className:"w-4 h-4"}),ac:e.jsx(Oe,{className:"w-4 h-4"}),courier:e.jsx(Ie,{className:"w-4 h-4"}),other:e.jsx(I,{className:"w-4 h-4"})},Qe={plumber:"bg-blue-100 text-blue-700",electrician:"bg-yellow-100 text-yellow-700",elevator:"bg-gray-100 text-gray-700",intercom:"bg-purple-100 text-purple-700",cleaning:"bg-pink-100 text-pink-700",security:"bg-red-100 text-red-700",carpenter:"bg-amber-100 text-amber-700",boiler:"bg-orange-100 text-orange-700",ac:"bg-cyan-100 text-cyan-700",courier:"bg-green-100 text-green-700",other:"bg-gray-100 text-gray-700"};function Ve(){const[f,le]=r.useState([]),[p,ne]=r.useState([]),[u,ie]=r.useState([]),[re,S]=r.useState(!0),[O,T]=r.useState(null),[l,N]=r.useState(null),[X,v]=r.useState(!1),[k,L]=r.useState(!1),[b,g]=r.useState(null),[y,$]=r.useState(null),[A,ce]=r.useState(""),[E,oe]=r.useState("all"),[B,de]=r.useState({managers:!0,departmentHeads:!0,executors:!0}),[i,d]=r.useState({name:"",phone:"",login:"",password:"",specialization:""}),[xe,H]=r.useState(!1),[me,w]=r.useState(!1),[t,o]=r.useState({name:"",phone:"",login:"",password:"",role:"executor",specialization:""}),[_,R]=r.useState(!1),[Z,x]=r.useState(null),m=async()=>{S(!0),T(null);try{const s=await j.getAll();le(s.managers||[]),ne(s.departmentHeads||[]),ie(s.executors||[])}catch(s){T(s.message||"Ошибка загрузки данных")}finally{S(!1)}};r.useEffect(()=>{m()},[]);const he=async s=>{N(s),d({name:s.name,phone:s.phone,login:s.login,password:"",specialization:s.specialization||""}),v(!1),L(!1),H(!0);try{const a=await j.getById(s.id);if(a.user){const n={...s,...a.user};N(n),d({name:n.name,phone:n.phone,login:n.login,password:"",specialization:n.specialization||""})}}catch{}finally{H(!1)}},U=()=>{N(null),v(!1),L(!1)},P=(s,a)=>{navigator.clipboard.writeText(s),g(a),setTimeout(()=>g(null),2e3)},pe=async()=>{if(l)try{const s={};if(i.name!==l.name&&(s.name=i.name),i.phone!==l.phone&&(s.phone=i.phone),i.login!==l.login&&(s.login=i.login),i.password&&(s.password=i.password),i.specialization!==l.specialization&&(s.specialization=i.specialization),Object.keys(s).length>0){const a=await j.update(l.id,s);await m(),a.user&&N({...l,...a.user})}v(!1),d(a=>({...a,password:""}))}catch(s){alert("Ошибка сохранения: "+s.message)}},W=()=>{const s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let a="";for(let n=0;n<8;n++)a+=s.charAt(Math.floor(Math.random()*s.length));return a},ue=async()=>{if(x(null),!t.name.trim()){x("Введите ФИО");return}if(!t.login.trim()){x("Введите логин");return}if(!t.password.trim()){x("Введите пароль");return}if((t.role==="executor"||t.role==="department_head")&&!t.specialization){x("Выберите специализацию");return}R(!0);try{const s=await j.create({login:t.login,password:t.password,name:t.name,phone:t.phone,role:t.role,specialization:t.specialization||void 0});$({login:t.login,password:s.user?.password||t.password}),o({name:"",phone:"",login:"",password:"",role:"executor",specialization:""}),w(!1),await m()}catch(s){x(s.message||"Ошибка создания сотрудника")}finally{R(!1)}},ge=(s="executor")=>{o({name:"",phone:"",login:"",password:W(),role:s,specialization:""}),x(null),w(!0)},je=async s=>{if(confirm(`Удалить сотрудника "${s.name}"? Это действие необратимо.`))try{await j.delete(s.id),l?.id===s.id&&N(null),await m()}catch(a){alert("Ошибка удаления: "+a.message)}},fe=async()=>{const s=[...f.filter(a=>!a.password),...p.filter(a=>!a.password),...u.filter(a=>!a.password)];if(s.length===0){alert("Все сотрудники уже имеют пароли");return}if(confirm(`Сбросить пароли для ${s.length} сотрудников без паролей?

Это сгенерирует новые пароли для всех сотрудников, у которых не отображается пароль.`))try{S(!0);const a=await j.resetAllPasswords();if(a.updated>0){const n=a.staff.map(c=>`${c.name}: ${c.login} / ${c.password}`).join(`
`);alert(`Обновлено ${a.updated} сотрудников:

${n}`)}else alert(a.message);await m()}catch(a){alert("Ошибка сброса паролей: "+a.message)}finally{S(!1)}},Ne=s=>{de(a=>({...a,[s]:!a[s]}))},D=s=>{let a=s;if(E!=="all"&&(a=a.filter(n=>n.specialization===E)),A){const n=A.toLowerCase();a=a.filter(c=>c.name.toLowerCase().includes(n)||c.phone.includes(n)||c.login.toLowerCase().includes(n)||c.specialization&&z[c.specialization]?.toLowerCase().includes(n))}return a},ve=[...new Set([...p.map(s=>s.specialization).filter(Boolean),...u.map(s=>s.specialization).filter(Boolean)])],be=D(f),ye=D(p),we=D(u),Q=s=>{switch(s){case"available":return e.jsx("span",{className:"badge badge-done text-xs",children:"Доступен"});case"busy":return e.jsx("span",{className:"badge badge-progress text-xs",children:"Занят"});case"offline":return e.jsx("span",{className:"badge bg-gray-100 text-gray-600 text-xs",children:"Не в сети"});default:return null}},Ce=s=>e.jsxs("div",{className:"glass-card p-4 hover:shadow-lg transition-shadow cursor-pointer relative group",onClick:()=>he(s),children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),je(s)},className:"absolute top-2 right-2 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg opacity-0 group-hover:opacity-100 transition-all",title:"Удалить сотрудника",children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-start justify-between mb-3 pr-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg font-medium ${s.specialization?Qe[s.specialization]:"bg-primary-100 text-primary-700"}`,children:s.specialization?We[s.specialization]:s.name.split(" ").map(a=>a[0]).join("").slice(0,2)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),s.specialization&&e.jsx("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:z[s.specialization]||s.specialization})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${te[s.role]}`,children:ae[s.role]}),Q(s.status)]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),s.phone]}),(s.role==="executor"||s.role==="department_head")&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"w-4 h-4 text-amber-400"}),s.avg_rating||0]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-4 h-4 text-green-500"}),s.completed_count||0," выполнено"]}),s.active_count?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"w-4 h-4 text-blue-500"}),s.active_count," активных"]}):null]})]})]},s.id),M=(s,a,n,c)=>e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("button",{className:"w-full p-4 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors",onClick:()=>Ne(c),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a,e.jsx("h2",{className:"text-lg font-semibold",children:s}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-gray-200 text-gray-700 text-sm",children:n.length})]}),B[c]?e.jsx(De,{className:"w-5 h-5 text-gray-500"}):e.jsx(Me,{className:"w-5 h-5 text-gray-500"})]}),B[c]&&e.jsx("div",{className:"p-4",children:n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Нет сотрудников"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(Ce)})})]});return re?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(F,{className:"w-8 h-8 animate-spin text-primary-500"})}):O?e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:O}),e.jsx("button",{onClick:m,className:"btn-primary",children:"Повторить"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Персонал"}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Всего: ",f.length+p.length+u.length," сотрудников"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Поиск...",value:A,onChange:s=>ce(s.target.value),className:"pl-10 pr-4 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsxs("select",{value:E,onChange:s=>oe(s.target.value),className:"pl-10 pr-8 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-500 focus:border-transparent appearance-none bg-white",children:[e.jsx("option",{value:"all",children:"Все специализации"}),ve.map(s=>e.jsx("option",{value:s,children:z[s]},s))]})]}),e.jsx("button",{onClick:m,className:"btn-secondary p-2",title:"Обновить",children:e.jsx(q,{className:"w-5 h-5"})}),[...f,...p,...u].some(s=>!s.password)&&e.jsxs("button",{onClick:fe,className:"btn-secondary flex items-center gap-2 text-orange-600 hover:bg-orange-50",title:"Сбросить пароли для сотрудников без паролей",children:[e.jsx(ze,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Сбросить пароли"})]}),e.jsxs("button",{onClick:()=>ge("executor"),className:"btn-primary flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Добавить сотрудника"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"glass-card p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Менеджеров"})]})]})}),e.jsx("div",{className:"glass-card p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Глав отделов"})]})]})}),e.jsx("div",{className:"glass-card p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(I,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Исполнителей"})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[M("Менеджеры",e.jsx(G,{className:"w-5 h-5 text-purple-500"}),be,"managers"),M("Главы отделов",e.jsx(J,{className:"w-5 h-5 text-blue-500"}),ye,"departmentHeads"),M("Исполнители",e.jsx(I,{className:"w-5 h-5 text-green-500"}),we,"executors")]}),me&&e.jsx("div",{className:"modal-backdrop",onClick:()=>w(!1),children:e.jsxs("div",{className:"modal-content p-6 w-full max-w-lg mx-4",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Добавить сотрудника"}),e.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(K,{className:"w-5 h-5"})})]}),Z&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-xl mb-4 text-sm",children:Z}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Роль *"}),e.jsxs("select",{value:t.role,onChange:s=>o({...t,role:s.target.value}),className:"input-field",children:[e.jsx("option",{value:"executor",children:"Исполнитель"}),e.jsx("option",{value:"department_head",children:"Глава отдела"}),e.jsx("option",{value:"manager",children:"Менеджер"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ФИО *"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>o({...t,name:s.target.value}),className:"input-field",placeholder:"Иванов Иван Иванович"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Телефон"}),e.jsx("input",{type:"text",value:t.phone,onChange:s=>o({...t,phone:s.target.value}),className:"input-field",placeholder:"+998 XX XXX XX XX"})]}),(t.role==="executor"||t.role==="department_head")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Специализация *"}),e.jsxs("select",{value:t.specialization,onChange:s=>o({...t,specialization:s.target.value}),className:"input-field",children:[e.jsx("option",{value:"",children:"Выберите специализацию"}),e.jsx("option",{value:"plumber",children:"Сантехник"}),e.jsx("option",{value:"electrician",children:"Электрик"}),e.jsx("option",{value:"elevator",children:"Лифтёр"}),e.jsx("option",{value:"intercom",children:"Домофон"}),e.jsx("option",{value:"cleaning",children:"Уборщица"}),e.jsx("option",{value:"security",children:"Охранник"}),e.jsx("option",{value:"carpenter",children:"Столяр"}),e.jsx("option",{value:"boiler",children:"Котельщик"}),e.jsx("option",{value:"ac",children:"Кондиционерщик"}),e.jsx("option",{value:"courier",children:"Курьер"}),e.jsx("option",{value:"other",children:"Другое"})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Данные для входа"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Логин *"}),e.jsx("input",{type:"text",value:t.login,onChange:s=>o({...t,login:s.target.value}),className:"input-field",placeholder:"ivanov"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Пароль *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t.password,onChange:s=>o({...t,password:s.target.value}),className:"input-field flex-1"}),e.jsx("button",{type:"button",onClick:()=>o({...t,password:W()}),className:"btn-secondary px-3",title:"Сгенерировать пароль",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>P(t.password,"addPassword"),className:"btn-secondary px-3",title:"Копировать пароль",children:b==="addPassword"?e.jsx(h,{className:"w-4 h-4 text-green-500"}):e.jsx(C,{className:"w-4 h-4"})})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>w(!1),className:"btn-secondary flex-1",disabled:_,children:"Отмена"}),e.jsxs("button",{onClick:ue,disabled:_,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[_?e.jsx(F,{className:"w-4 h-4 animate-spin"}):e.jsx(Y,{className:"w-4 h-4"}),"Добавить"]})]})]})}),l&&e.jsx("div",{className:"modal-backdrop",onClick:U,children:e.jsxs("div",{className:"modal-content p-6 w-full max-w-lg mx-4",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center text-2xl font-medium text-primary-700",children:l.name.split(" ").map(s=>s[0]).join("").slice(0,2)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:l.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${te[l.role]}`,children:ae[l.role]}),l.specialization&&e.jsx("span",{className:"text-sm text-gray-500",children:z[l.specialization]})]}),Q(l.status)]})]}),e.jsx("button",{onClick:U,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(K,{className:"w-5 h-5"})})]}),l.role==="executor"&&e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-amber-50 rounded-xl p-3 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-amber-600 mb-1",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-lg",children:l.avg_rating||0})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Рейтинг"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-3 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-green-600 mb-1",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-lg",children:l.completed_count||0})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Выполнено"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-blue-600 mb-1",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-lg",children:l.active_count||0})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Активных"})]})]}),X?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ФИО"}),e.jsx("input",{type:"text",value:i.name,onChange:s=>d({...i,name:s.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Телефон"}),e.jsx("input",{type:"text",value:i.phone,onChange:s=>d({...i,phone:s.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Логин"}),e.jsx("input",{type:"text",value:i.login,onChange:s=>d({...i,login:s.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Новый пароль"}),e.jsx("input",{type:"text",value:i.password,onChange:s=>d({...i,password:s.target.value}),className:"input-field",placeholder:"Оставьте пустым, чтобы не менять"})]}),(l.role==="executor"||l.role==="department_head")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Специализация"}),e.jsxs("select",{value:i.specialization,onChange:s=>d({...i,specialization:s.target.value}),className:"input-field",children:[e.jsx("option",{value:"",children:"Не указана"}),e.jsx("option",{value:"plumber",children:"Сантехник"}),e.jsx("option",{value:"electrician",children:"Электрик"}),e.jsx("option",{value:"elevator",children:"Лифтёр"}),e.jsx("option",{value:"intercom",children:"Домофон"}),e.jsx("option",{value:"cleaning",children:"Уборщица"}),e.jsx("option",{value:"gardener",children:"Садовник"}),e.jsx("option",{value:"security",children:"Охранник"}),e.jsx("option",{value:"carpenter",children:"Столяр"}),e.jsx("option",{value:"boiler",children:"Котельщик"}),e.jsx("option",{value:"ac",children:"Кондиционерщик"}),e.jsx("option",{value:"other",children:"Другое"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Телефон"})]}),e.jsx("span",{className:"font-medium",children:l.phone})]})}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 space-y-3",children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 mb-2",children:"Данные для входа"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Логин"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded text-sm font-mono",children:l.login}),e.jsx("button",{onClick:()=>P(l.login,"login"),className:"p-1 hover:bg-blue-100 rounded",title:"Копировать",children:b==="login"?e.jsx(h,{className:"w-4 h-4 text-green-500"}):e.jsx(C,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Пароль"}),e.jsx("div",{className:"flex items-center gap-2",children:xe?e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(F,{className:"w-4 h-4 animate-spin"}),"Загрузка..."]}):l.password?e.jsxs(e.Fragment,{children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded text-sm font-mono",children:k?l.password:"••••••••"}),e.jsx("button",{type:"button",onClick:s=>{s.preventDefault(),s.stopPropagation(),L(!k)},className:"p-2 hover:bg-blue-100 active:bg-blue-200 rounded touch-manipulation z-10",title:k?"Скрыть":"Показать",children:k?e.jsx(Ae,{className:"w-4 h-4 text-gray-400"}):e.jsx(Ee,{className:"w-4 h-4 text-gray-400"})}),e.jsx("button",{onClick:()=>P(l.password||"","password"),className:"p-1 hover:bg-blue-100 rounded",title:"Копировать",children:b==="password"?e.jsx(h,{className:"w-4 h-4 text-green-500"}):e.jsx(C,{className:"w-4 h-4 text-gray-400"})})]}):e.jsx("span",{className:"text-sm text-gray-400 italic",children:'Задайте через "Редактировать"'})})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["Добавлен: ",new Date(l.created_at).toLocaleDateString("ru-RU")]})]}),e.jsx("div",{className:"flex gap-3 mt-6",children:X?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>v(!1),className:"btn-secondary flex-1",children:"Отмена"}),e.jsxs("button",{onClick:pe,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),"Сохранить"]})]}):e.jsxs("button",{onClick:()=>v(!0),className:"btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),"Редактировать"]})})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(h,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Сотрудник создан!"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Сохраните учетные данные для входа"})]}),e.jsxs("div",{className:"space-y-4 bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Логин"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-3 py-1.5 rounded-lg text-sm font-mono font-medium",children:y.login}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(y.login),g("cred-login"),setTimeout(()=>g(null),2e3)},className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors",children:b==="cred-login"?e.jsx(h,{className:"w-4 h-4 text-green-500"}):e.jsx(C,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Пароль"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-3 py-1.5 rounded-lg text-sm font-mono font-medium",children:y.password}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(y.password),g("cred-password"),setTimeout(()=>g(null),2e3)},className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors",children:b==="cred-password"?e.jsx(h,{className:"w-4 h-4 text-green-500"}):e.jsx(C,{className:"w-4 h-4 text-gray-400"})})]})]})]}),e.jsx("div",{className:"mt-6 p-3 bg-yellow-50 rounded-xl border border-yellow-200",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"⚠️ Сохраните эти данные! Пароль показывается только один раз."})}),e.jsx("button",{onClick:()=>$(null),className:"btn-primary w-full mt-6",children:"Готово"})]})})]})}export{Ve as TeamPage};
//# sourceMappingURL=TeamPage-1768585085561-CGApeLw4.js.map
