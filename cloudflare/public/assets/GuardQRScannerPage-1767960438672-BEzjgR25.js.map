{"version":3,"mappings":"sZAoBO,SAASA,IAAqB,CACnC,KAAM,CAAE,KAAAC,CAAA,EAASC,EAAA,EACX,CAAE,wBAAAC,EAAyB,mBAAAC,EAAoB,kBAAAC,EAAmB,mBAAAC,EAAoB,iBAAAC,CAAA,EAAqBC,EAAA,EAC3G,CAAE,SAAAC,CAAA,EAAaC,GAAA,EAGrBC,YAAU,IAAM,CAIdJ,EAAiB,QAAQK,GAAK,CAE9B,CAAC,CACH,EAAG,CAACL,CAAgB,CAAC,EAErB,KAAM,CAACM,EAAYC,CAAa,EAAIC,WAAS,EAAK,EAC5C,CAACC,EAAeC,CAAgB,EAAIF,WAAS,EAAK,EAClD,CAACG,EAAYC,CAAa,EAAIJ,WAA4B,IAAI,EAC9D,CAACK,EAAiBC,CAAkB,EAAIN,WAAS,EAAK,EACtD,CAACO,EAAYC,CAAa,EAAIR,WAAS,EAAE,EACzC,CAACS,EAAaC,CAAc,EAAIV,WAAS,EAAK,EAC9C,CAACW,EAAaC,CAAc,EAAIZ,WAAwB,IAAI,EAE5Da,EAAWC,SAAyB,IAAI,EACxCC,EAAYD,SAA0B,IAAI,EAC1CE,EAAYF,SAA2B,IAAI,EAC3CG,EAAeH,SAAsB,IAAI,EACzCI,EAAcJ,SAAO,EAAK,EAE1BK,EAAa5B,EAAA,EAAqB,MAAM,EAAG,EAAE,EAE7C6B,EAAgBC,cAAaC,GAAmB,CAEpD,MAAMC,EAASnC,EAAwBkC,CAAM,EAG7C,GAAKC,EAAO,MA6CVnB,EAAc,CACZ,OAAQ,UACR,KAAMmB,EAAO,KACb,QAAS7B,IAAa,KAAO,uBAAyB,yBACvD,MAjDgB,CACjB,IAAI8B,EAAU,GACVC,EAA+B,UAEnC,OAAQF,EAAO,OACb,IAAK,UACHE,EAAS,UACTD,EAAU9B,IAAa,KAAO,gBAAkB,6BAChD,MACF,IAAK,UACH+B,EAAS,UACTD,EAAU9B,IAAa,KAAO,kBAAoB,4BAClD,MACF,IAAK,eACL,IAAK,mBACH+B,EAAS,OACTD,EAAU9B,IAAa,KAAO,0BAA4B,yBAC1D,MACF,IAAK,gBACH+B,EAAS,gBACTD,EAAU9B,IAAa,KAAO,8BAAgC,gCAC9D,MACF,QACE+B,EAAS,UACTD,EAAU9B,IAAa,KAAO,0BAA4B,mBAG9DU,EAAc,CAAE,OAAAqB,EAAQ,KAAMF,EAAO,KAAM,QAAAC,EAAS,EAGhDtC,GAAQqC,EAAO,MACjBjC,EAAkB,CAChB,aAAciC,EAAO,KAAK,GAC1B,YAAarC,EAAK,GAClB,cAAeA,EAAK,KACpB,cAAeA,EAAK,KACpB,OAAQuC,IAAW,UAAY,eACvBA,IAAW,OAAS,YACpBA,IAAW,UAAY,eAAiB,eAChD,YAAaF,EAAO,KAAK,YACzB,aAAcA,EAAO,KAAK,aAC1B,kBAAmBA,EAAO,KAAK,kBAChC,CAEL,CAOF,EAAG,CAACnC,EAAyBE,EAAmBJ,EAAMQ,CAAQ,CAAC,EAEzDgC,EAAYL,cAAY,SAAY,CACxC,GAAI,CAACH,EAAY,SAAW,CAACL,EAAS,SAAW,CAACE,EAAU,QAC1D,OAGF,MAAMY,EAAQd,EAAS,QACjBe,EAASb,EAAU,QACnBc,EAAMD,EAAO,WAAW,IAAI,EAElC,GAAI,CAACC,GAAOF,EAAM,aAAeA,EAAM,iBAAkB,CACvDV,EAAa,QAAU,sBAAsB,IAAM,CAAES,EAAA,CAAa,CAAC,EACnE,MACF,CAEAE,EAAO,MAAQD,EAAM,WACrBC,EAAO,OAASD,EAAM,YACtBE,EAAI,UAAUF,EAAO,EAAG,EAAGC,EAAO,MAAOA,EAAO,MAAM,EAEtD,GAAI,CACF,MAAME,EAAYD,EAAI,aAAa,EAAG,EAAGD,EAAO,MAAOA,EAAO,MAAM,EAG9D,CAAE,QAASG,GAAS,MAAAC,GAAA,wBAAAD,CAAA,OAAM,QAAO,wCAAM,OAAAE,KAAA,kBAAAF,CAAA,OAEvCG,EAASH,EAAKD,EAAU,KAAMA,EAAU,MAAOA,EAAU,OAAQ,CACrE,kBAAmB,aACpB,EAED,GAAII,GAAUA,EAAO,KAAM,CACzBhB,EAAY,QAAU,GACtBE,EAAcc,EAAO,IAAI,EACzBC,EAAA,EACA,MACF,CACF,MAAY,CAEZ,CAEAlB,EAAa,QAAU,sBAAsB,IAAM,CAAES,EAAA,CAAa,CAAC,CACrE,EAAG,CAACN,CAAa,CAAC,EAEZgB,EAAc,SAAY,CAC9B,GAAI,CAMF,GALAxB,EAAe,IAAI,EACnBb,EAAc,EAAI,EAClBG,EAAiB,EAAK,EAGlB,CAAC,UAAU,cAAgB,CAAC,UAAU,aAAa,aACrD,MAAM,IAAI,MAAM,0BAA0B,EAM5C,IAAImC,EACJ,GAAI,CACFA,EAAS,MAAM,UAAU,aAAa,aAAa,CACjD,MAAO,CACL,WAAY,CAAE,MAAO,eACrB,MAAO,CAAE,MAAO,MAChB,OAAQ,CAAE,MAAO,IAAI,CACvB,CACD,CACH,MAAQ,CAGNA,EAAS,MAAM,UAAU,aAAa,aAAa,CACjD,MAAO,GACR,CACH,CAMA,GAFArB,EAAU,QAAUqB,EAEhBxB,EAAS,QAAS,CACpBA,EAAS,QAAQ,UAAYwB,EAG7B,MAAMC,EAAY,SAAY,CAC5B,GAAI,CACEzB,EAAS,UAEX,MAAMA,EAAS,QAAQ,OAEvBX,EAAiB,EAAI,EACrBgB,EAAY,QAAU,GACtBQ,EAAA,EAEJ,MAAkB,CAEhBd,EAAelB,IAAa,KACxB,gDACA,uCAAuC,CAC7C,CACF,EAEAmB,EAAS,QAAQ,iBAAmB,IAAM,CAExCyB,EAAA,CACF,EAGAzB,EAAS,QAAQ,UAAY,IAAM,CAC5BZ,GAEHqC,EAAA,CAEJ,CACF,CACF,OAASC,EAAK,CAEZxC,EAAc,EAAK,EAGnB,IAAIyC,EAAe9C,IAAa,KAC5B,uCACA,mCAEA6C,aAAe,QACbA,EAAI,OAAS,mBAAqBA,EAAI,OAAS,wBACjDC,EAAe9C,IAAa,KACxB,oEACA,mEACK6C,EAAI,OAAS,iBAAmBA,EAAI,OAAS,uBACtDC,EAAe9C,IAAa,KACxB,mCACA,8BACK6C,EAAI,OAAS,oBAAsBA,EAAI,OAAS,kBACzDC,EAAe9C,IAAa,KACxB,0CACA,gDACK6C,EAAI,UAAY,6BACzBC,EAAe9C,IAAa,KACxB,8DACA,kFAIRkB,EAAe4B,CAAY,CAC7B,CACF,EAEML,EAAad,cAAY,IAAM,CACnCH,EAAY,QAAU,GAElBD,EAAa,UACf,qBAAqBA,EAAa,OAAO,EACzCA,EAAa,QAAU,MAGrBD,EAAU,UACZA,EAAU,QAAQ,YAAY,QAAQyB,GAASA,EAAM,MAAM,EAC3DzB,EAAU,QAAU,MAGlBH,EAAS,UACXA,EAAS,QAAQ,UAAY,MAG/Bd,EAAc,EAAK,EACnBG,EAAiB,EAAK,CACxB,EAAG,EAAE,EAELN,YAAU,IACD,IAAM,CACXuC,EAAA,CACF,EACC,CAACA,CAAU,CAAC,EAEf,MAAMO,EAAmB,IAAM,CACzB,CAACvC,GAAY,MAAQ,CAACjB,IAG1BG,EAAmBc,EAAW,KAAK,GAAIA,EAAW,IAAI,EAGtDb,EAAkB,CAChB,aAAca,EAAW,KAAK,GAC9B,YAAajB,EAAK,GAClB,cAAeA,EAAK,KACpB,cAAeA,EAAK,KACpB,OAAQ,gBACR,YAAaiB,EAAW,KAAK,YAC7B,aAAcA,EAAW,KAAK,aAC9B,kBAAmBA,EAAW,KAAK,kBACpC,EAEDC,EAAc,IAAI,EACpB,EAEMuC,EAAkB,IAAM,CACxB,CAACxC,GAAY,MAAQ,CAACjB,IAG1BI,EAAkB,CAChB,aAAca,EAAW,KAAK,GAC9B,YAAajB,EAAK,GAClB,cAAeA,EAAK,KACpB,cAAeA,EAAK,KACpB,OAAQ,eACR,YAAaiB,EAAW,KAAK,YAC7B,aAAcA,EAAW,KAAK,aAC9B,kBAAmBA,EAAW,KAAK,kBACpC,EAEDC,EAAc,IAAI,EACpB,EAEMwC,EAAqB,IAAM,CAC1BrC,EAAW,SAChBa,EAAcb,EAAW,MAAM,EAC/BC,EAAc,EAAE,EAChBF,EAAmB,EAAK,EAC1B,EAEMuC,EAAkBC,GAAiB,CACvC,OAAQA,EAAA,CACN,IAAK,UAAW,OAAOC,MAACC,GAAA,CAAQ,UAAU,UAAU,EACpD,IAAK,QAAS,OAAOD,MAACE,GAAA,CAAM,UAAU,UAAU,EAChD,IAAK,OAAQ,OAAOF,MAACG,EAAA,CAAI,UAAU,UAAU,EAC7C,QAAS,OAAOH,MAACI,GAAA,CAAK,UAAU,UAAU,EAE9C,EAEA,OACEC,OAAC,OAAI,UAAU,uCAEb,UAAAA,OAAC,OAAI,UAAU,0CACb,UAAAA,OAAC,OACC,UAAAL,MAAC,MAAG,UAAU,8CACX,SAAArD,IAAa,KAAO,YAAc,YACrC,QACC,KAAE,UAAU,6BACV,SAAAA,IAAa,KACV,kCACA,oDACN,EAEA0D,OAAC,KAAE,UAAU,6BACV,UAAA1D,IAAa,KAAO,qBAAuB,qBAAqB,KAAGF,EAAiB,OAAOK,GAAKA,EAAE,SAAW,QAAQ,EAAE,OAAO,MAAIL,EAAiB,QACtJ,GACF,EACAuD,MAAC,UACC,QAAS,IAAMrC,EAAe,CAACD,CAAW,EAC1C,UAAW,sCACTA,EAAc,+BAAiC,0CACjD,GAEA,SAAAsC,MAACM,GAAA,CAAQ,UAAU,UAAU,GAC/B,EACF,EAGC,CAAC5C,GAAe,CAACN,GAChB4C,MAAC,OAAI,UAAU,6BACZ,SAAAjD,EACCsD,OAAC,OAAI,UAAU,oBAAoB,MAAO,CAAE,UAAW,SACrD,UAAAL,MAAC,SACC,IAAKlC,EACL,UAAU,gBACV,MAAO,CAAE,UAAW,QAAS,UAAW,OAAQ,UAAW,SAC3D,YAAW,GACX,MAAK,GACL,SAAQ,KAEVkC,MAAC,UAAO,IAAKhC,EAAW,UAAU,SAAS,EAG1C,CAACd,GACA8C,MAAC,OAAI,UAAU,gEACb,SAAAK,OAAC,OAAI,UAAU,yBACb,UAAAL,MAAC,OAAI,UAAU,oGAAoG,EACnHA,MAAC,KAAG,SAAArD,IAAa,KAAO,qBAAuB,wBAAwB,GACzE,EACF,EAIDO,SACE,OAAI,UAAU,wEACb,SAAAmD,OAAC,OAAI,UAAU,0DACb,UAAAL,MAAC,OAAI,UAAU,uFAAuF,EACtGA,MAAC,OAAI,UAAU,wFAAwF,EACvGA,MAAC,OAAI,UAAU,0FAA0F,EACzGA,MAAC,OAAI,UAAU,2FAA2F,EAG1GA,MAAC,OAAI,UAAU,yDAAyD,MAAO,CAAE,IAAK,MAAM,CAAG,GACjG,EACF,EAIFK,OAAC,UACC,QAASjB,EACT,UAAU,mJAEV,UAAAY,MAACO,EAAA,CAAE,UAAU,UAAU,EACtB5D,IAAa,KAAO,aAAe,eACtC,EACF,EAEA0D,OAAC,OAAI,UAAU,kBACb,UAAAL,MAAC,OAAI,UAAU,sFACb,eAACQ,GAAA,CAAO,UAAU,6BAA6B,EACjD,EAEC5C,EACCyC,OAAC,OAAI,UAAU,OACb,UAAAL,MAAC,OAAI,UAAU,oBAAqB,SAAApC,EAAY,QAC/C,KAAE,UAAU,wBACV,SAAAjB,IAAa,KACV,oDACA,gDACN,GACF,QAEC,KAAE,UAAU,qBACV,SAAAA,IAAa,KACV,4CACA,6CACN,EAGF0D,OAAC,OAAI,UAAU,iDACb,UAAAA,OAAC,UACC,QAAShB,EACT,UAAU,0HAEV,UAAAW,MAACS,GAAA,CAAO,UAAU,UAAU,EAC3B9D,IAAa,KAAO,iBAAmB,mBAE1C0D,OAAC,UACC,QAAS,IAAM9C,EAAmB,EAAI,EACtC,UAAU,yHAEV,UAAAyC,MAACU,GAAA,CAAS,UAAU,UAAU,EAC7B/D,IAAa,KAAO,aAAe,iBACtC,EACF,GACF,EAEJ,EAIDW,SACE,OAAI,UAAU,sEACb,SAAA+C,OAAC,OAAI,UAAU,2CACb,UAAAA,OAAC,OAAI,UAAU,yCACb,UAAAL,MAAC,MAAG,UAAU,oBACX,SAAArD,IAAa,KAAO,YAAc,eACrC,EACAqD,MAAC,UAAO,QAAS,IAAMzC,EAAmB,EAAK,EAAG,UAAU,mCAC1D,SAAAyC,MAACO,EAAA,CAAE,UAAU,UAAU,EACzB,GACF,EAEAP,MAAC,SACC,KAAK,OACL,MAAOxC,EACP,SAAWmD,GAAMlD,EAAckD,EAAE,OAAO,KAAK,EAC7C,YAAY,uBACZ,UAAU,4GACV,UAAS,GACT,UAAYA,GAAMA,EAAE,MAAQ,SAAWd,EAAA,CAAmB,GAG5DG,MAAC,UACC,QAASH,EACT,SAAU,CAACrC,EAAW,OACtB,UAAU,0GAET,SAAAb,IAAa,KAAO,YAAc,cACrC,EACF,EACF,EAIDS,GACCiD,OAAC,OAAI,UAAU,6BAEb,UAAAA,OAAC,OAAI,UAAW,mBACdjD,EAAW,SAAW,UAAY,eAClCA,EAAW,SAAW,WAAaA,EAAW,SAAW,OAAS,eAClE,YACF,GACE,UAAA4C,MAAC,OAAI,UAAU,mFACZ,SAAA5C,EAAW,SAAW,UACrB4C,MAACY,EAAA,CAAY,UAAU,uBAAuB,EAC5CxD,EAAW,SAAW,WAAaA,EAAW,SAAW,QAAUA,EAAW,SAAW,gBAC3F4C,MAACa,EAAA,CAAc,UAAU,uBAAuB,EAEhDb,MAACc,EAAA,CAAQ,UAAU,uBAAuB,EAE9C,EACAd,MAAC,MAAG,UAAU,oCAAqC,WAAW,QAAQ,EACrE5C,EAAW,MACViD,OAAC,KAAE,UAAU,gBACV,UAAAU,EAAoB3D,EAAW,KAAK,WAAW,EAAE,KAAM,IACvDT,IAAa,KACVoE,EAAoB3D,EAAW,KAAK,WAAW,EAAE,MACjD2D,EAAoB3D,EAAW,KAAK,WAAW,EAAE,SACvD,GAEJ,EAGCA,EAAW,MACViD,OAAC,OAAI,UAAU,gBACb,UAAAA,OAAC,OAAI,UAAU,oDACb,UAAAL,MAAC,OAAI,UAAU,oFACZ,WAAe5C,EAAW,KAAK,WAAW,EAC7C,EACAiD,OAAC,OAAI,UAAU,SACZ,UAAAjD,EAAW,KAAK,aACf4C,MAAC,OAAI,UAAU,sBAAuB,SAAA5C,EAAW,KAAK,YAAY,EAEnEA,EAAW,KAAK,cACfiD,OAAC,OAAI,UAAU,wCACb,UAAAL,MAACgB,EAAA,CAAM,UAAU,UAAU,EAC1B5D,EAAW,KAAK,cACnB,EAEDA,EAAW,KAAK,qBACfiD,OAAC,OAAI,UAAU,wCACb,UAAAL,MAACG,EAAA,CAAI,UAAU,UAAU,EACxB/C,EAAW,KAAK,qBACnB,GAEJ,GACF,EAGAiD,OAAC,OAAI,UAAU,0CACb,UAAAL,MAAC,OAAI,UAAU,6BACZ,SAAArD,IAAa,KAAO,gBAAkB,6BACzC,QACC,OAAI,UAAU,sBAAuB,SAAAS,EAAW,KAAK,aAAa,EACnEiD,OAAC,OAAI,UAAU,6CACb,UAAAL,MAACiB,GAAA,CAAO,UAAU,UAAU,EAC3B7D,EAAW,KAAK,gBAAgB,KAAGT,IAAa,KAAO,MAAQ,OAAO,IAAES,EAAW,KAAK,mBAC3F,EACAiD,OAAC,OAAI,UAAU,6CACb,UAAAL,MAACgB,EAAA,CAAM,UAAU,UAAU,EAC1B5D,EAAW,KAAK,eACnB,GACF,EAGAiD,OAAC,OAAI,UAAU,gDACb,UAAAL,MAACkB,GAAA,CAAM,UAAU,UAAU,EAC1BvE,IAAa,KAAO,eAAiB,oBAAoB,IAAE,IAC3D,IAAI,KAAKS,EAAW,KAAK,UAAU,EAAE,eAAeT,IAAa,KAAO,QAAU,OAAO,GAC5F,EAECS,EAAW,KAAK,OACfiD,OAAC,OAAI,UAAU,kDACb,UAAAA,OAAC,UAAQ,UAAA1D,IAAa,KAAO,aAAe,OAAO,KAAC,EAAS,IAAES,EAAW,KAAK,OACjF,EAIDA,EAAW,SAAW,UACrBiD,OAAC,OAAI,UAAU,kBACb,UAAAA,OAAC,UACC,QAAST,EACT,UAAU,+HAEV,UAAAI,MAACc,EAAA,CAAQ,UAAU,UAAU,EAC5BnE,IAAa,KAAO,WAAa,eAEpC0D,OAAC,UACC,QAASV,EACT,UAAU,qHAEV,UAAAK,MAACY,EAAA,CAAY,UAAU,UAAU,EAChCjE,IAAa,KAAO,aAAe,cACtC,EACF,EAEAqD,MAAC,UACC,QAAS,IAAM3C,EAAc,IAAI,EACjC,UAAU,iEAET,SAAAV,IAAa,KAAO,kBAAoB,mBAC3C,EAEJ,EAID,CAACS,EAAW,MACXiD,OAAC,OAAI,UAAU,MACb,UAAAL,MAAC,KAAE,UAAU,iCACV,SAAArD,IAAa,KACV,6CACA,uCACN,EACAqD,MAAC,UACC,QAAS,IAAM3C,EAAc,IAAI,EACjC,UAAU,iEAET,SAAAV,IAAa,KAAO,kBAAoB,mBAC3C,EACF,GAEJ,EAIDe,GACC2C,OAAC,OAAI,UAAU,aACb,UAAAA,OAAC,OAAI,UAAU,iDACb,UAAAL,MAAC,MAAG,UAAU,YACX,SAAArD,IAAa,KAAO,uBAAyB,oBAChD,EACAqD,MAAC,UACC,QAAS,IAAMrC,EAAe,EAAK,EACnC,UAAU,mCAEV,SAAAqC,MAACO,EAAA,CAAE,UAAU,UAAU,GACzB,EACF,EAECnC,EAAW,SAAW,QACpB,OAAI,UAAU,gCACZ,SAAAzB,IAAa,KAAO,gBAAkB,cACzC,QAEC,OAAI,UAAU,WACZ,SAAAyB,EAAW,IAAK+C,GAAQ,CACvB,MAAMC,EAAYD,EAAI,SAAW,iBAAmBA,EAAI,SAAW,eAC7DE,EAAWF,EAAI,SAAW,eAEhC,OACEd,OAAC,OAAiB,UAAU,6BAC1B,UAAAL,MAAC,OAAI,UAAW,yEACdoB,EAAY,8BACZC,EAAW,0BACX,6BACF,GACG,SAAAD,EAAYpB,MAACY,EAAA,CAAY,UAAU,UAAU,EAC7CS,EAAWrB,MAACc,EAAA,CAAQ,UAAU,UAAU,EACxCd,MAACa,EAAA,CAAc,UAAU,UAAU,EACtC,EACAR,OAAC,OAAI,UAAU,iBACb,UAAAA,OAAC,OAAI,UAAU,0BACb,UAAAL,MAAC,QAAK,UAAU,UAAW,WAAoBmB,EAAI,WAAW,EAAE,KAAK,EACrEnB,MAAC,QAAK,UAAU,uBACb,WAAI,aACP,GACF,EACAK,OAAC,OAAI,UAAU,wBACZ,UAAA1D,IAAa,KAAO,MAAQ,OAAO,IAAEwE,EAAI,mBAC5C,EACAnB,MAAC,OAAI,UAAU,6BACZ,aAAI,KAAKmB,EAAI,SAAS,EAAE,eAAexE,IAAa,KAAO,QAAU,OAAO,EAC/E,GACF,IAvBQwE,EAAI,EAwBd,CAEJ,CAAC,EACH,GAEJ,GAEJ,CAEJ","names":["GuardQRScannerPage","user","useAuthStore","validateGuestAccessCode","useGuestAccessCode","addGuestAccessLog","getGuestAccessLogs","guestAccessCodes","useDataStore","language","useLanguageStore","useEffect","c","isScanning","setIsScanning","useState","isCameraReady","setIsCameraReady","scanResult","setScanResult","showManualInput","setShowManualInput","manualCode","setManualCode","showHistory","setShowHistory","cameraError","setCameraError","videoRef","useRef","canvasRef","streamRef","animationRef","scanningRef","recentLogs","processQRCode","useCallback","qrData","result","message","status","scanFrame","video","canvas","ctx","imageData","jsQR","__vitePreload","n","qrCode","stopCamera","startCamera","stream","playVideo","err","errorMessage","track","handleAllowEntry","handleDenyEntry","handleManualSubmit","getVisitorIcon","type","jsx","Package","Users","Car","User","jsxs","History","X","QrCode","Camera","Keyboard","e","CheckCircle","AlertTriangle","XCircle","VISITOR_TYPE_LABELS","Phone","MapPin","Clock","log","isAllowed","isDenied"],"ignoreList":[],"sources":["../../src/pages/GuardQRScannerPage.tsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from 'react';\nimport {\n  QrCode, Camera, CheckCircle, XCircle, AlertTriangle, Clock,\n  User, MapPin, Phone, Car, Package, Users, History, X,\n  Keyboard\n} from 'lucide-react';\nimport { useAuthStore } from '../stores/authStore';\nimport { useDataStore } from '../stores/dataStore';\nimport { useLanguageStore } from '../stores/languageStore';\nimport {\n  VISITOR_TYPE_LABELS,\n  type GuestAccessCode\n} from '../types';\n\ntype ScanResult = {\n  status: 'success' | 'expired' | 'used' | 'revoked' | 'invalid' | 'not_yet_valid';\n  code?: GuestAccessCode;\n  message: string;\n};\n\nexport function GuardQRScannerPage() {\n  const { user } = useAuthStore();\n  const { validateGuestAccessCode, useGuestAccessCode, addGuestAccessLog, getGuestAccessLogs, guestAccessCodes } = useDataStore();\n  const { language } = useLanguageStore();\n\n  // Debug: log available codes on mount\n  useEffect(() => {\n    console.log('=== GUARD QR SCANNER MOUNT ===');\n    console.log('Available guest access codes:', guestAccessCodes);\n    console.log('Codes count:', guestAccessCodes.length);\n    guestAccessCodes.forEach(c => {\n      console.log(`  Code: ${c.id}, token: ${c.qrToken}, status: ${c.status}`);\n    });\n  }, [guestAccessCodes]);\n\n  const [isScanning, setIsScanning] = useState(false);\n  const [isCameraReady, setIsCameraReady] = useState(false);\n  const [scanResult, setScanResult] = useState<ScanResult | null>(null);\n  const [showManualInput, setShowManualInput] = useState(false);\n  const [manualCode, setManualCode] = useState('');\n  const [showHistory, setShowHistory] = useState(false);\n  const [cameraError, setCameraError] = useState<string | null>(null);\n\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n  const animationRef = useRef<number | null>(null);\n  const scanningRef = useRef(false);\n\n  const recentLogs = getGuestAccessLogs().slice(0, 20);\n\n  const processQRCode = useCallback((qrData: string) => {\n    console.log('Processing QR code:', qrData);\n    const result = validateGuestAccessCode(qrData);\n    console.log('Validation result:', result);\n\n    if (!result.valid) {\n      let message = '';\n      let status: ScanResult['status'] = 'invalid';\n\n      switch (result.error) {\n        case 'expired':\n          status = 'expired';\n          message = language === 'ru' ? 'Пропуск истёк' : 'Ruxsatnoma muddati tugagan';\n          break;\n        case 'revoked':\n          status = 'revoked';\n          message = language === 'ru' ? 'Пропуск отменён' : 'Ruxsatnoma bekor qilingan';\n          break;\n        case 'already_used':\n        case 'max_uses_reached':\n          status = 'used';\n          message = language === 'ru' ? 'Пропуск уже использован' : 'Ruxsatnoma ishlatilgan';\n          break;\n        case 'not_yet_valid':\n          status = 'not_yet_valid';\n          message = language === 'ru' ? 'Пропуск ещё не действителен' : 'Ruxsatnoma hali amal qilmaydi';\n          break;\n        default:\n          status = 'invalid';\n          message = language === 'ru' ? 'Недействительный QR-код' : 'Noto\\'g\\'ri QR-kod';\n      }\n\n      setScanResult({ status, code: result.code, message });\n\n      // Log the scan attempt\n      if (user && result.code) {\n        addGuestAccessLog({\n          accessCodeId: result.code.id,\n          scannedById: user.id,\n          scannedByName: user.name,\n          scannedByRole: user.role,\n          action: status === 'expired' ? 'scan_expired' :\n                  status === 'used' ? 'scan_used' :\n                  status === 'revoked' ? 'scan_revoked' : 'scan_invalid',\n          visitorType: result.code.visitorType,\n          residentName: result.code.residentName,\n          residentApartment: result.code.residentApartment,\n        });\n      }\n    } else {\n      setScanResult({\n        status: 'success',\n        code: result.code,\n        message: language === 'ru' ? 'Пропуск действителен' : 'Ruxsatnoma amal qiladi'\n      });\n    }\n  }, [validateGuestAccessCode, addGuestAccessLog, user, language]);\n\n  const scanFrame = useCallback(async () => {\n    if (!scanningRef.current || !videoRef.current || !canvasRef.current) {\n      return;\n    }\n\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    if (!ctx || video.readyState !== video.HAVE_ENOUGH_DATA) {\n      animationRef.current = requestAnimationFrame(() => { scanFrame(); });\n      return;\n    }\n\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n    try {\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n      // Lazy load jsQR library\n      const { default: jsQR } = await import('jsqr');\n\n      const qrCode = jsQR(imageData.data, imageData.width, imageData.height, {\n        inversionAttempts: 'dontInvert'\n      });\n\n      if (qrCode && qrCode.data) {\n        scanningRef.current = false;\n        processQRCode(qrCode.data);\n        stopCamera();\n        return;\n      }\n    } catch (e) {\n      console.error('QR scan error:', e);\n    }\n\n    animationRef.current = requestAnimationFrame(() => { scanFrame(); });\n  }, [processQRCode]);\n\n  const startCamera = async () => {\n    try {\n      setCameraError(null);\n      setIsScanning(true);\n      setIsCameraReady(false);\n\n      // Check if mediaDevices is available\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        throw new Error('Camera API not supported');\n      }\n\n      console.log('Requesting camera access...');\n\n      // Try to get camera with environment facing first\n      let stream: MediaStream;\n      try {\n        stream = await navigator.mediaDevices.getUserMedia({\n          video: {\n            facingMode: { ideal: 'environment' },\n            width: { ideal: 1280 },\n            height: { ideal: 720 }\n          }\n        });\n      } catch {\n        // Fallback to any camera\n        console.log('Environment camera failed, trying any camera...');\n        stream = await navigator.mediaDevices.getUserMedia({\n          video: true\n        });\n      }\n\n      console.log('Camera stream obtained:', stream.getVideoTracks().length, 'video tracks');\n\n      streamRef.current = stream;\n\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n\n        // Use both onloadedmetadata and oncanplay for better compatibility\n        const playVideo = async () => {\n          try {\n            if (videoRef.current) {\n              console.log('Playing video...');\n              await videoRef.current.play();\n              console.log('Video playing successfully');\n              setIsCameraReady(true);\n              scanningRef.current = true;\n              scanFrame();\n            }\n          } catch (playErr) {\n            console.error('Play error:', playErr);\n            setCameraError(language === 'ru'\n              ? 'Не удалось запустить видео. Нажмите на экран.'\n              : 'Video ishga tushmadi. Ekranga bosing.');\n          }\n        };\n\n        videoRef.current.onloadedmetadata = () => {\n          console.log('Video metadata loaded');\n          playVideo();\n        };\n\n        // Also try oncanplay as fallback\n        videoRef.current.oncanplay = () => {\n          if (!isCameraReady) {\n            console.log('Video can play');\n            playVideo();\n          }\n        };\n      }\n    } catch (err) {\n      console.error('Camera error:', err);\n      setIsScanning(false);\n\n      // Provide more specific error messages\n      let errorMessage = language === 'ru'\n        ? 'Не удалось получить доступ к камере.'\n        : 'Kameraga kirish imkoni bo\\'lmadi.';\n\n      if (err instanceof Error) {\n        if (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {\n          errorMessage = language === 'ru'\n            ? 'Доступ к камере запрещён. Разрешите доступ в настройках браузера.'\n            : 'Kameraga ruxsat berilmagan. Brauzer sozlamalarida ruxsat bering.';\n        } else if (err.name === 'NotFoundError' || err.name === 'DevicesNotFoundError') {\n          errorMessage = language === 'ru'\n            ? 'Камера не найдена на устройстве.'\n            : 'Qurilmada kamera topilmadi.';\n        } else if (err.name === 'NotReadableError' || err.name === 'TrackStartError') {\n          errorMessage = language === 'ru'\n            ? 'Камера используется другим приложением.'\n            : 'Kamera boshqa dastur tomonidan ishlatilmoqda.';\n        } else if (err.message === 'Camera API not supported') {\n          errorMessage = language === 'ru'\n            ? 'Камера не поддерживается. Убедитесь, что используете HTTPS.'\n            : 'Kamera qo\\'llab-quvvatlanmaydi. HTTPS ishlatilayotganiga ishonch hosil qiling.';\n        }\n      }\n\n      setCameraError(errorMessage);\n    }\n  };\n\n  const stopCamera = useCallback(() => {\n    scanningRef.current = false;\n\n    if (animationRef.current) {\n      cancelAnimationFrame(animationRef.current);\n      animationRef.current = null;\n    }\n\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n\n    if (videoRef.current) {\n      videoRef.current.srcObject = null;\n    }\n\n    setIsScanning(false);\n    setIsCameraReady(false);\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      stopCamera();\n    };\n  }, [stopCamera]);\n\n  const handleAllowEntry = () => {\n    if (!scanResult?.code || !user) return;\n\n    // Mark as used - pass full code for self-contained tokens\n    useGuestAccessCode(scanResult.code.id, scanResult.code);\n\n    // Log the entry\n    addGuestAccessLog({\n      accessCodeId: scanResult.code.id,\n      scannedById: user.id,\n      scannedByName: user.name,\n      scannedByRole: user.role,\n      action: 'entry_allowed',\n      visitorType: scanResult.code.visitorType,\n      residentName: scanResult.code.residentName,\n      residentApartment: scanResult.code.residentApartment,\n    });\n\n    setScanResult(null);\n  };\n\n  const handleDenyEntry = () => {\n    if (!scanResult?.code || !user) return;\n\n    // Log the denial\n    addGuestAccessLog({\n      accessCodeId: scanResult.code.id,\n      scannedById: user.id,\n      scannedByName: user.name,\n      scannedByRole: user.role,\n      action: 'entry_denied',\n      visitorType: scanResult.code.visitorType,\n      residentName: scanResult.code.residentName,\n      residentApartment: scanResult.code.residentApartment,\n    });\n\n    setScanResult(null);\n  };\n\n  const handleManualSubmit = () => {\n    if (!manualCode.trim()) return;\n    processQRCode(manualCode.trim());\n    setManualCode('');\n    setShowManualInput(false);\n  };\n\n  const getVisitorIcon = (type: string) => {\n    switch (type) {\n      case 'courier': return <Package className=\"w-6 h-6\" />;\n      case 'guest': return <Users className=\"w-6 h-6\" />;\n      case 'taxi': return <Car className=\"w-6 h-6\" />;\n      default: return <User className=\"w-6 h-6\" />;\n    }\n  };\n\n  return (\n    <div className=\"space-y-4 md:space-y-6 pb-20 md:pb-0\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between gap-4\">\n        <div>\n          <h1 className=\"text-xl md:text-2xl font-bold text-gray-900\">\n            {language === 'ru' ? 'Сканер QR' : 'QR skaner'}\n          </h1>\n          <p className=\"text-sm text-gray-500 mt-1\">\n            {language === 'ru'\n              ? 'Сканируйте пропуска посетителей'\n              : 'Tashrif buyuruvchilar ruxsatnomalarini skanerlang'}\n          </p>\n          {/* Debug: show codes count */}\n          <p className=\"text-xs text-blue-500 mt-1\">\n            {language === 'ru' ? 'Активных пропусков' : 'Faol ruxsatnomalar'}: {guestAccessCodes.filter(c => c.status === 'active').length} / {guestAccessCodes.length}\n          </p>\n        </div>\n        <button\n          onClick={() => setShowHistory(!showHistory)}\n          className={`p-2.5 rounded-xl transition-colors ${\n            showHistory ? 'bg-primary-500 text-gray-900' : 'bg-white/50 text-gray-600 hover:bg-white'\n          }`}\n        >\n          <History className=\"w-5 h-5\" />\n        </button>\n      </div>\n\n      {/* Main scanner area */}\n      {!showHistory && !scanResult && (\n        <div className=\"glass-card overflow-hidden\">\n          {isScanning ? (\n            <div className=\"relative bg-black\" style={{ minHeight: '300px' }}>\n              <video\n                ref={videoRef}\n                className=\"w-full h-auto\"\n                style={{ minHeight: '300px', maxHeight: '70vh', objectFit: 'cover' }}\n                playsInline\n                muted\n                autoPlay\n              />\n              <canvas ref={canvasRef} className=\"hidden\" />\n\n              {/* Loading indicator */}\n              {!isCameraReady && (\n                <div className=\"absolute inset-0 flex items-center justify-center bg-gray-900\">\n                  <div className=\"text-center text-white\">\n                    <div className=\"w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n                    <p>{language === 'ru' ? 'Загрузка камеры...' : 'Kamera yuklanmoqda...'}</p>\n                  </div>\n                </div>\n              )}\n\n              {/* Scanning overlay */}\n              {isCameraReady && (\n                <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n                  <div className=\"w-64 h-64 border-2 border-white/50 rounded-2xl relative\">\n                    <div className=\"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-primary-500 rounded-tl-xl\" />\n                    <div className=\"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-primary-500 rounded-tr-xl\" />\n                    <div className=\"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-primary-500 rounded-bl-xl\" />\n                    <div className=\"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-primary-500 rounded-br-xl\" />\n\n                    {/* Scanning line animation */}\n                    <div className=\"absolute inset-x-2 h-0.5 bg-primary-500 animate-bounce\" style={{ top: '50%' }} />\n                  </div>\n                </div>\n              )}\n\n              {/* Stop button */}\n              <button\n                onClick={stopCamera}\n                className=\"absolute bottom-4 left-1/2 -translate-x-1/2 px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-medium rounded-xl flex items-center gap-2 z-10\"\n              >\n                <X className=\"w-5 h-5\" />\n                {language === 'ru' ? 'Остановить' : 'To\\'xtatish'}\n              </button>\n            </div>\n          ) : (\n            <div className=\"p-8 text-center\">\n              <div className=\"w-24 h-24 mx-auto mb-6 bg-primary-100 rounded-full flex items-center justify-center\">\n                <QrCode className=\"w-12 h-12 text-primary-600\" />\n              </div>\n\n              {cameraError ? (\n                <div className=\"mb-6\">\n                  <div className=\"text-red-500 mb-2\">{cameraError}</div>\n                  <p className=\"text-sm text-gray-500\">\n                    {language === 'ru'\n                      ? 'Попробуйте снова или используйте ручной ввод кода'\n                      : 'Qayta urinib ko\\'ring yoki qo\\'lda kod kiriting'}\n                  </p>\n                </div>\n              ) : (\n                <p className=\"text-gray-600 mb-6\">\n                  {language === 'ru'\n                    ? 'Нажмите кнопку, чтобы начать сканирование'\n                    : 'Skanerlashni boshlash uchun tugmani bosing'}\n                </p>\n              )}\n\n              <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n                <button\n                  onClick={startCamera}\n                  className=\"px-6 py-4 bg-primary-500 hover:bg-primary-600 text-gray-900 font-bold rounded-xl flex items-center justify-center gap-2\"\n                >\n                  <Camera className=\"w-5 h-5\" />\n                  {language === 'ru' ? 'Сканировать QR' : 'QR skanerlash'}\n                </button>\n                <button\n                  onClick={() => setShowManualInput(true)}\n                  className=\"px-6 py-4 border-2 border-gray-200 hover:border-gray-300 rounded-xl font-medium flex items-center justify-center gap-2\"\n                >\n                  <Keyboard className=\"w-5 h-5\" />\n                  {language === 'ru' ? 'Ввести код' : 'Kod kiriting'}\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Manual input modal */}\n      {showManualInput && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl max-w-md w-full p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-bold\">\n                {language === 'ru' ? 'Ввод кода' : 'Kod kiriting'}\n              </h3>\n              <button onClick={() => setShowManualInput(false)} className=\"p-2 hover:bg-gray-100 rounded-xl\">\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            <input\n              type=\"text\"\n              value={manualCode}\n              onChange={(e) => setManualCode(e.target.value)}\n              placeholder=\"GA-xxxxx-xxxxx-xxxxx\"\n              className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0 mb-4 font-mono\"\n              autoFocus\n              onKeyDown={(e) => e.key === 'Enter' && handleManualSubmit()}\n            />\n\n            <button\n              onClick={handleManualSubmit}\n              disabled={!manualCode.trim()}\n              className=\"w-full py-3 bg-primary-500 hover:bg-primary-600 disabled:bg-gray-300 text-gray-900 font-bold rounded-xl\"\n            >\n              {language === 'ru' ? 'Проверить' : 'Tekshirish'}\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Scan result */}\n      {scanResult && (\n        <div className=\"glass-card overflow-hidden\">\n          {/* Status header */}\n          <div className={`p-6 text-center ${\n            scanResult.status === 'success' ? 'bg-green-500' :\n            scanResult.status === 'expired' || scanResult.status === 'used' ? 'bg-amber-500' :\n            'bg-red-500'\n          }`}>\n            <div className=\"w-20 h-20 mx-auto mb-4 bg-white/20 rounded-full flex items-center justify-center\">\n              {scanResult.status === 'success' ? (\n                <CheckCircle className=\"w-10 h-10 text-white\" />\n              ) : scanResult.status === 'expired' || scanResult.status === 'used' || scanResult.status === 'not_yet_valid' ? (\n                <AlertTriangle className=\"w-10 h-10 text-white\" />\n              ) : (\n                <XCircle className=\"w-10 h-10 text-white\" />\n              )}\n            </div>\n            <h2 className=\"text-xl font-bold text-white mb-1\">{scanResult.message}</h2>\n            {scanResult.code && (\n              <p className=\"text-white/80\">\n                {VISITOR_TYPE_LABELS[scanResult.code.visitorType].icon}{' '}\n                {language === 'ru'\n                  ? VISITOR_TYPE_LABELS[scanResult.code.visitorType].label\n                  : VISITOR_TYPE_LABELS[scanResult.code.visitorType].labelUz}\n              </p>\n            )}\n          </div>\n\n          {/* Visitor details */}\n          {scanResult.code && (\n            <div className=\"p-6 space-y-4\">\n              <div className=\"flex items-center gap-4 p-4 bg-gray-50 rounded-xl\">\n                <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600\">\n                  {getVisitorIcon(scanResult.code.visitorType)}\n                </div>\n                <div className=\"flex-1\">\n                  {scanResult.code.visitorName && (\n                    <div className=\"font-medium text-lg\">{scanResult.code.visitorName}</div>\n                  )}\n                  {scanResult.code.visitorPhone && (\n                    <div className=\"text-gray-500 flex items-center gap-1\">\n                      <Phone className=\"w-4 h-4\" />\n                      {scanResult.code.visitorPhone}\n                    </div>\n                  )}\n                  {scanResult.code.visitorVehiclePlate && (\n                    <div className=\"text-gray-500 flex items-center gap-1\">\n                      <Car className=\"w-4 h-4\" />\n                      {scanResult.code.visitorVehiclePlate}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Resident info */}\n              <div className=\"p-4 border-2 border-gray-100 rounded-xl\">\n                <div className=\"text-sm text-gray-500 mb-2\">\n                  {language === 'ru' ? 'Идёт к жителю' : 'Quyidagi turar joy egasiga'}\n                </div>\n                <div className=\"font-medium text-lg\">{scanResult.code.residentName}</div>\n                <div className=\"text-gray-600 flex items-center gap-1 mt-1\">\n                  <MapPin className=\"w-4 h-4\" />\n                  {scanResult.code.residentAddress}, {language === 'ru' ? 'кв.' : 'xona'} {scanResult.code.residentApartment}\n                </div>\n                <div className=\"text-gray-500 flex items-center gap-1 mt-1\">\n                  <Phone className=\"w-4 h-4\" />\n                  {scanResult.code.residentPhone}\n                </div>\n              </div>\n\n              {/* Time info */}\n              <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n                <Clock className=\"w-4 h-4\" />\n                {language === 'ru' ? 'Действует до' : 'Gacha amal qiladi'}:{' '}\n                {new Date(scanResult.code.validUntil).toLocaleString(language === 'ru' ? 'ru-RU' : 'uz-UZ')}\n              </div>\n\n              {scanResult.code.notes && (\n                <div className=\"p-3 bg-blue-50 rounded-xl text-sm text-blue-700\">\n                  <strong>{language === 'ru' ? 'Примечание' : 'Izoh'}:</strong> {scanResult.code.notes}\n                </div>\n              )}\n\n              {/* Actions */}\n              {scanResult.status === 'success' ? (\n                <div className=\"flex gap-3 pt-4\">\n                  <button\n                    onClick={handleDenyEntry}\n                    className=\"flex-1 py-4 border-2 border-red-200 text-red-600 hover:bg-red-50 rounded-xl font-bold flex items-center justify-center gap-2\"\n                  >\n                    <XCircle className=\"w-5 h-5\" />\n                    {language === 'ru' ? 'Отказать' : 'Rad etish'}\n                  </button>\n                  <button\n                    onClick={handleAllowEntry}\n                    className=\"flex-1 py-4 bg-green-500 hover:bg-green-600 text-white rounded-xl font-bold flex items-center justify-center gap-2\"\n                  >\n                    <CheckCircle className=\"w-5 h-5\" />\n                    {language === 'ru' ? 'Пропустить' : 'O\\'tkazish'}\n                  </button>\n                </div>\n              ) : (\n                <button\n                  onClick={() => setScanResult(null)}\n                  className=\"w-full py-4 bg-gray-100 hover:bg-gray-200 rounded-xl font-bold\"\n                >\n                  {language === 'ru' ? 'Сканировать ещё' : 'Yana skanerlash'}\n                </button>\n              )}\n            </div>\n          )}\n\n          {/* No code data - just invalid */}\n          {!scanResult.code && (\n            <div className=\"p-6\">\n              <p className=\"text-center text-gray-600 mb-4\">\n                {language === 'ru'\n                  ? 'QR-код не является пропуском или повреждён'\n                  : 'QR-kod ruxsatnoma emas yoki buzilgan'}\n              </p>\n              <button\n                onClick={() => setScanResult(null)}\n                className=\"w-full py-4 bg-gray-100 hover:bg-gray-200 rounded-xl font-bold\"\n              >\n                {language === 'ru' ? 'Сканировать ещё' : 'Yana skanerlash'}\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* History */}\n      {showHistory && (\n        <div className=\"glass-card\">\n          <div className=\"p-4 border-b flex items-center justify-between\">\n            <h3 className=\"font-bold\">\n              {language === 'ru' ? 'История сканирований' : 'Skanerlash tarixi'}\n            </h3>\n            <button\n              onClick={() => setShowHistory(false)}\n              className=\"p-2 hover:bg-gray-100 rounded-xl\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n\n          {recentLogs.length === 0 ? (\n            <div className=\"p-8 text-center text-gray-500\">\n              {language === 'ru' ? 'История пуста' : 'Tarix bo\\'sh'}\n            </div>\n          ) : (\n            <div className=\"divide-y\">\n              {recentLogs.map((log) => {\n                const isAllowed = log.action === 'entry_allowed' || log.action === 'scan_success';\n                const isDenied = log.action === 'entry_denied';\n\n                return (\n                  <div key={log.id} className=\"p-4 flex items-start gap-3\">\n                    <div className={`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${\n                      isAllowed ? 'bg-green-100 text-green-600' :\n                      isDenied ? 'bg-red-100 text-red-600' :\n                      'bg-amber-100 text-amber-600'\n                    }`}>\n                      {isAllowed ? <CheckCircle className=\"w-5 h-5\" /> :\n                       isDenied ? <XCircle className=\"w-5 h-5\" /> :\n                       <AlertTriangle className=\"w-5 h-5\" />}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-lg\">{VISITOR_TYPE_LABELS[log.visitorType].icon}</span>\n                        <span className=\"font-medium truncate\">\n                          {log.residentName}\n                        </span>\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        {language === 'ru' ? 'кв.' : 'xona'} {log.residentApartment}\n                      </div>\n                      <div className=\"text-xs text-gray-400 mt-1\">\n                        {new Date(log.timestamp).toLocaleString(language === 'ru' ? 'ru-RU' : 'uz-UZ')}\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"file":"GuardQRScannerPage-1767960438672-BEzjgR25.js"}