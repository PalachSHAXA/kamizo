import{j as e,a7 as N,J as b,A as c,F as x,av as f,y as h,h as v}from"./react-vendor-1768935444692-B1b45RTo.js";import{u,S as w}from"./index-1768935444692-CsUEvcLn.js";import"./vendor-1768935444692-CoA8TQ05.js";import"./qr-scanner-1768935444692-cr32YHjo.js";import"./zustand-1768935444692-wNUYBKDB.js";function R(){const{requests:m,executors:l,getStats:o}=u(),a=o(),d=m.filter(s=>s.status==="pending_approval"),i=d.filter(s=>{if(!s.completedAt)return!1;const t=new Date(s.completedAt).getTime();return(Date.now()-t)/(1e3*60*60)>24});return e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 truncate",children:"Панель администратора"}),e.jsx("p",{className:"text-gray-500 text-sm md:text-base mt-0.5 md:mt-1",children:"Мониторинг системы"})]}),e.jsxs("button",{className:"btn-secondary flex items-center gap-2 flex-shrink-0 py-2 px-3 md:py-2.5 md:px-4 touch-manipulation",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Обновить"})]})]}),(i.length>0||d.length>0)&&e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[i.length>0&&e.jsx("div",{className:"glass-card p-3 md:p-4 border-2 border-red-400 bg-red-50/50 w-full text-left",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx(b,{className:"w-5 h-5 md:w-6 md:h-6 text-red-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium text-red-800 text-sm md:text-base",children:[i.length," заявок >24ч"]}),e.jsx("div",{className:"text-xs md:text-sm text-red-600 hidden sm:block",children:"Ожидают подтверждения"})]})]})}),d.length>0&&i.length===0&&e.jsx("div",{className:"glass-card p-3 md:p-4 border-2 border-purple-400 bg-purple-50/50",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx(c,{className:"w-5 h-5 md:w-6 md:h-6 text-purple-600 flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"font-medium text-purple-800 text-sm md:text-base",children:[d.length," ожидают подтверждения"]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4",children:[e.jsx("div",{className:"glass-card p-3 md:p-5",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(x,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:a.totalRequests}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500 truncate",children:"Всего"})]})]})}),e.jsx("div",{className:"glass-card p-3 md:p-5",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(c,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:a.inProgress}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500 truncate",children:"В работе"})]})]})}),e.jsx("div",{className:"glass-card p-3 md:p-5",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-purple-400 to-violet-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(f,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:a.pendingApproval}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500 truncate",children:"Ожидание"})]})]})}),e.jsx("div",{className:"glass-card p-3 md:p-5",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(h,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:a.completedWeek}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500 truncate",children:"За неделю"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"glass-card p-4 md:p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[e.jsxs("h3",{className:"font-semibold text-base md:text-lg flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-blue-500"}),"Исполнители"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[l.length," всего"]})]}),e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[l.slice(0,6).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 md:p-3 bg-white/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0",children:[e.jsx("div",{className:`w-2.5 h-2.5 md:w-3 md:h-3 rounded-full flex-shrink-0 ${s.status==="available"?"bg-green-500":s.status==="busy"?"bg-amber-500":"bg-gray-400"}`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-medium text-sm md:text-base truncate",children:s.name}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500 truncate",children:w[s.specialization]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[e.jsx("div",{className:"font-semibold text-sm md:text-base",children:s.activeRequests}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500",children:"заявок"})]})]},s.id)),l.length===0&&e.jsx("div",{className:"text-center text-gray-500 py-4 text-sm",children:"Нет исполнителей"})]})]}),e.jsxs("div",{className:"glass-card p-4 md:p-5",children:[e.jsxs("h3",{className:"font-semibold text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-purple-500"}),"Заявки по статусам"]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:[{status:"new",label:"Новые",color:"bg-blue-500",gradientFrom:"from-blue-400",gradientTo:"to-blue-500"},{status:"assigned",label:"Назначенные",color:"bg-indigo-500",gradientFrom:"from-indigo-400",gradientTo:"to-indigo-500"},{status:"in_progress",label:"В работе",color:"bg-amber-500",gradientFrom:"from-amber-400",gradientTo:"to-amber-500"},{status:"pending_approval",label:"Ожидают",color:"bg-purple-500",gradientFrom:"from-purple-400",gradientTo:"to-purple-500"},{status:"completed",label:"Выполненные",color:"bg-green-500",gradientFrom:"from-green-400",gradientTo:"to-green-500"}].map(({status:s,label:t,gradientFrom:r,gradientTo:g})=>{const n=m.filter(j=>j.status===s).length,p=a.totalRequests>0?n/a.totalRequests*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs md:text-sm mb-1.5",children:[e.jsx("span",{className:"text-gray-700",children:t}),e.jsx("span",{className:"font-semibold",children:n})]}),e.jsx("div",{className:"h-2 md:h-2.5 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${r} ${g} transition-all duration-500`,style:{width:`${p}%`}})})]},s)})})]}),e.jsxs("div",{className:"glass-card p-4 md:p-5",children:[e.jsxs("h3",{className:"font-semibold text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-500",children:"★"}),"Лучшие исполнители"]}),e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[[...l].sort((s,t)=>t.completedCount-s.completedCount).slice(0,5).map((s,t)=>e.jsx("div",{className:"flex items-center p-2 md:p-3 bg-white/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:`w-7 h-7 md:w-8 md:h-8 rounded-full flex items-center justify-center font-bold text-white text-sm flex-shrink-0 ${t===0?"bg-orange-500":t===1?"bg-gray-400":t===2?"bg-amber-600":"bg-gray-300"}`,children:t+1}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-medium text-sm md:text-base truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm text-gray-500",children:[e.jsxs("span",{children:["★ ",s.rating]}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsxs("span",{className:"hidden sm:inline",children:[s.completedCount," заявок"]}),e.jsx("span",{className:"sm:hidden",children:s.completedCount})]})]})]})},s.id)),l.length===0&&e.jsx("div",{className:"text-center text-gray-500 py-4 text-sm",children:"Нет данных"})]})]}),e.jsxs("div",{className:"glass-card p-4 md:p-5",children:[e.jsxs("h3",{className:"font-semibold text-base md:text-lg mb-3 md:mb-4 flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5 text-green-500"}),"Сводка"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-500 text-xs md:text-sm",children:"Всего заявок"}),e.jsx("div",{className:"font-bold text-xl md:text-2xl",children:a.totalRequests})]}),e.jsxs("div",{className:"bg-white/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-500 text-xs md:text-sm",children:"Исполнителей"}),e.jsx("div",{className:"font-bold text-xl md:text-2xl",children:l.length})]}),e.jsxs("div",{className:"bg-white/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-500 text-xs md:text-sm",children:"Выполнено"}),e.jsx("div",{className:"font-bold text-xl md:text-2xl text-green-600",children:a.completedWeek})]}),e.jsxs("div",{className:"bg-white/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-500 text-xs md:text-sm",children:"Активных"}),e.jsx("div",{className:"font-bold text-xl md:text-2xl text-amber-600",children:a.inProgress})]})]})]})]})]})}export{R as AdminDashboard};
//# sourceMappingURL=AdminDashboard-1768935444692-CpRfH7wS.js.map
