{"version":3,"file":"VehicleSearchPage-1768649091948-NA4pLQrj.js","sources":["../../src/pages/VehicleSearchPage.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\r\nimport { Search, Car, User, Phone, MapPin, Home, Calendar, Info, AlertCircle, Plus, X, Building2, Edit2, Trash2, AlertTriangle } from 'lucide-react';\r\nimport { useDataStore } from '../stores/dataStore';\r\nimport { useAuthStore } from '../stores/authStore';\r\nimport { useLanguageStore } from '../stores/languageStore';\r\nimport type { Vehicle, VehicleType, VehicleOwnerType } from '../types';\r\nimport { VEHICLE_TYPE_LABELS, VEHICLE_OWNER_TYPE_LABELS } from '../types';\r\n\r\n// Region codes of Uzbekistan\r\nconst UZ_REGIONS = [\r\n  { code: '01', name: 'Ташкент', nameUz: 'Toshkent' },\r\n  { code: '10', name: 'Ташкентская область', nameUz: 'Toshkent viloyati' },\r\n  { code: '20', name: 'Сырдарьинская область', nameUz: 'Sirdaryo viloyati' },\r\n  { code: '25', name: 'Джизакская область', nameUz: 'Jizzax viloyati' },\r\n  { code: '30', name: 'Самаркандская область', nameUz: 'Samarqand viloyati' },\r\n  { code: '40', name: 'Ферганская область', nameUz: 'Farg\\'ona viloyati' },\r\n  { code: '50', name: 'Наманганская область', nameUz: 'Namangan viloyati' },\r\n  { code: '60', name: 'Андижанская область', nameUz: 'Andijon viloyati' },\r\n  { code: '70', name: 'Кашкадарьинская область', nameUz: 'Qashqadaryo viloyati' },\r\n  { code: '75', name: 'Сурхандарьинская область', nameUz: 'Surxondaryo viloyati' },\r\n  { code: '80', name: 'Бухарская область', nameUz: 'Buxoro viloyati' },\r\n  { code: '85', name: 'Навоийская область', nameUz: 'Navoiy viloyati' },\r\n  { code: '90', name: 'Хорезмская область', nameUz: 'Xorazm viloyati' },\r\n  { code: '95', name: 'Республика Каракалпакстан', nameUz: 'Qoraqalpog\\'iston Respublikasi' },\r\n];\r\n\r\n// UZ Flag component\r\nconst UZFlag = () => (\r\n  <svg viewBox=\"0 0 30 20\" className=\"w-12 h-8\">\r\n    <rect width=\"30\" height=\"6.67\" fill=\"#1EB53A\"/>\r\n    <rect y=\"6.67\" width=\"30\" height=\"6.67\" fill=\"#FFFFFF\"/>\r\n    <rect y=\"13.33\" width=\"30\" height=\"6.67\" fill=\"#0099B5\"/>\r\n    <rect y=\"6.17\" width=\"30\" height=\"1\" fill=\"#CE1126\"/>\r\n    <rect y=\"12.83\" width=\"30\" height=\"1\" fill=\"#CE1126\"/>\r\n    <circle cx=\"8\" cy=\"3.33\" r=\"2\" fill=\"#FFFFFF\"/>\r\n    <circle cx=\"9\" cy=\"3.33\" r=\"2\" fill=\"#0099B5\"/>\r\n    {[0,1,2,3,4,5,6,7,8,9,10,11].map((i) => (\r\n      <circle key={i} cx={14 + (i % 4) * 2.5} cy={1.5 + Math.floor(i / 4) * 2} r=\"0.6\" fill=\"#FFFFFF\"/>\r\n    ))}\r\n  </svg>\r\n);\r\n\r\n// Search Plate Input Component - universal search supporting both formats\r\ninterface SearchPlateInputProps {\r\n  value: { region: string; letters1: string; digits: string; letters2: string };\r\n  onChange: (value: { region: string; letters1: string; digits: string; letters2: string }) => void;\r\n  language: string;\r\n  onSearch?: () => void;\r\n}\r\n\r\nfunction SearchPlateInput({ value, onChange, language, onSearch }: SearchPlateInputProps) {\r\n  const letters1Ref = useRef<HTMLInputElement>(null);\r\n  const digitsRef = useRef<HTMLInputElement>(null);\r\n  const letters2Ref = useRef<HTMLInputElement>(null);\r\n  const [showRegionDropdown, setShowRegionDropdown] = useState(false);\r\n\r\n  const handleRegionSelect = (code: string) => {\r\n    onChange({ ...value, region: code });\r\n    setShowRegionDropdown(false);\r\n    setTimeout(() => {\r\n      letters1Ref.current?.focus();\r\n    }, 100);\r\n  };\r\n\r\n  const handleLetters1Change = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const val = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '').slice(0, 1);\r\n    // Check if it's a digit - then skip letters1 and go to digits\r\n    if (/^\\d$/.test(val)) {\r\n      onChange({ ...value, letters1: '', digits: val });\r\n      digitsRef.current?.focus();\r\n    } else {\r\n      onChange({ ...value, letters1: val });\r\n      if (val.length === 1) {\r\n        digitsRef.current?.focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDigitsChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const val = e.target.value.replace(/\\D/g, '').slice(0, 3);\r\n    onChange({ ...value, digits: val });\r\n    if (val.length === 3) {\r\n      letters2Ref.current?.focus();\r\n    }\r\n  };\r\n\r\n  const handleLetters2Change = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const val = e.target.value.toUpperCase().replace(/[^A-Z]/g, '').slice(0, 3);\r\n    onChange({ ...value, letters2: val });\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>, field: 'letters1' | 'digits' | 'letters2') => {\r\n    if (e.key === 'Backspace' && (e.target as HTMLInputElement).value === '') {\r\n      if (field === 'letters2') digitsRef.current?.focus();\r\n      else if (field === 'digits') letters1Ref.current?.focus();\r\n    }\r\n    if (e.key === 'Enter' && onSearch) {\r\n      onSearch();\r\n    }\r\n  };\r\n\r\n  const selectedRegion = UZ_REGIONS.find(r => r.code === value.region);\r\n\r\n  // Determine display format based on what's entered\r\n  const isLegalFormat = value.letters1 === '' && value.digits.length > 0;\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center\">\r\n      {/* License plate like avtoraqam.uzex.uz */}\r\n      <div className=\"relative bg-white border-[3px] border-black rounded-xl shadow-xl overflow-visible\" style={{ minWidth: '380px' }}>\r\n        <div className=\"flex items-center h-20 bg-white rounded-xl\">\r\n          {/* Region section with dropdown */}\r\n          <div className=\"relative flex items-center justify-center border-r-2 border-black h-full px-3 bg-gray-50 rounded-l-xl\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowRegionDropdown(!showRegionDropdown)}\r\n              className=\"text-4xl font-bold text-center hover:text-primary-600 transition-colors cursor-pointer min-w-[50px]\"\r\n            >\r\n              {value.region || <span className=\"text-gray-300\">01</span>}\r\n            </button>\r\n\r\n            {/* Region dropdown */}\r\n            {showRegionDropdown && (\r\n              <>\r\n                <div className=\"fixed inset-0 z-[9998]\" onClick={() => setShowRegionDropdown(false)} />\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-2xl z-[9999] max-h-72 overflow-y-auto min-w-[280px]\">\r\n                  {UZ_REGIONS.map((region) => (\r\n                    <button\r\n                      key={region.code}\r\n                      type=\"button\"\r\n                      onClick={() => handleRegionSelect(region.code)}\r\n                      className={`w-full px-4 py-3 text-left hover:bg-primary-50 flex items-center gap-4 transition-colors first:rounded-t-xl last:rounded-b-xl ${\r\n                        value.region === region.code ? 'bg-primary-100 text-primary-700' : ''\r\n                      }`}\r\n                    >\r\n                      <span className=\"text-2xl font-bold text-gray-700 w-10\">{region.code}</span>\r\n                      <span className=\"text-sm text-gray-600\">\r\n                        {language === 'ru' ? region.name : region.nameUz}\r\n                      </span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Number section: A 123 BC or 123 ABC */}\r\n          <div className=\"flex-1 flex items-center justify-center px-2 gap-1\">\r\n            {/* First letter (optional for search) */}\r\n            <input\r\n              ref={letters1Ref}\r\n              type=\"text\"\r\n              value={value.letters1}\r\n              onChange={handleLetters1Change}\r\n              onKeyDown={(e) => handleKeyDown(e, 'letters1')}\r\n              className=\"w-10 text-4xl font-bold text-center outline-none bg-transparent uppercase\"\r\n              placeholder=\"A\"\r\n              maxLength={1}\r\n            />\r\n            <input\r\n              ref={digitsRef}\r\n              type=\"text\"\r\n              inputMode=\"numeric\"\r\n              value={value.digits}\r\n              onChange={handleDigitsChange}\r\n              onKeyDown={(e) => handleKeyDown(e, 'digits')}\r\n              className=\"w-20 text-4xl font-bold text-center outline-none bg-transparent tracking-wider\"\r\n              placeholder=\"123\"\r\n              maxLength={3}\r\n            />\r\n            <input\r\n              ref={letters2Ref}\r\n              type=\"text\"\r\n              value={value.letters2}\r\n              onChange={handleLetters2Change}\r\n              onKeyDown={(e) => handleKeyDown(e, 'letters2')}\r\n              className=\"w-20 text-4xl font-bold text-center outline-none bg-transparent uppercase\"\r\n              placeholder={isLegalFormat ? 'ABC' : 'BC'}\r\n              maxLength={3}\r\n            />\r\n          </div>\r\n\r\n          {/* Flag section */}\r\n          <div className=\"flex flex-col items-center justify-center border-l-2 border-black h-full px-3 bg-gray-50 rounded-r-xl\">\r\n            <UZFlag />\r\n            <span className=\"text-sm font-bold mt-0.5\">UZ</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Selected region hint */}\r\n      {selectedRegion && (\r\n        <p className=\"text-sm text-primary-600 mt-3 font-medium\">\r\n          {language === 'ru' ? selectedRegion.name : selectedRegion.nameUz}\r\n        </p>\r\n      )}\r\n\r\n      {/* Format hint */}\r\n      <p className=\"text-xs text-gray-400 mt-1\">\r\n        {language === 'ru' ? 'Введите любую часть номера для поиска' : 'Qidirish uchun raqamning istalgan qismini kiriting'}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Plate Number Input Component (for service/legal entity only - format: 01 123 EAA)\r\ninterface PlateNumberInputProps {\r\n  value: { region: string; letters1: string; digits: string; letters2: string };\r\n  onChange: (value: { region: string; letters1: string; digits: string; letters2: string }) => void;\r\n  language: string;\r\n}\r\n\r\nfunction PlateNumberInput({ value, onChange, language }: PlateNumberInputProps) {\r\n  const digitsRef = useRef<HTMLInputElement>(null);\r\n  const letters2Ref = useRef<HTMLInputElement>(null);\r\n  const [showRegionDropdown, setShowRegionDropdown] = useState(false);\r\n\r\n  const handleRegionSelect = (code: string) => {\r\n    onChange({ ...value, region: code });\r\n    setShowRegionDropdown(false);\r\n    setTimeout(() => {\r\n      digitsRef.current?.focus();\r\n    }, 100);\r\n  };\r\n\r\n  const handleDigitsChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const val = e.target.value.replace(/\\D/g, '').slice(0, 3);\r\n    onChange({ ...value, digits: val });\r\n    if (val.length === 3) {\r\n      letters2Ref.current?.focus();\r\n    }\r\n  };\r\n\r\n  const handleLetters2Change = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const maxLen = 3; // Always 3 letters for service/legal_entity\r\n    const val = e.target.value.toUpperCase().replace(/[^A-Z]/g, '').slice(0, maxLen);\r\n    onChange({ ...value, letters2: val });\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>, field: 'digits' | 'letters2') => {\r\n    if (e.key === 'Backspace' && (e.target as HTMLInputElement).value === '') {\r\n      if (field === 'letters2') digitsRef.current?.focus();\r\n    }\r\n  };\r\n\r\n  const selectedRegion = UZ_REGIONS.find(r => r.code === value.region);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center\">\r\n      {/* License plate like avtoraqam.uzex.uz */}\r\n      <div className=\"relative bg-white border-[3px] border-black rounded-xl shadow-xl overflow-visible\" style={{ minWidth: '340px' }}>\r\n        <div className=\"flex items-center h-20 bg-white rounded-xl\">\r\n          {/* Region section with dropdown */}\r\n          <div className=\"relative flex items-center justify-center border-r-2 border-black h-full px-3 bg-gray-50 rounded-l-xl\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowRegionDropdown(!showRegionDropdown)}\r\n              className=\"text-4xl font-bold text-center hover:text-primary-600 transition-colors cursor-pointer min-w-[50px]\"\r\n            >\r\n              {value.region || <span className=\"text-gray-300\">01</span>}\r\n            </button>\r\n\r\n            {/* Region dropdown */}\r\n            {showRegionDropdown && (\r\n              <>\r\n                <div className=\"fixed inset-0 z-[9998]\" onClick={() => setShowRegionDropdown(false)} />\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-2xl z-[9999] max-h-72 overflow-y-auto min-w-[280px]\">\r\n                  {UZ_REGIONS.map((region) => (\r\n                    <button\r\n                      key={region.code}\r\n                      type=\"button\"\r\n                      onClick={() => handleRegionSelect(region.code)}\r\n                      className={`w-full px-4 py-3 text-left hover:bg-primary-50 flex items-center gap-4 transition-colors first:rounded-t-xl last:rounded-b-xl ${\r\n                        value.region === region.code ? 'bg-primary-100 text-primary-700' : ''\r\n                      }`}\r\n                    >\r\n                      <span className=\"text-2xl font-bold text-gray-700 w-10\">{region.code}</span>\r\n                      <span className=\"text-sm text-gray-600\">\r\n                        {language === 'ru' ? region.name : region.nameUz}\r\n                      </span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Number section: 123 EAA */}\r\n          <div className=\"flex-1 flex items-center justify-center px-3 gap-2\">\r\n            <input\r\n              ref={digitsRef}\r\n              type=\"text\"\r\n              inputMode=\"numeric\"\r\n              value={value.digits}\r\n              onChange={handleDigitsChange}\r\n              onKeyDown={(e) => handleKeyDown(e, 'digits')}\r\n              className=\"w-24 text-4xl font-bold text-center outline-none bg-transparent tracking-wider\"\r\n              placeholder=\"123\"\r\n              maxLength={3}\r\n            />\r\n            <input\r\n              ref={letters2Ref}\r\n              type=\"text\"\r\n              value={value.letters2}\r\n              onChange={handleLetters2Change}\r\n              onKeyDown={(e) => handleKeyDown(e, 'letters2')}\r\n              className=\"w-24 text-4xl font-bold text-center outline-none bg-transparent uppercase\"\r\n              placeholder=\"EAA\"\r\n              maxLength={3}\r\n            />\r\n          </div>\r\n\r\n          {/* Flag section */}\r\n          <div className=\"flex flex-col items-center justify-center border-l-2 border-black h-full px-3 bg-gray-50 rounded-r-xl\">\r\n            <UZFlag />\r\n            <span className=\"text-sm font-bold mt-0.5\">UZ</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Selected region hint */}\r\n      {selectedRegion && (\r\n        <p className=\"text-sm text-primary-600 mt-3 font-medium\">\r\n          {language === 'ru' ? selectedRegion.name : selectedRegion.nameUz}\r\n        </p>\r\n      )}\r\n\r\n      {/* Format hint */}\r\n      <p className=\"text-xs text-gray-400 mt-1\">\r\n        {language === 'ru' ? 'Нажмите на код региона для выбора' : 'Viloyat kodini tanlash uchun bosing'}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction parsePlateNumber(plate: string, ownerType: VehicleOwnerType) {\r\n  const cleaned = plate.toUpperCase().replace(/[^A-Z0-9]/g, '');\r\n  if (ownerType === 'legal_entity' || ownerType === 'service') {\r\n    return { region: cleaned.slice(0, 2), letters1: '', digits: cleaned.slice(2, 5), letters2: cleaned.slice(5, 8) };\r\n  }\r\n  return { region: cleaned.slice(0, 2), letters1: cleaned.slice(2, 3), digits: cleaned.slice(3, 6), letters2: cleaned.slice(6, 8) };\r\n}\r\n\r\nfunction combinePlateNumber(parts: { region: string; letters1: string; digits: string; letters2: string }, ownerType: VehicleOwnerType): string {\r\n  if (ownerType === 'legal_entity' || ownerType === 'service') {\r\n    return `${parts.region}${parts.digits}${parts.letters2}`.toUpperCase();\r\n  }\r\n  return `${parts.region}${parts.letters1}${parts.digits}${parts.letters2}`.toUpperCase();\r\n}\r\n\r\nfunction validatePlateNumber(parts: { region: string; letters1: string; digits: string; letters2: string }, ownerType: VehicleOwnerType): boolean {\r\n  const region = parseInt(parts.region);\r\n  if (isNaN(region) || region < 1 || region > 99) return false;\r\n  if (ownerType === 'legal_entity' || ownerType === 'service') {\r\n    return parts.digits.length === 3 && parts.letters2.length === 3;\r\n  }\r\n  return parts.letters1.length === 1 && parts.digits.length === 3 && parts.letters2.length === 2;\r\n}\r\n\r\nexport function VehicleSearchPage() {\r\n  const { vehicles, addVehicle, updateVehicle, deleteVehicle, fetchVehicles } = useDataStore();\r\n  const { user } = useAuthStore();\r\n  const { language } = useLanguageStore();\r\n\r\n  // Fetch ALL vehicles from D1 database on mount (for staff search page)\r\n  useEffect(() => {\r\n    // Pass true to get all vehicles (staff endpoint)\r\n    fetchVehicles(true);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const [searchPlateParts, setSearchPlateParts] = useState({ region: '', letters1: '', digits: '', letters2: '' });\r\n  const [searchResult, setSearchResult] = useState<Vehicle | null>(null);\r\n  const [filteredVehicles, setFilteredVehicles] = useState<Vehicle[]>([]);\r\n  const [hasSearched, setHasSearched] = useState(false);\r\n  const [showAllVehicles, setShowAllVehicles] = useState(false);\r\n\r\n  // Modal state\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingVehicle, setEditingVehicle] = useState<Vehicle | null>(null);\r\n  const [deleteConfirm, setDeleteConfirm] = useState<string | null>(null);\r\n  const [plateError, setPlateError] = useState<string | null>(null);\r\n\r\n  // Form state\r\n  const [selectedOwnerType, setSelectedOwnerType] = useState<VehicleOwnerType>('service');\r\n  const [plateParts, setPlateParts] = useState({ region: '', letters1: '', digits: '', letters2: '' });\r\n  const [formData, setFormData] = useState({\r\n    brand: '',\r\n    model: '',\r\n    color: '',\r\n    year: '',\r\n    type: 'car' as VehicleType,\r\n    companyName: '',\r\n    parkingSpot: '',\r\n    notes: '',\r\n  });\r\n\r\n  const isManager = user?.role === 'manager' || user?.role === 'admin';\r\n  const ownerTypes: VehicleOwnerType[] = ['service', 'legal_entity'];\r\n\r\n  const resetForm = () => {\r\n    setFormData({ brand: '', model: '', color: '', year: '', type: 'car', companyName: '', parkingSpot: '', notes: '' });\r\n    setPlateParts({ region: '', letters1: '', digits: '', letters2: '' });\r\n    setSelectedOwnerType('service');\r\n    setEditingVehicle(null);\r\n    setPlateError(null);\r\n  };\r\n\r\n  const handleOpenModal = (vehicle?: Vehicle) => {\r\n    if (vehicle) {\r\n      setEditingVehicle(vehicle);\r\n      const ownerType = vehicle.ownerType || 'individual';\r\n      setSelectedOwnerType(ownerType);\r\n      setPlateParts(parsePlateNumber(vehicle.plateNumber, ownerType));\r\n      setFormData({\r\n        brand: vehicle.brand,\r\n        model: vehicle.model,\r\n        color: vehicle.color,\r\n        year: vehicle.year?.toString() || '',\r\n        type: vehicle.type,\r\n        companyName: vehicle.companyName || '',\r\n        parkingSpot: vehicle.parkingSpot || '',\r\n        notes: vehicle.notes || '',\r\n      });\r\n    } else {\r\n      resetForm();\r\n    }\r\n    setShowModal(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!editingVehicle) {\r\n      setPlateParts({ region: plateParts.region, letters1: '', digits: '', letters2: '' });\r\n    }\r\n  }, [selectedOwnerType]);\r\n\r\n  // Filter vehicles based on search plate parts\r\n  useEffect(() => {\r\n    const { region, letters1, digits, letters2 } = searchPlateParts;\r\n    const hasInput = region || letters1 || digits || letters2;\r\n\r\n    if (!hasInput) {\r\n      setFilteredVehicles([]);\r\n      setSearchResult(null);\r\n      setHasSearched(false);\r\n      return;\r\n    }\r\n\r\n    // Build search pattern - combine all parts that user entered\r\n    const searchPattern = `${region}${letters1}${digits}${letters2}`.toUpperCase();\r\n\r\n    const filtered = vehicles.filter(v => {\r\n      const cleanPlate = v.plateNumber.toUpperCase().replace(/[^A-Z0-9]/g, '');\r\n\r\n      // Simple contains check - if the plate contains search pattern\r\n      if (searchPattern && cleanPlate.includes(searchPattern)) {\r\n        return true;\r\n      }\r\n\r\n      // Also check each part individually for more flexible matching\r\n      let matches = true;\r\n\r\n      if (region) {\r\n        matches = matches && cleanPlate.startsWith(region);\r\n      }\r\n\r\n      if (letters1) {\r\n        // letters1 should be at position 2 for individual format (01A123EA)\r\n        const charAtPos2 = cleanPlate.charAt(2);\r\n        matches = matches && charAtPos2 === letters1;\r\n      }\r\n\r\n      if (digits) {\r\n        // Check if digits appear in the plate\r\n        matches = matches && cleanPlate.includes(digits);\r\n      }\r\n\r\n      if (letters2) {\r\n        // Check if letters2 appears at the end\r\n        matches = matches && cleanPlate.endsWith(letters2);\r\n      }\r\n\r\n      return matches;\r\n    });\r\n\r\n    setFilteredVehicles(filtered);\r\n    setHasSearched(true);\r\n\r\n    // Auto-select if exactly one match\r\n    if (filtered.length === 1) {\r\n      setSearchResult(filtered[0]);\r\n    } else {\r\n      setSearchResult(null);\r\n    }\r\n  }, [searchPlateParts, vehicles]);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!user) return;\r\n\r\n    if (!validatePlateNumber(plateParts, selectedOwnerType)) {\r\n      setPlateError(language === 'ru' ? 'Заполните все поля номера' : 'Barcha maydonlarni to\\'ldiring');\r\n      return;\r\n    }\r\n\r\n    const plateNumber = combinePlateNumber(plateParts, selectedOwnerType);\r\n    const vehicleData = {\r\n      ownerId: user.id,\r\n      ownerName: selectedOwnerType === 'service' ? (formData.companyName || 'Служебный') : user.name,\r\n      ownerPhone: user.phone,\r\n      apartment: '',\r\n      address: 'Служебный автомобиль',\r\n      plateNumber,\r\n      brand: formData.brand,\r\n      model: formData.model,\r\n      color: formData.color,\r\n      year: formData.year ? parseInt(formData.year) : undefined,\r\n      type: formData.type,\r\n      ownerType: selectedOwnerType,\r\n      companyName: formData.companyName || undefined,\r\n      parkingSpot: formData.parkingSpot || undefined,\r\n      notes: formData.notes || undefined,\r\n    };\r\n\r\n    if (editingVehicle) {\r\n      updateVehicle(editingVehicle.id, vehicleData);\r\n    } else {\r\n      addVehicle(vehicleData);\r\n    }\r\n\r\n    setShowModal(false);\r\n    resetForm();\r\n  };\r\n\r\n  const handleDelete = (id: string) => {\r\n    deleteVehicle(id);\r\n    setDeleteConfirm(null);\r\n    setSearchResult(null);\r\n  };\r\n\r\n  const handleQuickSearch = (vehicle: Vehicle) => {\r\n    setSearchResult(vehicle);\r\n    setHasSearched(true);\r\n  };\r\n\r\n  const formatDate = (dateStr: string) => {\r\n    return new Date(dateStr).toLocaleDateString(language === 'ru' ? 'ru-RU' : 'uz-UZ', {\r\n      day: '2-digit',\r\n      month: 'short',\r\n      year: 'numeric',\r\n    });\r\n  };\r\n\r\n  const formatPlateDisplay = (plate: string) => {\r\n    const cleaned = plate.toUpperCase().replace(/[^A-Z0-9]/g, '');\r\n    if (cleaned.length === 8 && /^\\d{2}[A-Z]\\d{3}[A-Z]{2}$/.test(cleaned)) {\r\n      return `${cleaned.slice(0,2)} ${cleaned.slice(2,3)} ${cleaned.slice(3,6)} ${cleaned.slice(6,8)}`;\r\n    }\r\n    if (cleaned.length === 8 && /^\\d{5}[A-Z]{3}$/.test(cleaned)) {\r\n      return `${cleaned.slice(0,2)} ${cleaned.slice(2,5)} ${cleaned.slice(5,8)}`;\r\n    }\r\n    return plate;\r\n  };\r\n\r\n  const getOwnerTypeIcon = (type?: VehicleOwnerType) => {\r\n    if (!type) return <User className=\"w-4 h-4\" />;\r\n    switch (type) {\r\n      case 'individual': return <User className=\"w-4 h-4\" />;\r\n      case 'legal_entity': return <Building2 className=\"w-4 h-4\" />;\r\n      case 'service': return <Car className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6 pb-20 md:pb-0\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-xl md:text-2xl font-bold flex items-center gap-3\">\r\n          <Search className=\"w-7 h-7 text-blue-500\" />\r\n          {language === 'ru' ? 'Поиск автомобилей' : 'Avtomobil qidirish'}\r\n        </h1>\r\n        <div className=\"flex items-center gap-3\">\r\n          <span className=\"text-sm text-gray-500\">\r\n            {language === 'ru' ? 'Всего:' : 'Jami:'} {vehicles.length}\r\n          </span>\r\n          {isManager && (\r\n            <button\r\n              onClick={() => handleOpenModal()}\r\n              className=\"btn-primary flex items-center gap-2\"\r\n            >\r\n              <Plus className=\"w-5 h-5\" />\r\n              <span className=\"hidden sm:inline\">\r\n                {language === 'ru' ? 'Служебное авто' : 'Xizmat avtosi'}\r\n              </span>\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Search Form with Beautiful Plate Input */}\r\n      <div className=\"glass-card p-6 relative z-10 overflow-visible\">\r\n        <div className=\"flex flex-col items-center relative\">\r\n          <SearchPlateInput\r\n            value={searchPlateParts}\r\n            onChange={setSearchPlateParts}\r\n            language={language}\r\n            onSearch={() => {\r\n              if (filteredVehicles.length === 1) {\r\n                setSearchResult(filteredVehicles[0]);\r\n              }\r\n            }}\r\n          />\r\n\r\n          {/* Clear search button */}\r\n          {(searchPlateParts.region || searchPlateParts.letters1 || searchPlateParts.digits || searchPlateParts.letters2) && (\r\n            <button\r\n              onClick={() => {\r\n                setSearchPlateParts({ region: '', letters1: '', digits: '', letters2: '' });\r\n                setFilteredVehicles([]);\r\n                setSearchResult(null);\r\n                setHasSearched(false);\r\n              }}\r\n              className=\"mt-4 px-4 py-2 text-sm text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2\"\r\n            >\r\n              <X className=\"w-4 h-4\" />\r\n              {language === 'ru' ? 'Очистить поиск' : 'Qidiruvni tozalash'}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtered Results List */}\r\n      {hasSearched && filteredVehicles.length > 1 && !searchResult && (\r\n        <div className=\"glass-card p-4\">\r\n          <h3 className=\"font-medium text-gray-700 mb-3 flex items-center gap-2\">\r\n            <Search className=\"w-5 h-5 text-primary-500\" />\r\n            {language === 'ru' ? 'Найденные автомобили' : 'Topilgan avtomobillar'}\r\n            <span className=\"px-2 py-0.5 rounded-full bg-primary-100 text-primary-600 text-sm\">\r\n              {filteredVehicles.length}\r\n            </span>\r\n          </h3>\r\n          <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n            {filteredVehicles.map((vehicle) => (\r\n              <div\r\n                key={vehicle.id}\r\n                className=\"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-primary-50 cursor-pointer transition-colors border border-transparent hover:border-primary-200\"\r\n                onClick={() => {\r\n                  setSearchResult(vehicle);\r\n                }}\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center\">\r\n                    <Car className=\"w-5 h-5 text-blue-500\" />\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <p className=\"font-bold text-gray-900 tracking-wider\">{formatPlateDisplay(vehicle.plateNumber)}</p>\r\n                      {vehicle.ownerType && (\r\n                        <span className={`inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs ${\r\n                          vehicle.ownerType === 'individual' ? 'bg-blue-100 text-blue-600' :\r\n                          vehicle.ownerType === 'legal_entity' ? 'bg-purple-100 text-purple-600' :\r\n                          'bg-orange-100 text-orange-600'\r\n                        }`}>\r\n                          {getOwnerTypeIcon(vehicle.ownerType)}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      {vehicle.brand} {vehicle.model} • {vehicle.color}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className=\"text-sm font-medium text-gray-600\">{vehicle.ownerName}</p>\r\n                  {vehicle.apartment && (\r\n                    <p className=\"text-xs text-gray-400\">\r\n                      {language === 'ru' ? 'Кв.' : 'Kv.'} {vehicle.apartment}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Search Result */}\r\n      {searchResult && (\r\n        <div className=\"space-y-4\">\r\n          {searchResult && (\r\n            <div className=\"glass-card p-6 border-2 border-green-200 bg-green-50/50\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center\">\r\n                    <Car className=\"w-4 h-4 text-green-600\" />\r\n                  </div>\r\n                  <h2 className=\"text-lg font-bold text-green-700\">\r\n                    {language === 'ru' ? 'Автомобиль найден!' : 'Avtomobil topildi!'}\r\n                  </h2>\r\n                </div>\r\n                {isManager && (\r\n                  <div className=\"flex gap-1\">\r\n                    <button\r\n                      onClick={() => handleOpenModal(searchResult)}\r\n                      className=\"p-2 hover:bg-white rounded-lg transition-colors\"\r\n                    >\r\n                      <Edit2 className=\"w-4 h-4 text-gray-500\" />\r\n                    </button>\r\n                    <button\r\n                      onClick={() => setDeleteConfirm(searchResult.id)}\r\n                      className=\"p-2 hover:bg-red-50 rounded-lg transition-colors\"\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4 text-red-500\" />\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Vehicle Info */}\r\n              <div className=\"bg-white rounded-xl p-4 mb-4\">\r\n                <div className=\"flex items-center gap-4 mb-4\">\r\n                  <div className=\"w-16 h-16 rounded-xl bg-blue-100 flex items-center justify-center\">\r\n                    <Car className=\"w-8 h-8 text-blue-500\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-2xl font-bold text-gray-900 tracking-wider\">{formatPlateDisplay(searchResult.plateNumber)}</h3>\r\n                    <p className=\"text-gray-500\">\r\n                      {searchResult.brand} {searchResult.model} • {searchResult.color}\r\n                      {searchResult.year && ` • ${searchResult.year}`}\r\n                    </p>\r\n                    {searchResult.ownerType && (\r\n                      <span className={`inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium mt-1 ${\r\n                        searchResult.ownerType === 'individual' ? 'bg-blue-100 text-blue-700' :\r\n                        searchResult.ownerType === 'legal_entity' ? 'bg-purple-100 text-purple-700' :\r\n                        'bg-orange-100 text-orange-700'\r\n                      }`}>\r\n                        {getOwnerTypeIcon(searchResult.ownerType)}\r\n                        {language === 'ru'\r\n                          ? VEHICLE_OWNER_TYPE_LABELS[searchResult.ownerType].label\r\n                          : VEHICLE_OWNER_TYPE_LABELS[searchResult.ownerType].labelUz}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Car className=\"w-5 h-5 text-gray-400\" />\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Тип транспорта' : 'Transport turi'}</p>\r\n                        <p className=\"font-medium\">\r\n                          {language === 'ru'\r\n                            ? VEHICLE_TYPE_LABELS[searchResult.type].label\r\n                            : VEHICLE_TYPE_LABELS[searchResult.type].labelUz}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    {searchResult.parkingSpot && (\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <MapPin className=\"w-5 h-5 text-gray-400\" />\r\n                        <div>\r\n                          <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Парковочное место' : 'Avtoturargoh joyi'}</p>\r\n                          <p className=\"font-medium\">{searchResult.parkingSpot}</p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Calendar className=\"w-5 h-5 text-gray-400\" />\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Дата регистрации' : 'Ro\\'yxatga olingan sana'}</p>\r\n                        <p className=\"font-medium\">{formatDate(searchResult.createdAt)}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Owner Info */}\r\n              <div className=\"bg-white rounded-xl p-4\">\r\n                <h4 className=\"font-semibold text-gray-700 mb-3 flex items-center gap-2\">\r\n                  <User className=\"w-5 h-5 text-primary-500\" />\r\n                  {language === 'ru' ? 'Информация о владельце' : 'Egasi haqida ma\\'lumot'}\r\n                </h4>\r\n\r\n                <div className=\"space-y-3\">\r\n                  {/* Owner Name - always show */}\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <User className=\"w-5 h-5 text-gray-400\" />\r\n                    <div>\r\n                      <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Владелец' : 'Egasi'}</p>\r\n                      <p className=\"font-medium text-lg\">{searchResult.ownerName || (language === 'ru' ? 'Не указано' : 'Ko\\'rsatilmagan')}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Company Name - show if exists */}\r\n                  {searchResult.companyName && (\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Building2 className=\"w-5 h-5 text-gray-400\" />\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Компания' : 'Kompaniya'}</p>\r\n                        <p className=\"font-medium\">{searchResult.companyName}</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Phone - always show */}\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <Phone className=\"w-5 h-5 text-gray-400\" />\r\n                    <div>\r\n                      <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Телефон' : 'Telefon'}</p>\r\n                      {searchResult.ownerPhone ? (\r\n                        <a href={`tel:${searchResult.ownerPhone}`} className=\"font-medium text-primary-600 hover:underline\">\r\n                          {searchResult.ownerPhone}\r\n                        </a>\r\n                      ) : (\r\n                        <p className=\"font-medium text-gray-400\">{language === 'ru' ? 'Не указано' : 'Ko\\'rsatilmagan'}</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Apartment - show if exists */}\r\n                  {searchResult.apartment && (\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Home className=\"w-5 h-5 text-gray-400\" />\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Квартира' : 'Kvartira'}</p>\r\n                        <p className=\"font-medium\">{searchResult.apartment}</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Address - show if exists and not service vehicle */}\r\n                  {searchResult.address && searchResult.address !== 'Служебный автомобиль' && (\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <MapPin className=\"w-5 h-5 text-gray-400\" />\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-500\">{language === 'ru' ? 'Адрес' : 'Manzil'}</p>\r\n                        <p className=\"font-medium\">{searchResult.address}</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {searchResult.notes && (\r\n                  <div className=\"mt-4 p-3 bg-yellow-50 rounded-lg\">\r\n                    <div className=\"flex items-start gap-2\">\r\n                      <Info className=\"w-4 h-4 text-yellow-600 mt-0.5\" />\r\n                      <div>\r\n                        <p className=\"text-xs text-yellow-600 font-medium\">{language === 'ru' ? 'Примечание' : 'Izoh'}</p>\r\n                        <p className=\"text-sm text-yellow-700\">{searchResult.notes}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Not Found State */}\r\n      {hasSearched && filteredVehicles.length === 0 && (searchPlateParts.region || searchPlateParts.digits) && (\r\n        <div className=\"glass-card p-8 text-center border-2 border-red-200 bg-red-50/50\">\r\n          <AlertCircle className=\"w-12 h-12 mx-auto text-red-400 mb-3\" />\r\n          <h3 className=\"text-lg font-semibold text-red-700 mb-2\">\r\n            {language === 'ru' ? 'Автомобиль не найден' : 'Avtomobil topilmadi'}\r\n          </h3>\r\n          <p className=\"text-red-600 text-sm\">\r\n            {language === 'ru'\r\n              ? 'По введённым данным автомобиль не найден в системе'\r\n              : 'Kiritilgan ma\\'lumotlar bo\\'yicha avtomobil topilmadi'}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* All Vehicles Toggle - Only for managers/admins */}\r\n      {isManager && vehicles.length > 0 && (\r\n        <div className=\"glass-card p-4\">\r\n          <button\r\n            onClick={() => setShowAllVehicles(!showAllVehicles)}\r\n            className=\"w-full flex items-center justify-between py-2\"\r\n          >\r\n            <span className=\"font-medium text-gray-700\">\r\n              {language === 'ru' ? 'Все зарегистрированные автомобили' : 'Barcha ro\\'yxatga olingan avtomobillar'}\r\n              <span className=\"ml-2 px-2 py-0.5 rounded-full bg-primary-100 text-primary-600 text-sm\">\r\n                {vehicles.length}\r\n              </span>\r\n            </span>\r\n            <span className=\"text-primary-500 text-sm\">\r\n              {showAllVehicles ? (language === 'ru' ? 'Скрыть' : 'Yashirish') : (language === 'ru' ? 'Показать' : 'Ko\\'rsatish')}\r\n            </span>\r\n          </button>\r\n\r\n          {showAllVehicles && (\r\n            <div className=\"mt-4 space-y-3\">\r\n              {vehicles.map((vehicle) => (\r\n                <div\r\n                  key={vehicle.id}\r\n                  className=\"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 cursor-pointer transition-colors\"\r\n                  onClick={() => handleQuickSearch(vehicle)}\r\n                >\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center\">\r\n                      <Car className=\"w-5 h-5 text-blue-500\" />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <p className=\"font-bold text-gray-900 tracking-wider\">{formatPlateDisplay(vehicle.plateNumber)}</p>\r\n                        {vehicle.ownerType && (\r\n                          <span className={`inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs ${\r\n                            vehicle.ownerType === 'individual' ? 'bg-blue-100 text-blue-600' :\r\n                            vehicle.ownerType === 'legal_entity' ? 'bg-purple-100 text-purple-600' :\r\n                            'bg-orange-100 text-orange-600'\r\n                          }`}>\r\n                            {getOwnerTypeIcon(vehicle.ownerType)}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-sm text-gray-500\">\r\n                        {vehicle.brand} {vehicle.model} • {vehicle.ownerName}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    <p className=\"text-sm font-medium text-gray-600\">\r\n                      {vehicle.apartment ? `${language === 'ru' ? 'Кв.' : 'Kv.'} ${vehicle.apartment}` : '—'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Empty State */}\r\n      {vehicles.length === 0 && !hasSearched && (\r\n        <div className=\"glass-card p-12 text-center\">\r\n          <Car className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-gray-600 mb-2\">\r\n            {language === 'ru' ? 'Нет зарегистрированных автомобилей' : 'Ro\\'yxatga olingan avtomobillar yo\\'q'}\r\n          </h3>\r\n          <p className=\"text-gray-400 mb-4\">\r\n            {language === 'ru'\r\n              ? 'Жители еще не добавили свои автомобили в систему'\r\n              : 'Aholi hali avtomobillarini tizimga qo\\'shmagan'}\r\n          </p>\r\n          {isManager && (\r\n            <button\r\n              onClick={() => handleOpenModal()}\r\n              className=\"btn-primary inline-flex items-center gap-2\"\r\n            >\r\n              <Plus className=\"w-5 h-5\" />\r\n              {language === 'ru' ? 'Добавить служебное авто' : 'Xizmat avtosini qo\\'shish'}\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Add/Edit Modal */}\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n          <div className=\"w-full max-w-2xl bg-white rounded-2xl overflow-hidden max-h-[85vh] flex flex-col\">\r\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-100\">\r\n              <h2 className=\"text-lg font-bold\">\r\n                {editingVehicle\r\n                  ? (language === 'ru' ? 'Редактировать авто' : 'Avtoni tahrirlash')\r\n                  : (language === 'ru' ? 'Добавить служебное авто' : 'Xizmat avtosini qo\\'shish')}\r\n              </h2>\r\n              <button\r\n                onClick={() => { setShowModal(false); resetForm(); }}\r\n                className=\"p-2 hover:bg-gray-100 rounded-xl transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n              {/* Owner Type + Company Name */}\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    {language === 'ru' ? 'Тип владельца' : 'Egasi turi'}\r\n                  </label>\r\n                  <div className=\"flex gap-2\">\r\n                    {ownerTypes.map((type) => (\r\n                      <button\r\n                        key={type}\r\n                        type=\"button\"\r\n                        onClick={() => setSelectedOwnerType(type)}\r\n                        className={`flex-1 flex items-center justify-center gap-1 px-2 py-2 rounded-xl border-2 transition-all text-sm ${\r\n                          selectedOwnerType === type\r\n                            ? 'border-primary-500 bg-primary-50 text-primary-700'\r\n                            : 'border-gray-200 hover:border-gray-300'\r\n                        }`}\r\n                      >\r\n                        <span>{VEHICLE_OWNER_TYPE_LABELS[type].icon}</span>\r\n                        <span className=\"font-medium\">\r\n                          {language === 'ru' ? VEHICLE_OWNER_TYPE_LABELS[type].label : VEHICLE_OWNER_TYPE_LABELS[type].labelUz}\r\n                        </span>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    {language === 'ru' ? 'Название/Компания' : 'Nomi/Kompaniya'}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.companyName}\r\n                    onChange={(e) => setFormData({ ...formData, companyName: e.target.value })}\r\n                    placeholder={language === 'ru' ? 'УК \"Название\" / ООО \"Компания\"' : 'BK \"Nomi\" / MChJ'}\r\n                    className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Plate Number */}\r\n              <div className=\"bg-gray-50 rounded-xl p-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2 text-center\">\r\n                  {language === 'ru' ? 'Номер автомобиля' : 'Avtomobil raqami'}\r\n                </label>\r\n                <PlateNumberInput\r\n                  value={plateParts}\r\n                  onChange={(newParts) => { setPlateParts(newParts); setPlateError(null); }}\r\n                  language={language}\r\n                />\r\n                {plateError && (\r\n                  <div className=\"flex items-center justify-center gap-1 mt-2 text-red-500 text-sm\">\r\n                    <AlertCircle className=\"w-4 h-4\" />\r\n                    {plateError}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Vehicle Details */}\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                <div className=\"col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{language === 'ru' ? 'Тип транспорта' : 'Transport turi'}</label>\r\n                  <select\r\n                    value={formData.type}\r\n                    onChange={(e) => setFormData({ ...formData, type: e.target.value as VehicleType })}\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 outline-none text-sm\"\r\n                    required\r\n                  >\r\n                    {Object.entries(VEHICLE_TYPE_LABELS).map(([key, labels]) => (\r\n                      <option key={key} value={key}>{language === 'ru' ? labels.label : labels.labelUz}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{language === 'ru' ? 'Марка' : 'Markasi'}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.brand}\r\n                    onChange={(e) => setFormData({ ...formData, brand: e.target.value })}\r\n                    placeholder=\"Chevrolet\"\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 outline-none text-sm\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{language === 'ru' ? 'Модель' : 'Modeli'}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.model}\r\n                    onChange={(e) => setFormData({ ...formData, model: e.target.value })}\r\n                    placeholder=\"Damas\"\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 outline-none text-sm\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{language === 'ru' ? 'Цвет' : 'Rangi'}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.color}\r\n                    onChange={(e) => setFormData({ ...formData, color: e.target.value })}\r\n                    placeholder={language === 'ru' ? 'Белый' : 'Oq'}\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 outline-none text-sm\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{language === 'ru' ? 'Год' : 'Yili'}</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.year}\r\n                    onChange={(e) => setFormData({ ...formData, year: e.target.value })}\r\n                    placeholder=\"2020\"\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 outline-none text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{language === 'ru' ? 'Парковка' : 'Avtoturargoh'}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.parkingSpot}\r\n                    onChange={(e) => setFormData({ ...formData, parkingSpot: e.target.value })}\r\n                    placeholder=\"S-01\"\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 outline-none text-sm\"\r\n                  />\r\n                </div>\r\n                <div className=\"col-span-2 md:col-span-4\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{language === 'ru' ? 'Примечания' : 'Izohlar'}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.notes}\r\n                    onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\r\n                    placeholder={language === 'ru' ? 'Машина для вывоза мусора...' : 'Chiqindilarni olib ketish mashinasi...'}\r\n                    className=\"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 outline-none text-sm\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </form>\r\n\r\n            <div className=\"p-4 border-t border-gray-100 bg-white\">\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => { setShowModal(false); resetForm(); }}\r\n                  className=\"flex-1 py-3 px-4 rounded-xl font-medium bg-gray-100 hover:bg-gray-200 transition-colors\"\r\n                >\r\n                  {language === 'ru' ? 'Отмена' : 'Bekor qilish'}\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  onClick={handleSubmit}\r\n                  className=\"flex-1 py-3 px-4 rounded-xl font-semibold text-white bg-gradient-to-r from-primary-400 to-primary-500 hover:from-primary-500 hover:to-primary-600 transition-all\"\r\n                >\r\n                  {editingVehicle ? (language === 'ru' ? 'Сохранить' : 'Saqlash') : (language === 'ru' ? 'Добавить' : 'Qo\\'shish')}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      {deleteConfirm && (\r\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white rounded-2xl p-6 max-w-sm w-full\">\r\n            <div className=\"flex items-center justify-center w-12 h-12 rounded-full bg-red-100 mx-auto mb-4\">\r\n              <AlertTriangle className=\"w-6 h-6 text-red-500\" />\r\n            </div>\r\n            <h3 className=\"text-lg font-bold text-center mb-2\">\r\n              {language === 'ru' ? 'Удалить автомобиль?' : 'Avtomobilni o\\'chirish?'}\r\n            </h3>\r\n            <p className=\"text-gray-500 text-center text-sm mb-6\">\r\n              {language === 'ru' ? 'Это действие нельзя отменить' : 'Bu amalni bekor qilib bo\\'lmaydi'}\r\n            </p>\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => setDeleteConfirm(null)}\r\n                className=\"flex-1 py-3 px-4 rounded-xl font-medium bg-gray-100 hover:bg-gray-200 transition-colors\"\r\n              >\r\n                {language === 'ru' ? 'Отмена' : 'Bekor qilish'}\r\n              </button>\r\n              <button\r\n                onClick={() => handleDelete(deleteConfirm)}\r\n                className=\"flex-1 py-3 px-4 rounded-xl font-medium text-white bg-red-500 hover:bg-red-600 transition-colors\"\r\n              >\r\n                {language === 'ru' ? 'Удалить' : 'O\\'chirish'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["UZ_REGIONS","UZFlag","jsxs","jsx","i","SearchPlateInput","value","onChange","language","onSearch","letters1Ref","useRef","digitsRef","letters2Ref","showRegionDropdown","setShowRegionDropdown","useState","handleRegionSelect","code","handleLetters1Change","e","val","handleDigitsChange","handleLetters2Change","handleKeyDown","field","selectedRegion","r","isLegalFormat","Fragment","region","PlateNumberInput","parsePlateNumber","plate","ownerType","cleaned","combinePlateNumber","parts","validatePlateNumber","VehicleSearchPage","vehicles","addVehicle","updateVehicle","deleteVehicle","fetchVehicles","useDataStore","user","useAuthStore","useLanguageStore","useEffect","searchPlateParts","setSearchPlateParts","searchResult","setSearchResult","filteredVehicles","setFilteredVehicles","hasSearched","setHasSearched","showAllVehicles","setShowAllVehicles","showModal","setShowModal","editingVehicle","setEditingVehicle","deleteConfirm","setDeleteConfirm","plateError","setPlateError","selectedOwnerType","setSelectedOwnerType","plateParts","setPlateParts","formData","setFormData","isManager","ownerTypes","resetForm","handleOpenModal","vehicle","letters1","digits","letters2","searchPattern","filtered","v","cleanPlate","matches","charAtPos2","handleSubmit","plateNumber","vehicleData","handleDelete","id","handleQuickSearch","formatDate","dateStr","formatPlateDisplay","getOwnerTypeIcon","type","User","Building2","Car","Search","Plus","X","Edit2","Trash2","VEHICLE_OWNER_TYPE_LABELS","VEHICLE_TYPE_LABELS","MapPin","Calendar","Phone","Home","Info","AlertCircle","newParts","key","labels","AlertTriangle"],"mappings":"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"}