{"version":3,"file":"ResidentRateEmployeesPage-1768381324153-DNOhzo3W.js","sources":["../../src/pages/ResidentRateEmployeesPage.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Star, Users, Check, X, ThumbsUp, Send, MessageCircle, User, Briefcase, ChevronRight } from 'lucide-react';\nimport { useAuthStore } from '../stores/authStore';\nimport { useDataStore } from '../stores/dataStore';\nimport { useLanguageStore } from '../stores/languageStore';\nimport type { Executor } from '../types';\nimport { SPECIALIZATION_LABELS } from '../types';\n\ninterface Rating {\n  quality: number;\n  speed: number;\n  politeness: number;\n  comment: string;\n}\n\ninterface EmployeeRating {\n  id: string;\n  executorId: string;\n  residentId: string;\n  quality: number;\n  speed: number;\n  politeness: number;\n  comment: string;\n  createdAt: string;\n}\n\n// Храним оценки в localStorage для демо\nconst RATINGS_STORAGE_KEY = 'resident_employee_ratings';\n\nconst getRatingsFromStorage = (): EmployeeRating[] => {\n  try {\n    const stored = localStorage.getItem(RATINGS_STORAGE_KEY);\n    return stored ? JSON.parse(stored) : [];\n  } catch {\n    return [];\n  }\n};\n\nconst saveRatingToStorage = (rating: EmployeeRating) => {\n  const ratings = getRatingsFromStorage();\n  // Check if already rated this executor by this resident\n  const existingIndex = ratings.findIndex(r => r.executorId === rating.executorId && r.residentId === rating.residentId);\n  if (existingIndex >= 0) {\n    ratings[existingIndex] = rating; // Update existing rating\n  } else {\n    ratings.push(rating);\n  }\n  localStorage.setItem(RATINGS_STORAGE_KEY, JSON.stringify(ratings));\n};\n\nconst getExecutorRating = (executorId: string, residentId: string): EmployeeRating | null => {\n  const ratings = getRatingsFromStorage();\n  return ratings.find(r => r.executorId === executorId && r.residentId === residentId) || null;\n};\n\nexport function ResidentRateEmployeesPage() {\n  const { user } = useAuthStore();\n  const { executors, requests, fetchExecutors, fetchRequests } = useDataStore();\n  const { language } = useLanguageStore();\n\n  const [selectedExecutor, setSelectedExecutor] = useState<Executor | null>(null);\n  const [showRatingModal, setShowRatingModal] = useState(false);\n  const [ratings, setRatings] = useState<Rating>({\n    quality: 0,\n    speed: 0,\n    politeness: 0,\n    comment: ''\n  });\n  const [ratedExecutorIds, setRatedExecutorIds] = useState<string[]>([]);\n\n  // Fetch executors and requests from API on mount\n  useEffect(() => {\n    fetchExecutors();\n    fetchRequests();\n  }, [fetchExecutors, fetchRequests]);\n\n  // Load rated executors on mount\n  useEffect(() => {\n    if (user) {\n      const allRatings = getRatingsFromStorage();\n      const ratedIds = allRatings.filter(r => r.residentId === user.id).map(r => r.executorId);\n      setRatedExecutorIds(ratedIds);\n    }\n  }, [user]);\n\n  // Get executors who worked on user's completed requests\n  const getExecutorsWhoWorkedForUser = (): string[] => {\n    const userCompletedRequests = requests.filter(r =>\n      r.residentId === user?.id &&\n      r.status === 'completed' &&\n      r.executorId\n    );\n    return [...new Set(userCompletedRequests.map(r => r.executorId!))];\n  };\n\n  const workedForUserIds = getExecutorsWhoWorkedForUser();\n\n  // All executors, sorted by those who worked for user first\n  const allExecutors = [...executors].sort((a: Executor, b: Executor) => {\n    const aWorked = workedForUserIds.includes(a.id);\n    const bWorked = workedForUserIds.includes(b.id);\n    if (aWorked && !bWorked) return -1;\n    if (!aWorked && bWorked) return 1;\n    return a.name.localeCompare(b.name);\n  });\n\n  const unratedExecutors = allExecutors.filter(e => !ratedExecutorIds.includes(e.id));\n  const ratedExecutors = allExecutors.filter(e => ratedExecutorIds.includes(e.id));\n\n  // Get completed requests count for an executor\n  const getExecutorRequestsCount = (executorId: string): number => {\n    return requests.filter(r =>\n      r.residentId === user?.id &&\n      r.executorId === executorId &&\n      r.status === 'completed'\n    ).length;\n  };\n\n  const handleOpenRating = (executor: Executor) => {\n    setSelectedExecutor(executor);\n    // Check if already rated\n    const existingRating = getExecutorRating(executor.id, user?.id || '');\n    if (existingRating) {\n      setRatings({\n        quality: existingRating.quality,\n        speed: existingRating.speed,\n        politeness: existingRating.politeness,\n        comment: existingRating.comment\n      });\n    } else {\n      setRatings({ quality: 0, speed: 0, politeness: 0, comment: '' });\n    }\n    setShowRatingModal(true);\n  };\n\n  const handleSubmitRating = () => {\n    if (!selectedExecutor || !user) return;\n\n    // Сохраняем оценку\n    const newRating: EmployeeRating = {\n      id: Date.now().toString(),\n      executorId: selectedExecutor.id,\n      residentId: user.id,\n      quality: ratings.quality,\n      speed: ratings.speed,\n      politeness: ratings.politeness,\n      comment: ratings.comment,\n      createdAt: new Date().toISOString()\n    };\n\n    saveRatingToStorage(newRating);\n    setRatedExecutorIds(prev => {\n      if (!prev.includes(selectedExecutor.id)) {\n        return [...prev, selectedExecutor.id];\n      }\n      return prev;\n    });\n    setShowRatingModal(false);\n    setSelectedExecutor(null);\n  };\n\n  const StarRatingInput = ({\n    value,\n    onChange,\n    label\n  }: {\n    value: number;\n    onChange: (v: number) => void;\n    label: string;\n  }) => (\n    <div className=\"flex items-center justify-between gap-4 py-3 border-b border-gray-100 last:border-0\">\n      <span className=\"text-sm font-medium text-gray-700\">{label}</span>\n      <div className=\"flex gap-1\">\n        {[1, 2, 3, 4, 5].map((star) => (\n          <button\n            key={star}\n            type=\"button\"\n            onClick={() => onChange(star)}\n            className=\"p-1 touch-manipulation\"\n          >\n            <Star\n              className={`w-7 h-7 transition-all ${\n                star <= value\n                  ? 'text-yellow-400 fill-yellow-400'\n                  : 'text-gray-300 hover:text-yellow-300'\n              }`}\n            />\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n\n  const averageRating = (r: Rating) => {\n    const total = r.quality + r.speed + r.politeness;\n    return total > 0 ? (total / 3).toFixed(1) : '0';\n  };\n\n  // Get average rating for a rated executor\n  const getExecutorAverageRating = (executorId: string): string => {\n    const rating = getExecutorRating(executorId, user?.id || '');\n    if (!rating) return '0';\n    const total = rating.quality + rating.speed + rating.politeness;\n    return (total / 3).toFixed(1);\n  };\n\n  return (\n    <div className=\"space-y-4 md:space-y-6 pb-20 md:pb-0\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-xl md:text-2xl font-bold flex items-center gap-3\">\n          <Star className=\"w-7 h-7 text-primary-500\" />\n          {language === 'ru' ? 'Оценить сотрудников' : 'Xodimlarni baholash'}\n        </h1>\n      </div>\n\n      {/* Info Card */}\n      <div className=\"glass-card p-4 bg-blue-50 border-blue-200\">\n        <div className=\"flex items-start gap-3\">\n          <ThumbsUp className=\"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5\" />\n          <p className=\"text-sm text-blue-700\">\n            {language === 'ru'\n              ? 'Оцените качество работы сотрудников, которые выполнили ваши заявки. Ваши отзывы помогут улучшить качество обслуживания.'\n              : 'Arizalaringizni bajargan xodimlarning ish sifatini baholang. Sizning fikrlaringiz xizmat sifatini yaxshilashga yordam beradi.'}\n          </p>\n        </div>\n      </div>\n\n      {/* Main Content - Two columns on desktop */}\n      <div className=\"grid md:grid-cols-2 gap-4 md:gap-6\">\n        {/* Left Side - Workers List */}\n        <div className=\"space-y-4\">\n          {/* Unrated Workers */}\n          {unratedExecutors.length > 0 && (\n            <div className=\"space-y-3\">\n              <h2 className=\"text-lg font-semibold flex items-center gap-2\">\n                <MessageCircle className=\"w-5 h-5 text-primary-500\" />\n                {language === 'ru' ? 'Ожидают оценки' : 'Baholash kutilmoqda'}\n                <span className=\"px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-700 text-sm\">\n                  {unratedExecutors.length}\n                </span>\n              </h2>\n\n              {unratedExecutors.map((executor) => (\n                <div\n                  key={executor.id}\n                  className=\"glass-card p-4 cursor-pointer hover:shadow-md transition-all border-2 border-yellow-200 bg-yellow-50\"\n                  onClick={() => handleOpenRating(executor)}\n                >\n                  <div className=\"flex items-center justify-between gap-4\">\n                    <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                      {/* Avatar */}\n                      <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-yellow-400 to-yellow-500 flex items-center justify-center flex-shrink-0\">\n                        <User className=\"w-6 h-6 text-white\" />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"font-semibold text-gray-900 truncate\">{executor.name}</h3>\n                        <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                          <Briefcase className=\"w-3.5 h-3.5\" />\n                          <span className=\"truncate\">\n                            {SPECIALIZATION_LABELS[executor.specialization] || executor.specialization}\n                          </span>\n                        </div>\n                        <div className=\"text-xs text-gray-500 mt-1\">\n                          {language === 'ru'\n                            ? `${getExecutorRequestsCount(executor.id)} выполненных заявок`\n                            : `${getExecutorRequestsCount(executor.id)} ta bajarilgan ariza`}\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-sm text-yellow-700 font-medium hidden sm:inline\">\n                        {language === 'ru' ? 'Оценить' : 'Baholash'}\n                      </span>\n                      <ChevronRight className=\"w-5 h-5 text-yellow-600\" />\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Rated Workers */}\n          {ratedExecutors.length > 0 && (\n            <div className=\"space-y-3\">\n              <h2 className=\"text-lg font-semibold flex items-center gap-2\">\n                <Check className=\"w-5 h-5 text-green-500\" />\n                {language === 'ru' ? 'Уже оценены' : 'Allaqachon baholangan'}\n                <span className=\"px-2 py-0.5 rounded-full bg-green-100 text-green-700 text-sm\">\n                  {ratedExecutors.length}\n                </span>\n              </h2>\n\n              {ratedExecutors.map((executor) => (\n                <div\n                  key={executor.id}\n                  className=\"glass-card p-4 border border-green-100 bg-green-50/50 cursor-pointer hover:shadow-md transition-all\"\n                  onClick={() => handleOpenRating(executor)}\n                >\n                  <div className=\"flex items-center justify-between gap-4\">\n                    <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                      {/* Avatar */}\n                      <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-green-400 to-green-500 flex items-center justify-center flex-shrink-0\">\n                        <User className=\"w-6 h-6 text-white\" />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"font-semibold text-gray-900 truncate\">{executor.name}</h3>\n                        <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                          <Briefcase className=\"w-3.5 h-3.5\" />\n                          <span className=\"truncate\">\n                            {SPECIALIZATION_LABELS[executor.specialization] || executor.specialization}\n                          </span>\n                        </div>\n                        {/* Show rating */}\n                        <div className=\"flex items-center gap-1 mt-1\">\n                          <Star className=\"w-4 h-4 text-yellow-500 fill-yellow-500\" />\n                          <span className=\"text-sm font-medium text-gray-700\">{getExecutorAverageRating(executor.id)}</span>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-green-600\">\n                      <Check className=\"w-5 h-5\" />\n                      <span className=\"text-sm font-medium hidden sm:inline\">\n                        {language === 'ru' ? 'Изменить' : 'O\\'zgartirish'}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Empty State */}\n          {allExecutors.length === 0 && (\n            <div className=\"glass-card p-8 text-center\">\n              <Users className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" />\n              <p className=\"text-gray-500\">\n                {language === 'ru'\n                  ? 'Пока нет сотрудников для оценки'\n                  : 'Hali baholash uchun xodimlar yo\\'q'}\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Right Side - Selected Worker Details (Desktop) */}\n        <div className=\"hidden md:block\">\n          {selectedExecutor ? (\n            <div className=\"glass-card p-6 sticky top-4\">\n              <div className=\"text-center mb-6\">\n                <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-primary-400 to-primary-500 flex items-center justify-center mx-auto mb-3\">\n                  <User className=\"w-10 h-10 text-white\" />\n                </div>\n                <h2 className=\"text-xl font-bold\">{selectedExecutor.name}</h2>\n                <p className=\"text-gray-600\">\n                  {SPECIALIZATION_LABELS[selectedExecutor.specialization] || selectedExecutor.specialization}\n                </p>\n                <p className=\"text-sm text-gray-500 mt-1\">\n                  {language === 'ru'\n                    ? `${getExecutorRequestsCount(selectedExecutor.id)} выполненных заявок`\n                    : `${getExecutorRequestsCount(selectedExecutor.id)} ta bajarilgan ariza`}\n                </p>\n              </div>\n\n              {/* Rating Inputs */}\n              <div className=\"space-y-1 mb-4\">\n                <StarRatingInput\n                  label={language === 'ru' ? 'Качество работы' : 'Ish sifati'}\n                  value={ratings.quality}\n                  onChange={(v) => setRatings(prev => ({ ...prev, quality: v }))}\n                />\n                <StarRatingInput\n                  label={language === 'ru' ? 'Скорость выполнения' : 'Bajarish tezligi'}\n                  value={ratings.speed}\n                  onChange={(v) => setRatings(prev => ({ ...prev, speed: v }))}\n                />\n                <StarRatingInput\n                  label={language === 'ru' ? 'Вежливость' : 'Xushmuomalalik'}\n                  value={ratings.politeness}\n                  onChange={(v) => setRatings(prev => ({ ...prev, politeness: v }))}\n                />\n              </div>\n\n              {/* Average Score */}\n              {(ratings.quality > 0 || ratings.speed > 0 || ratings.politeness > 0) && (\n                <div className=\"flex items-center justify-center gap-2 py-3 bg-primary-50 rounded-xl mb-4\">\n                  <Star className=\"w-6 h-6 text-primary-500 fill-primary-500\" />\n                  <span className=\"text-xl font-bold text-primary-700\">{averageRating(ratings)}</span>\n                  <span className=\"text-sm text-primary-600\">/ 5</span>\n                </div>\n              )}\n\n              {/* Comment */}\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  {language === 'ru' ? 'Комментарий (необязательно)' : 'Izoh (ixtiyoriy)'}\n                </label>\n                <textarea\n                  value={ratings.comment}\n                  onChange={(e) => setRatings(prev => ({ ...prev, comment: e.target.value }))}\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none resize-none\"\n                  rows={3}\n                  placeholder={language === 'ru'\n                    ? 'Поделитесь впечатлениями...'\n                    : 'Taassurotlaringiz bilan o\\'rtoqlashing...'}\n                />\n              </div>\n\n              {/* Submit Button */}\n              <button\n                onClick={handleSubmitRating}\n                disabled={ratings.quality === 0 || ratings.speed === 0 || ratings.politeness === 0}\n                className=\"w-full py-4 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 bg-gradient-to-r from-primary-400 to-primary-500 hover:from-primary-500 hover:to-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n              >\n                <Send className=\"w-5 h-5\" />\n                {ratedExecutorIds.includes(selectedExecutor.id)\n                  ? (language === 'ru' ? 'Обновить оценку' : 'Baholashni yangilash')\n                  : (language === 'ru' ? 'Отправить оценку' : 'Baholashni yuborish')\n                }\n              </button>\n            </div>\n          ) : (\n            <div className=\"glass-card p-8 text-center sticky top-4\">\n              <Users className=\"w-16 h-16 text-gray-300 mx-auto mb-3\" />\n              <p className=\"text-gray-500\">\n                {language === 'ru'\n                  ? 'Выберите сотрудника слева для оценки'\n                  : 'Baholash uchun chap tomondan xodimni tanlang'}\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Rating Modal (Mobile) */}\n      {showRatingModal && selectedExecutor && (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-end md:hidden justify-center\">\n          <div className=\"w-full bg-white rounded-t-2xl overflow-hidden max-h-[90vh] flex flex-col\">\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-100\">\n              <h2 className=\"text-lg font-bold\">\n                {language === 'ru' ? 'Оценить сотрудника' : 'Xodimni baholash'}\n              </h2>\n              <button\n                onClick={() => {\n                  setShowRatingModal(false);\n                  setSelectedExecutor(null);\n                }}\n                className=\"p-2 hover:bg-gray-100 rounded-xl transition-colors\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n              {/* Worker Info */}\n              <div className=\"bg-gray-50 rounded-xl p-4 flex items-center gap-4\">\n                <div className=\"w-14 h-14 rounded-full bg-gradient-to-br from-primary-400 to-primary-500 flex items-center justify-center flex-shrink-0\">\n                  <User className=\"w-7 h-7 text-white\" />\n                </div>\n                <div>\n                  <p className=\"font-semibold text-lg\">{selectedExecutor.name}</p>\n                  <p className=\"text-sm text-gray-600\">\n                    {SPECIALIZATION_LABELS[selectedExecutor.specialization] || selectedExecutor.specialization}\n                  </p>\n                </div>\n              </div>\n\n              {/* Rating Inputs */}\n              <div className=\"space-y-1\">\n                <StarRatingInput\n                  label={language === 'ru' ? 'Качество работы' : 'Ish sifati'}\n                  value={ratings.quality}\n                  onChange={(v) => setRatings(prev => ({ ...prev, quality: v }))}\n                />\n                <StarRatingInput\n                  label={language === 'ru' ? 'Скорость выполнения' : 'Bajarish tezligi'}\n                  value={ratings.speed}\n                  onChange={(v) => setRatings(prev => ({ ...prev, speed: v }))}\n                />\n                <StarRatingInput\n                  label={language === 'ru' ? 'Вежливость' : 'Xushmuomalalik'}\n                  value={ratings.politeness}\n                  onChange={(v) => setRatings(prev => ({ ...prev, politeness: v }))}\n                />\n              </div>\n\n              {/* Average Score */}\n              {(ratings.quality > 0 || ratings.speed > 0 || ratings.politeness > 0) && (\n                <div className=\"flex items-center justify-center gap-2 py-3 bg-primary-50 rounded-xl\">\n                  <Star className=\"w-6 h-6 text-primary-500 fill-primary-500\" />\n                  <span className=\"text-xl font-bold text-primary-700\">{averageRating(ratings)}</span>\n                  <span className=\"text-sm text-primary-600\">/ 5</span>\n                </div>\n              )}\n\n              {/* Comment */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  {language === 'ru' ? 'Комментарий (необязательно)' : 'Izoh (ixtiyoriy)'}\n                </label>\n                <textarea\n                  value={ratings.comment}\n                  onChange={(e) => setRatings(prev => ({ ...prev, comment: e.target.value }))}\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none resize-none\"\n                  rows={3}\n                  placeholder={language === 'ru'\n                    ? 'Поделитесь впечатлениями...'\n                    : 'Taassurotlaringiz bilan o\\'rtoqlashing...'}\n                />\n              </div>\n            </div>\n\n            {/* Footer */}\n            <div className=\"p-4 border-t border-gray-100 bg-white safe-area-bottom\">\n              <button\n                onClick={handleSubmitRating}\n                disabled={ratings.quality === 0 || ratings.speed === 0 || ratings.politeness === 0}\n                className=\"w-full py-4 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 bg-gradient-to-r from-primary-400 to-primary-500 hover:from-primary-500 hover:to-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n              >\n                <Send className=\"w-5 h-5\" />\n                {ratedExecutorIds.includes(selectedExecutor.id)\n                  ? (language === 'ru' ? 'Обновить оценку' : 'Baholashni yangilash')\n                  : (language === 'ru' ? 'Отправить оценку' : 'Baholashni yuborish')\n                }\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["RATINGS_STORAGE_KEY","getRatingsFromStorage","stored","saveRatingToStorage","rating","ratings","existingIndex","r","getExecutorRating","executorId","residentId","ResidentRateEmployeesPage","user","useAuthStore","executors","requests","fetchExecutors","fetchRequests","useDataStore","language","useLanguageStore","selectedExecutor","setSelectedExecutor","useState","showRatingModal","setShowRatingModal","setRatings","ratedExecutorIds","setRatedExecutorIds","useEffect","ratedIds","workedForUserIds","userCompletedRequests","allExecutors","a","b","aWorked","bWorked","unratedExecutors","e","ratedExecutors","getExecutorRequestsCount","handleOpenRating","executor","existingRating","handleSubmitRating","newRating","prev","StarRatingInput","value","onChange","label","jsxs","jsx","star","Star","averageRating","total","getExecutorAverageRating","ThumbsUp","MessageCircle","User","Briefcase","ChevronRight","Check","Users","v","Send","X"],"mappings":"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"}