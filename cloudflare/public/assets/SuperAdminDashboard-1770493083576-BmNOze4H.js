import{r as c,j as e,a7 as A,at as de,B as N,g as ne,y as P,h as F,aw as L,al as ce,aW as oe,aa as xe,F as U,N as me,X as he,aJ as ue}from"./react-vendor-1770493083576-vH-hHAng.js";import{e as u}from"./index-1770493083576-CfAzBj-W.js";import{R as g,B as E,C as k,X as C,Y as _,T as p,a as $,P as O,b as K,c as I,A as ge,L as pe,d as J}from"./LazyCharts-1770493083576-Cv2n_w-N.js";import"./vendor-1770493083576-DMjXTqd7.js";import"./qr-scanner-1770493083576-B_vB3SDT.js";import"./zustand-1770493083576-wNUYBKDB.js";import"./charts-1770493083576-DQOUODq2.js";const G={name:"",slug:"",url:"https://.kamizo.uz",admin_url:"https://.kamizo.uz/admin",color:"#F97316",color_secondary:"#fb923c",plan:"basic",features:["requests","votes","qr"],admin_email:"",admin_phone:"",logo:"",director_login:"",director_password:"",director_name:""},je=[{value:"requests",label:"Заявки"},{value:"votes",label:"Голосования"},{value:"qr",label:"QR Коды"},{value:"marketplace",label:"Маркетплейс"},{value:"meetings",label:"Собрания"},{value:"chat",label:"Чат"},{value:"announcements",label:"Объявления"}],W={basic:"#9CA3AF",pro:"#3B82F6",enterprise:"#8B5CF6"},X={basic:"Basic",pro:"Pro",enterprise:"Enterprise"},S=["#6366f1","#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],M={requests:"Заявки",votes:"Голосования",qr:"QR Коды",marketplace:"Маркетплейс",meetings:"Собрания",chat:"Чат",announcements:"Объявления"};function Ce(){const[h,H]=c.useState([]),[Q,T]=c.useState(!0),[Y,f]=c.useState(!1),[j,R]=c.useState(null),[t,r]=c.useState(G),[y,b]=c.useState(""),[x,z]=c.useState("companies"),[i,B]=c.useState(null),[V,D]=c.useState(!1),[o,Z]=c.useState("monthly");c.useEffect(()=>{v()},[]),c.useEffect(()=>{x==="analytics"&&!i&&q()},[x]);const v=async()=>{T(!0),b("");try{const s=await u("/api/tenants");H(s.tenants)}catch(s){b(s.message||"Ошибка загрузки данных")}finally{T(!1)}},q=async()=>{D(!0);try{const s=await u("/api/super-admin/analytics");B(s.analytics)}catch(s){b(s.message||"Ошибка загрузки аналитики")}finally{D(!1)}},ee=()=>{R(null),r(G),f(!0)},se=s=>{R(s);const a=s.features?JSON.parse(s.features):[];r({name:s.name,slug:s.slug,url:s.url,admin_url:s.admin_url||"",color:s.color,color_secondary:s.color_secondary,plan:s.plan,features:a,admin_email:s.admin_email||"",admin_phone:s.admin_phone||"",logo:s.logo||"",director_login:"",director_password:"",director_name:""}),f(!0)},ae=async s=>{if(confirm(`Вы уверены что хотите удалить "${s.name}"?`))try{await u(`/api/tenants/${s.id}`,{method:"DELETE"}),await v()}catch(a){alert(a.message||"Ошибка удаления")}},te=async s=>{try{await u(`/api/tenants/${s.id}`,{method:"PATCH",body:JSON.stringify({is_active:s.is_active?0:1})}),await v()}catch(a){alert(a.message||"Ошибка обновления статуса")}},le=async s=>{s.preventDefault(),b("");try{const a={...t,features:t.features};j?await u(`/api/tenants/${j.id}`,{method:"PATCH",body:JSON.stringify(a)}):await u("/api/tenants",{method:"POST",body:JSON.stringify(a)}),f(!1),await v()}catch(a){b(a.message||"Ошибка сохранения")}},re=s=>{r(a=>({...a,features:a.features.includes(s)?a.features.filter(d=>d!==s):[...a.features,s]}))},ie=s=>{const a=s.target.files?.[0];if(!a)return;if(a.size>2*1024*1024){alert("Максимальный размер логотипа: 2 МБ");return}const d=new FileReader;d.onload=()=>{r(l=>({...l,logo:d.result}))},d.readAsDataURL(a)},w={total:h.length,active:h.filter(s=>s.is_active).length,users:h.reduce((s,a)=>s+a.users_count,0),revenue:h.reduce((s,a)=>s+Number(a.revenue||0),0)};return Q?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(A,{className:"w-8 h-8 animate-spin text-indigo-600"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Super Admin"}),x==="companies"&&e.jsxs("button",{onClick:ee,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),"Добавить УК"]}),x==="analytics"&&e.jsxs("button",{onClick:()=>{B(null),q()},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"Обновить"]})]}),y&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:y}),e.jsxs("div",{className:"flex gap-1 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>z("companies"),className:`px-4 py-2.5 font-medium text-sm border-b-2 transition-colors flex items-center gap-2 ${x==="companies"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(N,{className:"w-4 h-4"}),"Управляющие компании"]}),e.jsxs("button",{onClick:()=>z("analytics"),className:`px-4 py-2.5 font-medium text-sm border-b-2 transition-colors flex items-center gap-2 ${x==="analytics"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(ne,{className:"w-4 h-4"}),"Аналитика"]})]}),x==="companies"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:e.jsx(N,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Всего УК"}),e.jsx("div",{className:"text-2xl font-bold",children:w.total})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(P,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Активных"}),e.jsx("div",{className:"text-2xl font-bold",children:w.active})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(F,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Всего жителей"}),e.jsx("div",{className:"text-2xl font-bold",children:w.users})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(L,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Общий доход"}),e.jsxs("div",{className:"text-2xl font-bold",children:["$",w.revenue.toLocaleString("en-US")]})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"УК"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"URL"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Тариф"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Жители"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Заявки"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Доход"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Статус"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Действия"})]})}),e.jsx("tbody",{className:"divide-y",children:h.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.logo?e.jsx("img",{src:s.logo,alt:s.name,className:"w-10 h-10 rounded-lg object-cover border"}):e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold",style:{background:`linear-gradient(135deg, ${s.color}, ${s.color_secondary})`},children:s.name[0]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.slug})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm",children:s.url})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.plan==="enterprise"?"bg-purple-100 text-purple-700":s.plan==="pro"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:s.plan})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:s.users_count}),e.jsx("td",{className:"px-6 py-4 text-sm",children:s.requests_count}),e.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",Number(s.revenue||0).toLocaleString("en-US")]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>te(s),className:"flex items-center gap-1",children:s.is_active?e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Активен"})]}):e.jsxs("span",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Неактивен"})]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>se(s),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded",title:"Редактировать",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ae(s),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Удалить",children:e.jsx(xe,{className:"w-4 h-4"})})]})})]},s.id))})]}),h.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Нет управляющих компаний"})]})]})})]}),x==="analytics"&&e.jsx("div",{className:"space-y-6",children:V?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(A,{className:"w-8 h-8 animate-spin text-indigo-600"})}):i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white p-5 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-indigo-100 rounded-lg",children:e.jsx(N,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Тенанты"}),e.jsx("div",{className:"text-xl font-bold",children:i.totals.tenants})]})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-blue-100 rounded-lg",children:e.jsx(F,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Пользователи"}),e.jsx("div",{className:"text-xl font-bold",children:i.totals.users.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-amber-100 rounded-lg",children:e.jsx(U,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Заявки"}),e.jsx("div",{className:"text-xl font-bold",children:i.totals.requests.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-green-100 rounded-lg",children:e.jsx(N,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Здания"}),e.jsx("div",{className:"text-xl font-bold",children:i.totals.buildings.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-purple-100 rounded-lg",children:e.jsx(L,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Выручка"}),e.jsxs("div",{className:"text-xl font-bold",children:[Number(i.totals.revenue).toLocaleString("ru-RU")," сум"]})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500 mr-1",children:"Период:"}),[["daily","Дни"],["weekly","Недели"],["monthly","Месяцы"]].map(([s,a])=>e.jsx("button",{onClick:()=>Z(s),className:`px-3 py-1.5 text-sm rounded-lg font-medium transition-colors ${o===s?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a},s))]}),(()=>{const s=i.growth[o]||[],a=o==="daily"?"дням":o==="weekly"?"неделям":"месяцам",d=l=>{if(o==="daily"){const n=l.split("-");return n.length===3?`${n[2]}.${n[1]}`:l}if(o==="weekly"){const n=l.match(/W(\d+)/);return n?`Нед ${parseInt(n[1])}`:l}const m=l.split("-");return m.length===2?`${m[1]}.${m[0]}`:l};return e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border",children:[e.jsxs("h3",{className:"font-semibold text-sm mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(F,{className:"w-4 h-4 text-blue-500"}),"Пользователи по ",a]}),e.jsx(g,{width:"100%",height:240,children:e.jsxs(E,{data:s,children:[e.jsx(k,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(C,{dataKey:"period",tick:{fontSize:10},tickFormatter:d}),e.jsx(_,{tick:{fontSize:11},allowDecimals:!1}),e.jsx(p,{labelFormatter:d}),e.jsx($,{dataKey:"users",fill:"#6366f1",name:"Пользователи",radius:[4,4,0,0]})]})})]}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border",children:[e.jsxs("h3",{className:"font-semibold text-sm mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(U,{className:"w-4 h-4 text-amber-500"}),"Заявки по ",a]}),e.jsx(g,{width:"100%",height:240,children:e.jsxs(E,{data:s,children:[e.jsx(k,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(C,{dataKey:"period",tick:{fontSize:10},tickFormatter:d}),e.jsx(_,{tick:{fontSize:11},allowDecimals:!1}),e.jsx(p,{labelFormatter:d}),e.jsx($,{dataKey:"requests",fill:"#F59E0B",name:"Заявки",radius:[4,4,0,0]})]})})]}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border",children:[e.jsxs("h3",{className:"font-semibold text-sm mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(L,{className:"w-4 h-4 text-green-500"}),"Выручка по ",a]}),e.jsx(g,{width:"100%",height:240,children:e.jsxs(E,{data:s,children:[e.jsx(k,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(C,{dataKey:"period",tick:{fontSize:10},tickFormatter:d}),e.jsx(_,{tick:{fontSize:11}}),e.jsx(p,{labelFormatter:d,formatter:l=>Number(l).toLocaleString("ru-RU")+" сум"}),e.jsx($,{dataKey:"revenue",fill:"#10B981",name:"Выручка",radius:[4,4,0,0]})]})})]})]})})(),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border",children:[e.jsx("h3",{className:"font-semibold text-sm mb-4 text-gray-700",children:"Распределение по тарифам"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(g,{width:"100%",height:200,children:e.jsxs(O,{children:[e.jsx(K,{data:i.planDistribution.map(s=>({...s,label:X[s.plan]||s.plan})),cx:"50%",cy:"50%",outerRadius:80,innerRadius:40,dataKey:"count",nameKey:"label",label:!1,children:i.planDistribution.map((s,a)=>e.jsx(I,{fill:W[s.plan]||"#9CA3AF"},`plan-${a}`))}),e.jsx(p,{formatter:(s,a)=>[`${s} УК`,a]})]})})}),e.jsx("div",{className:"space-y-3 shrink-0",children:i.planDistribution.map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:W[s.plan]||"#9CA3AF"}}),e.jsx("span",{className:"text-sm text-gray-600",children:X[s.plan]||s.plan}),e.jsx("span",{className:"text-sm font-bold ml-1",children:s.count})]},s.plan))})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border",children:[e.jsx("h3",{className:"font-semibold text-sm mb-4 text-gray-700",children:"Использование функций"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(g,{width:"100%",height:200,children:e.jsxs(O,{children:[e.jsx(K,{data:i.featureUsage.map(s=>({...s,label:M[s.feature]||s.feature})),cx:"50%",cy:"50%",outerRadius:80,innerRadius:40,dataKey:"count",nameKey:"label",label:!1,children:i.featureUsage.map((s,a)=>e.jsx(I,{fill:S[a%S.length]},`feat-${a}`))}),e.jsx(p,{formatter:(s,a)=>[`${s} УК`,a]})]})})}),e.jsx("div",{className:"space-y-2 shrink-0",children:i.featureUsage.sort((s,a)=>a.count-s.count).map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:S[a%S.length]}}),e.jsx("span",{className:"text-sm text-gray-600",children:M[s.feature]||s.feature}),e.jsx("span",{className:"text-sm font-bold ml-1",children:s.count})]},s.feature))})]})]})]}),(()=>{const s=i.growth[o]||[],a=o==="daily"?"за 30 дней":o==="weekly"?"за 12 недель":"за 12 месяцев",d=l=>{if(o==="daily"){const n=l.split("-");return n.length===3?`${n[2]}.${n[1]}`:l}if(o==="weekly"){const n=l.match(/W(\d+)/);return n?`Нед ${parseInt(n[1])}`:l}const m=l.split("-");return m.length===2?`${m[1]}.${m[0]}`:l};return e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border",children:[e.jsxs("h3",{className:"font-semibold text-sm mb-4 flex items-center gap-2 text-gray-700",children:[e.jsx(me,{className:"w-4 h-4 text-green-500"}),"Динамика роста ",a]}),s.length>0?e.jsx(g,{width:"100%",height:300,children:e.jsxs(ge,{data:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"gradUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"gradRequests",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#F59E0B",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#F59E0B",stopOpacity:0})]})]}),e.jsx(k,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(C,{dataKey:"period",tick:{fontSize:11},tickFormatter:d}),e.jsx(_,{tick:{fontSize:12}}),e.jsx(p,{labelFormatter:d}),e.jsx(pe,{}),e.jsx(J,{type:"monotone",dataKey:"users",stroke:"#6366f1",strokeWidth:2,fill:"url(#gradUsers)",name:"Новые пользователи"}),e.jsx(J,{type:"monotone",dataKey:"requests",stroke:"#F59E0B",strokeWidth:2,fill:"url(#gradRequests)",name:"Новые заявки"})]})}):e.jsx("div",{className:"text-center py-12 text-gray-400",children:"Нет данных за выбранный период"})]})})()]}):e.jsx("div",{className:"text-center py-20 text-gray-400",children:"Нет данных для отображения"})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold",children:j?"Редактировать УК":"Создать УК"})}),e.jsxs("form",{onSubmit:le,className:"p-6 space-y-4",children:[y&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:y}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Название *"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>r({...t,name:s.target.value}),className:"w-full px-3 py-2 border rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Slug *"}),e.jsx("input",{type:"text",value:t.slug,onChange:s=>{const a=s.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"");r({...t,slug:a,url:`https://${a}.kamizo.uz`,admin_url:`https://${a}.kamizo.uz/admin`})},className:"w-full px-3 py-2 border rounded-lg",pattern:"[a-z0-9-]+",placeholder:"my-uk",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"URL (генерируется автоматически)"}),e.jsx("input",{type:"text",value:t.url,className:"w-full px-3 py-2 border rounded-lg bg-gray-50",readOnly:!0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Домен будет доступен по адресу: ",t.slug?`${t.slug}.kamizo.uz`:"(введите slug)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Логотип"}),e.jsxs("div",{className:"flex items-center gap-4",children:[t.logo?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.logo,alt:"Logo",className:"w-16 h-16 rounded-lg object-cover border"}),e.jsx("button",{type:"button",onClick:()=>r(s=>({...s,logo:""})),className:"absolute -top-2 -right-2 p-0.5 bg-red-500 text-white rounded-full hover:bg-red-600",children:e.jsx(he,{className:"w-3 h-3"})})]}):e.jsxs("label",{className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center cursor-pointer hover:border-indigo-400 hover:bg-indigo-50 transition-colors",children:[e.jsx(ue,{className:"w-5 h-5 text-gray-400"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ie,className:"hidden"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"PNG, JPG до 2 МБ"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Основной цвет"}),e.jsx("input",{type:"color",value:t.color,onChange:s=>r({...t,color:s.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Вторичный цвет"}),e.jsx("input",{type:"color",value:t.color_secondary,onChange:s=>r({...t,color_secondary:s.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Тариф"}),e.jsxs("select",{value:t.plan,onChange:s=>r({...t,plan:s.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"pro",children:"Pro"}),e.jsx("option",{value:"enterprise",children:"Enterprise"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email администратора"}),e.jsx("input",{type:"email",value:t.admin_email,onChange:s=>r({...t,admin_email:s.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Телефон администратора"}),e.jsx("input",{type:"tel",value:t.admin_phone,onChange:s=>r({...t,admin_phone:s.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]})]}),!j&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-800",children:"Первый директор (будет создан автоматически)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-blue-700 mb-1",children:"ФИО *"}),e.jsx("input",{type:"text",value:t.director_name,onChange:s=>r({...t,director_name:s.target.value}),className:"w-full px-3 py-2 border border-blue-200 rounded-lg text-sm",placeholder:"Иванов И.И.",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-blue-700 mb-1",children:"Логин *"}),e.jsx("input",{type:"text",value:t.director_login,onChange:s=>r({...t,director_login:s.target.value}),className:"w-full px-3 py-2 border border-blue-200 rounded-lg text-sm",placeholder:"director",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-blue-700 mb-1",children:"Пароль *"}),e.jsx("input",{type:"text",value:t.director_password,onChange:s=>r({...t,director_password:s.target.value}),className:"w-full px-3 py-2 border border-blue-200 rounded-lg text-sm",placeholder:"password123",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Доступные функции"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:je.map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.features.includes(s.value),onChange:()=>re(s.value),className:"rounded"}),e.jsx("span",{className:"text-sm",children:s.label})]},s.value))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Отмена"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:j?"Сохранить":"Создать"})]})]})]})})]})}export{Ce as SuperAdminDashboard};
//# sourceMappingURL=SuperAdminDashboard-1770493083576-BmNOze4H.js.map
