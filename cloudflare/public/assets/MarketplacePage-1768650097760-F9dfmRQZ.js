import{r as i,S as K,bo as T,ak as O,aV as y,j as e,x as U,y as ne,ax as P,au as N,a8 as ce,aj as de,ai as oe,X as M}from"./react-vendor-1768650097760-DHBctloo.js";import{b as me,d as ue,e as n}from"./index-1768650097760-EmJh_kUV.js";import"./vendor-1768650097760-B9FpihJ1.js";import"./qr-scanner-1768650097760-cr32YHjo.js";import"./zustand-1768650097760-wNUYBKDB.js";const _=[{id:"created",statuses:["new"],labelRu:"–°–æ–∑–¥–∞–Ω",labelUz:"Yaratildi",icon:K,descRu:"–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω",descUz:"Buyurtma yaratildi"},{id:"confirmed",statuses:["confirmed"],labelRu:"–ü—Ä–∏–Ω—è—Ç",labelUz:"Qabul qilindi",icon:U,descRu:"–ó–∞–∫–∞–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω",descUz:"Buyurtma tasdiqlandi"},{id:"preparing",statuses:["preparing"],labelRu:"–ì–æ—Ç–æ–≤–∏—Ç—Å—è",labelUz:"Tayyorlanmoqda",icon:de,descRu:"–°–æ–±–∏—Ä–∞–µ–º –∑–∞–∫–∞–∑",descUz:"Buyurtma yig'ilmoqda"},{id:"delivering",statuses:["ready","delivering"],labelRu:"–î–æ—Å—Ç–∞–≤–∫–∞",labelUz:"Yetkazish",icon:oe,descRu:"–í –ø—É—Ç–∏ –∫ –≤–∞–º",descUz:"Sizga yo'lda"},{id:"delivered",statuses:["delivered"],labelRu:"–ü–æ–ª—É—á–µ–Ω",labelUz:"Qabul qilindi",icon:U,descRu:"–ó–∞–∫–∞–∑ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω",descUz:"Buyurtma yetkazildi"}];function xe(m){if(m==="cancelled")return-1;for(let a=0;a<_.length;a++)if(_[a].statuses.includes(m))return a;return 0}function he(m,a){switch(m){case"new":return{title:a==="ru"?"–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω":"Buyurtma yaratildi",subtitle:a==="ru"?"–û–∂–∏–¥–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è":"Tasdiqlanishini kutmoqdamiz"};case"confirmed":return{title:a==="ru"?"–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç":"Buyurtma qabul qilindi",subtitle:a==="ru"?"–ù–∞—á–∏–Ω–∞–µ–º —Å–±–æ—Ä–∫—É":"Yig'ishni boshlaymiz"};case"preparing":return{title:a==="ru"?"–°–æ–±–∏—Ä–∞–µ–º –∑–∞–∫–∞–∑":"Buyurtma yig'ilmoqda",subtitle:a==="ru"?"–°–∫–æ—Ä–æ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤":"Tez orada tayyor bo'ladi"};case"ready":return{title:a==="ru"?"–ó–∞–∫–∞–∑ –≥–æ—Ç–æ–≤":"Buyurtma tayyor",subtitle:a==="ru"?"–ü–µ—Ä–µ–¥–∞—ë–º –∫—É—Ä—å–µ—Ä—É":"Kuryerga topshirilmoqda"};case"delivering":return{title:a==="ru"?"–ö—É—Ä—å–µ—Ä –≤ –ø—É—Ç–∏":"Kuryer yo'lda",subtitle:a==="ru"?"–°–∫–æ—Ä–æ –±—É–¥–µ—Ç —É –≤–∞—Å":"Tez orada sizda bo'ladi"};case"delivered":return{title:a==="ru"?"–ó–∞–∫–∞–∑ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω":"Buyurtma yetkazildi",subtitle:a==="ru"?"–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∞–ø–ø–µ—Ç–∏—Ç–∞!":"Yoqimli ishtaha!"};case"cancelled":return{title:a==="ru"?"–ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω—ë–Ω":"Buyurtma bekor qilindi",subtitle:""};default:return{title:"",subtitle:""}}}const v={cat_groceries:"üõí",cat_dairy:"ü•õ",cat_meat:"ü•©",cat_bakery:"üçû",cat_fruits:"üçé",cat_beverages:"ü•§",cat_household:"üßπ",cat_personal:"üß¥",cat_baby:"üë∂",cat_pets:"üêæ",cat_frozen:"‚ùÑÔ∏è",cat_snacks:"üçø"};function ye(){const{user:m}=me(),{language:a}=ue(),[b,j]=i.useState("shop"),[V,W]=i.useState([]),[w,Z]=i.useState([]),[h,p]=i.useState([]),[S,$]=i.useState([]),[d,f]=i.useState([]),[k,E]=i.useState(null),[C,I]=i.useState(""),[ee,Q]=i.useState(!0),[l,z]=i.useState(null),[se,q]=i.useState(!1),[D,F]=i.useState(""),[ae,L]=i.useState(!1),Y=i.useCallback(async()=>{try{Q(!0);const[s,t]=await Promise.all([n("/api/marketplace/categories"),n("/api/marketplace/products")]);if(W(s?.categories||[]),Z(t?.products||[]),m)try{const[r,o,c]=await Promise.all([n("/api/marketplace/cart"),n("/api/marketplace/orders"),n("/api/marketplace/favorites")]);p(r?.cart||[]),$(o?.orders||[]),f((c?.favorites||[]).map(x=>x.id))}catch{}}catch{}finally{Q(!1)}},[m]);i.useEffect(()=>{Y()},[Y]);const R=async(s,t=1)=>{try{await n("/api/marketplace/cart",{method:"POST",body:JSON.stringify({product_id:s,quantity:t})});const r=await n("/api/marketplace/cart");p(r?.cart||[])}catch{}},g=async(s,t)=>{if(t<=0){await A(s);return}try{await n("/api/marketplace/cart",{method:"POST",body:JSON.stringify({product_id:s,quantity:t})});const r=await n("/api/marketplace/cart");p(r?.cart||[])}catch{}},A=async s=>{try{await n(`/api/marketplace/cart/${s}`,{method:"DELETE"});const t=await n("/api/marketplace/cart");p(t?.cart||[])}catch{}},B=async s=>{const t=d.includes(s);f(t?d.filter(r=>r!==s):[...d,s]);try{await n(`/api/marketplace/favorites/${s}`,{method:"POST"})}catch{f(t?[...d,s]:d.filter(o=>o!==s))}},te=async()=>{try{await n("/api/marketplace/orders",{method:"POST",body:JSON.stringify({delivery_notes:D})}),L(!0),q(!1),F("");const[s,t]=await Promise.all([n("/api/marketplace/cart"),n("/api/marketplace/orders")]);p(s?.cart||[]),$(t?.orders||[]),setTimeout(()=>{L(!1),j("orders")},2e3)}catch{}},H=w.filter(s=>{const t=!k||s.category_id===k,r=!C||(a==="ru"?s.name_ru:s.name_uz).toLowerCase().includes(C.toLowerCase());return t&&r}),J=s=>h.find(r=>r.product_id===s)?.quantity||0,X=h.reduce((s,t)=>{const r=w.find(o=>o.id===t.product_id);return s+(r?.price||0)*t.quantity},0),u=s=>new Intl.NumberFormat("ru-RU").format(s)+" —Å—É–º",re=[{id:"shop",label:a==="ru"?"–ú–∞–≥–∞–∑–∏–Ω":"Do'kon",icon:K},{id:"cart",label:a==="ru"?"–ö–æ—Ä–∑–∏–Ω–∞":"Savat",icon:T,count:h.length},{id:"orders",label:a==="ru"?"–ó–∞–∫–∞–∑—ã":"Buyurtmalar",icon:O,count:S.filter(s=>s.status!=="delivered"&&s.status!=="cancelled").length},{id:"favorites",label:a==="ru"?"–ò–∑–±—Ä–∞–Ω–Ω–æ–µ":"Sevimlilar",icon:y,count:d.length}];return ee?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 bg-orange-50/50"})}):e.jsxs("div",{className:"space-y-4 md:space-y-6 pb-20 md:pb-0",children:[ae&&e.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:a==="ru"?"–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!":"Buyurtma muvaffaqiyatli yaratildi!"})]}),e.jsx("div",{className:"glass-card sticky top-0 z-40",children:e.jsx("div",{className:"flex overflow-x-auto",children:re.map(s=>e.jsxs("button",{onClick:()=>j(s.id),className:`flex-1 min-w-0 py-3 px-4 flex items-center justify-center gap-2 border-b-2 transition-colors ${b===s.id?"border-orange-500 text-orange-600 bg-orange-50/50":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(s.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium truncate",children:s.label}),s.count!==void 0&&s.count>0&&e.jsx("span",{className:"bg-orange-500 text-white text-xs px-2 py-0.5 rounded-full",children:s.count})]},s.id))})}),e.jsxs("div",{className:"p-4 pb-20",children:[b==="shop"&&e.jsxs("div",{children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:a==="ru"?"–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...":"Mahsulot qidirish...",value:C,onChange:s=>I(s.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>E(null),className:`flex flex-col items-center justify-center p-3 rounded-xl transition-all ${k?"glass-card text-gray-700 hover:bg-white/60":"bg-orange-500 text-white shadow-md"}`,children:[e.jsx("span",{className:"text-2xl mb-1",children:"üè™"}),e.jsx("span",{className:"text-xs font-medium text-center",children:a==="ru"?"–í—Å–µ":"Hammasi"})]}),V.map(s=>e.jsxs("button",{onClick:()=>E(s.id),className:`flex flex-col items-center justify-center p-3 rounded-xl transition-all ${k===s.id?"bg-orange-500 text-white shadow-md":"glass-card text-gray-700 hover:bg-white/60"}`,children:[e.jsx("span",{className:"text-2xl mb-1",children:v[s.id]||"üì¶"}),e.jsx("span",{className:"text-xs font-medium text-center line-clamp-1",children:a==="ru"?s.name_ru:s.name_uz})]},s.id))]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:H.map(s=>{const t=J(s.id),r=d.includes(s.id);return e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("div",{className:"relative aspect-square bg-gray-100 flex items-center justify-center cursor-pointer",onClick:()=>z(s),children:[s.image_url?e.jsx("img",{src:s.image_url,alt:a==="ru"?s.name_ru:s.name_uz,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-4xl",children:v[s.category_id]||"üì¶"}),e.jsx("button",{onClick:o=>{o.stopPropagation(),B(s.id)},className:"absolute top-2 right-2 p-1.5 rounded-full bg-white shadow-sm",children:e.jsx(y,{className:`w-4 h-4 ${r?"fill-red-500 text-red-500":"text-gray-400"}`})}),s.is_featured&&e.jsx("div",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-0.5 rounded-full",children:a==="ru"?"–•–∏—Ç":"Hit"})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 line-clamp-2 min-h-[40px]",children:a==="ru"?s.name_ru:s.name_uz}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.unit}),e.jsx("div",{className:"flex items-center justify-between mt-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-orange-600",children:u(s.price)}),s.old_price&&e.jsx("p",{className:"text-xs text-gray-400 line-through",children:u(s.old_price)})]})}),t>0?e.jsxs("div",{className:"flex items-center justify-between mt-3 bg-orange-50 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>g(s.id,t-1),className:"p-1.5 rounded-md bg-white shadow-sm",children:e.jsx(P,{className:"w-4 h-4 text-orange-600"})}),e.jsx("span",{className:"font-medium text-orange-600",children:t}),e.jsx("button",{onClick:()=>g(s.id,t+1),className:"p-1.5 rounded-md bg-white shadow-sm",children:e.jsx(N,{className:"w-4 h-4 text-orange-600"})})]}):e.jsxs("button",{onClick:()=>R(s.id),className:"w-full mt-3 py-2 bg-orange-500 text-white rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors flex items-center justify-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:a==="ru"?"–í –∫–æ—Ä–∑–∏–Ω—É":"Savatga"})]})]})]},s.id)})}),H.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:a==="ru"?"–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã":"Mahsulotlar topilmadi"})]})]}),b==="cart"&&e.jsx("div",{children:h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(T,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-4",children:a==="ru"?"–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞":"Savat bo'sh"}),e.jsx("button",{onClick:()=>j("shop"),className:"text-orange-600 font-medium",children:a==="ru"?"–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º":"Xaridga o'tish"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 mb-4",children:h.map(s=>{const t=w.find(r=>r.id===s.product_id);return t?e.jsxs("div",{className:"glass-card p-4 flex gap-3",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:t.image_url?e.jsx("img",{src:t.image_url,alt:"",className:"w-full h-full object-cover rounded-lg"}):e.jsx("span",{className:"text-2xl",children:v[t.category_id]||"üì¶"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 line-clamp-2",children:a==="ru"?t.name_ru:t.name_uz}),e.jsx("p",{className:"text-sm text-gray-500",children:t.unit}),e.jsx("p",{className:"font-bold text-orange-600 mt-1",children:u(t.price*s.quantity)})]}),e.jsxs("div",{className:"flex flex-col items-end justify-between",children:[e.jsx("button",{onClick:()=>A(t.id),className:"p-1 text-gray-400 hover:text-red-500",children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>g(t.id,s.quantity-1),className:"p-1 rounded bg-white shadow-sm",children:e.jsx(P,{className:"w-3 h-3"})}),e.jsx("span",{className:"w-6 text-center text-sm font-medium",children:s.quantity}),e.jsx("button",{onClick:()=>g(t.id,s.quantity+1),className:"p-1 rounded bg-white shadow-sm",children:e.jsx(N,{className:"w-3 h-3"})})]})]})]},s.id):null})}),e.jsxs("div",{className:"glass-card p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-gray-600",children:a==="ru"?"–¢–æ–≤–∞—Ä–æ–≤:":"Mahsulotlar:"}),e.jsxs("span",{className:"font-medium",children:[h.reduce((s,t)=>s+t.quantity,0)," —à—Ç"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-lg font-bold",children:[e.jsx("span",{children:a==="ru"?"–ò—Ç–æ–≥–æ:":"Jami:"}),e.jsx("span",{className:"text-orange-600",children:u(X)})]})]}),e.jsx("button",{onClick:()=>q(!0),className:"w-full py-4 bg-orange-500 text-white rounded-xl font-medium hover:bg-orange-600 transition-colors",children:a==="ru"?"–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑":"Buyurtma berish"})]})}),b==="orders"&&e.jsx("div",{children:S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-4",children:a==="ru"?"–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤":"Sizda hali buyurtmalar yo'q"}),e.jsx("button",{onClick:()=>j("shop"),className:"text-orange-600 font-medium",children:a==="ru"?"–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º":"Xaridga o'tish"})]}):e.jsx("div",{className:"space-y-4",children:S.map(s=>{const t=xe(s.status),r=s.status==="cancelled",o=he(s.status,a);return e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-orange-500/10 to-amber-400/10 border-b border-orange-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-gray-900",children:[a==="ru"?"–ó–∞–∫–∞–∑":"Buyurtma"," #",s.order_number]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString("ru-RU",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("span",{className:"font-bold text-orange-600",children:u(s.total_amount)})]})}),e.jsxs("div",{className:"px-4 pt-4 pb-2 text-center",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:o.title}),e.jsx("p",{className:"text-sm text-gray-500",children:o.subtitle})]}),e.jsxs("div",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between relative",children:[e.jsx("div",{className:"absolute top-4 left-4 right-4 h-1 bg-gray-200 rounded-full"}),e.jsx("div",{className:"absolute top-4 left-4 h-1 bg-orange-500 rounded-full transition-all duration-500",style:{width:r?"0%":`calc(${Math.min(t/(_.length-1)*100,100)}% - 32px)`}}),_.map((c,x)=>{const G=!r&&t>=x,le=!r&&t===x,ie=c.icon;return e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 ${r?"bg-gray-200 text-gray-400":G?le?"bg-orange-500 text-white ring-4 ring-orange-200 shadow-lg":"bg-orange-500 text-white":"bg-gray-200 text-gray-400"}`,children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("span",{className:`text-[10px] mt-1.5 font-medium text-center max-w-[50px] leading-tight ${G&&!r?"text-gray-900":"text-gray-400"}`,children:a==="ru"?c.labelRu:c.labelUz})]},c.id)})]}),r&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 rounded-xl flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(M,{className:"w-4 h-4 text-red-500"})}),e.jsx("div",{className:"text-sm font-medium text-red-700",children:a==="ru"?"–ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω—ë–Ω":"Buyurtma bekor qilindi"})]})]}),e.jsx("div",{className:"px-4 pb-4 border-t border-gray-100 pt-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[(s.items||[]).slice(0,3).map((c,x)=>e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center border-2 border-white",children:c.product_image?e.jsx("img",{src:c.product_image,alt:"",className:"w-full h-full object-cover rounded-lg"}):e.jsx("span",{className:"text-sm",children:"üì¶"})},x)),(s.items||[]).length>3&&e.jsxs("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center border-2 border-white text-xs text-gray-500 font-medium",children:["+",(s.items||[]).length-3]})]}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:[(s.items||[]).reduce((c,x)=>c+x.quantity,0)," ",a==="ru"?"—Ç–æ–≤–∞—Ä–æ–≤":"mahsulot"]})]})})]},s.id)})})}),b==="favorites"&&e.jsx("div",{children:d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-4",children:a==="ru"?"–ò–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ—Ç":"Sevimli mahsulotlar yo'q"}),e.jsx("button",{onClick:()=>j("shop"),className:"text-orange-600 font-medium",children:a==="ru"?"–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º":"Xaridga o'tish"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.filter(s=>d.includes(s.id)).map(s=>{const t=J(s.id);return e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("div",{className:"relative aspect-square bg-gray-100 flex items-center justify-center",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:a==="ru"?s.name_ru:s.name_uz,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-4xl",children:v[s.category_id]||"üì¶"}),e.jsx("button",{onClick:()=>B(s.id),className:"absolute top-2 right-2 p-1.5 rounded-full bg-white shadow-sm",children:e.jsx(y,{className:"w-4 h-4 fill-red-500 text-red-500"})})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 line-clamp-2 min-h-[40px]",children:a==="ru"?s.name_ru:s.name_uz}),e.jsx("p",{className:"font-bold text-orange-600 mt-2",children:u(s.price)}),t>0?e.jsxs("div",{className:"flex items-center justify-between mt-3 bg-orange-50 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>g(s.id,t-1),className:"p-1.5 rounded-md bg-white shadow-sm",children:e.jsx(P,{className:"w-4 h-4 text-orange-600"})}),e.jsx("span",{className:"font-medium text-orange-600",children:t}),e.jsx("button",{onClick:()=>g(s.id,t+1),className:"p-1.5 rounded-md bg-white shadow-sm",children:e.jsx(N,{className:"w-4 h-4 text-orange-600"})})]}):e.jsxs("button",{onClick:()=>R(s.id),className:"w-full mt-3 py-2 bg-orange-500 text-white rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors flex items-center justify-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:a==="ru"?"–í –∫–æ—Ä–∑–∏–Ω—É":"Savatga"})]})]})]},s.id)})})})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-md w-full rounded-t-3xl max-h-[90vh] overflow-y-auto animate-slide-up",children:[e.jsxs("div",{className:"sticky top-0 bg-white/90 backdrop-blur-md p-4 border-b flex items-center justify-between z-10",children:[e.jsx("h2",{className:"font-bold text-lg",children:a==="ru"?l.name_ru:l.name_uz}),e.jsx("button",{onClick:()=>z(null),className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(M,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"aspect-square bg-gray-100 rounded-xl flex items-center justify-center mb-4",children:l.image_url?e.jsx("img",{src:l.image_url,alt:"",className:"w-full h-full object-cover rounded-xl"}):e.jsx("span",{className:"text-6xl",children:v[l.category_id]||"üì¶"})}),e.jsx("p",{className:"text-gray-600 mb-4",children:a==="ru"?l.description_ru:l.description_uz}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:u(l.price)}),l.old_price&&e.jsx("p",{className:"text-gray-400 line-through",children:u(l.old_price)})]}),e.jsx("p",{className:"text-gray-500",children:l.unit})]}),l.stock_quantity>0?e.jsx("p",{className:"text-green-600 text-sm mb-4",children:a==="ru"?"–í –Ω–∞–ª–∏—á–∏–∏":"Mavjud"}):e.jsx("p",{className:"text-red-600 text-sm mb-4",children:a==="ru"?"–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏":"Mavjud emas"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>B(l.id),className:"p-3 border rounded-xl",children:e.jsx(y,{className:`w-6 h-6 ${d.includes(l.id)?"fill-red-500 text-red-500":"text-gray-400"}`})}),e.jsxs("button",{onClick:()=>{R(l.id),z(null)},disabled:l.stock_quantity===0,className:"flex-1 py-3 bg-orange-500 text-white rounded-xl font-medium hover:bg-orange-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{children:a==="ru"?"–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É":"Savatga qo'shish"})]})]})]})]})}),se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"font-bold text-lg",children:a==="ru"?"–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞":"Buyurtmani rasmiylashtirish"}),e.jsx("button",{onClick:()=>q(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(M,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:a==="ru"?"–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:":"Yetkazish manzili:"}),e.jsxs("p",{className:"font-medium",children:[m?.address||"–ê–¥—Ä–µ—Å –Ω–µ —É–∫–∞–∑–∞–Ω",", ",a==="ru"?"–∫–≤.":"xonadon"," ",m?.apartment||"-"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:a==="ru"?"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É:":"Buyurtmaga izoh:"}),e.jsx("textarea",{value:D,onChange:s=>F(s.target.value),placeholder:a==="ru"?"–ù–∞–ø—Ä–∏–º–µ—Ä: –ø–æ–∑–≤–æ–Ω–∏—Ç–µ –∑–∞ 10 –º–∏–Ω—É—Ç –¥–æ –¥–æ—Å—Ç–∞–≤–∫–∏":"Masalan: yetkazishdan 10 daqiqa oldin qo'ng'iroq qiling",className:"w-full p-3 border rounded-xl resize-none",rows:3})]}),e.jsx("div",{className:"bg-orange-50 rounded-xl p-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:a==="ru"?"–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:":"To'lanishi kerak:"}),e.jsx("span",{className:"text-xl font-bold text-orange-600",children:u(X)})]})}),e.jsx("button",{onClick:te,className:"w-full py-4 bg-orange-500 text-white rounded-xl font-medium hover:bg-orange-600 transition-colors",children:a==="ru"?"–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑":"Buyurtmani tasdiqlash"})]})]})})]})}export{ye as MarketplacePage};
//# sourceMappingURL=MarketplacePage-1768650097760-F9dfmRQZ.js.map
