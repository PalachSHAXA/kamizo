{"version":3,"file":"ExecutorDashboard-1767960438672-DdulgNVY.js","sources":["../../src/pages/ExecutorDashboard.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport {\n  FileText, Clock, CheckCircle, MapPin, Phone, User,\n  Play, Check, X, Star, TrendingUp, Timer, Hand,\n  CalendarDays, XCircle, Ban, AlertCircle,\n  Pause, PlayCircle, RefreshCw, Send, ChevronRight\n} from 'lucide-react';\nimport { useAuthStore } from '../stores/authStore';\nimport { useDataStore } from '../stores/dataStore';\nimport { useLanguageStore } from '../stores/languageStore';\nimport { executorsApi } from '../services/api';\nimport { formatAddress } from '../utils/formatAddress';\nimport { SPECIALIZATION_LABELS, STATUS_LABELS, RESCHEDULE_REASON_LABELS } from '../types';\nimport type { Request, ExecutorSpecialization, RequestStatus, RescheduleReason, RescheduleRequest } from '../types';\n\n// Stats interface for API response\ninterface ExecutorStats {\n  totalCompleted: number;\n  thisWeek: number;\n  thisMonth: number;\n  rating: number;\n  avgCompletionTime: number;\n}\n\nexport function ExecutorDashboard() {\n  const { user } = useAuthStore();\n  const { requests, executors, acceptRequest, startWork, pauseWork, resumeWork, completeWork, assignRequest, declineRequest, createRescheduleRequest, respondToRescheduleRequest, getPendingRescheduleForUser, fetchRequests, fetchPendingReschedules } = useDataStore();\n  const { language } = useLanguageStore();\n  const [activeTab, setActiveTab] = useState<'available' | 'assigned' | 'in_progress' | 'completed'>('available');\n\n  // Live stats from API\n  const [liveStats, setLiveStats] = useState<ExecutorStats | null>(null);\n  const [isLoadingStats, setIsLoadingStats] = useState(true);\n\n  // Fetch requests and pending reschedules from D1 database on mount and poll every 30 seconds\n  useEffect(() => {\n    fetchRequests();\n    fetchPendingReschedules();\n    const interval = setInterval(() => {\n      fetchPendingReschedules();\n    }, 30000);\n    return () => clearInterval(interval);\n  }, [fetchRequests, fetchPendingReschedules]);\n  const [selectedRequest, setSelectedRequest] = useState<Request | null>(null);\n  const [activeTimers, setActiveTimers] = useState<Record<string, number>>({});\n  const [showDeclineModal, setShowDeclineModal] = useState(false);\n  const [requestToDecline, setRequestToDecline] = useState<Request | null>(null);\n  const [showRescheduleModal, setShowRescheduleModal] = useState(false);\n  const [requestToReschedule, setRequestToReschedule] = useState<Request | null>(null);\n  const [showRescheduleResponseModal, setShowRescheduleResponseModal] = useState(false);\n  const [rescheduleToRespond, setRescheduleToRespond] = useState<RescheduleRequest | null>(null);\n\n  // Find current executor\n  const currentExecutor = executors.find(e => e.login === user?.login);\n\n  // Fetch live stats from API\n  useEffect(() => {\n    const fetchStats = async () => {\n      if (!user?.id) return;\n      setIsLoadingStats(true);\n      try {\n        const response = await executorsApi.getStats(user.id);\n        setLiveStats(response.stats);\n      } catch (error) {\n        console.error('Failed to fetch executor stats:', error);\n      } finally {\n        setIsLoadingStats(false);\n      }\n    };\n\n    fetchStats();\n    // Refresh stats every 30 seconds\n    const interval = setInterval(fetchStats, 30000);\n    return () => clearInterval(interval);\n  }, [user?.id]);\n\n  // Get executor's specialization\n  const mySpecialization = currentExecutor?.specialization || user?.specialization;\n\n  // Filter requests for this executor - use user.id for consistency with handleTakeRequest\n  // This ensures requests assigned via user.id are properly displayed\n  const myRequests = requests.filter(r => r.executorId === user?.id);\n\n  // Available requests - new requests matching executor's specialization (not yet assigned)\n  const availableRequests = requests.filter(r =>\n    r.status === 'new' && r.category === mySpecialization\n  );\n\n  const assignedRequests = myRequests.filter(r => r.status === 'assigned' || r.status === 'accepted');\n  const inProgressRequests = myRequests.filter(r => r.status === 'in_progress');\n  const completedRequests = myRequests.filter(r => r.status === 'completed' || r.status === 'pending_approval');\n\n  // Get pending reschedule requests for this executor - use user.id for consistency\n  const pendingReschedules = user?.id ? getPendingRescheduleForUser(user.id) : [];\n\n  // Helper to parse UTC datetime from backend\n  const parseUTCDateTime = useCallback((dateStr: string): number => {\n    // Backend returns datetime in format \"YYYY-MM-DD HH:MM:SS\" (UTC)\n    // If no timezone info, treat as UTC\n    if (!dateStr) return 0;\n    // Append 'Z' to indicate UTC if not already present\n    const utcStr = dateStr.includes('Z') || dateStr.includes('+') ? dateStr : dateStr.replace(' ', 'T') + 'Z';\n    return new Date(utcStr).getTime();\n  }, []);\n\n  // Timer effect for in_progress requests (accounting for pauses)\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const newTimers: Record<string, number> = {};\n      inProgressRequests.forEach(req => {\n        if (req.startedAt) {\n          const startTime = parseUTCDateTime(req.startedAt);\n          const totalPausedTime = req.totalPausedTime || 0;\n\n          if (req.isPaused && req.pausedAt) {\n            // If currently paused, don't count time since pause\n            const pausedAt = parseUTCDateTime(req.pausedAt);\n            const elapsed = Math.floor((pausedAt - startTime) / 1000) - totalPausedTime;\n            newTimers[req.id] = Math.max(0, elapsed);\n          } else {\n            // Active work - count all time minus paused time\n            const elapsed = Math.floor((Date.now() - startTime) / 1000) - totalPausedTime;\n            newTimers[req.id] = Math.max(0, elapsed);\n          }\n        }\n      });\n      setActiveTimers(newTimers);\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [inProgressRequests, parseUTCDateTime]);\n\n  const tabs = [\n    { id: 'available' as const, label: language === 'ru' ? '–î–æ—Å—Ç—É–ø–Ω—ã–µ' : 'Mavjud', count: availableRequests.length, color: 'bg-purple-500', icon: FileText },\n    { id: 'assigned' as const, label: language === 'ru' ? '–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ' : 'Tayinlangan', count: assignedRequests.length, color: 'bg-blue-500', icon: Clock },\n    { id: 'in_progress' as const, label: language === 'ru' ? '–í —Ä–∞–±–æ—Ç–µ' : 'Ishda', count: inProgressRequests.length, color: 'bg-amber-500', icon: Play },\n    { id: 'completed' as const, label: language === 'ru' ? '–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ' : 'Bajarilgan', count: completedRequests.length, color: 'bg-green-500', icon: CheckCircle },\n  ];\n\n  const currentRequests = {\n    available: availableRequests,\n    assigned: assignedRequests,\n    in_progress: inProgressRequests,\n    completed: completedRequests,\n  }[activeTab] || [];\n\n  const formatTime = (seconds: number) => {\n    const hrs = Math.floor(seconds / 3600);\n    const mins = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n    if (hrs > 0) {\n      return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    }\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const handleTakeRequest = (requestId: string) => {\n    // Use user.id directly instead of currentExecutor.id\n    // This fixes the issue when executors list is not loaded yet\n    if (user?.id) {\n      assignRequest(requestId, user.id);\n      // Auto-switch to assigned tab\n      setActiveTab('assigned');\n    }\n  };\n\n  const handleAccept = (requestId: string) => {\n    acceptRequest(requestId);\n  };\n\n  const handleStartWork = (requestId: string) => {\n    // Check if there's already work in progress\n    if (inProgressRequests.length > 0) {\n      alert('–°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ç–µ–∫—É—â—É—é —Ä–∞–±–æ—Ç—É');\n      return;\n    }\n    startWork(requestId);\n  };\n\n  const handlePauseWork = (requestId: string) => {\n    pauseWork(requestId);\n  };\n\n  const handleResumeWork = (requestId: string) => {\n    resumeWork(requestId);\n  };\n\n  const handleComplete = (requestId: string) => {\n    const elapsed = activeTimers[requestId] || 0;\n    completeWork(requestId, elapsed);\n  };\n\n  const handleDeclineClick = (request: Request) => {\n    setRequestToDecline(request);\n    setShowDeclineModal(true);\n  };\n\n  const handleDeclineConfirm = async (reason: string) => {\n    if (requestToDecline) {\n      try {\n        await declineRequest(requestToDecline.id, reason);\n        setShowDeclineModal(false);\n        setRequestToDecline(null);\n        setSelectedRequest(null);\n      } catch (error) {\n        console.error('Failed to decline request:', error);\n        // Error will be handled by declineRequest rollback, just close modal\n        setShowDeclineModal(false);\n        setRequestToDecline(null);\n      }\n    }\n  };\n\n  return (\n    <div className=\"space-y-4 md:space-y-6 pb-20 md:pb-0\">\n      {/* Header - Mobile optimized */}\n      <div className=\"flex items-start justify-between gap-3\">\n        <div className=\"flex-1 min-w-0\">\n          <h1 className=\"text-xl md:text-2xl font-bold text-gray-900\">–ú–æ–∏ –∑–∞—è–≤–∫–∏</h1>\n          <p className=\"text-sm md:text-base text-gray-500 mt-1 truncate\">\n            {user?.name} ‚Ä¢ {SPECIALIZATION_LABELS[user?.specialization as ExecutorSpecialization] || '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å'}\n          </p>\n        </div>\n        <div className=\"flex-shrink-0\">\n          <div className={`px-3 py-2 rounded-xl text-sm font-medium ${\n            currentExecutor?.status === 'available' ? 'bg-green-100 text-green-700' :\n            currentExecutor?.status === 'busy' ? 'bg-amber-100 text-amber-700' :\n            'bg-gray-100 text-gray-600'\n          }`}>\n            {currentExecutor?.status === 'available' ? '–î–æ—Å—Ç—É–ø–µ–Ω' :\n             currentExecutor?.status === 'busy' ? '–ó–∞–Ω—è—Ç' : '–û—Ñ—Ñ–ª–∞–π–Ω'}\n          </div>\n        </div>\n      </div>\n\n      {/* Pending Reschedule Requests Alert */}\n      {pendingReschedules.length > 0 && (\n        <div className=\"glass-card p-4 border-2 border-amber-400 bg-amber-50/50 space-y-3\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 bg-amber-500 rounded-full flex items-center justify-center flex-shrink-0\">\n              <RefreshCw className=\"w-5 h-5 text-white\" />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"font-semibold text-amber-800\">\n                {language === 'ru' ? '–ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å –≤—Ä–µ–º–µ–Ω–∏' : 'Vaqtni o\\'zgartirish so\\'rovi'}\n              </div>\n              <div className=\"text-sm text-amber-600\">\n                {language === 'ru' ? '–ñ–∏—Ç–µ–ª—å –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞—è–≤–∫—É' : 'Yashovchi arizani ko\\'chirishni taklif qiladi'}\n              </div>\n            </div>\n          </div>\n          {pendingReschedules.map((reschedule) => (\n            <button\n              key={reschedule.id}\n              onClick={() => {\n                setRescheduleToRespond(reschedule);\n                setShowRescheduleResponseModal(true);\n              }}\n              className=\"w-full p-3 bg-white/60 rounded-xl text-left flex items-center justify-between active:bg-white/80 transition-colors\"\n            >\n              <div>\n                <div className=\"font-medium text-gray-800\">\n                  {language === 'ru' ? '–ó–∞—è–≤–∫–∞' : 'Ariza'} #{reschedule.requestNumber}\n                </div>\n                <div className=\"text-sm text-gray-600\">\n                  {language === 'ru' ? '–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–æ:' : 'Taklif:'} {reschedule.proposedDate} {reschedule.proposedTime}\n                </div>\n              </div>\n              <ChevronRight className=\"w-5 h-5 text-amber-500\" />\n            </button>\n          ))}\n        </div>\n      )}\n\n      {/* Stats Cards - Personal Performance - Mobile optimized */}\n      <div className=\"grid grid-cols-2 gap-3 md:grid-cols-4 md:gap-4\">\n        <div className=\"glass-card p-3 md:p-5\">\n          <div className=\"flex items-center gap-2 md:gap-3\">\n            <div className=\"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-xl flex items-center justify-center flex-shrink-0\">\n              <Star className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\n            </div>\n            <div className=\"min-w-0\">\n              <div className=\"text-2xl md:text-3xl font-bold\">\n                {isLoadingStats ? '...' : (liveStats?.rating || 5.0)}\n              </div>\n              <div className=\"text-xs md:text-sm text-gray-500\">\n                {language === 'ru' ? '–†–µ–π—Ç–∏–Ω–≥' : 'Reyting'}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"glass-card p-3 md:p-5\">\n          <div className=\"flex items-center gap-2 md:gap-3\">\n            <div className=\"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center flex-shrink-0\">\n              <CheckCircle className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\n            </div>\n            <div className=\"min-w-0\">\n              <div className=\"text-2xl md:text-3xl font-bold\">\n                {isLoadingStats ? '...' : (liveStats?.totalCompleted || 0)}\n              </div>\n              <div className=\"text-xs md:text-sm text-gray-500\">\n                {language === 'ru' ? '–í—ã–ø–æ–ª–Ω–µ–Ω–æ' : 'Bajarildi'}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"glass-card p-3 md:p-5\">\n          <div className=\"flex items-center gap-2 md:gap-3\">\n            <div className=\"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl flex items-center justify-center flex-shrink-0\">\n              <TrendingUp className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\n            </div>\n            <div className=\"min-w-0\">\n              <div className=\"text-2xl md:text-3xl font-bold\">\n                {isLoadingStats ? '...' : (liveStats?.thisWeek || 0)}\n              </div>\n              <div className=\"text-xs md:text-sm text-gray-500\">\n                {language === 'ru' ? '–ó–∞ –Ω–µ–¥–µ–ª—é' : 'Hafta'}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"glass-card p-3 md:p-5\">\n          <div className=\"flex items-center gap-2 md:gap-3\">\n            <div className=\"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-purple-400 to-violet-500 rounded-xl flex items-center justify-center flex-shrink-0\">\n              <Timer className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\n            </div>\n            <div className=\"min-w-0\">\n              <div className=\"text-2xl md:text-3xl font-bold\">\n                {isLoadingStats ? '...' : (liveStats?.avgCompletionTime || 0)}\n              </div>\n              <div className=\"text-xs md:text-sm text-gray-500 leading-tight\">\n                {language === 'ru' ? '–°—Ä–µ–¥. –º–∏–Ω' : 'O\\'rt. daq'}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Active Work Timer - Mobile optimized - Show if there's work in progress */}\n      {inProgressRequests.length > 0 && (\n        <div className={`glass-card p-4 md:p-6 border-2 ${inProgressRequests[0]?.isPaused ? 'border-gray-400 bg-gray-50/50' : 'border-amber-400 bg-amber-50/50'}`}>\n          <div className=\"flex items-center gap-2 mb-3 md:mb-4\">\n            <div className={`w-3 h-3 rounded-full ${inProgressRequests[0]?.isPaused ? 'bg-gray-500' : 'bg-amber-500 animate-pulse'}`} />\n            <span className={`font-medium ${inProgressRequests[0]?.isPaused ? 'text-gray-700' : 'text-amber-700'}`}>\n              {inProgressRequests[0]?.isPaused ? '–†–∞–±–æ—Ç–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞' : '–ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞'}\n            </span>\n          </div>\n          {inProgressRequests.map(req => (\n            <div key={req.id} className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"font-semibold text-base md:text-lg truncate\">#{req.number} - {req.title}</div>\n                <div className=\"text-sm md:text-base text-gray-600 truncate\">{formatAddress(req.address, req.apartment)}</div>\n              </div>\n              <div className=\"flex items-center justify-between md:justify-end gap-3 md:gap-4\">\n                <div className=\"text-center\">\n                  <div className={`text-3xl md:text-4xl font-mono font-bold ${req.isPaused ? 'text-gray-500' : 'text-amber-600'}`}>\n                    {formatTime(activeTimers[req.id] || 0)}\n                  </div>\n                  <div className=\"text-xs md:text-sm text-gray-500\">\n                    {req.isPaused ? '–ü–∞—É–∑–∞' : '–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã'}\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  {req.isPaused ? (\n                    <button\n                      onClick={() => handleResumeWork(req.id)}\n                      className=\"py-3 px-4 md:px-5 rounded-xl font-semibold text-white flex items-center gap-2 active:scale-95 transition-transform touch-manipulation\"\n                      style={{ background: 'linear-gradient(135deg, #3b82f6, #2563eb)' }}\n                    >\n                      <PlayCircle className=\"w-5 h-5\" />\n                      <span className=\"hidden md:inline\">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</span>\n                    </button>\n                  ) : (\n                    <button\n                      onClick={() => handlePauseWork(req.id)}\n                      className=\"py-3 px-4 md:px-5 rounded-xl font-semibold text-gray-700 bg-white border-2 border-gray-300 flex items-center gap-2 active:scale-95 transition-transform touch-manipulation\"\n                    >\n                      <Pause className=\"w-5 h-5\" />\n                      <span className=\"hidden md:inline\">–ü–∞—É–∑–∞</span>\n                    </button>\n                  )}\n                  <button\n                    onClick={() => handleComplete(req.id)}\n                    className=\"py-3 px-4 md:px-5 rounded-xl font-semibold text-white flex items-center gap-2 active:scale-95 transition-transform touch-manipulation\"\n                    style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}\n                  >\n                    <Check className=\"w-5 h-5\" />\n                    <span className=\"hidden md:inline\">–ó–∞–≤–µ—Ä—à–∏—Ç—å</span>\n                    <span className=\"md:hidden\">–ì–æ—Ç–æ–≤–æ</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Tabs - Mobile optimized with horizontal scroll */}\n      <div className=\"overflow-x-auto scrollbar-hide -mx-4 px-4 md:mx-0 md:px-0\">\n            <div className=\"glass-card p-1.5 md:p-1 flex gap-1 min-w-max md:min-w-0 md:inline-flex\">\n              {tabs.map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`px-4 py-3 md:py-2 rounded-xl font-medium transition-all flex items-center gap-2 whitespace-nowrap touch-manipulation ${\n                    activeTab === tab.id\n                      ? 'bg-primary-500 text-gray-900 shadow-md'\n                      : 'hover:bg-white/30 active:bg-white/50 text-gray-600'\n                  }`}\n                >\n                  <span className=\"text-sm md:text-base\">{tab.label}</span>\n                  {tab.count > 0 && (\n                    <span className={`px-2 py-0.5 rounded-full text-xs text-white font-medium ${tab.color}`}>\n                      {tab.count}\n                    </span>\n                  )}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Requests List */}\n            <div className=\"space-y-3\">\n              {currentRequests.length === 0 ? (\n                <div className=\"glass-card p-8 text-center\">\n                  <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <FileText className=\"w-8 h-8 text-gray-400\" />\n                  </div>\n                  <h3 className=\"text-lg font-medium text-gray-600\">–ù–µ—Ç –∑–∞—è–≤–æ–∫</h3>\n                  <p className=\"text-gray-400 mt-1\">\n                    {activeTab === 'available' && '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞—è–≤–æ–∫ –ø–æ –≤–∞—à–µ–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏'}\n                    {activeTab === 'assigned' && '–ù–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫'}\n                    {activeTab === 'in_progress' && '–ù–µ—Ç –∑–∞—è–≤–æ–∫ –≤ —Ä–∞–±–æ—Ç–µ'}\n                    {activeTab === 'completed' && '–ù–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫'}\n                  </p>\n                </div>\n              ) : (\n                currentRequests.map((request) => (\n                  <RequestCard\n                    key={request.id}\n                    request={request}\n                    timerSeconds={activeTimers[request.id]}\n                    hasActiveWork={inProgressRequests.length > 0}\n                    onView={() => setSelectedRequest(request)}\n                    onTakeRequest={() => handleTakeRequest(request.id)}\n                    onAccept={() => handleAccept(request.id)}\n                    onStartWork={() => handleStartWork(request.id)}\n                    onPauseWork={() => handlePauseWork(request.id)}\n                    onResumeWork={() => handleResumeWork(request.id)}\n                    onComplete={() => handleComplete(request.id)}\n                    onDecline={() => handleDeclineClick(request)}\n                    onReschedule={() => {\n                      setRequestToReschedule(request);\n                      setShowRescheduleModal(true);\n                    }}\n                    formatTime={formatTime}\n                  />\n                ))\n              )}\n            </div>\n\n      {/* Request Details Modal */}\n      {selectedRequest && !showDeclineModal && (\n        <RequestDetailsModal\n          request={selectedRequest}\n          timerSeconds={activeTimers[selectedRequest.id]}\n          onClose={() => setSelectedRequest(null)}\n          onTakeRequest={() => {\n            handleTakeRequest(selectedRequest.id);\n            setSelectedRequest(null);\n          }}\n          onAccept={() => {\n            handleAccept(selectedRequest.id);\n            setSelectedRequest(null);\n          }}\n          onStartWork={() => {\n            handleStartWork(selectedRequest.id);\n            setSelectedRequest(null);\n          }}\n          onComplete={() => {\n            handleComplete(selectedRequest.id);\n            setSelectedRequest(null);\n          }}\n          onDecline={() => handleDeclineClick(selectedRequest)}\n          onReschedule={() => {\n            setRequestToReschedule(selectedRequest);\n            setShowRescheduleModal(true);\n            setSelectedRequest(null);\n          }}\n          formatTime={formatTime}\n        />\n      )}\n\n      {/* Decline Request Modal */}\n      {showDeclineModal && requestToDecline && (\n        <DeclineRequestModal\n          request={requestToDecline}\n          onClose={() => {\n            setShowDeclineModal(false);\n            setRequestToDecline(null);\n          }}\n          onConfirm={handleDeclineConfirm}\n        />\n      )}\n\n      {/* Reschedule Request Modal */}\n      {showRescheduleModal && requestToReschedule && (\n        <RescheduleModal\n          request={requestToReschedule}\n          onClose={() => {\n            setShowRescheduleModal(false);\n            setRequestToReschedule(null);\n          }}\n          onSubmit={(data) => {\n            createRescheduleRequest({\n              requestId: requestToReschedule.id,\n              ...data\n            });\n            setShowRescheduleModal(false);\n            setRequestToReschedule(null);\n            setSelectedRequest(null);\n          }}\n          language={language}\n        />\n      )}\n\n      {/* Reschedule Response Modal */}\n      {showRescheduleResponseModal && rescheduleToRespond && (\n        <RescheduleResponseModal\n          reschedule={rescheduleToRespond}\n          onClose={() => {\n            setShowRescheduleResponseModal(false);\n            setRescheduleToRespond(null);\n          }}\n          onAccept={() => {\n            respondToRescheduleRequest(rescheduleToRespond.id, true);\n            setShowRescheduleResponseModal(false);\n            setRescheduleToRespond(null);\n          }}\n          onReject={(note) => {\n            respondToRescheduleRequest(rescheduleToRespond.id, false, note);\n            setShowRescheduleResponseModal(false);\n            setRescheduleToRespond(null);\n          }}\n          language={language}\n        />\n      )}\n    </div>\n  );\n}\n\n// Request Card Component - Mobile optimized\nfunction RequestCard({\n  request,\n  timerSeconds,\n  hasActiveWork,\n  onView,\n  onTakeRequest,\n  onAccept,\n  onStartWork,\n  onPauseWork,\n  onResumeWork,\n  onComplete,\n  onDecline,\n  onReschedule,\n  formatTime\n}: {\n  request: Request;\n  timerSeconds?: number;\n  hasActiveWork?: boolean;\n  onView: () => void;\n  onTakeRequest: () => void;\n  onAccept: () => void;\n  onStartWork: () => void;\n  onPauseWork: () => void;\n  onResumeWork: () => void;\n  onComplete: () => void;\n  onDecline: () => void;\n  onReschedule: () => void;\n  formatTime: (s: number) => string;\n}) {\n  // Can decline/release if assigned, accepted, or in_progress (for illness, etc.)\n  const canDecline = ['assigned', 'accepted', 'in_progress'].includes(request.status);\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'urgent': return 'bg-red-500';\n      case 'high': return 'bg-orange-500';\n      case 'medium': return 'bg-amber-500';\n      default: return 'bg-gray-400';\n    }\n  };\n\n  const getStatusBadge = (status: RequestStatus) => {\n    const baseClass = \"px-2 py-1 rounded-lg text-xs font-medium\";\n    switch (status) {\n      case 'new': return <span className={`${baseClass} bg-purple-100 text-purple-700`}>–ù–æ–≤–∞—è</span>;\n      case 'assigned': return <span className={`${baseClass} bg-blue-100 text-blue-700`}>–ù–∞–∑–Ω–∞—á–µ–Ω–∞</span>;\n      case 'accepted': return <span className={`${baseClass} bg-cyan-100 text-cyan-700`}>–ü—Ä–∏–Ω—è—Ç–∞</span>;\n      case 'in_progress': return <span className={`${baseClass} bg-amber-100 text-amber-700`}>–í —Ä–∞–±–æ—Ç–µ</span>;\n      case 'pending_approval': return <span className={`${baseClass} bg-purple-100 text-purple-700`}>–û–∂–∏–¥–∞–µ—Ç</span>;\n      case 'completed': return <span className={`${baseClass} bg-green-100 text-green-700`}>–í—ã–ø–æ–ª–Ω–µ–Ω–∞</span>;\n      default: return <span className={baseClass}>{STATUS_LABELS[status]}</span>;\n    }\n  };\n\n  return (\n    <div className=\"glass-card p-4 cursor-pointer hover:bg-white/40 active:bg-white/60 active:scale-[0.99] transition-all touch-manipulation\" onClick={onView}>\n      {/* Header with priority indicator */}\n      <div className=\"flex items-start gap-3\">\n        <div className={`w-2 h-full min-h-[20px] rounded-full ${getPriorityColor(request.priority)} flex-shrink-0`} />\n        <div className=\"flex-1 min-w-0\">\n          {/* Title and status */}\n          <div className=\"flex items-center gap-2 flex-wrap mb-2\">\n            <span className=\"text-xs text-gray-400\">#{request.number}</span>\n            {getStatusBadge(request.status)}\n            {request.status === 'in_progress' && timerSeconds !== undefined && (\n              <span className={`flex items-center gap-1 px-2 py-1 rounded-lg font-mono text-xs ${request.isPaused ? 'bg-gray-100 text-gray-600' : 'bg-amber-100 text-amber-700'}`}>\n                {request.isPaused ? <Pause className=\"w-3 h-3\" /> : <Timer className=\"w-3 h-3\" />}\n                {formatTime(timerSeconds)}\n              </span>\n            )}\n          </div>\n          <h3 className=\"font-semibold text-base md:text-lg leading-tight truncate\">{request.title}</h3>\n          <p className=\"text-gray-600 text-sm line-clamp-2 mt-1\">{request.description}</p>\n\n          {/* Contact info - compact on mobile */}\n          <div className=\"flex flex-wrap items-center gap-2 mt-3 text-xs md:text-sm text-gray-500\">\n            <span className=\"flex items-center gap-1\">\n              <User className=\"w-3.5 h-3.5\" />\n              <span className=\"truncate max-w-[100px]\">{request.residentName}</span>\n            </span>\n            <a\n              href={`tel:${request.residentPhone}`}\n              onClick={(e) => e.stopPropagation()}\n              className=\"flex items-center gap-1 text-primary-600 active:text-primary-800\"\n            >\n              <Phone className=\"w-3.5 h-3.5\" />\n              <span>–ü–æ–∑–≤–æ–Ω–∏—Ç—å</span>\n            </a>\n          </div>\n\n          {/* Address and date */}\n          <div className=\"flex items-center gap-3 mt-2 text-xs text-gray-500\">\n            <span className=\"flex items-center gap-1 truncate\">\n              <MapPin className=\"w-3.5 h-3.5 flex-shrink-0\" />\n              <span className=\"truncate\">{formatAddress(request.address, request.apartment)}</span>\n            </span>\n          </div>\n\n          {/* Scheduled date if exists */}\n          {request.scheduledDate && (\n            <div className=\"mt-2 inline-flex items-center gap-2 px-2 py-1 bg-blue-50 text-blue-700 rounded-lg text-xs\">\n              <CalendarDays className=\"w-3.5 h-3.5\" />\n              <span>{new Date(request.scheduledDate).toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' })}</span>\n              {request.scheduledTime && <span>{request.scheduledTime}</span>}\n            </div>\n          )}\n\n          {/* Priority info - show for assigned/accepted/in_progress requests */}\n          {['assigned', 'accepted', 'in_progress'].includes(request.status) && (\n            <div className=\"mt-3 p-2 bg-gray-50 rounded-lg\">\n              <div className=\"text-xs text-gray-500\">\n                <span className=\"text-gray-400\">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: </span>\n                <span className={`font-medium ${\n                  request.priority === 'urgent' ? 'text-red-600' :\n                  request.priority === 'high' ? 'text-orange-600' :\n                  request.priority === 'medium' ? 'text-amber-600' : 'text-gray-600'\n                }`}>\n                  {request.priority === 'urgent' ? '–°—Ä–æ—á–Ω—ã–π' :\n                   request.priority === 'high' ? '–í—ã—Å–æ–∫–∏–π' :\n                   request.priority === 'medium' ? '–°—Ä–µ–¥–Ω–∏–π' : '–ù–∏–∑–∫–∏–π'}\n                </span>\n              </div>\n            </div>\n          )}\n\n          {/* Reschedule button - prominent, similar to residents view */}\n          {['assigned', 'accepted', 'in_progress'].includes(request.status) && (\n            <button\n              onClick={(e) => { e.stopPropagation(); onReschedule(); }}\n              className=\"mt-3 w-full py-2.5 bg-amber-100 hover:bg-amber-200 text-amber-700 rounded-xl font-medium flex items-center justify-center gap-2 transition-all active:scale-[0.98] touch-manipulation\"\n            >\n              <RefreshCw className=\"w-4 h-4\" />\n              –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è\n            </button>\n          )}\n\n          {/* Rating if completed */}\n          {request.status === 'completed' && request.rating && (\n            <div className=\"flex items-center gap-1 mt-2\">\n              {[1, 2, 3, 4, 5].map(star => (\n                <Star\n                  key={star}\n                  className={`w-4 h-4 ${star <= request.rating! ? 'text-yellow-500 fill-yellow-500' : 'text-gray-300'}`}\n                />\n              ))}\n            </div>\n          )}\n\n          {/* Pending approval notice */}\n          {request.status === 'pending_approval' && (\n            <div className=\"mt-2 text-xs text-purple-600 flex items-center gap-1\">\n              <Clock className=\"w-3.5 h-3.5\" />\n              –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è\n            </div>\n          )}\n\n          {/* Rejection info */}\n          {request.status === 'in_progress' && request.rejectionReason && (\n            <div className=\"mt-3 p-2 bg-red-50 border border-red-200 rounded-lg\">\n              <div className=\"flex items-center gap-1 text-red-700 font-medium text-xs\">\n                <AlertCircle className=\"w-3.5 h-3.5\" />\n                –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞\n              </div>\n              <p className=\"text-xs text-red-600 mt-1 line-clamp-2\">{request.rejectionReason}</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Action buttons - full width on mobile */}\n      <div className=\"flex gap-2 mt-4 pt-3 border-t border-gray-200/50\" onClick={(e) => e.stopPropagation()}>\n        {canDecline && (\n          <button\n            onClick={onDecline}\n            className=\"py-3 px-4 text-red-600 bg-red-50 hover:bg-red-100 active:bg-red-200 rounded-xl font-medium text-sm flex items-center justify-center gap-2 transition-colors touch-manipulation\"\n          >\n            <XCircle className=\"w-4 h-4\" />\n            <span className=\"hidden md:inline\">{request.status === 'in_progress' ? '–û—Å–≤–æ–±–æ–¥–∏—Ç—å' : '–û—Ç–∫–∞–∑–∞—Ç—å—Å—è'}</span>\n          </button>\n        )}\n        {request.status === 'new' && (\n          <button\n            onClick={onTakeRequest}\n            className=\"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\n            style={{ background: 'linear-gradient(135deg, #8b5cf6, #7c3aed)' }}\n          >\n            <Hand className=\"w-5 h-5\" />\n            –í–∑—è—Ç—å –∑–∞—è–≤–∫—É\n          </button>\n        )}\n        {request.status === 'assigned' && (\n          <button\n            onClick={onAccept}\n            className=\"flex-1 py-3 px-4 rounded-xl font-semibold bg-white border-2 border-gray-200 text-gray-700 flex items-center justify-center gap-2 active:scale-[0.98] active:bg-gray-50 transition-all touch-manipulation\"\n          >\n            <Check className=\"w-5 h-5\" />\n            –ü—Ä–∏–Ω—è—Ç—å\n          </button>\n        )}\n        {request.status === 'accepted' && (\n          hasActiveWork ? (\n            <div className=\"flex-1 py-3 px-4 rounded-xl font-medium bg-gray-100 text-gray-500 flex items-center justify-center gap-2 text-sm\">\n              <AlertCircle className=\"w-4 h-4\" />\n              –°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ç–µ–∫—É—â—É—é —Ä–∞–±–æ—Ç—É\n            </div>\n          ) : (\n            <button\n              onClick={onStartWork}\n              className=\"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\n              style={{ background: 'linear-gradient(135deg, #FFE500, #FFC700)', color: '#000' }}\n            >\n              <Play className=\"w-5 h-5\" />\n              –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É\n            </button>\n          )\n        )}\n        {request.status === 'in_progress' && (\n          <div className=\"flex-1 flex gap-2\">\n            {request.isPaused ? (\n              <button\n                onClick={onResumeWork}\n                className=\"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\n                style={{ background: 'linear-gradient(135deg, #3b82f6, #2563eb)' }}\n              >\n                <PlayCircle className=\"w-5 h-5\" />\n                –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å\n              </button>\n            ) : (\n              <button\n                onClick={onPauseWork}\n                className=\"py-3 px-4 rounded-xl font-semibold text-gray-700 bg-white border-2 border-gray-300 flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\n              >\n                <Pause className=\"w-5 h-5\" />\n              </button>\n            )}\n            <button\n              onClick={onComplete}\n              className=\"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\n              style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}\n            >\n              <Check className=\"w-5 h-5\" />\n              –ó–∞–≤–µ—Ä—à–∏—Ç—å\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Request Details Modal\nfunction RequestDetailsModal({\n  request,\n  timerSeconds,\n  onClose,\n  onTakeRequest,\n  onAccept,\n  onStartWork,\n  onComplete,\n  onDecline,\n  onReschedule,\n  formatTime\n}: {\n  request: Request;\n  timerSeconds?: number;\n  onClose: () => void;\n  onTakeRequest: () => void;\n  onAccept: () => void;\n  onStartWork: () => void;\n  onComplete: () => void;\n  onDecline: () => void;\n  onReschedule: () => void;\n  formatTime: (s: number) => string;\n}) {\n  // Can decline/release if assigned, accepted, or in_progress (for illness, etc.)\n  const canDecline = ['assigned', 'accepted', 'in_progress'].includes(request.status);\n  // Can reschedule if assigned, accepted, or in_progress\n  const canReschedule = ['assigned', 'accepted', 'in_progress'].includes(request.status);\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleString('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const getPriorityLabel = (priority: string) => {\n    switch (priority) {\n      case 'urgent': return { label: '–°—Ä–æ—á–Ω–æ', color: 'text-red-600 bg-red-50' };\n      case 'high': return { label: '–í—ã—Å–æ–∫–∏–π', color: 'text-orange-600 bg-orange-50' };\n      case 'medium': return { label: '–°—Ä–µ–¥–Ω–∏–π', color: 'text-amber-600 bg-amber-50' };\n      default: return { label: '–ù–∏–∑–∫–∏–π', color: 'text-gray-600 bg-gray-50' };\n    }\n  };\n\n  const priority = getPriorityLabel(request.priority);\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"modal-content p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <div className=\"text-sm text-gray-500\">–ó–∞—è–≤–∫–∞ #{request.number}</div>\n            <h2 className=\"text-xl font-bold\">{request.title}</h2>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Active Timer Display */}\n        {request.status === 'in_progress' && timerSeconds !== undefined && (\n          <div className=\"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-3 h-3 bg-amber-500 rounded-full animate-pulse\" />\n                <span className=\"font-medium text-amber-700\">–†–∞–±–æ—Ç–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ</span>\n              </div>\n              <div className=\"text-3xl font-mono font-bold text-amber-600\">\n                {formatTime(timerSeconds)}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Rejection Info - show if work was rejected */}\n        {request.status === 'in_progress' && request.rejectionReason && (\n          <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl\">\n            <div className=\"flex items-center gap-2 text-red-700 font-medium mb-2\">\n              <AlertCircle className=\"w-5 h-5\" />\n              <span>–†–∞–±–æ—Ç–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞</span>\n              {request.rejectionCount && request.rejectionCount > 1 && (\n                <span className=\"text-xs bg-red-100 px-2 py-0.5 rounded\">\n                  {request.rejectionCount}-–π —Ä–∞–∑\n                </span>\n              )}\n            </div>\n            <p className=\"text-red-600 mb-3\">\n              <span className=\"font-medium\">–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è:</span> {request.rejectionReason}\n            </p>\n            <p className=\"text-sm text-red-600/80\">\n              –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Å—Ç—Ä–∞–Ω–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ä–∞–±–æ—Ç—É —Å–Ω–æ–≤–∞. –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ \"–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É\".\n            </p>\n          </div>\n        )}\n\n        <div className=\"space-y-4\">\n          {/* Priority & Category */}\n          <div className=\"flex items-center gap-3\">\n            <span className={`px-3 py-1 rounded-full text-sm font-medium ${priority.color}`}>\n              {priority.label}\n            </span>\n            <span className=\"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700\">\n              {SPECIALIZATION_LABELS[request.category]}\n            </span>\n          </div>\n\n          {/* Description */}\n          <div>\n            <h3 className=\"text-sm font-medium text-gray-500 mb-1\">–û–ø–∏—Å–∞–Ω–∏–µ</h3>\n            <p className=\"text-gray-900\">{request.description}</p>\n          </div>\n\n          {/* Scheduled Date/Time */}\n          {request.scheduledDate && (\n            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\n              <h3 className=\"font-medium text-blue-800 flex items-center gap-2 mb-2\">\n                <CalendarDays className=\"w-4 h-4\" />\n                –ñ–µ–ª–∞–µ–º–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è\n              </h3>\n              <div className=\"flex items-center gap-4 text-blue-700\">\n                <span>{new Date(request.scheduledDate).toLocaleDateString('ru-RU', { weekday: 'long', day: 'numeric', month: 'long' })}</span>\n                {request.scheduledTime && (\n                  <span className=\"flex items-center gap-1\">\n                    <Clock className=\"w-4 h-4\" />\n                    {request.scheduledTime}\n                  </span>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Resident Info */}\n          <div className=\"bg-white/30 rounded-xl p-4 space-y-3\">\n            <h3 className=\"font-medium\">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∂–∏—Ç–µ–ª–µ</h3>\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex items-center gap-2\">\n                <User className=\"w-4 h-4 text-gray-400\" />\n                <span>{request.residentName}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Phone className=\"w-4 h-4 text-gray-400\" />\n                <a href={`tel:${request.residentPhone}`} className=\"text-primary-600 hover:underline\">\n                  {request.residentPhone}\n                </a>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <MapPin className=\"w-4 h-4 text-gray-400\" />\n                <span>{formatAddress(request.address, request.apartment)}</span>\n              </div>\n              {request.accessInfo && (\n                <div className=\"mt-2 p-2 bg-amber-50 border border-amber-200 rounded-lg\">\n                  <div className=\"text-xs text-amber-700 font-medium mb-1\">üîë –î–æ—Å—Ç—É–ø –≤ –∫–≤–∞—Ä—Ç–∏—Ä—É:</div>\n                  <div className=\"text-sm text-amber-900\">{request.accessInfo}</div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Timeline */}\n          <div className=\"bg-white/30 rounded-xl p-4 space-y-3\">\n            <h3 className=\"font-medium\">–ò—Å—Ç–æ—Ä–∏—è</h3>\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-500\">–°–æ–∑–¥–∞–Ω–∞</span>\n                <span>{formatDate(request.createdAt)}</span>\n              </div>\n              {request.assignedAt && (\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-500\">–ù–∞–∑–Ω–∞—á–µ–Ω–∞</span>\n                  <span>{formatDate(request.assignedAt)}</span>\n                </div>\n              )}\n              {request.acceptedAt && (\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-500\">–ü—Ä–∏–Ω—è—Ç–∞</span>\n                  <span>{formatDate(request.acceptedAt)}</span>\n                </div>\n              )}\n              {request.startedAt && (\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-500\">–†–∞–±–æ—Ç–∞ –Ω–∞—á–∞—Ç–∞</span>\n                  <span>{formatDate(request.startedAt)}</span>\n                </div>\n              )}\n              {request.completedAt && (\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-500\">–†–∞–±–æ—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞</span>\n                  <span>{formatDate(request.completedAt)}</span>\n                </div>\n              )}\n              {request.approvedAt && (\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-500\">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞</span>\n                  <span>{formatDate(request.approvedAt)}</span>\n                </div>\n              )}\n              {request.workDuration && (\n                <div className=\"flex items-center justify-between border-t pt-2 mt-2\">\n                  <span className=\"text-gray-500\">–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã</span>\n                  <span className=\"font-medium\">{Math.round(request.workDuration / 60)} –º–∏–Ω</span>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Rating if completed */}\n          {request.status === 'completed' && request.rating && (\n            <div className=\"bg-white/30 rounded-xl p-4\">\n              <h3 className=\"font-medium mb-2\">–û—Ü–µ–Ω–∫–∞</h3>\n              <div className=\"flex items-center gap-2\">\n                {[1, 2, 3, 4, 5].map(star => (\n                  <Star\n                    key={star}\n                    className={`w-6 h-6 ${star <= request.rating! ? 'text-yellow-500 fill-yellow-500' : 'text-gray-300'}`}\n                  />\n                ))}\n                <span className=\"ml-2 text-lg font-semibold\">{request.rating}/5</span>\n              </div>\n              {request.feedback && (\n                <p className=\"mt-2 text-gray-600 italic\">\"{request.feedback}\"</p>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex flex-col gap-3 mt-6\">\n          <div className=\"flex gap-3\">\n            <a\n              href={`tel:${request.residentPhone}`}\n              className=\"btn-secondary flex-1 flex items-center justify-center gap-2\"\n            >\n              <Phone className=\"w-4 h-4\" />\n              –ü–æ–∑–≤–æ–Ω–∏—Ç—å\n            </a>\n            {request.status === 'new' && (\n              <button\n                onClick={onTakeRequest}\n                className=\"btn-primary flex-1 flex items-center justify-center gap-2\"\n                style={{ background: 'linear-gradient(135deg, #8b5cf6, #7c3aed)' }}\n              >\n                <Hand className=\"w-4 h-4\" />\n                –í–∑—è—Ç—å –∑–∞—è–≤–∫—É\n              </button>\n            )}\n            {request.status === 'assigned' && (\n              <button onClick={onAccept} className=\"btn-primary flex-1 flex items-center justify-center gap-2\">\n                <Check className=\"w-4 h-4\" />\n                –ü—Ä–∏–Ω—è—Ç—å –∑–∞—è–≤–∫—É\n              </button>\n            )}\n            {request.status === 'accepted' && (\n              <button onClick={onStartWork} className=\"btn-primary flex-1 flex items-center justify-center gap-2\">\n                <Play className=\"w-4 h-4\" />\n                –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É\n              </button>\n            )}\n            {request.status === 'in_progress' && (\n              <button\n                onClick={onComplete}\n                className=\"btn-primary flex-1 flex items-center justify-center gap-2\"\n                style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}\n              >\n                <Check className=\"w-4 h-4\" />\n                –ó–∞–≤–µ—Ä—à–∏—Ç—å\n              </button>\n            )}\n          </div>\n          {canReschedule && (\n            <button\n              onClick={onReschedule}\n              className=\"w-full py-3 bg-amber-100 hover:bg-amber-200 text-amber-700 rounded-xl font-medium flex items-center justify-center gap-2 transition-all\"\n            >\n              <RefreshCw className=\"w-4 h-4\" />\n              –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è\n            </button>\n          )}\n          {canDecline && (\n            <button\n              onClick={onDecline}\n              className=\"w-full py-2 px-4 rounded-xl font-medium text-red-600 border border-red-300 hover:bg-red-50 transition-colors flex items-center justify-center gap-2\"\n            >\n              <XCircle className=\"w-4 h-4\" />\n              {request.status === 'in_progress' ? '–û—Å–≤–æ–±–æ–¥–∏—Ç—å –∑–∞—è–≤–∫—É' : '–û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –∑–∞—è–≤–∫–∏'}\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Decline Request Modal (for executors)\nfunction DeclineRequestModal({\n  request,\n  onClose,\n  onConfirm\n}: {\n  request: Request;\n  onClose: () => void;\n  onConfirm: (reason: string) => void;\n}) {\n  const [reason, setReason] = useState('');\n  const isInProgress = request.status === 'in_progress';\n\n  const predefinedReasons = isInProgress ? [\n    '–ó–∞–±–æ–ª–µ–ª/–ù–µ –º–æ–≥—É –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É',\n    '–ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –ø–æ–º–æ—â—å –¥—Ä—É–≥–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞',\n    '–ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è',\n    '–°—Ä–æ—á–Ω—ã–µ –ª–∏—á–Ω—ã–µ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞',\n    '–¢—Ä–µ–±—É–µ—Ç—Å—è –¥—Ä—É–≥–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è',\n  ] : [\n    '–ù–µ —Å–º–æ–≥—É –ø—Ä–∏–±—ã—Ç—å –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è',\n    '–ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤',\n    '–ó–∞–±–æ–ª–µ–ª/–ù–µ –º–æ–≥—É —Ä–∞–±–æ—Ç–∞—Ç—å',\n    '–°–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è',\n    '–ó–∞–≥—Ä—É–∂–µ–Ω –¥—Ä—É–≥–∏–º–∏ –∑–∞—è–≤–∫–∞–º–∏',\n  ];\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"glass-card p-6 w-full max-w-md mx-4\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-red-600 flex items-center gap-2\">\n            <Ban className=\"w-5 h-5\" />\n            {isInProgress ? '–û—Å–≤–æ–±–æ–¥–∏—Ç—å –∑–∞—è–≤–∫—É' : '–û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –∑–∞—è–≤–∫–∏'}\n          </h2>\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <div className=\"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg\">\n          <p className=\"text-sm text-amber-800\">\n            –ó–∞—è–≤–∫–∞ <strong>#{request.number}</strong> –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –≤ –æ—á–µ—Ä–µ–¥—å –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥—Ä—É–≥–æ–º—É –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é.\n            {isInProgress && ' –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–±–æ—Ç—ã –±—É–¥–µ—Ç —Å–±—Ä–æ—à–µ–Ω.'}\n          </p>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞–∑–∞\n            </label>\n            <div className=\"flex flex-wrap gap-2 mb-3\">\n              {predefinedReasons.map((r) => (\n                <button\n                  key={r}\n                  type=\"button\"\n                  onClick={() => setReason(r)}\n                  className={`px-3 py-1.5 text-sm rounded-lg transition-colors ${\n                    reason === r\n                      ? 'bg-red-500 text-white'\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-700'\n                  }`}\n                >\n                  {r}\n                </button>\n              ))}\n            </div>\n            <textarea\n              value={reason}\n              onChange={(e) => setReason(e.target.value)}\n              className=\"input-field min-h-[80px]\"\n              placeholder=\"–ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ—é –ø—Ä–∏—á–∏–Ω—É...\"\n            />\n          </div>\n\n          <div className=\"flex gap-3\">\n            <button onClick={onClose} className=\"btn-secondary flex-1\">\n              –û—Ç–º–µ–Ω–∞\n            </button>\n            <button\n              onClick={() => reason.trim() && onConfirm(reason)}\n              className=\"flex-1 py-2 px-4 rounded-xl font-medium bg-red-500 text-white hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              disabled={!reason.trim()}\n            >\n              <Ban className=\"w-4 h-4 mr-2 inline\" />\n              {isInProgress ? '–û—Å–≤–æ–±–æ–¥–∏—Ç—å' : '–û—Ç–∫–∞–∑–∞—Ç—å—Å—è'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Reschedule Request Modal for Executor\nfunction RescheduleModal({\n  request,\n  onClose,\n  onSubmit,\n  language\n}: {\n  request: Request;\n  onClose: () => void;\n  onSubmit: (data: { proposedDate: string; proposedTime: string; reason: RescheduleReason; reasonText?: string }) => void;\n  language: 'ru' | 'uz';\n}) {\n  const [proposedDate, setProposedDate] = useState('');\n  const [proposedTime, setProposedTime] = useState('');\n  const [reason, setReason] = useState<RescheduleReason>('busy_time');\n  const [reasonText, setReasonText] = useState('');\n\n  const today = new Date().toISOString().split('T')[0];\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"glass-card p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-amber-600 flex items-center gap-2\">\n            <RefreshCw className=\"w-5 h-5\" />\n            {language === 'ru' ? '–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞—è–≤–∫—É' : 'Arizani ko\\'chirish'}\n          </h2>\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n          <p className=\"text-sm text-blue-800\">\n            {language === 'ru'\n              ? `–ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ –Ω–æ–≤–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∑–∞—è–≤–∫–∏ #${request.number}. –ñ–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.`\n              : `#${request.number} ariza uchun yangi vaqt taklif qiling.`}\n          </p>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              {language === 'ru' ? '–ü—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞' : 'Ko\\'chirish sababi'}\n            </label>\n            <div className=\"grid grid-cols-1 gap-2\">\n              {/* Filter out 'not_at_home' - this reason is only for residents, not executors */}\n              {(Object.keys(RESCHEDULE_REASON_LABELS) as RescheduleReason[])\n                .filter(r => r !== 'not_at_home')\n                .map((r) => (\n                <button\n                  key={r}\n                  type=\"button\"\n                  onClick={() => setReason(r)}\n                  className={`px-3 py-2.5 text-sm rounded-xl transition-colors text-left ${\n                    reason === r\n                      ? 'bg-amber-500 text-white'\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-700'\n                  }`}\n                >\n                  {language === 'ru' ? RESCHEDULE_REASON_LABELS[r].label : RESCHEDULE_REASON_LABELS[r].labelUz}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {reason === 'other' && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                {language === 'ru' ? '–£—Ç–æ—á–Ω–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É' : 'Sababni aniqlashtiring'}\n              </label>\n              <textarea\n                value={reasonText}\n                onChange={(e) => setReasonText(e.target.value)}\n                className=\"input-field min-h-[80px]\"\n                placeholder={language === 'ru' ? '–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É...' : 'Sababni yozing...'}\n              />\n            </div>\n          )}\n\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                {language === 'ru' ? '–ù–æ–≤–∞—è –¥–∞—Ç–∞' : 'Yangi sana'}\n              </label>\n              <input\n                type=\"date\"\n                min={today}\n                value={proposedDate}\n                onChange={(e) => setProposedDate(e.target.value)}\n                className=\"input-field\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                {language === 'ru' ? '–í—Ä–µ–º—è' : 'Vaqt'}\n              </label>\n              <input\n                type=\"time\"\n                value={proposedTime}\n                onChange={(e) => setProposedTime(e.target.value)}\n                className=\"input-field\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex gap-3 pt-2\">\n            <button onClick={onClose} className=\"btn-secondary flex-1\">\n              {language === 'ru' ? '–û—Ç–º–µ–Ω–∞' : 'Bekor qilish'}\n            </button>\n            <button\n              onClick={() => proposedDate && proposedTime && onSubmit({ proposedDate, proposedTime, reason, reasonText: reason === 'other' ? reasonText : undefined })}\n              className=\"flex-1 py-2.5 px-4 rounded-xl font-medium bg-amber-500 text-white hover:bg-amber-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n              disabled={!proposedDate || !proposedTime || (reason === 'other' && !reasonText.trim())}\n            >\n              <Send className=\"w-4 h-4\" />\n              {language === 'ru' ? '–û—Ç–ø—Ä–∞–≤–∏—Ç—å' : 'Yuborish'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Reschedule Response Modal for Executor\nfunction RescheduleResponseModal({\n  reschedule,\n  onClose,\n  onAccept,\n  onReject,\n  language\n}: {\n  reschedule: RescheduleRequest;\n  onClose: () => void;\n  onAccept: () => void;\n  onReject: (note?: string) => void;\n  language: 'ru' | 'uz';\n}) {\n  const [rejectNote, setRejectNote] = useState('');\n  const [showRejectForm, setShowRejectForm] = useState(false);\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"glass-card p-6 w-full max-w-md mx-4\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-amber-600 flex items-center gap-2\">\n            <RefreshCw className=\"w-5 h-5\" />\n            {language === 'ru' ? '–ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å' : 'Ko\\'chirish so\\'rovi'}\n          </h2>\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div className=\"p-4 bg-amber-50 border border-amber-200 rounded-xl\">\n            <div className=\"text-sm text-gray-600 mb-1\">\n              {language === 'ru' ? '–ó–∞—è–≤–∫–∞' : 'Ariza'} #{reschedule.requestNumber}\n            </div>\n            <div className=\"font-medium text-gray-800\">\n              {reschedule.initiatorName} {language === 'ru' ? '–ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞:' : 'taklif qiladi:'}\n            </div>\n            <div className=\"text-xl font-bold text-amber-600 mt-2\">\n              {reschedule.proposedDate} –≤ {reschedule.proposedTime}\n            </div>\n            <div className=\"text-sm text-gray-600 mt-2\">\n              <strong>{language === 'ru' ? '–ü—Ä–∏—á–∏–Ω–∞:' : 'Sabab:'}</strong>{' '}\n              {language === 'ru'\n                ? RESCHEDULE_REASON_LABELS[reschedule.reason].label\n                : RESCHEDULE_REASON_LABELS[reschedule.reason].labelUz}\n              {reschedule.reasonText && ` - ${reschedule.reasonText}`}\n            </div>\n          </div>\n\n          {reschedule.currentDate && (\n            <div className=\"text-sm text-gray-600 text-center\">\n              {language === 'ru' ? '–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:' : 'Hozirgi vaqt:'} {reschedule.currentDate} {reschedule.currentTime}\n            </div>\n          )}\n\n          {showRejectForm ? (\n            <div className=\"space-y-3\">\n              <label className=\"block text-sm font-medium text-gray-700\">\n                {language === 'ru' ? '–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞–∑–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)' : 'Rad etish sababi (ixtiyoriy)'}\n              </label>\n              <textarea\n                value={rejectNote}\n                onChange={(e) => setRejectNote(e.target.value)}\n                className=\"input-field min-h-[80px]\"\n                placeholder={language === 'ru' ? '–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É...' : 'Sababni yozing...'}\n              />\n              <div className=\"flex gap-3\">\n                <button onClick={() => setShowRejectForm(false)} className=\"btn-secondary flex-1\">\n                  {language === 'ru' ? '–ù–∞–∑–∞–¥' : 'Orqaga'}\n                </button>\n                <button\n                  onClick={() => onReject(rejectNote || undefined)}\n                  className=\"flex-1 py-2.5 px-4 rounded-xl font-medium bg-red-500 text-white hover:bg-red-600 transition-colors\"\n                >\n                  {language === 'ru' ? '–û—Ç–∫–ª–æ–Ω–∏—Ç—å' : 'Rad etish'}\n                </button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setShowRejectForm(true)}\n                className=\"flex-1 py-3 px-4 rounded-xl font-medium bg-red-100 text-red-600 hover:bg-red-200 transition-colors\"\n              >\n                {language === 'ru' ? '–û—Ç–∫–ª–æ–Ω–∏—Ç—å' : 'Rad etish'}\n              </button>\n              <button\n                onClick={onAccept}\n                className=\"flex-1 py-3 px-4 rounded-xl font-medium bg-green-500 text-white hover:bg-green-600 transition-colors flex items-center justify-center gap-2\"\n              >\n                <CheckCircle className=\"w-4 h-4\" />\n                {language === 'ru' ? '–ü—Ä–∏–Ω—è—Ç—å' : 'Qabul qilish'}\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":["ExecutorDashboard","user","useAuthStore","requests","executors","acceptRequest","startWork","pauseWork","resumeWork","completeWork","assignRequest","declineRequest","createRescheduleRequest","respondToRescheduleRequest","getPendingRescheduleForUser","fetchRequests","fetchPendingReschedules","useDataStore","language","useLanguageStore","activeTab","setActiveTab","useState","liveStats","setLiveStats","isLoadingStats","setIsLoadingStats","useEffect","interval","selectedRequest","setSelectedRequest","activeTimers","setActiveTimers","showDeclineModal","setShowDeclineModal","requestToDecline","setRequestToDecline","showRescheduleModal","setShowRescheduleModal","requestToReschedule","setRequestToReschedule","showRescheduleResponseModal","setShowRescheduleResponseModal","rescheduleToRespond","setRescheduleToRespond","currentExecutor","e","fetchStats","response","executorsApi","mySpecialization","myRequests","r","availableRequests","assignedRequests","inProgressRequests","completedRequests","pendingReschedules","parseUTCDateTime","useCallback","dateStr","utcStr","newTimers","req","startTime","totalPausedTime","pausedAt","elapsed","tabs","FileText","Clock","Play","CheckCircle","currentRequests","formatTime","seconds","hrs","mins","secs","handleTakeRequest","requestId","handleAccept","handleStartWork","handlePauseWork","handleResumeWork","handleComplete","handleDeclineClick","request","handleDeclineConfirm","reason","jsxs","jsx","SPECIALIZATION_LABELS","RefreshCw","reschedule","ChevronRight","Star","TrendingUp","Timer","PlayCircle","Pause","Check","tab","RequestCard","RequestDetailsModal","DeclineRequestModal","RescheduleModal","data","RescheduleResponseModal","note","timerSeconds","hasActiveWork","onView","onTakeRequest","onAccept","onStartWork","onPauseWork","onResumeWork","onComplete","onDecline","onReschedule","canDecline","getPriorityColor","priority","getStatusBadge","status","baseClass","STATUS_LABELS","User","Phone","MapPin","CalendarDays","star","AlertCircle","XCircle","Hand","onClose","canReschedule","formatDate","X","formatAddress","onConfirm","setReason","isInProgress","predefinedReasons","Ban","onSubmit","proposedDate","setProposedDate","proposedTime","setProposedTime","reasonText","setReasonText","today","RESCHEDULE_REASON_LABELS","Send","onReject","rejectNote","setRejectNote","showRejectForm","setShowRejectForm"],"mappings":"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"}