{"version":3,"file":"ExecutorDashboard-1768650097760-C_lzHJpD.js","sources":["../../src/pages/ExecutorDashboard.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport {\r\n  FileText, Clock, CheckCircle, MapPin, Phone, User,\r\n  Play, Check, X, Star, TrendingUp, Timer, Hand,\r\n  CalendarDays, XCircle, Ban, AlertCircle,\r\n  Pause, PlayCircle, RefreshCw, Send, ChevronRight,\r\n  ShoppingBag, Package, Truck, ChefHat\r\n} from 'lucide-react';\r\nimport { useAuthStore } from '../stores/authStore';\r\nimport { useDataStore } from '../stores/dataStore';\r\nimport { useLanguageStore } from '../stores/languageStore';\r\nimport { executorsApi, apiRequest } from '../services/api';\r\nimport { formatAddress } from '../utils/formatAddress';\r\nimport { SPECIALIZATION_LABELS, STATUS_LABELS, RESCHEDULE_REASON_LABELS } from '../types';\r\nimport type { Request, ExecutorSpecialization, RequestStatus, RescheduleReason, RescheduleRequest } from '../types';\r\n\r\n// Marketplace order interface\r\ninterface MarketplaceOrder {\r\n  id: string;\r\n  order_number: string;\r\n  user_id: string;\r\n  user_name: string;\r\n  user_phone: string;\r\n  status: 'confirmed' | 'preparing' | 'ready' | 'delivering' | 'delivered';\r\n  total_amount: number;\r\n  delivery_address: string;\r\n  delivery_notes?: string;\r\n  items_count: number;\r\n  created_at: string;\r\n  assigned_at?: string;\r\n}\r\n\r\n// Stats interface for API response\r\ninterface ExecutorStats {\r\n  totalCompleted: number;\r\n  thisWeek: number;\r\n  thisMonth: number;\r\n  rating: number;\r\n  avgCompletionTime: number;\r\n}\r\n\r\nexport function ExecutorDashboard() {\r\n  const { user } = useAuthStore();\r\n  const { requests, executors, acceptRequest, startWork, pauseWork, resumeWork, completeWork, assignRequest, declineRequest, createRescheduleRequest, respondToRescheduleRequest, getPendingRescheduleForUser, fetchRequests, fetchPendingReschedules } = useDataStore();\r\n  const { language } = useLanguageStore();\r\n  const [activeTab, setActiveTab] = useState<'available' | 'assigned' | 'in_progress' | 'completed' | 'marketplace'>('available');\r\n\r\n  // Live stats from API\r\n  const [liveStats, setLiveStats] = useState<ExecutorStats | null>(null);\r\n  const [isLoadingStats, setIsLoadingStats] = useState(true);\r\n\r\n  // Marketplace orders\r\n  const [marketplaceOrders, setMarketplaceOrders] = useState<MarketplaceOrder[]>([]);\r\n  const [isLoadingOrders, setIsLoadingOrders] = useState(false);\r\n  const [selectedMarketplaceOrder, setSelectedMarketplaceOrder] = useState<MarketplaceOrder | null>(null);\r\n\r\n  // Fetch marketplace orders\r\n  const fetchMarketplaceOrders = useCallback(async () => {\r\n    setIsLoadingOrders(true);\r\n    try {\r\n      const response = await apiRequest('/api/marketplace/executor/orders') as { orders: MarketplaceOrder[] };\r\n      setMarketplaceOrders(response.orders || []);\r\n    } catch (error) {\r\n      console.error('Failed to fetch marketplace orders:', error);\r\n    } finally {\r\n      setIsLoadingOrders(false);\r\n    }\r\n  }, []);\r\n\r\n  // Update marketplace order status\r\n  const updateMarketplaceOrderStatus = async (orderId: string, status: string) => {\r\n    try {\r\n      await apiRequest(`/api/marketplace/executor/orders/${orderId}`, {\r\n        method: 'PATCH',\r\n        body: JSON.stringify({ status }),\r\n      });\r\n      await fetchMarketplaceOrders();\r\n      setSelectedMarketplaceOrder(null);\r\n    } catch (error) {\r\n      console.error('Failed to update order status:', error);\r\n      alert('Ошибка при обновлении статуса');\r\n    }\r\n  };\r\n\r\n  // Fetch requests and pending reschedules from D1 database on mount and poll every 30 seconds\r\n  useEffect(() => {\r\n    fetchRequests();\r\n    fetchPendingReschedules();\r\n    // Only fetch marketplace orders for couriers\r\n    if (user?.specialization === 'courier') {\r\n      fetchMarketplaceOrders();\r\n    }\r\n    const interval = setInterval(() => {\r\n      fetchPendingReschedules();\r\n      if (user?.specialization === 'courier') {\r\n        fetchMarketplaceOrders();\r\n      }\r\n    }, 30000);\r\n    return () => clearInterval(interval);\r\n  }, [fetchRequests, fetchPendingReschedules, fetchMarketplaceOrders, user?.specialization]);\r\n  const [selectedRequest, setSelectedRequest] = useState<Request | null>(null);\r\n  const [activeTimers, setActiveTimers] = useState<Record<string, number>>({});\r\n  const [showDeclineModal, setShowDeclineModal] = useState(false);\r\n  const [requestToDecline, setRequestToDecline] = useState<Request | null>(null);\r\n  const [showRescheduleModal, setShowRescheduleModal] = useState(false);\r\n  const [requestToReschedule, setRequestToReschedule] = useState<Request | null>(null);\r\n  const [showRescheduleResponseModal, setShowRescheduleResponseModal] = useState(false);\r\n  const [rescheduleToRespond, setRescheduleToRespond] = useState<RescheduleRequest | null>(null);\r\n\r\n  // Find current executor\r\n  const currentExecutor = executors.find(e => e.login === user?.login);\r\n\r\n  // Fetch live stats from API\r\n  useEffect(() => {\r\n    const fetchStats = async () => {\r\n      if (!user?.id) return;\r\n      setIsLoadingStats(true);\r\n      try {\r\n        const response = await executorsApi.getStats(user.id);\r\n        setLiveStats(response.stats);\r\n      } catch (error) {\r\n        console.error('Failed to fetch executor stats:', error);\r\n      } finally {\r\n        setIsLoadingStats(false);\r\n      }\r\n    };\r\n\r\n    fetchStats();\r\n    // Refresh stats every 30 seconds\r\n    const interval = setInterval(fetchStats, 30000);\r\n    return () => clearInterval(interval);\r\n  }, [user?.id]);\r\n\r\n  // Get executor's specialization\r\n  const mySpecialization = currentExecutor?.specialization || user?.specialization;\r\n\r\n  // Filter requests for this executor - use user.id for consistency with handleTakeRequest\r\n  // This ensures requests assigned via user.id are properly displayed\r\n  const myRequests = requests.filter(r => r.executorId === user?.id);\r\n\r\n  // Available requests - new requests matching executor's specialization (not yet assigned)\r\n  const availableRequests = requests.filter(r =>\r\n    r.status === 'new' && r.category === mySpecialization\r\n  );\r\n\r\n  const assignedRequests = myRequests.filter(r => r.status === 'assigned' || r.status === 'accepted');\r\n  const inProgressRequests = myRequests.filter(r => r.status === 'in_progress');\r\n  const completedRequests = myRequests.filter(r => r.status === 'completed' || r.status === 'pending_approval');\r\n\r\n  // Get pending reschedule requests for this executor - use user.id for consistency\r\n  const pendingReschedules = user?.id ? getPendingRescheduleForUser(user.id) : [];\r\n\r\n  // Helper to parse UTC datetime from backend\r\n  const parseUTCDateTime = useCallback((dateStr: string): number => {\r\n    // Backend returns datetime in format \"YYYY-MM-DD HH:MM:SS\" (UTC)\r\n    // If no timezone info, treat as UTC\r\n    if (!dateStr) return 0;\r\n    // Append 'Z' to indicate UTC if not already present\r\n    const utcStr = dateStr.includes('Z') || dateStr.includes('+') ? dateStr : dateStr.replace(' ', 'T') + 'Z';\r\n    return new Date(utcStr).getTime();\r\n  }, []);\r\n\r\n  // Timer effect for in_progress requests (accounting for pauses)\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      const newTimers: Record<string, number> = {};\r\n      inProgressRequests.forEach(req => {\r\n        if (req.startedAt) {\r\n          const startTime = parseUTCDateTime(req.startedAt);\r\n          const totalPausedTime = req.totalPausedTime || 0;\r\n\r\n          if (req.isPaused && req.pausedAt) {\r\n            // If currently paused, don't count time since pause\r\n            const pausedAt = parseUTCDateTime(req.pausedAt);\r\n            const elapsed = Math.floor((pausedAt - startTime) / 1000) - totalPausedTime;\r\n            newTimers[req.id] = Math.max(0, elapsed);\r\n          } else {\r\n            // Active work - count all time minus paused time\r\n            const elapsed = Math.floor((Date.now() - startTime) / 1000) - totalPausedTime;\r\n            newTimers[req.id] = Math.max(0, elapsed);\r\n          }\r\n        }\r\n      });\r\n      setActiveTimers(newTimers);\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [inProgressRequests, parseUTCDateTime]);\r\n\r\n  const baseTabs = [\r\n    { id: 'available' as const, label: language === 'ru' ? 'Доступные' : 'Mavjud', count: availableRequests.length, color: 'bg-purple-500', icon: FileText },\r\n    { id: 'assigned' as const, label: language === 'ru' ? 'Назначенные' : 'Tayinlangan', count: assignedRequests.length, color: 'bg-blue-500', icon: Clock },\r\n    { id: 'in_progress' as const, label: language === 'ru' ? 'В работе' : 'Ishda', count: inProgressRequests.length, color: 'bg-amber-500', icon: Play },\r\n    { id: 'completed' as const, label: language === 'ru' ? 'Выполненные' : 'Bajarilgan', count: completedRequests.length, color: 'bg-green-500', icon: CheckCircle },\r\n  ];\r\n\r\n  // Only show marketplace tab for couriers\r\n  const tabs = user?.specialization === 'courier'\r\n    ? [...baseTabs, { id: 'marketplace' as const, label: language === 'ru' ? 'Магазин' : 'Do\\'kon', count: marketplaceOrders.length, color: 'bg-orange-500', icon: ShoppingBag }]\r\n    : baseTabs;\r\n\r\n  const currentRequests = activeTab === 'marketplace' ? [] : ({\r\n    available: availableRequests,\r\n    assigned: assignedRequests,\r\n    in_progress: inProgressRequests,\r\n    completed: completedRequests,\r\n  } as Record<string, Request[]>)[activeTab] || [];\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const hrs = Math.floor(seconds / 3600);\r\n    const mins = Math.floor((seconds % 3600) / 60);\r\n    const secs = seconds % 60;\r\n    if (hrs > 0) {\r\n      return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const handleTakeRequest = (requestId: string) => {\r\n    // Use user.id directly instead of currentExecutor.id\r\n    // This fixes the issue when executors list is not loaded yet\r\n    if (user?.id) {\r\n      assignRequest(requestId, user.id);\r\n      // Auto-switch to assigned tab\r\n      setActiveTab('assigned');\r\n    }\r\n  };\r\n\r\n  const handleAccept = (requestId: string) => {\r\n    acceptRequest(requestId);\r\n  };\r\n\r\n  const handleStartWork = (requestId: string) => {\r\n    // Check if there's already work in progress\r\n    if (inProgressRequests.length > 0) {\r\n      alert('Сначала завершите текущую работу');\r\n      return;\r\n    }\r\n    startWork(requestId);\r\n  };\r\n\r\n  const handlePauseWork = (requestId: string) => {\r\n    pauseWork(requestId);\r\n  };\r\n\r\n  const handleResumeWork = (requestId: string) => {\r\n    resumeWork(requestId);\r\n  };\r\n\r\n  const handleComplete = (requestId: string) => {\r\n    const elapsed = activeTimers[requestId] || 0;\r\n    completeWork(requestId, elapsed);\r\n  };\r\n\r\n  const handleDeclineClick = (request: Request) => {\r\n    setRequestToDecline(request);\r\n    setShowDeclineModal(true);\r\n  };\r\n\r\n  const handleDeclineConfirm = async (reason: string) => {\r\n    if (requestToDecline) {\r\n      try {\r\n        await declineRequest(requestToDecline.id, reason);\r\n        setShowDeclineModal(false);\r\n        setRequestToDecline(null);\r\n        setSelectedRequest(null);\r\n      } catch (error) {\r\n        console.error('Failed to decline request:', error);\r\n        // Error will be handled by declineRequest rollback, just close modal\r\n        setShowDeclineModal(false);\r\n        setRequestToDecline(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6 pb-20 md:pb-0\">\r\n      {/* Header - Mobile optimized */}\r\n      <div className=\"flex items-start justify-between gap-3\">\r\n        <div className=\"flex-1 min-w-0\">\r\n          <h1 className=\"text-xl md:text-2xl font-bold text-gray-900\">Мои заявки</h1>\r\n          <p className=\"text-sm md:text-base text-gray-500 mt-1 truncate\">\r\n            {user?.name} • {SPECIALIZATION_LABELS[user?.specialization as ExecutorSpecialization] || 'Исполнитель'}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex-shrink-0\">\r\n          <div className={`px-3 py-2 rounded-xl text-sm font-medium ${\r\n            currentExecutor?.status === 'available' ? 'bg-green-100 text-green-700' :\r\n            currentExecutor?.status === 'busy' ? 'bg-amber-100 text-amber-700' :\r\n            'bg-gray-100 text-gray-600'\r\n          }`}>\r\n            {currentExecutor?.status === 'available' ? 'Доступен' :\r\n             currentExecutor?.status === 'busy' ? 'Занят' : 'Оффлайн'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Pending Reschedule Requests Alert */}\r\n      {pendingReschedules.length > 0 && (\r\n        <div className=\"glass-card p-4 border-2 border-amber-400 bg-amber-50/50 space-y-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 bg-amber-500 rounded-full flex items-center justify-center flex-shrink-0\">\r\n              <RefreshCw className=\"w-5 h-5 text-white\" />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <div className=\"font-semibold text-amber-800\">\r\n                {language === 'ru' ? 'Запрос на перенос времени' : 'Vaqtni o\\'zgartirish so\\'rovi'}\r\n              </div>\r\n              <div className=\"text-sm text-amber-600\">\r\n                {language === 'ru' ? 'Житель предлагает перенести заявку' : 'Yashovchi arizani ko\\'chirishni taklif qiladi'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {pendingReschedules.map((reschedule) => (\r\n            <button\r\n              key={reschedule.id}\r\n              onClick={() => {\r\n                setRescheduleToRespond(reschedule);\r\n                setShowRescheduleResponseModal(true);\r\n              }}\r\n              className=\"w-full p-3 bg-white/60 rounded-xl text-left flex items-center justify-between active:bg-white/80 transition-colors\"\r\n            >\r\n              <div>\r\n                <div className=\"font-medium text-gray-800\">\r\n                  {language === 'ru' ? 'Заявка' : 'Ariza'} #{reschedule.requestNumber}\r\n                </div>\r\n                <div className=\"text-sm text-gray-600\">\r\n                  {language === 'ru' ? 'Предложено:' : 'Taklif:'} {reschedule.proposedDate} {reschedule.proposedTime}\r\n                </div>\r\n              </div>\r\n              <ChevronRight className=\"w-5 h-5 text-amber-500\" />\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Stats Cards - Personal Performance - Mobile optimized */}\r\n      <div className=\"grid grid-cols-2 gap-3 md:grid-cols-4 md:gap-4\">\r\n        <div className=\"glass-card p-3 md:p-5\">\r\n          <div className=\"flex items-center gap-2 md:gap-3\">\r\n            <div className=\"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-orange-400 to-amber-500 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n              <Star className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <div className=\"text-2xl md:text-3xl font-bold\">\r\n                {isLoadingStats ? '...' : (liveStats?.rating || 5.0)}\r\n              </div>\r\n              <div className=\"text-xs md:text-sm text-gray-500\">\r\n                {language === 'ru' ? 'Рейтинг' : 'Reyting'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"glass-card p-3 md:p-5\">\r\n          <div className=\"flex items-center gap-2 md:gap-3\">\r\n            <div className=\"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n              <CheckCircle className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <div className=\"text-2xl md:text-3xl font-bold\">\r\n                {isLoadingStats ? '...' : (liveStats?.totalCompleted || 0)}\r\n              </div>\r\n              <div className=\"text-xs md:text-sm text-gray-500\">\r\n                {language === 'ru' ? 'Выполнено' : 'Bajarildi'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"glass-card p-3 md:p-5\">\r\n          <div className=\"flex items-center gap-2 md:gap-3\">\r\n            <div className=\"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n              <TrendingUp className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <div className=\"text-2xl md:text-3xl font-bold\">\r\n                {isLoadingStats ? '...' : (liveStats?.thisWeek || 0)}\r\n              </div>\r\n              <div className=\"text-xs md:text-sm text-gray-500\">\r\n                {language === 'ru' ? 'За неделю' : 'Hafta'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"glass-card p-3 md:p-5\">\r\n          <div className=\"flex items-center gap-2 md:gap-3\">\r\n            <div className=\"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-purple-400 to-violet-500 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n              <Timer className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\r\n            </div>\r\n            <div className=\"min-w-0\">\r\n              <div className=\"text-2xl md:text-3xl font-bold\">\r\n                {isLoadingStats ? '...' : (liveStats?.avgCompletionTime || 0)}\r\n              </div>\r\n              <div className=\"text-xs md:text-sm text-gray-500 leading-tight\">\r\n                {language === 'ru' ? 'Сред. мин' : 'O\\'rt. daq'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Active Work Timer - Mobile optimized - Show if there's work in progress */}\r\n      {inProgressRequests.length > 0 && (\r\n        <div className={`glass-card p-4 md:p-6 border-2 ${inProgressRequests[0]?.isPaused ? 'border-gray-400 bg-gray-50/50' : 'border-amber-400 bg-amber-50/50'}`}>\r\n          <div className=\"flex items-center gap-2 mb-3 md:mb-4\">\r\n            <div className={`w-3 h-3 rounded-full ${inProgressRequests[0]?.isPaused ? 'bg-gray-500' : 'bg-amber-500 animate-pulse'}`} />\r\n            <span className={`font-medium ${inProgressRequests[0]?.isPaused ? 'text-gray-700' : 'text-amber-700'}`}>\r\n              {inProgressRequests[0]?.isPaused ? 'Работа приостановлена' : 'Активная работа'}\r\n            </span>\r\n          </div>\r\n          {inProgressRequests.map(req => (\r\n            <div key={req.id} className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"font-semibold text-base md:text-lg truncate\">#{req.number} - {req.title}</div>\r\n                <div className=\"text-sm md:text-base text-gray-600 truncate\">{formatAddress(req.address, req.apartment)}</div>\r\n              </div>\r\n              <div className=\"flex items-center justify-between md:justify-end gap-3 md:gap-4\">\r\n                <div className=\"text-center\">\r\n                  <div className={`text-3xl md:text-4xl font-mono font-bold ${req.isPaused ? 'text-gray-500' : 'text-amber-600'}`}>\r\n                    {formatTime(activeTimers[req.id] || 0)}\r\n                  </div>\r\n                  <div className=\"text-xs md:text-sm text-gray-500\">\r\n                    {req.isPaused ? 'Пауза' : 'Время работы'}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  {req.isPaused ? (\r\n                    <button\r\n                      onClick={() => handleResumeWork(req.id)}\r\n                      className=\"py-3 px-4 md:px-5 rounded-xl font-semibold text-white flex items-center gap-2 active:scale-95 transition-transform touch-manipulation\"\r\n                      style={{ background: 'linear-gradient(135deg, #3b82f6, #2563eb)' }}\r\n                    >\r\n                      <PlayCircle className=\"w-5 h-5\" />\r\n                      <span className=\"hidden md:inline\">Продолжить</span>\r\n                    </button>\r\n                  ) : (\r\n                    <button\r\n                      onClick={() => handlePauseWork(req.id)}\r\n                      className=\"py-3 px-4 md:px-5 rounded-xl font-semibold text-gray-700 bg-white border-2 border-gray-300 flex items-center gap-2 active:scale-95 transition-transform touch-manipulation\"\r\n                    >\r\n                      <Pause className=\"w-5 h-5\" />\r\n                      <span className=\"hidden md:inline\">Пауза</span>\r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    onClick={() => handleComplete(req.id)}\r\n                    className=\"py-3 px-4 md:px-5 rounded-xl font-semibold text-white flex items-center gap-2 active:scale-95 transition-transform touch-manipulation\"\r\n                    style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}\r\n                  >\r\n                    <Check className=\"w-5 h-5\" />\r\n                    <span className=\"hidden md:inline\">Завершить</span>\r\n                    <span className=\"md:hidden\">Готово</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Tabs - Mobile optimized with horizontal scroll */}\r\n      <div className=\"overflow-x-auto scrollbar-hide -mx-4 px-4 md:mx-0 md:px-0\">\r\n            <div className=\"glass-card p-1.5 md:p-1 flex gap-1 min-w-max md:min-w-0 md:inline-flex\">\r\n              {tabs.map((tab) => (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id)}\r\n                  className={`px-4 py-3 md:py-2 rounded-xl font-medium transition-all flex items-center gap-2 whitespace-nowrap touch-manipulation ${\r\n                    activeTab === tab.id\r\n                      ? 'bg-primary-500 text-gray-900 shadow-md'\r\n                      : 'hover:bg-white/30 active:bg-white/50 text-gray-600'\r\n                  }`}\r\n                >\r\n                  <span className=\"text-sm md:text-base\">{tab.label}</span>\r\n                  {tab.count > 0 && (\r\n                    <span className={`px-2 py-0.5 rounded-full text-xs text-white font-medium ${tab.color}`}>\r\n                      {tab.count}\r\n                    </span>\r\n                  )}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Requests List or Marketplace Orders */}\r\n          {activeTab === 'marketplace' ? (\r\n            <div className=\"space-y-3\">\r\n              {isLoadingOrders ? (\r\n                <div className=\"glass-card p-8 text-center\">\r\n                  <div className=\"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4\" />\r\n                  <p className=\"text-gray-500\">{language === 'ru' ? 'Загрузка заказов...' : 'Buyurtmalar yuklanmoqda...'}</p>\r\n                </div>\r\n              ) : marketplaceOrders.length === 0 ? (\r\n                <div className=\"glass-card p-8 text-center\">\r\n                  <div className=\"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                    <ShoppingBag className=\"w-8 h-8 text-orange-400\" />\r\n                  </div>\r\n                  <h3 className=\"text-lg font-medium text-gray-600\">\r\n                    {language === 'ru' ? 'Нет заказов магазина' : 'Do\\'kon buyurtmalari yo\\'q'}\r\n                  </h3>\r\n                  <p className=\"text-gray-400 mt-1\">\r\n                    {language === 'ru' ? 'Вам ещё не назначены заказы из магазина' : 'Sizga hali do\\'kon buyurtmalari tayinlanmagan'}\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                marketplaceOrders.map((order) => (\r\n                  <MarketplaceOrderCard\r\n                    key={order.id}\r\n                    order={order}\r\n                    onView={() => setSelectedMarketplaceOrder(order)}\r\n                    onUpdateStatus={updateMarketplaceOrderStatus}\r\n                    language={language}\r\n                  />\r\n                ))\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              {currentRequests.length === 0 ? (\r\n                <div className=\"glass-card p-8 text-center\">\r\n                  <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                    <FileText className=\"w-8 h-8 text-gray-400\" />\r\n                  </div>\r\n                  <h3 className=\"text-lg font-medium text-gray-600\">Нет заявок</h3>\r\n                  <p className=\"text-gray-400 mt-1\">\r\n                    {activeTab === 'available' && 'Нет доступных заявок по вашей специализации'}\r\n                    {activeTab === 'assigned' && 'Нет назначенных заявок'}\r\n                    {activeTab === 'in_progress' && 'Нет заявок в работе'}\r\n                    {activeTab === 'completed' && 'Нет выполненных заявок'}\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                currentRequests.map((request) => (\r\n                  <RequestCard\r\n                    key={request.id}\r\n                    request={request}\r\n                    timerSeconds={activeTimers[request.id]}\r\n                    hasActiveWork={inProgressRequests.length > 0}\r\n                    onView={() => setSelectedRequest(request)}\r\n                    onTakeRequest={() => handleTakeRequest(request.id)}\r\n                    onAccept={() => handleAccept(request.id)}\r\n                    onStartWork={() => handleStartWork(request.id)}\r\n                    onPauseWork={() => handlePauseWork(request.id)}\r\n                    onResumeWork={() => handleResumeWork(request.id)}\r\n                    onComplete={() => handleComplete(request.id)}\r\n                    onDecline={() => handleDeclineClick(request)}\r\n                    onReschedule={() => {\r\n                      setRequestToReschedule(request);\r\n                      setShowRescheduleModal(true);\r\n                    }}\r\n                    formatTime={formatTime}\r\n                  />\r\n                ))\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n      {/* Request Details Modal */}\r\n      {selectedRequest && !showDeclineModal && (\r\n        <RequestDetailsModal\r\n          request={selectedRequest}\r\n          timerSeconds={activeTimers[selectedRequest.id]}\r\n          onClose={() => setSelectedRequest(null)}\r\n          onTakeRequest={() => {\r\n            handleTakeRequest(selectedRequest.id);\r\n            setSelectedRequest(null);\r\n          }}\r\n          onAccept={() => {\r\n            handleAccept(selectedRequest.id);\r\n            setSelectedRequest(null);\r\n          }}\r\n          onStartWork={() => {\r\n            handleStartWork(selectedRequest.id);\r\n            setSelectedRequest(null);\r\n          }}\r\n          onComplete={() => {\r\n            handleComplete(selectedRequest.id);\r\n            setSelectedRequest(null);\r\n          }}\r\n          onDecline={() => handleDeclineClick(selectedRequest)}\r\n          onReschedule={() => {\r\n            setRequestToReschedule(selectedRequest);\r\n            setShowRescheduleModal(true);\r\n            setSelectedRequest(null);\r\n          }}\r\n          formatTime={formatTime}\r\n        />\r\n      )}\r\n\r\n      {/* Decline Request Modal */}\r\n      {showDeclineModal && requestToDecline && (\r\n        <DeclineRequestModal\r\n          request={requestToDecline}\r\n          onClose={() => {\r\n            setShowDeclineModal(false);\r\n            setRequestToDecline(null);\r\n          }}\r\n          onConfirm={handleDeclineConfirm}\r\n        />\r\n      )}\r\n\r\n      {/* Reschedule Request Modal */}\r\n      {showRescheduleModal && requestToReschedule && (\r\n        <RescheduleModal\r\n          request={requestToReschedule}\r\n          onClose={() => {\r\n            setShowRescheduleModal(false);\r\n            setRequestToReschedule(null);\r\n          }}\r\n          onSubmit={(data) => {\r\n            createRescheduleRequest({\r\n              requestId: requestToReschedule.id,\r\n              ...data\r\n            });\r\n            setShowRescheduleModal(false);\r\n            setRequestToReschedule(null);\r\n            setSelectedRequest(null);\r\n          }}\r\n          language={language}\r\n        />\r\n      )}\r\n\r\n      {/* Reschedule Response Modal */}\r\n      {showRescheduleResponseModal && rescheduleToRespond && (\r\n        <RescheduleResponseModal\r\n          reschedule={rescheduleToRespond}\r\n          onClose={() => {\r\n            setShowRescheduleResponseModal(false);\r\n            setRescheduleToRespond(null);\r\n          }}\r\n          onAccept={() => {\r\n            respondToRescheduleRequest(rescheduleToRespond.id, true);\r\n            setShowRescheduleResponseModal(false);\r\n            setRescheduleToRespond(null);\r\n          }}\r\n          onReject={(note) => {\r\n            respondToRescheduleRequest(rescheduleToRespond.id, false, note);\r\n            setShowRescheduleResponseModal(false);\r\n            setRescheduleToRespond(null);\r\n          }}\r\n          language={language}\r\n        />\r\n      )}\r\n\r\n      {/* Marketplace Order Details Modal */}\r\n      {selectedMarketplaceOrder && (\r\n        <MarketplaceOrderDetailsModal\r\n          order={selectedMarketplaceOrder}\r\n          onClose={() => setSelectedMarketplaceOrder(null)}\r\n          onUpdateStatus={updateMarketplaceOrderStatus}\r\n          language={language}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Request Card Component - Mobile optimized\r\nfunction RequestCard({\r\n  request,\r\n  timerSeconds,\r\n  hasActiveWork,\r\n  onView,\r\n  onTakeRequest,\r\n  onAccept,\r\n  onStartWork,\r\n  onPauseWork,\r\n  onResumeWork,\r\n  onComplete,\r\n  onDecline,\r\n  onReschedule,\r\n  formatTime\r\n}: {\r\n  request: Request;\r\n  timerSeconds?: number;\r\n  hasActiveWork?: boolean;\r\n  onView: () => void;\r\n  onTakeRequest: () => void;\r\n  onAccept: () => void;\r\n  onStartWork: () => void;\r\n  onPauseWork: () => void;\r\n  onResumeWork: () => void;\r\n  onComplete: () => void;\r\n  onDecline: () => void;\r\n  onReschedule: () => void;\r\n  formatTime: (s: number) => string;\r\n}) {\r\n  // Can decline/release if assigned, accepted, or in_progress (for illness, etc.)\r\n  const canDecline = ['assigned', 'accepted', 'in_progress'].includes(request.status);\r\n  const getPriorityColor = (priority: string) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'bg-red-500';\r\n      case 'high': return 'bg-orange-500';\r\n      case 'medium': return 'bg-amber-500';\r\n      default: return 'bg-gray-400';\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: RequestStatus) => {\r\n    const baseClass = \"px-2 py-1 rounded-lg text-xs font-medium\";\r\n    switch (status) {\r\n      case 'new': return <span className={`${baseClass} bg-purple-100 text-purple-700`}>Новая</span>;\r\n      case 'assigned': return <span className={`${baseClass} bg-blue-100 text-blue-700`}>Назначена</span>;\r\n      case 'accepted': return <span className={`${baseClass} bg-cyan-100 text-cyan-700`}>Принята</span>;\r\n      case 'in_progress': return <span className={`${baseClass} bg-amber-100 text-amber-700`}>В работе</span>;\r\n      case 'pending_approval': return <span className={`${baseClass} bg-purple-100 text-purple-700`}>Ожидает</span>;\r\n      case 'completed': return <span className={`${baseClass} bg-green-100 text-green-700`}>Выполнена</span>;\r\n      default: return <span className={baseClass}>{STATUS_LABELS[status]}</span>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"glass-card p-4 cursor-pointer hover:bg-white/40 active:bg-white/60 active:scale-[0.99] transition-all touch-manipulation\" onClick={onView}>\r\n      {/* Header with priority indicator */}\r\n      <div className=\"flex items-start gap-3\">\r\n        <div className={`w-2 h-full min-h-[20px] rounded-full ${getPriorityColor(request.priority)} flex-shrink-0`} />\r\n        <div className=\"flex-1 min-w-0\">\r\n          {/* Title and status */}\r\n          <div className=\"flex items-center gap-2 flex-wrap mb-2\">\r\n            <span className=\"text-xs text-gray-400\">#{request.number}</span>\r\n            {getStatusBadge(request.status)}\r\n            {request.status === 'in_progress' && timerSeconds !== undefined && (\r\n              <span className={`flex items-center gap-1 px-2 py-1 rounded-lg font-mono text-xs ${request.isPaused ? 'bg-gray-100 text-gray-600' : 'bg-amber-100 text-amber-700'}`}>\r\n                {request.isPaused ? <Pause className=\"w-3 h-3\" /> : <Timer className=\"w-3 h-3\" />}\r\n                {formatTime(timerSeconds)}\r\n              </span>\r\n            )}\r\n          </div>\r\n          <h3 className=\"font-semibold text-base md:text-lg leading-tight truncate\">{request.title}</h3>\r\n          <p className=\"text-gray-600 text-sm line-clamp-2 mt-1\">{request.description}</p>\r\n\r\n          {/* Contact info - compact on mobile */}\r\n          <div className=\"flex flex-wrap items-center gap-2 mt-3 text-xs md:text-sm text-gray-500\">\r\n            <span className=\"flex items-center gap-1\">\r\n              <User className=\"w-3.5 h-3.5\" />\r\n              <span className=\"truncate max-w-[100px]\">{request.residentName}</span>\r\n            </span>\r\n            <a\r\n              href={`tel:${request.residentPhone}`}\r\n              onClick={(e) => e.stopPropagation()}\r\n              className=\"flex items-center gap-1 text-primary-600 active:text-primary-800\"\r\n            >\r\n              <Phone className=\"w-3.5 h-3.5\" />\r\n              <span>Позвонить</span>\r\n            </a>\r\n          </div>\r\n\r\n          {/* Address and date */}\r\n          <div className=\"flex items-center gap-3 mt-2 text-xs text-gray-500\">\r\n            <span className=\"flex items-center gap-1 truncate\">\r\n              <MapPin className=\"w-3.5 h-3.5 flex-shrink-0\" />\r\n              <span className=\"truncate\">{formatAddress(request.address, request.apartment)}</span>\r\n            </span>\r\n          </div>\r\n\r\n          {/* Scheduled date if exists */}\r\n          {request.scheduledDate && (\r\n            <div className=\"mt-2 inline-flex items-center gap-2 px-2 py-1 bg-blue-50 text-blue-700 rounded-lg text-xs\">\r\n              <CalendarDays className=\"w-3.5 h-3.5\" />\r\n              <span>{new Date(request.scheduledDate).toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' })}</span>\r\n              {request.scheduledTime && <span>{request.scheduledTime}</span>}\r\n            </div>\r\n          )}\r\n\r\n          {/* Priority info - show for assigned/accepted/in_progress requests */}\r\n          {['assigned', 'accepted', 'in_progress'].includes(request.status) && (\r\n            <div className=\"mt-3 p-2 bg-gray-50 rounded-lg\">\r\n              <div className=\"text-xs text-gray-500\">\r\n                <span className=\"text-gray-400\">Приоритет: </span>\r\n                <span className={`font-medium ${\r\n                  request.priority === 'urgent' ? 'text-red-600' :\r\n                  request.priority === 'high' ? 'text-orange-600' :\r\n                  request.priority === 'medium' ? 'text-amber-600' : 'text-gray-600'\r\n                }`}>\r\n                  {request.priority === 'urgent' ? 'Срочный' :\r\n                   request.priority === 'high' ? 'Высокий' :\r\n                   request.priority === 'medium' ? 'Средний' : 'Низкий'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Reschedule button - prominent, similar to residents view */}\r\n          {['assigned', 'accepted', 'in_progress'].includes(request.status) && (\r\n            <button\r\n              onClick={(e) => { e.stopPropagation(); onReschedule(); }}\r\n              className=\"mt-3 w-full py-2.5 bg-amber-100 hover:bg-amber-200 text-amber-700 rounded-xl font-medium flex items-center justify-center gap-2 transition-all active:scale-[0.98] touch-manipulation\"\r\n            >\r\n              <RefreshCw className=\"w-4 h-4\" />\r\n              Перенести на другое время\r\n            </button>\r\n          )}\r\n\r\n          {/* Rating if completed */}\r\n          {request.status === 'completed' && request.rating && (\r\n            <div className=\"flex items-center gap-1 mt-2\">\r\n              {[1, 2, 3, 4, 5].map(star => (\r\n                <Star\r\n                  key={star}\r\n                  className={`w-4 h-4 ${star <= request.rating! ? 'text-yellow-500 fill-yellow-500' : 'text-gray-300'}`}\r\n                />\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Pending approval notice */}\r\n          {request.status === 'pending_approval' && (\r\n            <div className=\"mt-2 text-xs text-purple-600 flex items-center gap-1\">\r\n              <Clock className=\"w-3.5 h-3.5\" />\r\n              Ожидание подтверждения\r\n            </div>\r\n          )}\r\n\r\n          {/* Rejection info */}\r\n          {request.status === 'in_progress' && request.rejectionReason && (\r\n            <div className=\"mt-3 p-2 bg-red-50 border border-red-200 rounded-lg\">\r\n              <div className=\"flex items-center gap-1 text-red-700 font-medium text-xs\">\r\n                <AlertCircle className=\"w-3.5 h-3.5\" />\r\n                Требуется доработка\r\n              </div>\r\n              <p className=\"text-xs text-red-600 mt-1 line-clamp-2\">{request.rejectionReason}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Action buttons - full width on mobile */}\r\n      <div className=\"flex gap-2 mt-4 pt-3 border-t border-gray-200/50\" onClick={(e) => e.stopPropagation()}>\r\n        {canDecline && (\r\n          <button\r\n            onClick={onDecline}\r\n            className=\"py-3 px-4 text-red-600 bg-red-50 hover:bg-red-100 active:bg-red-200 rounded-xl font-medium text-sm flex items-center justify-center gap-2 transition-colors touch-manipulation\"\r\n          >\r\n            <XCircle className=\"w-4 h-4\" />\r\n            <span className=\"hidden md:inline\">{request.status === 'in_progress' ? 'Освободить' : 'Отказаться'}</span>\r\n          </button>\r\n        )}\r\n        {request.status === 'new' && (\r\n          <button\r\n            onClick={onTakeRequest}\r\n            className=\"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\r\n            style={{ background: 'linear-gradient(135deg, #8b5cf6, #7c3aed)' }}\r\n          >\r\n            <Hand className=\"w-5 h-5\" />\r\n            Взять заявку\r\n          </button>\r\n        )}\r\n        {request.status === 'assigned' && (\r\n          <button\r\n            onClick={onAccept}\r\n            className=\"flex-1 py-3 px-4 rounded-xl font-semibold bg-white border-2 border-gray-200 text-gray-700 flex items-center justify-center gap-2 active:scale-[0.98] active:bg-gray-50 transition-all touch-manipulation\"\r\n          >\r\n            <Check className=\"w-5 h-5\" />\r\n            Принять\r\n          </button>\r\n        )}\r\n        {request.status === 'accepted' && (\r\n          hasActiveWork ? (\r\n            <div className=\"flex-1 py-3 px-4 rounded-xl font-medium bg-gray-100 text-gray-500 flex items-center justify-center gap-2 text-sm\">\r\n              <AlertCircle className=\"w-4 h-4\" />\r\n              Сначала завершите текущую работу\r\n            </div>\r\n          ) : (\r\n            <button\r\n              onClick={onStartWork}\r\n              className=\"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\r\n              style={{ background: 'linear-gradient(135deg, #FFE500, #FFC700)', color: '#000' }}\r\n            >\r\n              <Play className=\"w-5 h-5\" />\r\n              Начать работу\r\n            </button>\r\n          )\r\n        )}\r\n        {request.status === 'in_progress' && (\r\n          <div className=\"flex-1 flex gap-2\">\r\n            {request.isPaused ? (\r\n              <button\r\n                onClick={onResumeWork}\r\n                className=\"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\r\n                style={{ background: 'linear-gradient(135deg, #3b82f6, #2563eb)' }}\r\n              >\r\n                <PlayCircle className=\"w-5 h-5\" />\r\n                Продолжить\r\n              </button>\r\n            ) : (\r\n              <button\r\n                onClick={onPauseWork}\r\n                className=\"py-3 px-4 rounded-xl font-semibold text-gray-700 bg-white border-2 border-gray-300 flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\r\n              >\r\n                <Pause className=\"w-5 h-5\" />\r\n              </button>\r\n            )}\r\n            <button\r\n              onClick={onComplete}\r\n              className=\"flex-1 py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\r\n              style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}\r\n            >\r\n              <Check className=\"w-5 h-5\" />\r\n              Завершить\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Request Details Modal\r\nfunction RequestDetailsModal({\r\n  request,\r\n  timerSeconds,\r\n  onClose,\r\n  onTakeRequest,\r\n  onAccept,\r\n  onStartWork,\r\n  onComplete,\r\n  onDecline,\r\n  onReschedule,\r\n  formatTime\r\n}: {\r\n  request: Request;\r\n  timerSeconds?: number;\r\n  onClose: () => void;\r\n  onTakeRequest: () => void;\r\n  onAccept: () => void;\r\n  onStartWork: () => void;\r\n  onComplete: () => void;\r\n  onDecline: () => void;\r\n  onReschedule: () => void;\r\n  formatTime: (s: number) => string;\r\n}) {\r\n  // Can decline/release if assigned, accepted, or in_progress (for illness, etc.)\r\n  const canDecline = ['assigned', 'accepted', 'in_progress'].includes(request.status);\r\n  // Can reschedule if assigned, accepted, or in_progress\r\n  const canReschedule = ['assigned', 'accepted', 'in_progress'].includes(request.status);\r\n  const formatDate = (dateStr: string) => {\r\n    return new Date(dateStr).toLocaleString('ru-RU', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const getPriorityLabel = (priority: string) => {\r\n    switch (priority) {\r\n      case 'urgent': return { label: 'Срочно', color: 'text-red-600 bg-red-50' };\r\n      case 'high': return { label: 'Высокий', color: 'text-orange-600 bg-orange-50' };\r\n      case 'medium': return { label: 'Средний', color: 'text-amber-600 bg-amber-50' };\r\n      default: return { label: 'Низкий', color: 'text-gray-600 bg-gray-50' };\r\n    }\r\n  };\r\n\r\n  const priority = getPriorityLabel(request.priority);\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"modal-content p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <div className=\"text-sm text-gray-500\">Заявка #{request.number}</div>\r\n            <h2 className=\"text-xl font-bold\">{request.title}</h2>\r\n          </div>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Active Timer Display */}\r\n        {request.status === 'in_progress' && timerSeconds !== undefined && (\r\n          <div className=\"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-3 h-3 bg-amber-500 rounded-full animate-pulse\" />\r\n                <span className=\"font-medium text-amber-700\">Работа в процессе</span>\r\n              </div>\r\n              <div className=\"text-3xl font-mono font-bold text-amber-600\">\r\n                {formatTime(timerSeconds)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Rejection Info - show if work was rejected */}\r\n        {request.status === 'in_progress' && request.rejectionReason && (\r\n          <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl\">\r\n            <div className=\"flex items-center gap-2 text-red-700 font-medium mb-2\">\r\n              <AlertCircle className=\"w-5 h-5\" />\r\n              <span>Работа отклонена - требуется доработка</span>\r\n              {request.rejectionCount && request.rejectionCount > 1 && (\r\n                <span className=\"text-xs bg-red-100 px-2 py-0.5 rounded\">\r\n                  {request.rejectionCount}-й раз\r\n                </span>\r\n              )}\r\n            </div>\r\n            <p className=\"text-red-600 mb-3\">\r\n              <span className=\"font-medium\">Причина отклонения:</span> {request.rejectionReason}\r\n            </p>\r\n            <p className=\"text-sm text-red-600/80\">\r\n              Пожалуйста, устраните проблему и завершите работу снова. После выполнения нажмите \"Завершить работу\".\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"space-y-4\">\r\n          {/* Priority & Category */}\r\n          <div className=\"flex items-center gap-3\">\r\n            <span className={`px-3 py-1 rounded-full text-sm font-medium ${priority.color}`}>\r\n              {priority.label}\r\n            </span>\r\n            <span className=\"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700\">\r\n              {SPECIALIZATION_LABELS[request.category]}\r\n            </span>\r\n          </div>\r\n\r\n          {/* Description */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-gray-500 mb-1\">Описание</h3>\r\n            <p className=\"text-gray-900\">{request.description}</p>\r\n          </div>\r\n\r\n          {/* Scheduled Date/Time */}\r\n          {request.scheduledDate && (\r\n            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\r\n              <h3 className=\"font-medium text-blue-800 flex items-center gap-2 mb-2\">\r\n                <CalendarDays className=\"w-4 h-4\" />\r\n                Желаемое время выполнения\r\n              </h3>\r\n              <div className=\"flex items-center gap-4 text-blue-700\">\r\n                <span>{new Date(request.scheduledDate).toLocaleDateString('ru-RU', { weekday: 'long', day: 'numeric', month: 'long' })}</span>\r\n                {request.scheduledTime && (\r\n                  <span className=\"flex items-center gap-1\">\r\n                    <Clock className=\"w-4 h-4\" />\r\n                    {request.scheduledTime}\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Resident Info */}\r\n          <div className=\"bg-white/30 rounded-xl p-4 space-y-3\">\r\n            <h3 className=\"font-medium\">Информация о жителе</h3>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <User className=\"w-4 h-4 text-gray-400\" />\r\n                <span>{request.residentName}</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Phone className=\"w-4 h-4 text-gray-400\" />\r\n                <a href={`tel:${request.residentPhone}`} className=\"text-primary-600 hover:underline\">\r\n                  {request.residentPhone}\r\n                </a>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <MapPin className=\"w-4 h-4 text-gray-400\" />\r\n                <span>{formatAddress(request.address, request.apartment)}</span>\r\n              </div>\r\n              {request.accessInfo && (\r\n                <div className=\"mt-2 p-2 bg-amber-50 border border-amber-200 rounded-lg\">\r\n                  <div className=\"text-xs text-amber-700 font-medium mb-1\">🔑 Доступ в квартиру:</div>\r\n                  <div className=\"text-sm text-amber-900\">{request.accessInfo}</div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Timeline */}\r\n          <div className=\"bg-white/30 rounded-xl p-4 space-y-3\">\r\n            <h3 className=\"font-medium\">История</h3>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-gray-500\">Создана</span>\r\n                <span>{formatDate(request.createdAt)}</span>\r\n              </div>\r\n              {request.assignedAt && (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-gray-500\">Назначена</span>\r\n                  <span>{formatDate(request.assignedAt)}</span>\r\n                </div>\r\n              )}\r\n              {request.acceptedAt && (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-gray-500\">Принята</span>\r\n                  <span>{formatDate(request.acceptedAt)}</span>\r\n                </div>\r\n              )}\r\n              {request.startedAt && (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-gray-500\">Работа начата</span>\r\n                  <span>{formatDate(request.startedAt)}</span>\r\n                </div>\r\n              )}\r\n              {request.completedAt && (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-gray-500\">Работа завершена</span>\r\n                  <span>{formatDate(request.completedAt)}</span>\r\n                </div>\r\n              )}\r\n              {request.approvedAt && (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-gray-500\">Подтверждена</span>\r\n                  <span>{formatDate(request.approvedAt)}</span>\r\n                </div>\r\n              )}\r\n              {request.workDuration && (\r\n                <div className=\"flex items-center justify-between border-t pt-2 mt-2\">\r\n                  <span className=\"text-gray-500\">Время работы</span>\r\n                  <span className=\"font-medium\">{Math.round(request.workDuration / 60)} мин</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Rating if completed */}\r\n          {request.status === 'completed' && request.rating && (\r\n            <div className=\"bg-white/30 rounded-xl p-4\">\r\n              <h3 className=\"font-medium mb-2\">Оценка</h3>\r\n              <div className=\"flex items-center gap-2\">\r\n                {[1, 2, 3, 4, 5].map(star => (\r\n                  <Star\r\n                    key={star}\r\n                    className={`w-6 h-6 ${star <= request.rating! ? 'text-yellow-500 fill-yellow-500' : 'text-gray-300'}`}\r\n                  />\r\n                ))}\r\n                <span className=\"ml-2 text-lg font-semibold\">{request.rating}/5</span>\r\n              </div>\r\n              {request.feedback && (\r\n                <p className=\"mt-2 text-gray-600 italic\">\"{request.feedback}\"</p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex flex-col gap-3 mt-6\">\r\n          <div className=\"flex gap-3\">\r\n            <a\r\n              href={`tel:${request.residentPhone}`}\r\n              className=\"btn-secondary flex-1 flex items-center justify-center gap-2\"\r\n            >\r\n              <Phone className=\"w-4 h-4\" />\r\n              Позвонить\r\n            </a>\r\n            {request.status === 'new' && (\r\n              <button\r\n                onClick={onTakeRequest}\r\n                className=\"btn-primary flex-1 flex items-center justify-center gap-2\"\r\n                style={{ background: 'linear-gradient(135deg, #8b5cf6, #7c3aed)' }}\r\n              >\r\n                <Hand className=\"w-4 h-4\" />\r\n                Взять заявку\r\n              </button>\r\n            )}\r\n            {request.status === 'assigned' && (\r\n              <button onClick={onAccept} className=\"btn-primary flex-1 flex items-center justify-center gap-2\">\r\n                <Check className=\"w-4 h-4\" />\r\n                Принять заявку\r\n              </button>\r\n            )}\r\n            {request.status === 'accepted' && (\r\n              <button onClick={onStartWork} className=\"btn-primary flex-1 flex items-center justify-center gap-2\">\r\n                <Play className=\"w-4 h-4\" />\r\n                Начать работу\r\n              </button>\r\n            )}\r\n            {request.status === 'in_progress' && (\r\n              <button\r\n                onClick={onComplete}\r\n                className=\"btn-primary flex-1 flex items-center justify-center gap-2\"\r\n                style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}\r\n              >\r\n                <Check className=\"w-4 h-4\" />\r\n                Завершить\r\n              </button>\r\n            )}\r\n          </div>\r\n          {canReschedule && (\r\n            <button\r\n              onClick={onReschedule}\r\n              className=\"w-full py-3 bg-amber-100 hover:bg-amber-200 text-amber-700 rounded-xl font-medium flex items-center justify-center gap-2 transition-all\"\r\n            >\r\n              <RefreshCw className=\"w-4 h-4\" />\r\n              Перенести на другое время\r\n            </button>\r\n          )}\r\n          {canDecline && (\r\n            <button\r\n              onClick={onDecline}\r\n              className=\"w-full py-2 px-4 rounded-xl font-medium text-red-600 border border-red-300 hover:bg-red-50 transition-colors flex items-center justify-center gap-2\"\r\n            >\r\n              <XCircle className=\"w-4 h-4\" />\r\n              {request.status === 'in_progress' ? 'Освободить заявку' : 'Отказаться от заявки'}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Decline Request Modal (for executors)\r\nfunction DeclineRequestModal({\r\n  request,\r\n  onClose,\r\n  onConfirm\r\n}: {\r\n  request: Request;\r\n  onClose: () => void;\r\n  onConfirm: (reason: string) => void;\r\n}) {\r\n  const [reason, setReason] = useState('');\r\n  const isInProgress = request.status === 'in_progress';\r\n\r\n  const predefinedReasons = isInProgress ? [\r\n    'Заболел/Не могу продолжить работу',\r\n    'Необходима помощь другого специалиста',\r\n    'Нет необходимых материалов для завершения',\r\n    'Срочные личные обстоятельства',\r\n    'Требуется другая специализация',\r\n  ] : [\r\n    'Не смогу прибыть в указанное время',\r\n    'Нет необходимых материалов/инструментов',\r\n    'Заболел/Не могу работать',\r\n    'Слишком далеко от текущего местоположения',\r\n    'Загружен другими заявками',\r\n  ];\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"glass-card p-6 w-full max-w-md mx-4\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold text-red-600 flex items-center gap-2\">\r\n            <Ban className=\"w-5 h-5\" />\r\n            {isInProgress ? 'Освободить заявку' : 'Отказаться от заявки'}\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg\">\r\n          <p className=\"text-sm text-amber-800\">\r\n            Заявка <strong>#{request.number}</strong> будет возвращена в очередь и может быть назначена другому исполнителю.\r\n            {isInProgress && ' Прогресс работы будет сброшен.'}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Причина отказа\r\n            </label>\r\n            <div className=\"flex flex-wrap gap-2 mb-3\">\r\n              {predefinedReasons.map((r) => (\r\n                <button\r\n                  key={r}\r\n                  type=\"button\"\r\n                  onClick={() => setReason(r)}\r\n                  className={`px-3 py-1.5 text-sm rounded-lg transition-colors ${\r\n                    reason === r\r\n                      ? 'bg-red-500 text-white'\r\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-700'\r\n                  }`}\r\n                >\r\n                  {r}\r\n                </button>\r\n              ))}\r\n            </div>\r\n            <textarea\r\n              value={reason}\r\n              onChange={(e) => setReason(e.target.value)}\r\n              className=\"input-field min-h-[80px]\"\r\n              placeholder=\"Или укажите свою причину...\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-3\">\r\n            <button onClick={onClose} className=\"btn-secondary flex-1\">\r\n              Отмена\r\n            </button>\r\n            <button\r\n              onClick={() => reason.trim() && onConfirm(reason)}\r\n              className=\"flex-1 py-2 px-4 rounded-xl font-medium bg-red-500 text-white hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              disabled={!reason.trim()}\r\n            >\r\n              <Ban className=\"w-4 h-4 mr-2 inline\" />\r\n              {isInProgress ? 'Освободить' : 'Отказаться'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Reschedule Request Modal for Executor\r\nfunction RescheduleModal({\r\n  request,\r\n  onClose,\r\n  onSubmit,\r\n  language\r\n}: {\r\n  request: Request;\r\n  onClose: () => void;\r\n  onSubmit: (data: { proposedDate: string; proposedTime: string; reason: RescheduleReason; reasonText?: string }) => void;\r\n  language: 'ru' | 'uz';\r\n}) {\r\n  const [proposedDate, setProposedDate] = useState('');\r\n  const [proposedTime, setProposedTime] = useState('');\r\n  const [reason, setReason] = useState<RescheduleReason>('busy_time');\r\n  const [reasonText, setReasonText] = useState('');\r\n\r\n  const today = new Date().toISOString().split('T')[0];\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"glass-card p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold text-amber-600 flex items-center gap-2\">\r\n            <RefreshCw className=\"w-5 h-5\" />\r\n            {language === 'ru' ? 'Перенести заявку' : 'Arizani ko\\'chirish'}\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n          <p className=\"text-sm text-blue-800\">\r\n            {language === 'ru'\r\n              ? `Предложите новое время для заявки #${request.number}. Житель получит уведомление.`\r\n              : `#${request.number} ariza uchun yangi vaqt taklif qiling.`}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              {language === 'ru' ? 'Причина переноса' : 'Ko\\'chirish sababi'}\r\n            </label>\r\n            <div className=\"grid grid-cols-1 gap-2\">\r\n              {/* Filter out 'not_at_home' - this reason is only for residents, not executors */}\r\n              {(Object.keys(RESCHEDULE_REASON_LABELS) as RescheduleReason[])\r\n                .filter(r => r !== 'not_at_home')\r\n                .map((r) => (\r\n                <button\r\n                  key={r}\r\n                  type=\"button\"\r\n                  onClick={() => setReason(r)}\r\n                  className={`px-3 py-2.5 text-sm rounded-xl transition-colors text-left ${\r\n                    reason === r\r\n                      ? 'bg-amber-500 text-white'\r\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-700'\r\n                  }`}\r\n                >\r\n                  {language === 'ru' ? RESCHEDULE_REASON_LABELS[r].label : RESCHEDULE_REASON_LABELS[r].labelUz}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {reason === 'other' && (\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {language === 'ru' ? 'Уточните причину' : 'Sababni aniqlashtiring'}\r\n              </label>\r\n              <textarea\r\n                value={reasonText}\r\n                onChange={(e) => setReasonText(e.target.value)}\r\n                className=\"input-field min-h-[80px]\"\r\n                placeholder={language === 'ru' ? 'Опишите причину...' : 'Sababni yozing...'}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {language === 'ru' ? 'Новая дата' : 'Yangi sana'}\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                min={today}\r\n                value={proposedDate}\r\n                onChange={(e) => setProposedDate(e.target.value)}\r\n                className=\"input-field\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {language === 'ru' ? 'Время' : 'Vaqt'}\r\n              </label>\r\n              <input\r\n                type=\"time\"\r\n                value={proposedTime}\r\n                onChange={(e) => setProposedTime(e.target.value)}\r\n                className=\"input-field\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={onClose} className=\"btn-secondary flex-1\">\r\n              {language === 'ru' ? 'Отмена' : 'Bekor qilish'}\r\n            </button>\r\n            <button\r\n              onClick={() => proposedDate && proposedTime && onSubmit({ proposedDate, proposedTime, reason, reasonText: reason === 'other' ? reasonText : undefined })}\r\n              className=\"flex-1 py-2.5 px-4 rounded-xl font-medium bg-amber-500 text-white hover:bg-amber-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n              disabled={!proposedDate || !proposedTime || (reason === 'other' && !reasonText.trim())}\r\n            >\r\n              <Send className=\"w-4 h-4\" />\r\n              {language === 'ru' ? 'Отправить' : 'Yuborish'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Reschedule Response Modal for Executor\r\nfunction RescheduleResponseModal({\r\n  reschedule,\r\n  onClose,\r\n  onAccept,\r\n  onReject,\r\n  language\r\n}: {\r\n  reschedule: RescheduleRequest;\r\n  onClose: () => void;\r\n  onAccept: () => void;\r\n  onReject: (note?: string) => void;\r\n  language: 'ru' | 'uz';\r\n}) {\r\n  const [rejectNote, setRejectNote] = useState('');\r\n  const [showRejectForm, setShowRejectForm] = useState(false);\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"glass-card p-6 w-full max-w-md mx-4\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold text-amber-600 flex items-center gap-2\">\r\n            <RefreshCw className=\"w-5 h-5\" />\r\n            {language === 'ru' ? 'Запрос на перенос' : 'Ko\\'chirish so\\'rovi'}\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div className=\"p-4 bg-amber-50 border border-amber-200 rounded-xl\">\r\n            <div className=\"text-sm text-gray-600 mb-1\">\r\n              {language === 'ru' ? 'Заявка' : 'Ariza'} #{reschedule.requestNumber}\r\n            </div>\r\n            <div className=\"font-medium text-gray-800\">\r\n              {reschedule.initiatorName} {language === 'ru' ? 'предлагает перенести на:' : 'taklif qiladi:'}\r\n            </div>\r\n            <div className=\"text-xl font-bold text-amber-600 mt-2\">\r\n              {reschedule.proposedDate} в {reschedule.proposedTime}\r\n            </div>\r\n            <div className=\"text-sm text-gray-600 mt-2\">\r\n              <strong>{language === 'ru' ? 'Причина:' : 'Sabab:'}</strong>{' '}\r\n              {language === 'ru'\r\n                ? RESCHEDULE_REASON_LABELS[reschedule.reason].label\r\n                : RESCHEDULE_REASON_LABELS[reschedule.reason].labelUz}\r\n              {reschedule.reasonText && ` - ${reschedule.reasonText}`}\r\n            </div>\r\n          </div>\r\n\r\n          {reschedule.currentDate && (\r\n            <div className=\"text-sm text-gray-600 text-center\">\r\n              {language === 'ru' ? 'Текущее время:' : 'Hozirgi vaqt:'} {reschedule.currentDate} {reschedule.currentTime}\r\n            </div>\r\n          )}\r\n\r\n          {showRejectForm ? (\r\n            <div className=\"space-y-3\">\r\n              <label className=\"block text-sm font-medium text-gray-700\">\r\n                {language === 'ru' ? 'Причина отказа (необязательно)' : 'Rad etish sababi (ixtiyoriy)'}\r\n              </label>\r\n              <textarea\r\n                value={rejectNote}\r\n                onChange={(e) => setRejectNote(e.target.value)}\r\n                className=\"input-field min-h-[80px]\"\r\n                placeholder={language === 'ru' ? 'Укажите причину...' : 'Sababni yozing...'}\r\n              />\r\n              <div className=\"flex gap-3\">\r\n                <button onClick={() => setShowRejectForm(false)} className=\"btn-secondary flex-1\">\r\n                  {language === 'ru' ? 'Назад' : 'Orqaga'}\r\n                </button>\r\n                <button\r\n                  onClick={() => onReject(rejectNote || undefined)}\r\n                  className=\"flex-1 py-2.5 px-4 rounded-xl font-medium bg-red-500 text-white hover:bg-red-600 transition-colors\"\r\n                >\r\n                  {language === 'ru' ? 'Отклонить' : 'Rad etish'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => setShowRejectForm(true)}\r\n                className=\"flex-1 py-3 px-4 rounded-xl font-medium bg-red-100 text-red-600 hover:bg-red-200 transition-colors\"\r\n              >\r\n                {language === 'ru' ? 'Отклонить' : 'Rad etish'}\r\n              </button>\r\n              <button\r\n                onClick={onAccept}\r\n                className=\"flex-1 py-3 px-4 rounded-xl font-medium bg-green-500 text-white hover:bg-green-600 transition-colors flex items-center justify-center gap-2\"\r\n              >\r\n                <CheckCircle className=\"w-4 h-4\" />\r\n                {language === 'ru' ? 'Принять' : 'Qabul qilish'}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Marketplace Order Card Component\r\nfunction MarketplaceOrderCard({\r\n  order,\r\n  onView,\r\n  onUpdateStatus,\r\n  language,\r\n}: {\r\n  order: MarketplaceOrder;\r\n  onView: () => void;\r\n  onUpdateStatus: (orderId: string, status: string) => void;\r\n  language: 'ru' | 'uz';\r\n}) {\r\n  const MARKETPLACE_ORDER_STATUS_LABELS: Record<string, { label: string; labelUz: string; color: string; icon: typeof Package }> = {\r\n    confirmed: { label: 'Назначен', labelUz: 'Tayinlangan', color: 'bg-indigo-100 text-indigo-700', icon: Package },\r\n    preparing: { label: 'Готовится', labelUz: 'Tayyorlanmoqda', color: 'bg-amber-100 text-amber-700', icon: ChefHat },\r\n    ready: { label: 'Готов', labelUz: 'Tayyor', color: 'bg-green-100 text-green-700', icon: CheckCircle },\r\n    delivering: { label: 'Доставляется', labelUz: 'Yetkazilmoqda', color: 'bg-blue-100 text-blue-700', icon: Truck },\r\n    delivered: { label: 'Доставлен', labelUz: 'Yetkazildi', color: 'bg-gray-100 text-gray-700', icon: CheckCircle },\r\n  };\r\n\r\n  const statusInfo = MARKETPLACE_ORDER_STATUS_LABELS[order.status] || MARKETPLACE_ORDER_STATUS_LABELS.confirmed;\r\n  const StatusIcon = statusInfo.icon;\r\n\r\n  const getNextStatus = () => {\r\n    const transitions: Record<string, string> = {\r\n      confirmed: 'preparing',\r\n      preparing: 'ready',\r\n      ready: 'delivering',\r\n      delivering: 'delivered',\r\n    };\r\n    return transitions[order.status];\r\n  };\r\n\r\n  const getNextStatusLabel = () => {\r\n    const labels: Record<string, { ru: string; uz: string }> = {\r\n      preparing: { ru: 'Начать готовить', uz: 'Tayyorlashni boshlash' },\r\n      ready: { ru: 'Готово к доставке', uz: 'Yetkazishga tayyor' },\r\n      delivering: { ru: 'Начать доставку', uz: 'Yetkazishni boshlash' },\r\n      delivered: { ru: 'Доставлено', uz: 'Yetkazildi' },\r\n    };\r\n    const next = getNextStatus();\r\n    return next ? labels[next] : null;\r\n  };\r\n\r\n  const nextStatusLabel = getNextStatusLabel();\r\n\r\n  return (\r\n    <div className=\"glass-card p-4 cursor-pointer hover:bg-white/40 active:bg-white/60 active:scale-[0.99] transition-all touch-manipulation\" onClick={onView}>\r\n      {/* Header */}\r\n      <div className=\"flex items-start gap-3\">\r\n        <div className=\"w-12 h-12 bg-gradient-to-br from-orange-400 to-amber-500 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n          <ShoppingBag className=\"w-6 h-6 text-white\" />\r\n        </div>\r\n        <div className=\"flex-1 min-w-0\">\r\n          <div className=\"flex items-center gap-2 flex-wrap mb-1\">\r\n            <span className=\"text-sm font-semibold text-gray-900\">#{order.order_number}</span>\r\n            <span className={`px-2 py-0.5 rounded-lg text-xs font-medium flex items-center gap-1 ${statusInfo.color}`}>\r\n              <StatusIcon className=\"w-3 h-3\" />\r\n              {language === 'ru' ? statusInfo.label : statusInfo.labelUz}\r\n            </span>\r\n          </div>\r\n          <div className=\"text-sm text-gray-600\">\r\n            {order.items_count} {language === 'ru' ? 'товар(ов)' : 'mahsulot'} • {order.total_amount.toLocaleString()} сум\r\n          </div>\r\n\r\n          {/* Customer Info */}\r\n          <div className=\"flex flex-wrap items-center gap-2 mt-2 text-xs text-gray-500\">\r\n            <span className=\"flex items-center gap-1\">\r\n              <User className=\"w-3.5 h-3.5\" />\r\n              <span className=\"truncate max-w-[120px]\">{order.user_name}</span>\r\n            </span>\r\n            <a\r\n              href={`tel:${order.user_phone}`}\r\n              onClick={(e) => e.stopPropagation()}\r\n              className=\"flex items-center gap-1 text-primary-600 active:text-primary-800\"\r\n            >\r\n              <Phone className=\"w-3.5 h-3.5\" />\r\n              <span>{language === 'ru' ? 'Позвонить' : 'Qo\\'ng\\'iroq'}</span>\r\n            </a>\r\n          </div>\r\n\r\n          {/* Address */}\r\n          <div className=\"flex items-center gap-1 mt-2 text-xs text-gray-500\">\r\n            <MapPin className=\"w-3.5 h-3.5 flex-shrink-0\" />\r\n            <span className=\"truncate\">{order.delivery_address}</span>\r\n          </div>\r\n\r\n          {/* Created At */}\r\n          <div className=\"flex items-center gap-1 mt-1 text-xs text-gray-400\">\r\n            <Clock className=\"w-3 h-3\" />\r\n            {new Date(order.created_at).toLocaleString('ru-RU', { day: '2-digit', month: '2-digit', hour: '2-digit', minute: '2-digit' })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Action Button */}\r\n      {nextStatusLabel && (\r\n        <div className=\"mt-4 pt-3 border-t border-gray-200/50\" onClick={(e) => e.stopPropagation()}>\r\n          <button\r\n            onClick={() => onUpdateStatus(order.id, getNextStatus())}\r\n            className=\"w-full py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\r\n            style={{\r\n              background: order.status === 'confirmed' ? 'linear-gradient(135deg, #f59e0b, #d97706)' :\r\n                order.status === 'preparing' ? 'linear-gradient(135deg, #10b981, #059669)' :\r\n                order.status === 'ready' ? 'linear-gradient(135deg, #3b82f6, #2563eb)' :\r\n                'linear-gradient(135deg, #10b981, #059669)'\r\n            }}\r\n          >\r\n            {order.status === 'confirmed' && <ChefHat className=\"w-5 h-5\" />}\r\n            {order.status === 'preparing' && <CheckCircle className=\"w-5 h-5\" />}\r\n            {order.status === 'ready' && <Truck className=\"w-5 h-5\" />}\r\n            {order.status === 'delivering' && <CheckCircle className=\"w-5 h-5\" />}\r\n            {language === 'ru' ? nextStatusLabel.ru : nextStatusLabel.uz}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Marketplace Order Details Modal\r\nfunction MarketplaceOrderDetailsModal({\r\n  order,\r\n  onClose,\r\n  onUpdateStatus,\r\n  language,\r\n}: {\r\n  order: MarketplaceOrder;\r\n  onClose: () => void;\r\n  onUpdateStatus: (orderId: string, status: string) => void;\r\n  language: 'ru' | 'uz';\r\n}) {\r\n  const MARKETPLACE_ORDER_STATUS_LABELS: Record<string, { label: string; labelUz: string; color: string }> = {\r\n    confirmed: { label: 'Назначен', labelUz: 'Tayinlangan', color: 'bg-indigo-100 text-indigo-700' },\r\n    preparing: { label: 'Готовится', labelUz: 'Tayyorlanmoqda', color: 'bg-amber-100 text-amber-700' },\r\n    ready: { label: 'Готов', labelUz: 'Tayyor', color: 'bg-green-100 text-green-700' },\r\n    delivering: { label: 'Доставляется', labelUz: 'Yetkazilmoqda', color: 'bg-blue-100 text-blue-700' },\r\n    delivered: { label: 'Доставлен', labelUz: 'Yetkazildi', color: 'bg-gray-100 text-gray-700' },\r\n  };\r\n\r\n  const statusInfo = MARKETPLACE_ORDER_STATUS_LABELS[order.status] || MARKETPLACE_ORDER_STATUS_LABELS.confirmed;\r\n\r\n  const getNextStatus = () => {\r\n    const transitions: Record<string, string> = {\r\n      confirmed: 'preparing',\r\n      preparing: 'ready',\r\n      ready: 'delivering',\r\n      delivering: 'delivered',\r\n    };\r\n    return transitions[order.status];\r\n  };\r\n\r\n  const getNextStatusLabel = () => {\r\n    const labels: Record<string, { ru: string; uz: string; icon: typeof Package }> = {\r\n      preparing: { ru: 'Начать готовить', uz: 'Tayyorlashni boshlash', icon: ChefHat },\r\n      ready: { ru: 'Готово к доставке', uz: 'Yetkazishga tayyor', icon: CheckCircle },\r\n      delivering: { ru: 'Начать доставку', uz: 'Yetkazishni boshlash', icon: Truck },\r\n      delivered: { ru: 'Доставлено', uz: 'Yetkazildi', icon: CheckCircle },\r\n    };\r\n    const next = getNextStatus();\r\n    return next ? labels[next] : null;\r\n  };\r\n\r\n  const nextStatusInfo = getNextStatusLabel();\r\n  const NextIcon = nextStatusInfo?.icon || Package;\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"modal-content p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <div className=\"text-sm text-gray-500\">\r\n              {language === 'ru' ? 'Заказ магазина' : 'Do\\'kon buyurtmasi'} #{order.order_number}\r\n            </div>\r\n            <div className=\"flex items-center gap-2 mt-1\">\r\n              <span className={`px-2.5 py-1 rounded-lg text-sm font-medium ${statusInfo.color}`}>\r\n                {language === 'ru' ? statusInfo.label : statusInfo.labelUz}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          {/* Order Info */}\r\n          <div className=\"bg-orange-50 border border-orange-200 rounded-xl p-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-12 h-12 bg-gradient-to-br from-orange-400 to-amber-500 rounded-xl flex items-center justify-center\">\r\n                <ShoppingBag className=\"w-6 h-6 text-white\" />\r\n              </div>\r\n              <div>\r\n                <div className=\"font-semibold text-gray-900\">\r\n                  {order.items_count} {language === 'ru' ? 'товар(ов)' : 'mahsulot'}\r\n                </div>\r\n                <div className=\"text-lg font-bold text-orange-600\">\r\n                  {order.total_amount.toLocaleString()} сум\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Customer Info */}\r\n          <div className=\"bg-white/30 rounded-xl p-4 space-y-3\">\r\n            <h3 className=\"font-medium\">{language === 'ru' ? 'Информация о клиенте' : 'Mijoz haqida'}</h3>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <User className=\"w-4 h-4 text-gray-400\" />\r\n                <span>{order.user_name}</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Phone className=\"w-4 h-4 text-gray-400\" />\r\n                <a href={`tel:${order.user_phone}`} className=\"text-primary-600 hover:underline\">\r\n                  {order.user_phone}\r\n                </a>\r\n              </div>\r\n              <div className=\"flex items-start gap-2\">\r\n                <MapPin className=\"w-4 h-4 text-gray-400 mt-0.5\" />\r\n                <span>{order.delivery_address}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Delivery Notes */}\r\n          {order.delivery_notes && (\r\n            <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4\">\r\n              <h3 className=\"font-medium text-amber-800 mb-2\">\r\n                {language === 'ru' ? 'Примечание к доставке' : 'Yetkazish uchun eslatma'}\r\n              </h3>\r\n              <p className=\"text-sm text-amber-700\">{order.delivery_notes}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Timeline */}\r\n          <div className=\"bg-white/30 rounded-xl p-4 space-y-3\">\r\n            <h3 className=\"font-medium\">{language === 'ru' ? 'История' : 'Tarix'}</h3>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-gray-500\">{language === 'ru' ? 'Создан' : 'Yaratildi'}</span>\r\n                <span>{new Date(order.created_at).toLocaleString('ru-RU', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' })}</span>\r\n              </div>\r\n              {order.assigned_at && (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-gray-500\">{language === 'ru' ? 'Назначен' : 'Tayinlandi'}</span>\r\n                  <span>{new Date(order.assigned_at).toLocaleString('ru-RU', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' })}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex flex-col gap-3 mt-6\">\r\n          <div className=\"flex gap-3\">\r\n            <a\r\n              href={`tel:${order.user_phone}`}\r\n              className=\"btn-secondary flex-1 flex items-center justify-center gap-2\"\r\n            >\r\n              <Phone className=\"w-4 h-4\" />\r\n              {language === 'ru' ? 'Позвонить' : 'Qo\\'ng\\'iroq'}\r\n            </a>\r\n          </div>\r\n\r\n          {nextStatusInfo && (\r\n            <button\r\n              onClick={() => {\r\n                onUpdateStatus(order.id, getNextStatus());\r\n              }}\r\n              className=\"w-full py-3 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform\"\r\n              style={{\r\n                background: order.status === 'confirmed' ? 'linear-gradient(135deg, #f59e0b, #d97706)' :\r\n                  order.status === 'preparing' ? 'linear-gradient(135deg, #10b981, #059669)' :\r\n                  order.status === 'ready' ? 'linear-gradient(135deg, #3b82f6, #2563eb)' :\r\n                  'linear-gradient(135deg, #10b981, #059669)'\r\n              }}\r\n            >\r\n              <NextIcon className=\"w-5 h-5\" />\r\n              {language === 'ru' ? nextStatusInfo.ru : nextStatusInfo.uz}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":["ExecutorDashboard","user","useAuthStore","requests","executors","acceptRequest","startWork","pauseWork","resumeWork","completeWork","assignRequest","declineRequest","createRescheduleRequest","respondToRescheduleRequest","getPendingRescheduleForUser","fetchRequests","fetchPendingReschedules","useDataStore","language","useLanguageStore","activeTab","setActiveTab","useState","liveStats","setLiveStats","isLoadingStats","setIsLoadingStats","marketplaceOrders","setMarketplaceOrders","isLoadingOrders","setIsLoadingOrders","selectedMarketplaceOrder","setSelectedMarketplaceOrder","fetchMarketplaceOrders","useCallback","response","apiRequest","updateMarketplaceOrderStatus","orderId","status","useEffect","interval","selectedRequest","setSelectedRequest","activeTimers","setActiveTimers","showDeclineModal","setShowDeclineModal","requestToDecline","setRequestToDecline","showRescheduleModal","setShowRescheduleModal","requestToReschedule","setRequestToReschedule","showRescheduleResponseModal","setShowRescheduleResponseModal","rescheduleToRespond","setRescheduleToRespond","currentExecutor","e","fetchStats","executorsApi","mySpecialization","myRequests","r","availableRequests","assignedRequests","inProgressRequests","completedRequests","pendingReschedules","parseUTCDateTime","dateStr","utcStr","newTimers","req","startTime","totalPausedTime","pausedAt","elapsed","baseTabs","FileText","Clock","Play","CheckCircle","tabs","ShoppingBag","currentRequests","formatTime","seconds","hrs","mins","secs","handleTakeRequest","requestId","handleAccept","handleStartWork","handlePauseWork","handleResumeWork","handleComplete","handleDeclineClick","request","handleDeclineConfirm","reason","jsxs","jsx","SPECIALIZATION_LABELS","RefreshCw","reschedule","ChevronRight","Star","TrendingUp","Timer","PlayCircle","Pause","Check","tab","order","MarketplaceOrderCard","RequestCard","RequestDetailsModal","DeclineRequestModal","RescheduleModal","data","RescheduleResponseModal","note","MarketplaceOrderDetailsModal","timerSeconds","hasActiveWork","onView","onTakeRequest","onAccept","onStartWork","onPauseWork","onResumeWork","onComplete","onDecline","onReschedule","canDecline","getPriorityColor","priority","getStatusBadge","baseClass","STATUS_LABELS","User","Phone","MapPin","CalendarDays","star","AlertCircle","XCircle","Hand","onClose","canReschedule","formatDate","X","formatAddress","onConfirm","setReason","isInProgress","predefinedReasons","Ban","onSubmit","proposedDate","setProposedDate","proposedTime","setProposedTime","reasonText","setReasonText","today","RESCHEDULE_REASON_LABELS","Send","onReject","rejectNote","setRejectNote","showRejectForm","setShowRejectForm","onUpdateStatus","MARKETPLACE_ORDER_STATUS_LABELS","Package","ChefHat","Truck","statusInfo","StatusIcon","getNextStatus","nextStatusLabel","labels","next","nextStatusInfo","NextIcon"],"mappings":"4kBAyCO,SAASA,IAAoB,CAClC,KAAM,CAAE,KAAAC,CAAA,EAASC,GAAA,EACX,CAAE,SAAAC,EAAU,UAAAC,EAAW,cAAAC,EAAe,UAAAC,EAAW,UAAAC,EAAW,WAAAC,EAAY,aAAAC,EAAc,cAAAC,EAAe,eAAAC,EAAgB,wBAAAC,EAAyB,2BAAAC,EAA4B,4BAAAC,EAA6B,cAAAC,EAAe,wBAAAC,CAAA,EAA4BC,GAAA,EAClP,CAAE,SAAAC,CAAA,EAAaC,GAAA,EACf,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAiF,WAAW,EAGxH,CAACC,EAAWC,EAAY,EAAIF,EAAAA,SAA+B,IAAI,EAC/D,CAACG,EAAgBC,EAAiB,EAAIJ,EAAAA,SAAS,EAAI,EAGnD,CAACK,EAAmBC,EAAoB,EAAIN,EAAAA,SAA6B,CAAA,CAAE,EAC3E,CAACO,GAAiBC,EAAkB,EAAIR,EAAAA,SAAS,EAAK,EACtD,CAACS,GAA0BC,CAA2B,EAAIV,EAAAA,SAAkC,IAAI,EAGhGW,EAAyBC,EAAAA,YAAY,SAAY,CACrDJ,GAAmB,EAAI,EACvB,GAAI,CACF,MAAMK,EAAW,MAAMC,GAAW,kCAAkC,EACpER,GAAqBO,EAAS,QAAU,EAAE,CAC5C,MAAgB,CAEhB,QAAA,CACEL,GAAmB,EAAK,CAC1B,CACF,EAAG,CAAA,CAAE,EAGCO,GAA+B,MAAOC,EAAiBC,IAAmB,CAC9E,GAAI,CACF,MAAMH,GAAW,oCAAoCE,CAAO,GAAI,CAC9D,OAAQ,QACR,KAAM,KAAK,UAAU,CAAE,OAAAC,EAAQ,CAAA,CAChC,EACD,MAAMN,EAAA,EACND,EAA4B,IAAI,CAClC,MAAgB,CAEd,MAAM,+BAA+B,CACvC,CACF,EAGAQ,EAAAA,UAAU,IAAM,CACdzB,EAAA,EACAC,EAAA,EAEIf,GAAM,iBAAmB,WAC3BgC,EAAA,EAEF,MAAMQ,EAAW,YAAY,IAAM,CACjCzB,EAAA,EACIf,GAAM,iBAAmB,WAC3BgC,EAAA,CAEJ,EAAG,GAAK,EACR,MAAO,IAAM,cAAcQ,CAAQ,CACrC,EAAG,CAAC1B,EAAeC,EAAyBiB,EAAwBhC,GAAM,cAAc,CAAC,EACzF,KAAM,CAACyC,EAAiBC,CAAkB,EAAIrB,EAAAA,SAAyB,IAAI,EACrE,CAACsB,EAAcC,EAAe,EAAIvB,EAAAA,SAAiC,CAAA,CAAE,EACrE,CAACwB,GAAkBC,CAAmB,EAAIzB,EAAAA,SAAS,EAAK,EACxD,CAAC0B,EAAkBC,CAAmB,EAAI3B,EAAAA,SAAyB,IAAI,EACvE,CAAC4B,GAAqBC,CAAsB,EAAI7B,EAAAA,SAAS,EAAK,EAC9D,CAAC8B,EAAqBC,CAAsB,EAAI/B,EAAAA,SAAyB,IAAI,EAC7E,CAACgC,GAA6BC,CAA8B,EAAIjC,EAAAA,SAAS,EAAK,EAC9E,CAACkC,EAAqBC,CAAsB,EAAInC,EAAAA,SAAmC,IAAI,EAGvFoC,EAAkBtD,EAAU,QAAUuD,EAAE,QAAU1D,GAAM,KAAK,EAGnEuC,EAAAA,UAAU,IAAM,CACd,MAAMoB,EAAa,SAAY,CAC7B,GAAK3D,GAAM,GACX,CAAAyB,GAAkB,EAAI,EACtB,GAAI,CACF,MAAMS,EAAW,MAAM0B,GAAa,SAAS5D,EAAK,EAAE,EACpDuB,GAAaW,EAAS,KAAK,CAC7B,MAAgB,CAEhB,QAAA,CACET,GAAkB,EAAK,CACzB,EACF,EAEAkC,EAAA,EAEA,MAAMnB,EAAW,YAAYmB,EAAY,GAAK,EAC9C,MAAO,IAAM,cAAcnB,CAAQ,CACrC,EAAG,CAACxC,GAAM,EAAE,CAAC,EAGb,MAAM6D,GAAmBJ,GAAiB,gBAAkBzD,GAAM,eAI5D8D,EAAa5D,EAAS,UAAY6D,EAAE,aAAe/D,GAAM,EAAE,EAG3DgE,GAAoB9D,EAAS,OAAO6D,GACxCA,EAAE,SAAW,OAASA,EAAE,WAAaF,EAAA,EAGjCI,GAAmBH,EAAW,OAAOC,GAAKA,EAAE,SAAW,YAAcA,EAAE,SAAW,UAAU,EAC5FG,EAAqBJ,EAAW,OAAOC,GAAKA,EAAE,SAAW,aAAa,EACtEI,GAAoBL,EAAW,OAAOC,GAAKA,EAAE,SAAW,aAAeA,EAAE,SAAW,kBAAkB,EAGtGK,GAAqBpE,GAAM,GAAKa,EAA4Bb,EAAK,EAAE,EAAI,CAAA,EAGvEqE,GAAmBpC,cAAaqC,GAA4B,CAGhE,GAAI,CAACA,EAAS,MAAO,GAErB,MAAMC,EAASD,EAAQ,SAAS,GAAG,GAAKA,EAAQ,SAAS,GAAG,EAAIA,EAAUA,EAAQ,QAAQ,IAAK,GAAG,EAAI,IACtG,OAAO,IAAI,KAAKC,CAAM,EAAE,QAAA,CAC1B,EAAG,CAAA,CAAE,EAGLhC,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAW,YAAY,IAAM,CACjC,MAAMgC,EAAoC,CAAA,EAC1CN,EAAmB,QAAQO,GAAO,CAChC,GAAIA,EAAI,UAAW,CACjB,MAAMC,EAAYL,GAAiBI,EAAI,SAAS,EAC1CE,GAAkBF,EAAI,iBAAmB,EAE/C,GAAIA,EAAI,UAAYA,EAAI,SAAU,CAEhC,MAAMG,GAAWP,GAAiBI,EAAI,QAAQ,EACxCI,GAAU,KAAK,OAAOD,GAAWF,GAAa,GAAI,EAAIC,GAC5DH,EAAUC,EAAI,EAAE,EAAI,KAAK,IAAI,EAAGI,EAAO,CACzC,KAAO,CAEL,MAAMA,GAAU,KAAK,OAAO,KAAK,MAAQH,GAAa,GAAI,EAAIC,GAC9DH,EAAUC,EAAI,EAAE,EAAI,KAAK,IAAI,EAAGI,EAAO,CACzC,CACF,CACF,CAAC,EACDjC,GAAgB4B,CAAS,CAC3B,EAAG,GAAI,EAEP,MAAO,IAAM,cAAchC,CAAQ,CACrC,EAAG,CAAC0B,EAAoBG,EAAgB,CAAC,EAEzC,MAAMS,GAAW,CACf,CAAE,GAAI,YAAsB,MAAO7D,IAAa,KAAO,YAAc,SAAU,MAAO+C,GAAkB,OAAQ,MAAO,gBAAiB,KAAMe,EAAA,EAC9I,CAAE,GAAI,WAAqB,MAAO9D,IAAa,KAAO,cAAgB,cAAe,MAAOgD,GAAiB,OAAQ,MAAO,cAAe,KAAMe,CAAA,EACjJ,CAAE,GAAI,cAAwB,MAAO/D,IAAa,KAAO,WAAa,QAAS,MAAOiD,EAAmB,OAAQ,MAAO,eAAgB,KAAMe,EAAA,EAC9I,CAAE,GAAI,YAAsB,MAAOhE,IAAa,KAAO,cAAgB,aAAc,MAAOkD,GAAkB,OAAQ,MAAO,eAAgB,KAAMe,CAAA,CAAY,EAI3JC,GAAOnF,GAAM,iBAAmB,UAClC,CAAC,GAAG8E,GAAU,CAAE,GAAI,cAAwB,MAAO7D,IAAa,KAAO,UAAY,SAAW,MAAOS,EAAkB,OAAQ,MAAO,gBAAiB,KAAM0D,CAAA,CAAa,EAC1KN,GAEEO,GAAkBlE,IAAc,cAAgB,GAAM,CAC1D,UAAW6C,GACX,SAAUC,GACV,YAAaC,EACb,UAAWC,EAAA,EACmBhD,CAAS,GAAK,CAAA,EAExCmE,GAAcC,GAAoB,CACtC,MAAMC,EAAM,KAAK,MAAMD,EAAU,IAAI,EAC/BE,EAAO,KAAK,MAAOF,EAAU,KAAQ,EAAE,EACvCG,EAAOH,EAAU,GACvB,OAAIC,EAAM,EACD,GAAGA,CAAG,IAAIC,EAAK,SAAA,EAAW,SAAS,EAAG,GAAG,CAAC,IAAIC,EAAK,SAAA,EAAW,SAAS,EAAG,GAAG,CAAC,GAEhF,GAAGD,CAAI,IAAIC,EAAK,WAAW,SAAS,EAAG,GAAG,CAAC,EACpD,EAEMC,GAAqBC,GAAsB,CAG3C5F,GAAM,KACRS,EAAcmF,EAAW5F,EAAK,EAAE,EAEhCoB,EAAa,UAAU,EAE3B,EAEMyE,GAAgBD,GAAsB,CAC1CxF,EAAcwF,CAAS,CACzB,EAEME,GAAmBF,GAAsB,CAE7C,GAAI1B,EAAmB,OAAS,EAAG,CACjC,MAAM,kCAAkC,EACxC,MACF,CACA7D,EAAUuF,CAAS,CACrB,EAEMG,GAAmBH,GAAsB,CAC7CtF,EAAUsF,CAAS,CACrB,EAEMI,GAAoBJ,GAAsB,CAC9CrF,EAAWqF,CAAS,CACtB,EAEMK,GAAkBL,GAAsB,CAC5C,MAAMf,EAAUlC,EAAaiD,CAAS,GAAK,EAC3CpF,EAAaoF,EAAWf,CAAO,CACjC,EAEMqB,GAAsBC,GAAqB,CAC/CnD,EAAoBmD,CAAO,EAC3BrD,EAAoB,EAAI,CAC1B,EAEMsD,GAAuB,MAAOC,GAAmB,CACrD,GAAItD,EACF,GAAI,CACF,MAAMrC,EAAeqC,EAAiB,GAAIsD,CAAM,EAChDvD,EAAoB,EAAK,EACzBE,EAAoB,IAAI,EACxBN,EAAmB,IAAI,CACzB,MAAgB,CAGdI,EAAoB,EAAK,EACzBE,EAAoB,IAAI,CAC1B,CAEJ,EAEA,OACEsD,EAAAA,KAAC,MAAA,CAAI,UAAU,uCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8CAA8C,SAAA,aAAU,EACtED,EAAAA,KAAC,IAAA,CAAE,UAAU,mDACV,SAAA,CAAAtG,GAAM,KAAK,MAAIwG,GAAsBxG,GAAM,cAAwC,GAAK,aAAA,CAAA,CAC3F,CAAA,EACF,EACAuG,EAAAA,IAAC,MAAA,CAAI,UAAU,gBACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAW,4CACd9C,GAAiB,SAAW,YAAc,8BAC1CA,GAAiB,SAAW,OAAS,8BACrC,2BACF,GACG,SAAAA,GAAiB,SAAW,YAAc,WAC1CA,GAAiB,SAAW,OAAS,QAAU,SAAA,CAClD,CAAA,CACF,CAAA,EACF,EAGCW,GAAmB,OAAS,GAC3BkC,EAAAA,KAAC,MAAA,CAAI,UAAU,oEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qFACb,eAACE,EAAA,CAAU,UAAU,qBAAqB,CAAA,CAC5C,EACAH,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,MAAC,OAAI,UAAU,+BACZ,SAAAtF,IAAa,KAAO,4BAA8B,8BACrD,QACC,MAAA,CAAI,UAAU,yBACZ,SAAAA,IAAa,KAAO,qCAAuC,8CAAA,CAC9D,CAAA,CAAA,CACF,CAAA,EACF,EACCmD,GAAmB,IAAKsC,GACvBJ,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAM,CACb9C,EAAuBkD,CAAU,EACjCpD,EAA+B,EAAI,CACrC,EACA,UAAU,qHAEV,SAAA,CAAAgD,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACZ,SAAA,CAAArF,IAAa,KAAO,SAAW,QAAQ,KAAGyF,EAAW,aAAA,EACxD,EACAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACZ,SAAA,CAAArF,IAAa,KAAO,cAAgB,UAAU,IAAEyF,EAAW,aAAa,IAAEA,EAAW,YAAA,CAAA,CACxF,CAAA,EACF,EACAH,EAAAA,IAACI,GAAA,CAAa,UAAU,wBAAA,CAAyB,CAAA,CAAA,EAf5CD,EAAW,EAAA,CAiBnB,CAAA,EACH,EAIFJ,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,wBACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qIACb,eAACK,GAAA,CAAK,UAAU,mCAAmC,CAAA,CACrD,EACAN,EAAAA,KAAC,MAAA,CAAI,UAAU,UACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iCACZ,WAAiB,MAASjF,GAAW,QAAU,CAAA,CAClD,QACC,MAAA,CAAI,UAAU,mCACZ,SAAAL,IAAa,KAAO,UAAY,SAAA,CACnC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,wBACb,SAAAqF,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,sIACb,eAACrB,EAAA,CAAY,UAAU,mCAAmC,CAAA,CAC5D,EACAoB,EAAAA,KAAC,MAAA,CAAI,UAAU,UACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iCACZ,WAAiB,MAASjF,GAAW,gBAAkB,CAAA,CAC1D,QACC,MAAA,CAAI,UAAU,mCACZ,SAAAL,IAAa,KAAO,YAAc,WAAA,CACrC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,wBACb,SAAAqF,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oIACb,eAACM,GAAA,CAAW,UAAU,mCAAmC,CAAA,CAC3D,EACAP,EAAAA,KAAC,MAAA,CAAI,UAAU,UACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iCACZ,WAAiB,MAASjF,GAAW,UAAY,CAAA,CACpD,QACC,MAAA,CAAI,UAAU,mCACZ,SAAAL,IAAa,KAAO,YAAc,OAAA,CACrC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,wBACb,SAAAqF,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,sIACb,eAACO,GAAA,CAAM,UAAU,mCAAmC,CAAA,CACtD,EACAR,EAAAA,KAAC,MAAA,CAAI,UAAU,UACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iCACZ,WAAiB,MAASjF,GAAW,mBAAqB,CAAA,CAC7D,QACC,MAAA,CAAI,UAAU,iDACZ,SAAAL,IAAa,KAAO,YAAc,WAAA,CACrC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGCiD,EAAmB,OAAS,GAC3BoC,EAAAA,KAAC,MAAA,CAAI,UAAW,kCAAkCpC,EAAmB,CAAC,GAAG,SAAW,gCAAkC,iCAAiC,GACrJ,SAAA,CAAAoC,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAW,wBAAwBrC,EAAmB,CAAC,GAAG,SAAW,cAAgB,4BAA4B,EAAA,CAAI,QACzH,OAAA,CAAK,UAAW,eAAeA,EAAmB,CAAC,GAAG,SAAW,gBAAkB,gBAAgB,GACjG,SAAAA,EAAmB,CAAC,GAAG,SAAW,wBAA0B,iBAAA,CAC/D,CAAA,EACF,EACCA,EAAmB,IAAIO,GACtB6B,EAAAA,KAAC,MAAA,CAAiB,UAAU,qEAC1B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8CAA8C,SAAA,CAAA,IAAE7B,EAAI,OAAO,MAAIA,EAAI,KAAA,EAAM,EACxF8B,EAAAA,IAAC,OAAI,UAAU,8CAA+C,YAAc9B,EAAI,QAASA,EAAI,SAAS,CAAA,CAAE,CAAA,EAC1G,EACA6B,EAAAA,KAAC,MAAA,CAAI,UAAU,kEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAW,4CAA4C9B,EAAI,SAAW,gBAAkB,gBAAgB,GAC1G,SAAAa,GAAW3C,EAAa8B,EAAI,EAAE,GAAK,CAAC,EACvC,QACC,MAAA,CAAI,UAAU,mCACZ,SAAAA,EAAI,SAAW,QAAU,cAAA,CAC5B,CAAA,EACF,EACA6B,EAAAA,KAAC,MAAA,CAAI,UAAU,aACZ,SAAA,CAAA7B,EAAI,SACH6B,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMN,GAAiBvB,EAAI,EAAE,EACtC,UAAU,wIACV,MAAO,CAAE,WAAY,2CAAA,EAErB,SAAA,CAAA8B,EAAAA,IAACQ,GAAA,CAAW,UAAU,SAAA,CAAU,EAChCR,EAAAA,IAAC,OAAA,CAAK,UAAU,mBAAmB,SAAA,YAAA,CAAU,CAAA,CAAA,CAAA,EAG/CD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMP,GAAgBtB,EAAI,EAAE,EACrC,UAAU,6KAEV,SAAA,CAAA8B,EAAAA,IAACS,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3BT,EAAAA,IAAC,OAAA,CAAK,UAAU,mBAAmB,SAAA,OAAA,CAAK,CAAA,CAAA,CAAA,EAG5CD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAML,GAAexB,EAAI,EAAE,EACpC,UAAU,wIACV,MAAO,CAAE,WAAY,2CAAA,EAErB,SAAA,CAAA8B,EAAAA,IAACU,EAAA,CAAM,UAAU,SAAA,CAAU,EAC3BV,EAAAA,IAAC,OAAA,CAAK,UAAU,mBAAmB,SAAA,YAAS,EAC5CA,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAY,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,CACpC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EA3CQ9B,EAAI,EA4Cd,CACD,CAAA,EACH,EAIF8B,EAAAA,IAAC,MAAA,CAAI,UAAU,4DACT,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yEACZ,SAAApB,GAAK,IAAK+B,GACTZ,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMlF,EAAa8F,EAAI,EAAE,EAClC,UAAW,wHACT/F,IAAc+F,EAAI,GACd,yCACA,oDACN,GAEA,SAAA,CAAAX,EAAAA,IAAC,OAAA,CAAK,UAAU,uBAAwB,SAAAW,EAAI,MAAM,EACjDA,EAAI,MAAQ,GACXX,EAAAA,IAAC,OAAA,CAAK,UAAW,2DAA2DW,EAAI,KAAK,GAClF,SAAAA,EAAI,KAAA,CACP,CAAA,CAAA,EAZGA,EAAI,EAAA,CAeZ,EACH,CAAA,CACF,EAGC/F,IAAc,cACboF,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAA3E,GACC0E,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gGAAA,CAAiG,QAC/G,IAAA,CAAE,UAAU,gBAAiB,SAAAtF,IAAa,KAAO,sBAAwB,4BAAA,CAA6B,CAAA,EACzG,EACES,EAAkB,SAAW,EAC/B4E,OAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qFACb,eAACnB,EAAA,CAAY,UAAU,0BAA0B,CAAA,CACnD,QACC,KAAA,CAAG,UAAU,oCACX,SAAAnE,IAAa,KAAO,uBAAyB,2BAChD,QACC,IAAA,CAAE,UAAU,qBACV,SAAAA,IAAa,KAAO,0CAA4C,8CAAA,CACnE,CAAA,CAAA,CACF,EAEAS,EAAkB,IAAKyF,GACrBZ,EAAAA,IAACa,GAAA,CAEC,MAAAD,EACA,OAAQ,IAAMpF,EAA4BoF,CAAK,EAC/C,eAAgB/E,GAChB,SAAAnB,CAAA,EAJKkG,EAAM,EAAA,CAMd,CAAA,CAEL,EAEAZ,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAlB,GAAgB,SAAW,EAC1BiB,OAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACb,eAACxB,GAAA,CAAS,UAAU,wBAAwB,CAAA,CAC9C,EACAwB,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,aAAU,EAC5DD,EAAAA,KAAC,IAAA,CAAE,UAAU,qBACV,SAAA,CAAAnF,IAAc,aAAe,8CAC7BA,IAAc,YAAc,yBAC5BA,IAAc,eAAiB,sBAC/BA,IAAc,aAAe,wBAAA,CAAA,CAChC,CAAA,CAAA,CACF,EAEAkE,GAAgB,IAAKc,GACnBI,EAAAA,IAACc,GAAA,CAEC,QAAAlB,EACA,aAAcxD,EAAawD,EAAQ,EAAE,EACrC,cAAejC,EAAmB,OAAS,EAC3C,OAAQ,IAAMxB,EAAmByD,CAAO,EACxC,cAAe,IAAMR,GAAkBQ,EAAQ,EAAE,EACjD,SAAU,IAAMN,GAAaM,EAAQ,EAAE,EACvC,YAAa,IAAML,GAAgBK,EAAQ,EAAE,EAC7C,YAAa,IAAMJ,GAAgBI,EAAQ,EAAE,EAC7C,aAAc,IAAMH,GAAiBG,EAAQ,EAAE,EAC/C,WAAY,IAAMF,GAAeE,EAAQ,EAAE,EAC3C,UAAW,IAAMD,GAAmBC,CAAO,EAC3C,aAAc,IAAM,CAClB/C,EAAuB+C,CAAO,EAC9BjD,EAAuB,EAAI,CAC7B,EACA,WAAAoC,EAAA,EAhBKa,EAAQ,EAAA,CAkBhB,EAEL,EAIL1D,GAAmB,CAACI,IACnB0D,EAAAA,IAACe,GAAA,CACC,QAAS7E,EACT,aAAcE,EAAaF,EAAgB,EAAE,EAC7C,QAAS,IAAMC,EAAmB,IAAI,EACtC,cAAe,IAAM,CACnBiD,GAAkBlD,EAAgB,EAAE,EACpCC,EAAmB,IAAI,CACzB,EACA,SAAU,IAAM,CACdmD,GAAapD,EAAgB,EAAE,EAC/BC,EAAmB,IAAI,CACzB,EACA,YAAa,IAAM,CACjBoD,GAAgBrD,EAAgB,EAAE,EAClCC,EAAmB,IAAI,CACzB,EACA,WAAY,IAAM,CAChBuD,GAAexD,EAAgB,EAAE,EACjCC,EAAmB,IAAI,CACzB,EACA,UAAW,IAAMwD,GAAmBzD,CAAe,EACnD,aAAc,IAAM,CAClBW,EAAuBX,CAAe,EACtCS,EAAuB,EAAI,EAC3BR,EAAmB,IAAI,CACzB,EACA,WAAA4C,EAAA,CAAA,EAKHzC,IAAoBE,GACnBwD,EAAAA,IAACgB,GAAA,CACC,QAASxE,EACT,QAAS,IAAM,CACbD,EAAoB,EAAK,EACzBE,EAAoB,IAAI,CAC1B,EACA,UAAWoD,EAAA,CAAA,EAKdnD,IAAuBE,GACtBoD,EAAAA,IAACiB,GAAA,CACC,QAASrE,EACT,QAAS,IAAM,CACbD,EAAuB,EAAK,EAC5BE,EAAuB,IAAI,CAC7B,EACA,SAAWqE,GAAS,CAClB9G,EAAwB,CACtB,UAAWwC,EAAoB,GAC/B,GAAGsE,CAAA,CACJ,EACDvE,EAAuB,EAAK,EAC5BE,EAAuB,IAAI,EAC3BV,EAAmB,IAAI,CACzB,EACA,SAAAzB,CAAA,CAAA,EAKHoC,IAA+BE,GAC9BgD,EAAAA,IAACmB,GAAA,CACC,WAAYnE,EACZ,QAAS,IAAM,CACbD,EAA+B,EAAK,EACpCE,EAAuB,IAAI,CAC7B,EACA,SAAU,IAAM,CACd5C,EAA2B2C,EAAoB,GAAI,EAAI,EACvDD,EAA+B,EAAK,EACpCE,EAAuB,IAAI,CAC7B,EACA,SAAWmE,GAAS,CAClB/G,EAA2B2C,EAAoB,GAAI,GAAOoE,CAAI,EAC9DrE,EAA+B,EAAK,EACpCE,EAAuB,IAAI,CAC7B,EACA,SAAAvC,CAAA,CAAA,EAKHa,IACCyE,EAAAA,IAACqB,GAAA,CACC,MAAO9F,GACP,QAAS,IAAMC,EAA4B,IAAI,EAC/C,eAAgBK,GAChB,SAAAnB,CAAA,CAAA,CACF,EAEJ,CAEJ,CAGA,SAASoG,GAAY,CACnB,QAAAlB,EACA,aAAA0B,EACA,cAAAC,EACA,OAAAC,EACA,cAAAC,EACA,SAAAC,EACA,YAAAC,EACA,YAAAC,EACA,aAAAC,EACA,WAAAC,EACA,UAAAC,EACA,aAAAC,EACA,WAAAjD,CACF,EAcG,CAED,MAAMkD,EAAa,CAAC,WAAY,WAAY,aAAa,EAAE,SAASrC,EAAQ,MAAM,EAC5EsC,EAAoBC,GAAqB,CAC7C,OAAQA,EAAA,CACN,IAAK,SAAU,MAAO,aACtB,IAAK,OAAQ,MAAO,gBACpB,IAAK,SAAU,MAAO,eACtB,QAAS,MAAO,aAAA,CAEpB,EAEMC,EAAkBrG,GAA0B,CAChD,MAAMsG,EAAY,2CAClB,OAAQtG,EAAA,CACN,IAAK,MAAO,aAAQ,OAAA,CAAK,UAAW,GAAGsG,CAAS,iCAAkC,SAAA,QAAK,EACvF,IAAK,WAAY,aAAQ,OAAA,CAAK,UAAW,GAAGA,CAAS,6BAA8B,SAAA,YAAS,EAC5F,IAAK,WAAY,aAAQ,OAAA,CAAK,UAAW,GAAGA,CAAS,6BAA8B,SAAA,UAAO,EAC1F,IAAK,cAAe,aAAQ,OAAA,CAAK,UAAW,GAAGA,CAAS,+BAAgC,SAAA,WAAQ,EAChG,IAAK,mBAAoB,aAAQ,OAAA,CAAK,UAAW,GAAGA,CAAS,iCAAkC,SAAA,UAAO,EACtG,IAAK,YAAa,aAAQ,OAAA,CAAK,UAAW,GAAGA,CAAS,+BAAgC,SAAA,YAAS,EAC/F,QAAS,aAAQ,OAAA,CAAK,UAAWA,EAAY,SAAAC,GAAcvG,CAAM,EAAE,CAAA,CAEvE,EAEA,OACEgE,EAAAA,KAAC,MAAA,CAAI,UAAU,2HAA2H,QAASyB,EAEjJ,SAAA,CAAAzB,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAW,wCAAwCkC,EAAiBtC,EAAQ,QAAQ,CAAC,iBAAkB,EAC5GG,EAAAA,KAAC,MAAA,CAAI,UAAU,iBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,CAAA,IAAEH,EAAQ,MAAA,EAAO,EACxDwC,EAAexC,EAAQ,MAAM,EAC7BA,EAAQ,SAAW,eAAiB0B,IAAiB,QACpDvB,EAAAA,KAAC,OAAA,CAAK,UAAW,kEAAkEH,EAAQ,SAAW,4BAA8B,6BAA6B,GAC9J,SAAA,CAAAA,EAAQ,eAAYa,GAAA,CAAM,UAAU,UAAU,EAAKT,EAAAA,IAACO,GAAA,CAAM,UAAU,SAAA,CAAU,EAC9ExB,EAAWuC,CAAY,CAAA,CAAA,CAC1B,CAAA,EAEJ,EACAtB,EAAAA,IAAC,KAAA,CAAG,UAAU,4DAA6D,WAAQ,MAAM,EACzFA,EAAAA,IAAC,IAAA,CAAE,UAAU,0CAA2C,WAAQ,YAAY,EAG5ED,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACd,SAAA,CAAAC,EAAAA,IAACuC,EAAA,CAAK,UAAU,aAAA,CAAc,EAC9BvC,EAAAA,IAAC,OAAA,CAAK,UAAU,yBAA0B,WAAQ,YAAA,CAAa,CAAA,EACjE,EACAD,EAAAA,KAAC,IAAA,CACC,KAAM,OAAOH,EAAQ,aAAa,GAClC,QAAUzC,GAAMA,EAAE,gBAAA,EAClB,UAAU,mEAEV,SAAA,CAAA6C,EAAAA,IAACwC,EAAA,CAAM,UAAU,aAAA,CAAc,EAC/BxC,EAAAA,IAAC,QAAK,SAAA,WAAA,CAAS,CAAA,CAAA,CAAA,CACjB,EACF,QAGC,MAAA,CAAI,UAAU,qDACb,SAAAD,EAAAA,KAAC,OAAA,CAAK,UAAU,mCACd,SAAA,CAAAC,EAAAA,IAACyC,EAAA,CAAO,UAAU,2BAAA,CAA4B,EAC9CzC,EAAAA,IAAC,QAAK,UAAU,WAAY,YAAcJ,EAAQ,QAASA,EAAQ,SAAS,CAAA,CAAE,CAAA,CAAA,CAChF,CAAA,CACF,EAGCA,EAAQ,eACPG,OAAC,MAAA,CAAI,UAAU,4FACb,SAAA,CAAAC,EAAAA,IAAC0C,GAAA,CAAa,UAAU,aAAA,CAAc,EACtC1C,EAAAA,IAAC,OAAA,CAAM,SAAA,IAAI,KAAKJ,EAAQ,aAAa,EAAE,mBAAmB,QAAS,CAAE,IAAK,UAAW,MAAO,OAAA,CAAS,EAAE,EACtGA,EAAQ,eAAiBI,MAAC,OAAA,CAAM,WAAQ,aAAA,CAAc,CAAA,EACzD,EAID,CAAC,WAAY,WAAY,aAAa,EAAE,SAASJ,EAAQ,MAAM,GAC9DI,MAAC,OAAI,UAAU,iCACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,cAAW,EAC3CA,EAAAA,IAAC,OAAA,CAAK,UAAW,eACfJ,EAAQ,WAAa,SAAW,eAChCA,EAAQ,WAAa,OAAS,kBAC9BA,EAAQ,WAAa,SAAW,iBAAmB,eACrD,GACG,SAAAA,EAAQ,WAAa,SAAW,UAChCA,EAAQ,WAAa,OAAS,UAC9BA,EAAQ,WAAa,SAAW,UAAY,QAAA,CAC/C,CAAA,CAAA,CACF,CAAA,CACF,EAID,CAAC,WAAY,WAAY,aAAa,EAAE,SAASA,EAAQ,MAAM,GAC9DG,EAAAA,KAAC,SAAA,CACC,QAAU5C,GAAM,CAAEA,EAAE,gBAAA,EAAmB6E,EAAA,CAAgB,EACvD,UAAU,wLAEV,SAAA,CAAAhC,EAAAA,IAACE,EAAA,CAAU,UAAU,SAAA,CAAU,EAAE,2BAAA,CAAA,CAAA,EAMpCN,EAAQ,SAAW,aAAeA,EAAQ,cACxC,MAAA,CAAI,UAAU,+BACZ,SAAA,CAAC,EAAG,EAAG,EAAG,EAAG,CAAC,EAAE,IAAI+C,GACnB3C,EAAAA,IAACK,GAAA,CAEC,UAAW,WAAWsC,GAAQ/C,EAAQ,OAAU,kCAAoC,eAAe,EAAA,EAD9F+C,CAAA,CAGR,EACH,EAID/C,EAAQ,SAAW,oBAClBG,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAACvB,EAAA,CAAM,UAAU,aAAA,CAAc,EAAE,wBAAA,EAEnC,EAIDmB,EAAQ,SAAW,eAAiBA,EAAQ,iBAC3CG,OAAC,MAAA,CAAI,UAAU,sDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC4C,GAAA,CAAY,UAAU,aAAA,CAAc,EAAE,qBAAA,EAEzC,EACA5C,EAAAA,IAAC,IAAA,CAAE,UAAU,yCAA0C,WAAQ,eAAA,CAAgB,CAAA,CAAA,CACjF,CAAA,CAAA,CAEJ,CAAA,EACF,EAGAD,EAAAA,KAAC,OAAI,UAAU,mDAAmD,QAAU5C,GAAMA,EAAE,gBAAA,EACjF,SAAA,CAAA8E,GACClC,EAAAA,KAAC,SAAA,CACC,QAASgC,EACT,UAAU,iLAEV,SAAA,CAAA/B,EAAAA,IAAC6C,GAAA,CAAQ,UAAU,SAAA,CAAU,EAC7B7C,EAAAA,IAAC,QAAK,UAAU,mBAAoB,WAAQ,SAAW,cAAgB,aAAe,YAAA,CAAa,CAAA,CAAA,CAAA,EAGtGJ,EAAQ,SAAW,OAClBG,EAAAA,KAAC,SAAA,CACC,QAAS0B,EACT,UAAU,0JACV,MAAO,CAAE,WAAY,2CAAA,EAErB,SAAA,CAAAzB,EAAAA,IAAC8C,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,cAAA,CAAA,CAAA,EAI/BlD,EAAQ,SAAW,YAClBG,EAAAA,KAAC,SAAA,CACC,QAAS2B,EACT,UAAU,2MAEV,SAAA,CAAA1B,EAAAA,IAACU,EAAA,CAAM,UAAU,SAAA,CAAU,EAAE,SAAA,CAAA,CAAA,EAIhCd,EAAQ,SAAW,aAClB2B,EACExB,EAAAA,KAAC,MAAA,CAAI,UAAU,mHACb,SAAA,CAAAC,EAAAA,IAAC4C,GAAA,CAAY,UAAU,SAAA,CAAU,EAAE,kCAAA,CAAA,CAErC,EAEA7C,EAAAA,KAAC,SAAA,CACC,QAAS4B,EACT,UAAU,0JACV,MAAO,CAAE,WAAY,4CAA6C,MAAO,MAAA,EAEzE,SAAA,CAAA3B,EAAAA,IAACtB,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,eAAA,CAAA,CAAA,GAKjCkB,EAAQ,SAAW,eAClBG,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACZ,SAAA,CAAAH,EAAQ,SACPG,EAAAA,KAAC,SAAA,CACC,QAAS8B,EACT,UAAU,0JACV,MAAO,CAAE,WAAY,2CAAA,EAErB,SAAA,CAAA7B,EAAAA,IAACQ,GAAA,CAAW,UAAU,SAAA,CAAU,EAAE,YAAA,CAAA,CAAA,EAIpCR,EAAAA,IAAC,SAAA,CACC,QAAS4B,EACT,UAAU,wLAEV,SAAA5B,EAAAA,IAACS,GAAA,CAAM,UAAU,SAAA,CAAU,CAAA,CAAA,EAG/BV,EAAAA,KAAC,SAAA,CACC,QAAS+B,EACT,UAAU,0JACV,MAAO,CAAE,WAAY,2CAAA,EAErB,SAAA,CAAA9B,EAAAA,IAACU,EAAA,CAAM,UAAU,SAAA,CAAU,EAAE,WAAA,CAAA,CAAA,CAE/B,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,CAEJ,CAGA,SAASK,GAAoB,CAC3B,QAAAnB,EACA,aAAA0B,EACA,QAAAyB,EACA,cAAAtB,EACA,SAAAC,EACA,YAAAC,EACA,WAAAG,EACA,UAAAC,EACA,aAAAC,EACA,WAAAjD,CACF,EAWG,CAED,MAAMkD,EAAa,CAAC,WAAY,WAAY,aAAa,EAAE,SAASrC,EAAQ,MAAM,EAE5EoD,EAAgB,CAAC,WAAY,WAAY,aAAa,EAAE,SAASpD,EAAQ,MAAM,EAC/EqD,EAAclF,GACX,IAAI,KAAKA,CAAO,EAAE,eAAe,QAAS,CAC/C,IAAK,UACL,MAAO,UACP,KAAM,UACN,KAAM,UACN,OAAQ,SAAA,CACT,EAYGoE,GAToBA,GAAqB,CAC7C,OAAQA,EAAAA,CACN,IAAK,SAAU,MAAO,CAAE,MAAO,SAAU,MAAO,wBAAA,EAChD,IAAK,OAAQ,MAAO,CAAE,MAAO,UAAW,MAAO,8BAAA,EAC/C,IAAK,SAAU,MAAO,CAAE,MAAO,UAAW,MAAO,4BAAA,EACjD,QAAS,MAAO,CAAE,MAAO,SAAU,MAAO,0BAAA,CAA2B,CAEzE,GAEkCvC,EAAQ,QAAQ,EAElD,aACG,MAAA,CAAI,UAAU,iBACb,SAAAG,EAAAA,KAAC,MAAA,CAAI,UAAU,sEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,WAASH,EAAQ,MAAA,EAAO,EAC/DI,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAqB,WAAQ,KAAA,CAAM,CAAA,EACnD,EACAA,EAAAA,IAAC,SAAA,CAAO,QAAS+C,EAAS,UAAU,mCAClC,SAAA/C,EAAAA,IAACkD,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CACzB,CAAA,EACF,EAGCtD,EAAQ,SAAW,eAAiB0B,IAAiB,QACpDtB,EAAAA,IAAC,MAAA,CAAI,UAAU,0DACb,SAAAD,OAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDAAA,CAAkD,EACjEA,EAAAA,IAAC,OAAA,CAAK,UAAU,6BAA6B,SAAA,mBAAA,CAAiB,CAAA,EAChE,QACC,MAAA,CAAI,UAAU,8CACZ,SAAAjB,EAAWuC,CAAY,CAAA,CAC1B,CAAA,CAAA,CACF,CAAA,CACF,EAID1B,EAAQ,SAAW,eAAiBA,EAAQ,iBAC3CG,OAAC,MAAA,CAAI,UAAU,sDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wDACb,SAAA,CAAAC,EAAAA,IAAC4C,GAAA,CAAY,UAAU,SAAA,CAAU,EACjC5C,EAAAA,IAAC,QAAK,SAAA,wCAAA,CAAsC,EAC3CJ,EAAQ,gBAAkBA,EAAQ,eAAiB,GAClDG,OAAC,OAAA,CAAK,UAAU,yCACb,SAAA,CAAAH,EAAQ,eAAe,QAAA,CAAA,CAC1B,CAAA,EAEJ,EACAG,EAAAA,KAAC,IAAA,CAAE,UAAU,oBACX,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,sBAAmB,EAAO,IAAEJ,EAAQ,eAAA,EACpE,EACAI,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,uGAAA,CAEvC,CAAA,EACF,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,UAAW,8CAA8CmC,EAAS,KAAK,GAC1E,WAAS,KAAA,CACZ,QACC,OAAA,CAAK,UAAU,uEACb,SAAAlC,GAAsBL,EAAQ,QAAQ,CAAA,CACzC,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAI,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,WAAQ,EAC/DA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAiB,WAAQ,WAAA,CAAY,CAAA,EACpD,EAGCJ,EAAQ,eACPG,OAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,yDACZ,SAAA,CAAAC,EAAAA,IAAC0C,GAAA,CAAa,UAAU,SAAA,CAAU,EAAE,2BAAA,EAEtC,EACA3C,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC,QAAM,SAAA,IAAI,KAAKJ,EAAQ,aAAa,EAAE,mBAAmB,QAAS,CAAE,QAAS,OAAQ,IAAK,UAAW,MAAO,MAAA,CAAQ,EAAE,EACtHA,EAAQ,eACPG,OAAC,OAAA,CAAK,UAAU,0BACd,SAAA,CAAAC,EAAAA,IAACvB,EAAA,CAAM,UAAU,SAAA,CAAU,EAC1BmB,EAAQ,aAAA,CAAA,CACX,CAAA,CAAA,CAEJ,CAAA,EACF,EAIFG,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,cAAc,SAAA,sBAAmB,EAC/CD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAACuC,EAAA,CAAK,UAAU,uBAAA,CAAwB,EACxCvC,EAAAA,IAAC,OAAA,CAAM,SAAAJ,EAAQ,YAAA,CAAa,CAAA,EAC9B,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAACwC,EAAA,CAAM,UAAU,uBAAA,CAAwB,EACzCxC,EAAAA,IAAC,IAAA,CAAE,KAAM,OAAOJ,EAAQ,aAAa,GAAI,UAAU,mCAChD,SAAAA,EAAQ,aAAA,CACX,CAAA,EACF,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAACyC,EAAA,CAAO,UAAU,uBAAA,CAAwB,QACzC,OAAA,CAAM,SAAAU,GAAcvD,EAAQ,QAASA,EAAQ,SAAS,CAAA,CAAE,CAAA,EAC3D,EACCA,EAAQ,YACPG,OAAC,MAAA,CAAI,UAAU,0DACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,0CAA0C,SAAA,wBAAqB,EAC9EA,EAAAA,IAAC,MAAA,CAAI,UAAU,yBAA0B,WAAQ,UAAA,CAAW,CAAA,CAAA,CAC9D,CAAA,CAAA,CAEJ,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,cAAc,SAAA,UAAO,EACnCD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,UAAO,EACvCA,EAAAA,IAAC,OAAA,CAAM,SAAAiD,EAAWrD,EAAQ,SAAS,CAAA,CAAE,CAAA,EACvC,EACCA,EAAQ,YACPG,OAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,YAAS,EACzCA,EAAAA,IAAC,OAAA,CAAM,SAAAiD,EAAWrD,EAAQ,UAAU,CAAA,CAAE,CAAA,EACxC,EAEDA,EAAQ,YACPG,OAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,UAAO,EACvCA,EAAAA,IAAC,OAAA,CAAM,SAAAiD,EAAWrD,EAAQ,UAAU,CAAA,CAAE,CAAA,EACxC,EAEDA,EAAQ,WACPG,OAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,gBAAa,EAC7CA,EAAAA,IAAC,OAAA,CAAM,SAAAiD,EAAWrD,EAAQ,SAAS,CAAA,CAAE,CAAA,EACvC,EAEDA,EAAQ,aACPG,OAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,mBAAgB,EAChDA,EAAAA,IAAC,OAAA,CAAM,SAAAiD,EAAWrD,EAAQ,WAAW,CAAA,CAAE,CAAA,EACzC,EAEDA,EAAQ,YACPG,OAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,eAAY,EAC5CA,EAAAA,IAAC,OAAA,CAAM,SAAAiD,EAAWrD,EAAQ,UAAU,CAAA,CAAE,CAAA,EACxC,EAEDA,EAAQ,cACPG,OAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,eAAY,EAC5CD,EAAAA,KAAC,OAAA,CAAK,UAAU,cAAe,SAAA,CAAA,KAAK,MAAMH,EAAQ,aAAe,EAAE,EAAE,MAAA,CAAA,CAAI,CAAA,CAAA,CAC3E,CAAA,CAAA,CAEJ,CAAA,EACF,EAGCA,EAAQ,SAAW,aAAeA,EAAQ,QACzCG,OAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mBAAmB,SAAA,SAAM,EACvCD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAA,CAAC,EAAG,EAAG,EAAG,EAAG,CAAC,EAAE,IAAI4C,GACnB3C,EAAAA,IAACK,GAAA,CAEC,UAAW,WAAWsC,GAAQ/C,EAAQ,OAAU,kCAAoC,eAAe,EAAA,EAD9F+C,CAAA,CAGR,EACD5C,EAAAA,KAAC,OAAA,CAAK,UAAU,6BAA8B,SAAA,CAAAH,EAAQ,OAAO,IAAA,CAAA,CAAE,CAAA,EACjE,EACCA,EAAQ,UACPG,OAAC,IAAA,CAAE,UAAU,4BAA4B,SAAA,CAAA,IAAEH,EAAQ,SAAS,GAAA,CAAA,CAAC,CAAA,CAAA,CAEjE,CAAA,EAEJ,EAGAG,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CACC,KAAM,OAAOH,EAAQ,aAAa,GAClC,UAAU,8DAEV,SAAA,CAAAI,EAAAA,IAACwC,EAAA,CAAM,UAAU,SAAA,CAAU,EAAE,WAAA,CAAA,CAAA,EAG9B5C,EAAQ,SAAW,OAClBG,EAAAA,KAAC,SAAA,CACC,QAAS0B,EACT,UAAU,4DACV,MAAO,CAAE,WAAY,2CAAA,EAErB,SAAA,CAAAzB,EAAAA,IAAC8C,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,cAAA,CAAA,CAAA,EAI/BlD,EAAQ,SAAW,YAClBG,EAAAA,KAAC,UAAO,QAAS2B,EAAU,UAAU,4DACnC,SAAA,CAAA1B,EAAAA,IAACU,EAAA,CAAM,UAAU,SAAA,CAAU,EAAE,gBAAA,EAE/B,EAEDd,EAAQ,SAAW,YAClBG,EAAAA,KAAC,UAAO,QAAS4B,EAAa,UAAU,4DACtC,SAAA,CAAA3B,EAAAA,IAACtB,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,eAAA,EAE9B,EAEDkB,EAAQ,SAAW,eAClBG,EAAAA,KAAC,SAAA,CACC,QAAS+B,EACT,UAAU,4DACV,MAAO,CAAE,WAAY,2CAAA,EAErB,SAAA,CAAA9B,EAAAA,IAACU,EAAA,CAAM,UAAU,SAAA,CAAU,EAAE,WAAA,CAAA,CAAA,CAE/B,EAEJ,EACCsC,GACCjD,EAAAA,KAAC,SAAA,CACC,QAASiC,EACT,UAAU,0IAEV,SAAA,CAAAhC,EAAAA,IAACE,EAAA,CAAU,UAAU,SAAA,CAAU,EAAE,2BAAA,CAAA,CAAA,EAIpC+B,GACClC,EAAAA,KAAC,SAAA,CACC,QAASgC,EACT,UAAU,sJAEV,SAAA,CAAA/B,EAAAA,IAAC6C,GAAA,CAAQ,UAAU,SAAA,CAAU,EAC5BjD,EAAQ,SAAW,cAAgB,oBAAsB,sBAAA,CAAA,CAAA,CAC5D,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CAGA,SAASoB,GAAoB,CAC3B,QAAApB,EACA,QAAAmD,EACA,UAAAK,CACF,EAIG,CACD,KAAM,CAACtD,EAAQuD,CAAS,EAAIvI,EAAAA,SAAS,EAAE,EACjCwI,EAAe1D,EAAQ,SAAW,cAElC2D,EAAoBD,EAAe,CACvC,oCACA,wCACA,4CACA,gCACA,gCAAA,EACE,CACF,qCACA,0CACA,2BACA,4CACA,2BAAA,EAGF,aACG,MAAA,CAAI,UAAU,iBACb,SAAAvD,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,yDACZ,SAAA,CAAAC,EAAAA,IAACwD,GAAA,CAAI,UAAU,SAAA,CAAU,EACxBF,EAAe,oBAAsB,sBAAA,EACxC,EACAtD,EAAAA,IAAC,SAAA,CAAO,QAAS+C,EAAS,UAAU,mCAClC,SAAA/C,EAAAA,IAACkD,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CACzB,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,0DACb,SAAAnD,EAAAA,KAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,CAAA,iBAC5B,SAAA,CAAO,SAAA,CAAA,IAAEH,EAAQ,MAAA,EAAO,EAAS,0EACxC0D,GAAgB,iCAAA,CAAA,CACnB,CAAA,CACF,EAEAvD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,iBAEhE,QACC,MAAA,CAAI,UAAU,4BACZ,SAAAuD,EAAkB,IAAK/F,GACtBwC,EAAAA,IAAC,SAAA,CAEC,KAAK,SACL,QAAS,IAAMqD,EAAU7F,CAAC,EAC1B,UAAW,oDACTsC,IAAWtC,EACP,wBACA,6CACN,GAEC,SAAAA,CAAA,EATIA,CAAA,CAWR,EACH,EACAwC,EAAAA,IAAC,WAAA,CACC,MAAOF,EACP,SAAW3C,GAAMkG,EAAUlG,EAAE,OAAO,KAAK,EACzC,UAAU,2BACV,YAAY,6BAAA,CAAA,CACd,EACF,EAEA4C,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,MAAC,SAAA,CAAO,QAAS+C,EAAS,UAAU,uBAAuB,SAAA,SAE3D,EACAhD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMD,EAAO,KAAA,GAAUsD,EAAUtD,CAAM,EAChD,UAAU,mJACV,SAAU,CAACA,EAAO,KAAA,EAElB,SAAA,CAAAE,EAAAA,IAACwD,GAAA,CAAI,UAAU,qBAAA,CAAsB,EACpCF,EAAe,aAAe,YAAA,CAAA,CAAA,CACjC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CAGA,SAASrC,GAAgB,CACvB,QAAArB,EACA,QAAAmD,EACA,SAAAU,EACA,SAAA/I,CACF,EAKG,CACD,KAAM,CAACgJ,EAAcC,CAAe,EAAI7I,EAAAA,SAAS,EAAE,EAC7C,CAAC8I,EAAcC,CAAe,EAAI/I,EAAAA,SAAS,EAAE,EAC7C,CAACgF,EAAQuD,CAAS,EAAIvI,EAAAA,SAA2B,WAAW,EAC5D,CAACgJ,EAAYC,CAAa,EAAIjJ,EAAAA,SAAS,EAAE,EAEzCkJ,MAAY,KAAA,EAAO,cAAc,MAAM,GAAG,EAAE,CAAC,EAEnD,aACG,MAAA,CAAI,UAAU,iBACb,SAAAjE,EAAAA,KAAC,MAAA,CAAI,UAAU,mEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,2DACZ,SAAA,CAAAC,EAAAA,IAACE,EAAA,CAAU,UAAU,SAAA,CAAU,EAC9BxF,IAAa,KAAO,mBAAqB,oBAAA,EAC5C,EACAsF,EAAAA,IAAC,SAAA,CAAO,QAAS+C,EAAS,UAAU,mCAClC,SAAA/C,EAAAA,IAACkD,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CACzB,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,wDACb,SAAAlD,MAAC,IAAA,CAAE,UAAU,wBACV,SAAAtF,IAAa,KACV,sCAAsCkF,EAAQ,MAAM,gCACpD,IAAIA,EAAQ,MAAM,yCACxB,CAAA,CACF,EAEAG,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,MAAC,SAAM,UAAU,+CACd,SAAAtF,IAAa,KAAO,mBAAqB,oBAC5C,EACAsF,EAAAA,IAAC,MAAA,CAAI,UAAU,yBAEX,gBAAO,KAAKiE,CAAwB,EACnC,UAAYzG,IAAM,aAAa,EAC/B,IAAKA,GACNwC,EAAAA,IAAC,SAAA,CAEC,KAAK,SACL,QAAS,IAAMqD,EAAU7F,CAAC,EAC1B,UAAW,8DACTsC,IAAWtC,EACP,0BACA,6CACN,GAEC,SAAA9C,IAAa,KAAOuJ,EAAyBzG,CAAC,EAAE,MAAQyG,EAAyBzG,CAAC,EAAE,OAAA,EAThFA,CAAA,CAWR,CAAA,CACH,CAAA,EACF,EAECsC,IAAW,SACVC,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAC,MAAC,SAAM,UAAU,+CACd,SAAAtF,IAAa,KAAO,mBAAqB,yBAC5C,EACAsF,EAAAA,IAAC,WAAA,CACC,MAAO8D,EACP,SAAW3G,GAAM4G,EAAc5G,EAAE,OAAO,KAAK,EAC7C,UAAU,2BACV,YAAazC,IAAa,KAAO,qBAAuB,mBAAA,CAAA,CAC1D,EACF,EAGFqF,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,MAAC,SAAM,UAAU,+CACd,SAAAtF,IAAa,KAAO,aAAe,aACtC,EACAsF,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,IAAKgE,EACL,MAAON,EACP,SAAWvG,GAAMwG,EAAgBxG,EAAE,OAAO,KAAK,EAC/C,UAAU,aAAA,CAAA,CACZ,EACF,SACC,MAAA,CACC,SAAA,CAAA6C,MAAC,SAAM,UAAU,+CACd,SAAAtF,IAAa,KAAO,QAAU,OACjC,EACAsF,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO4D,EACP,SAAWzG,GAAM0G,EAAgB1G,EAAE,OAAO,KAAK,EAC/C,UAAU,aAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,EAEA4C,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAO,QAAS+C,EAAS,UAAU,uBACjC,SAAArI,IAAa,KAAO,SAAW,cAAA,CAClC,EACAqF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM2D,GAAgBE,GAAgBH,EAAS,CAAE,aAAAC,EAAc,aAAAE,EAAc,OAAA9D,EAAQ,WAAYA,IAAW,QAAUgE,EAAa,OAAW,EACvJ,UAAU,gMACV,SAAU,CAACJ,GAAgB,CAACE,GAAiB9D,IAAW,SAAW,CAACgE,EAAW,KAAA,EAE/E,SAAA,CAAA9D,EAAAA,IAACkE,GAAA,CAAK,UAAU,SAAA,CAAU,EACzBxJ,IAAa,KAAO,YAAc,UAAA,CAAA,CAAA,CACrC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CAGA,SAASyG,GAAwB,CAC/B,WAAAhB,EACA,QAAA4C,EACA,SAAArB,EACA,SAAAyC,EACA,SAAAzJ,CACF,EAMG,CACD,KAAM,CAAC0J,EAAYC,CAAa,EAAIvJ,EAAAA,SAAS,EAAE,EACzC,CAACwJ,EAAgBC,CAAiB,EAAIzJ,EAAAA,SAAS,EAAK,EAE1D,aACG,MAAA,CAAI,UAAU,iBACb,SAAAiF,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,2DACZ,SAAA,CAAAC,EAAAA,IAACE,EAAA,CAAU,UAAU,SAAA,CAAU,EAC9BxF,IAAa,KAAO,oBAAsB,oBAAA,EAC7C,EACAsF,EAAAA,IAAC,SAAA,CAAO,QAAS+C,EAAS,UAAU,mCAClC,SAAA/C,EAAAA,IAACkD,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CACzB,CAAA,EACF,EAEAnD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACZ,SAAA,CAAArF,IAAa,KAAO,SAAW,QAAQ,KAAGyF,EAAW,aAAA,EACxD,EACAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACZ,SAAA,CAAAI,EAAW,cAAc,IAAEzF,IAAa,KAAO,2BAA6B,gBAAA,EAC/E,EACAqF,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACZ,SAAA,CAAAI,EAAW,aAAa,MAAIA,EAAW,YAAA,EAC1C,EACAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAQ,SAAAtF,IAAa,KAAO,WAAa,SAAS,EAAU,IAC5DA,IAAa,KACVuJ,EAAyB9D,EAAW,MAAM,EAAE,MAC5C8D,EAAyB9D,EAAW,MAAM,EAAE,QAC/CA,EAAW,YAAc,MAAMA,EAAW,UAAU,EAAA,CAAA,CACvD,CAAA,EACF,EAECA,EAAW,aACVJ,OAAC,MAAA,CAAI,UAAU,oCACZ,SAAA,CAAArF,IAAa,KAAO,iBAAmB,gBAAgB,IAAEyF,EAAW,YAAY,IAAEA,EAAW,WAAA,EAChG,EAGDmE,EACCvE,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,MAAC,SAAM,UAAU,0CACd,SAAAtF,IAAa,KAAO,iCAAmC,+BAC1D,EACAsF,EAAAA,IAAC,WAAA,CACC,MAAOoE,EACP,SAAWjH,GAAMkH,EAAclH,EAAE,OAAO,KAAK,EAC7C,UAAU,2BACV,YAAazC,IAAa,KAAO,qBAAuB,mBAAA,CAAA,EAE1DqF,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMuE,EAAkB,EAAK,EAAG,UAAU,uBACxD,SAAA7J,IAAa,KAAO,QAAU,QAAA,CACjC,EACAsF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmE,EAASC,GAAc,MAAS,EAC/C,UAAU,qGAET,SAAA1J,IAAa,KAAO,YAAc,WAAA,CAAA,CACrC,CAAA,CACF,CAAA,CAAA,CACF,EAEAqF,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMuE,EAAkB,EAAI,EACrC,UAAU,qGAET,SAAA7J,IAAa,KAAO,YAAc,WAAA,CAAA,EAErCqF,EAAAA,KAAC,SAAA,CACC,QAAS2B,EACT,UAAU,8IAEV,SAAA,CAAA1B,EAAAA,IAACrB,EAAA,CAAY,UAAU,SAAA,CAAU,EAChCjE,IAAa,KAAO,UAAY,cAAA,CAAA,CAAA,CACnC,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CAGA,SAASmG,GAAqB,CAC5B,MAAAD,EACA,OAAAY,EACA,eAAAgD,EACA,SAAA9J,CACF,EAKG,CACD,MAAM+J,EAA2H,CAC/H,UAAW,CAAE,MAAO,WAAY,QAAS,cAAe,MAAO,gCAAiC,KAAMC,EAAA,EACtG,UAAW,CAAE,MAAO,YAAa,QAAS,iBAAkB,MAAO,8BAA+B,KAAMC,EAAA,EACxG,MAAO,CAAE,MAAO,QAAS,QAAS,SAAU,MAAO,8BAA+B,KAAMhG,CAAA,EACxF,WAAY,CAAE,MAAO,eAAgB,QAAS,gBAAiB,MAAO,4BAA6B,KAAMiG,EAAA,EACzG,UAAW,CAAE,MAAO,YAAa,QAAS,aAAc,MAAO,4BAA6B,KAAMjG,CAAA,CAAY,EAG1GkG,EAAaJ,EAAgC7D,EAAM,MAAM,GAAK6D,EAAgC,UAC9FK,EAAaD,EAAW,KAExBE,EAAgB,KACwB,CAC1C,UAAW,YACX,UAAW,QACX,MAAO,aACP,WAAY,WAAA,GAEKnE,EAAM,MAAM,EAc3BoE,GAXqB,IAAM,CAC/B,MAAMC,EAAqD,CACzD,UAAW,CAAE,GAAI,kBAAmB,GAAI,uBAAA,EACxC,MAAO,CAAE,GAAI,oBAAqB,GAAI,oBAAA,EACtC,WAAY,CAAE,GAAI,kBAAmB,GAAI,sBAAA,EACzC,UAAW,CAAE,GAAI,aAAc,GAAI,YAAA,CAAa,EAE5CC,EAAOH,EAAA,EACb,OAAOG,EAAOD,EAAOC,CAAI,EAAI,IAC/B,GAEwB,EAExB,OACEnF,EAAAA,KAAC,MAAA,CAAI,UAAU,2HAA2H,QAASyB,EAEjJ,SAAA,CAAAzB,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qHACb,eAACnB,EAAA,CAAY,UAAU,qBAAqB,CAAA,CAC9C,EACAkB,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,sCAAsC,SAAA,CAAA,IAAEa,EAAM,YAAA,EAAa,SAC1E,OAAA,CAAK,UAAW,sEAAsEiE,EAAW,KAAK,GACrG,SAAA,CAAA7E,EAAAA,IAAC8E,EAAA,CAAW,UAAU,SAAA,CAAU,EAC/BpK,IAAa,KAAOmK,EAAW,MAAQA,EAAW,OAAA,CAAA,CACrD,CAAA,EACF,EACA9E,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACZ,SAAA,CAAAa,EAAM,YAAY,IAAElG,IAAa,KAAO,YAAc,WAAW,MAAIkG,EAAM,aAAa,eAAA,EAAiB,MAAA,EAC5G,EAGAb,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACd,SAAA,CAAAC,EAAAA,IAACuC,EAAA,CAAK,UAAU,aAAA,CAAc,EAC9BvC,EAAAA,IAAC,OAAA,CAAK,UAAU,yBAA0B,WAAM,SAAA,CAAU,CAAA,EAC5D,EACAD,EAAAA,KAAC,IAAA,CACC,KAAM,OAAOa,EAAM,UAAU,GAC7B,QAAUzD,GAAMA,EAAE,gBAAA,EAClB,UAAU,mEAEV,SAAA,CAAA6C,EAAAA,IAACwC,EAAA,CAAM,UAAU,aAAA,CAAc,EAC/BxC,EAAAA,IAAC,OAAA,CAAM,SAAAtF,IAAa,KAAO,YAAc,YAAA,CAAe,CAAA,CAAA,CAAA,CAC1D,EACF,EAGAqF,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAC,EAAAA,IAACyC,EAAA,CAAO,UAAU,2BAAA,CAA4B,EAC9CzC,EAAAA,IAAC,OAAA,CAAK,UAAU,WAAY,WAAM,gBAAA,CAAiB,CAAA,EACrD,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAC,EAAAA,IAACvB,EAAA,CAAM,UAAU,SAAA,CAAU,EAC1B,IAAI,KAAKmC,EAAM,UAAU,EAAE,eAAe,QAAS,CAAE,IAAK,UAAW,MAAO,UAAW,KAAM,UAAW,OAAQ,UAAW,CAAA,CAAA,CAC9H,CAAA,CAAA,CACF,CAAA,EACF,EAGCoE,GACChF,EAAAA,IAAC,MAAA,CAAI,UAAU,wCAAwC,QAAU7C,GAAMA,EAAE,gBAAA,EACvE,SAAA4C,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMyE,EAAe5D,EAAM,GAAImE,GAAe,EACvD,UAAU,0JACV,MAAO,CACL,WAAYnE,EAAM,SAAW,YAAc,4CACzCA,EAAM,SAAW,YAAc,4CAC/BA,EAAM,SAAW,QAAU,4CAC3B,2CAAA,EAGH,SAAA,CAAAA,EAAM,SAAW,aAAeZ,EAAAA,IAAC2E,GAAA,CAAQ,UAAU,UAAU,EAC7D/D,EAAM,SAAW,aAAeZ,EAAAA,IAACrB,EAAA,CAAY,UAAU,UAAU,EACjEiC,EAAM,SAAW,SAAWZ,EAAAA,IAAC4E,GAAA,CAAM,UAAU,UAAU,EACvDhE,EAAM,SAAW,cAAgBZ,EAAAA,IAACrB,EAAA,CAAY,UAAU,UAAU,EAClEjE,IAAa,KAAOsK,EAAgB,GAAKA,EAAgB,EAAA,CAAA,CAAA,CAC5D,CACF,CAAA,EAEJ,CAEJ,CAGA,SAAS3D,GAA6B,CACpC,MAAAT,EACA,QAAAmC,EACA,eAAAyB,EACA,SAAA9J,CACF,EAKG,CACD,MAAM+J,EAAqG,CACzG,UAAW,CAAE,MAAO,WAAY,QAAS,cAAe,MAAO,+BAAA,EAC/D,UAAW,CAAE,MAAO,YAAa,QAAS,iBAAkB,MAAO,6BAAA,EACnE,MAAO,CAAE,MAAO,QAAS,QAAS,SAAU,MAAO,6BAAA,EACnD,WAAY,CAAE,MAAO,eAAgB,QAAS,gBAAiB,MAAO,2BAAA,EACtE,UAAW,CAAE,MAAO,YAAa,QAAS,aAAc,MAAO,2BAAA,CAA4B,EAGvFI,EAAaJ,EAAgC7D,EAAM,MAAM,GAAK6D,EAAgC,UAE9FM,EAAgB,KACwB,CAC1C,UAAW,YACX,UAAW,QACX,MAAO,aACP,WAAY,WAAA,GAEKnE,EAAM,MAAM,EAc3BuE,GAXqB,IAAM,CAC/B,MAAMF,EAA2E,CAC/E,UAAW,CAAE,GAAI,kBAAmB,GAAI,wBAAyB,KAAMN,EAAA,EACvE,MAAO,CAAE,GAAI,oBAAqB,GAAI,qBAAsB,KAAMhG,CAAA,EAClE,WAAY,CAAE,GAAI,kBAAmB,GAAI,uBAAwB,KAAMiG,EAAA,EACvE,UAAW,CAAE,GAAI,aAAc,GAAI,aAAc,KAAMjG,CAAA,CAAY,EAE/DuG,EAAOH,EAAA,EACb,OAAOG,EAAOD,EAAOC,CAAI,EAAI,IAC/B,GAEuB,EACjBE,EAAWD,GAAgB,MAAQT,GAEzC,aACG,MAAA,CAAI,UAAU,iBACb,SAAA3E,EAAAA,KAAC,MAAA,CAAI,UAAU,sEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACZ,SAAA,CAAArF,IAAa,KAAO,iBAAmB,oBAAqB,KAAGkG,EAAM,YAAA,EACxE,QACC,MAAA,CAAI,UAAU,+BACb,SAAAZ,EAAAA,IAAC,QAAK,UAAW,8CAA8C6E,EAAW,KAAK,GAC5E,SAAAnK,IAAa,KAAOmK,EAAW,MAAQA,EAAW,QACrD,CAAA,CACF,CAAA,EACF,EACA7E,EAAAA,IAAC,SAAA,CAAO,QAAS+C,EAAS,UAAU,mCAClC,SAAA/C,EAAAA,IAACkD,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CACzB,CAAA,EACF,EAEAnD,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uDACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uGACb,eAACnB,EAAA,CAAY,UAAU,qBAAqB,CAAA,CAC9C,SACC,MAAA,CACC,SAAA,CAAAkB,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAa,EAAM,YAAY,IAAElG,IAAa,KAAO,YAAc,UAAA,EACzD,EACAqF,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACZ,SAAA,CAAAa,EAAM,aAAa,eAAA,EAAiB,MAAA,CAAA,CACvC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAGAb,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAC,MAAC,MAAG,UAAU,cAAe,SAAAtF,IAAa,KAAO,uBAAyB,eAAe,EACzFqF,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAACuC,EAAA,CAAK,UAAU,uBAAA,CAAwB,EACxCvC,EAAAA,IAAC,OAAA,CAAM,SAAAY,EAAM,SAAA,CAAU,CAAA,EACzB,EACAb,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAACwC,EAAA,CAAM,UAAU,uBAAA,CAAwB,EACzCxC,EAAAA,IAAC,IAAA,CAAE,KAAM,OAAOY,EAAM,UAAU,GAAI,UAAU,mCAC3C,SAAAA,EAAM,UAAA,CACT,CAAA,EACF,EACAb,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAACyC,EAAA,CAAO,UAAU,8BAAA,CAA+B,EACjDzC,EAAAA,IAAC,OAAA,CAAM,SAAAY,EAAM,gBAAA,CAAiB,CAAA,CAAA,CAChC,CAAA,CAAA,CACF,CAAA,EACF,EAGCA,EAAM,gBACLb,OAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAC,MAAC,MAAG,UAAU,kCACX,SAAAtF,IAAa,KAAO,wBAA0B,0BACjD,EACAsF,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAA0B,WAAM,cAAA,CAAe,CAAA,EAC9D,EAIFD,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAC,MAAC,MAAG,UAAU,cAAe,SAAAtF,IAAa,KAAO,UAAY,QAAQ,EACrEqF,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,MAAC,QAAK,UAAU,gBAAiB,SAAAtF,IAAa,KAAO,SAAW,YAAY,EAC5EsF,MAAC,QAAM,SAAA,IAAI,KAAKY,EAAM,UAAU,EAAE,eAAe,QAAS,CAAE,IAAK,UAAW,MAAO,UAAW,KAAM,UAAW,KAAM,UAAW,OAAQ,SAAA,CAAW,CAAA,CAAE,CAAA,EACvJ,EACCA,EAAM,aACLb,OAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,MAAC,QAAK,UAAU,gBAAiB,SAAAtF,IAAa,KAAO,WAAa,aAAa,EAC/EsF,MAAC,QAAM,SAAA,IAAI,KAAKY,EAAM,WAAW,EAAE,eAAe,QAAS,CAAE,IAAK,UAAW,MAAO,UAAW,KAAM,UAAW,KAAM,UAAW,OAAQ,SAAA,CAAW,CAAA,CAAE,CAAA,CAAA,CACxJ,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,EAGAb,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,aACb,SAAAD,EAAAA,KAAC,IAAA,CACC,KAAM,OAAOa,EAAM,UAAU,GAC7B,UAAU,8DAEV,SAAA,CAAAZ,EAAAA,IAACwC,EAAA,CAAM,UAAU,SAAA,CAAU,EAC1B9H,IAAa,KAAO,YAAc,YAAA,CAAA,CAAA,EAEvC,EAECyK,GACCpF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbyE,EAAe5D,EAAM,GAAImE,GAAe,CAC1C,EACA,UAAU,uIACV,MAAO,CACL,WAAYnE,EAAM,SAAW,YAAc,4CACzCA,EAAM,SAAW,YAAc,4CAC/BA,EAAM,SAAW,QAAU,4CAC3B,2CAAA,EAGJ,SAAA,CAAAZ,EAAAA,IAACoF,EAAA,CAAS,UAAU,SAAA,CAAU,EAC7B1K,IAAa,KAAOyK,EAAe,GAAKA,EAAe,EAAA,CAAA,CAAA,CAC1D,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAEJ"}