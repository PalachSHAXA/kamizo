{"version":3,"file":"CouponCheckerDashboard-1768381324153-BSLAW9C5.js","sources":["../../src/pages/CouponCheckerDashboard.tsx"],"sourcesContent":["import { useState } from 'react';\nimport {\n  Search, CheckCircle, XCircle, Loader2, Clock, User,\n  Phone, AlertTriangle, Calculator, History\n} from 'lucide-react';\nimport { useAuthStore } from '../stores/authStore';\n\ninterface CouponInfo {\n  id: string;\n  code: string;\n  ad_id: string;\n  ad_title: string;\n  ad_phone: string;\n  ad_description: string;\n  user_id: string;\n  user_name: string;\n  user_phone: string;\n  discount_percent: number;\n  status: string;\n  issued_at: string;\n  expires_at: string;\n  activated_at?: string;\n}\n\ninterface ActivationRecord {\n  id: string;\n  code: string;\n  ad_title: string;\n  user_name: string;\n  discount_percent: number;\n  activation_amount: number;\n  discount_amount: number;\n  activated_at: string;\n}\n\nexport function CouponCheckerDashboard() {\n  const { token } = useAuthStore();\n  const [couponCode, setCouponCode] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [couponInfo, setCouponInfo] = useState<CouponInfo | null>(null);\n  const [valid, setValid] = useState<boolean | null>(null);\n  const [reason, setReason] = useState<string>('');\n  const [activationAmount, setActivationAmount] = useState<string>('');\n  const [activating, setActivating] = useState(false);\n  const [activationResult, setActivationResult] = useState<{\n    discount_amount: number;\n    final_amount: number;\n  } | null>(null);\n  const [history, setHistory] = useState<ActivationRecord[]>([]);\n  const [showHistory, setShowHistory] = useState(false);\n  const [loadingHistory, setLoadingHistory] = useState(false);\n\n  const API_BASE = import.meta.env.VITE_API_URL || '';\n\n  const checkCoupon = async () => {\n    if (!couponCode.trim() || couponCode.length < 6) return;\n\n    setLoading(true);\n    setCouponInfo(null);\n    setValid(null);\n    setReason('');\n    setActivationResult(null);\n\n    try {\n      const res = await fetch(`${API_BASE}/api/coupons/check/${couponCode.trim().toUpperCase()}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n\n      const data = await res.json();\n\n      if (res.ok) {\n        setCouponInfo(data.coupon);\n        setValid(data.valid);\n        setReason(data.reason || '');\n      } else {\n        setValid(false);\n        setReason(data.error || 'Купон не найден');\n      }\n    } catch (err) {\n      setValid(false);\n      setReason('Ошибка проверки купона');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const activateCoupon = async () => {\n    if (!couponInfo || !valid) return;\n\n    const amount = parseFloat(activationAmount);\n    if (isNaN(amount) || amount <= 0) {\n      alert('Введите корректную сумму');\n      return;\n    }\n\n    setActivating(true);\n    try {\n      const res = await fetch(`${API_BASE}/api/coupons/activate/${couponInfo.code}`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ amount })\n      });\n\n      const data = await res.json();\n\n      if (res.ok) {\n        setActivationResult({\n          discount_amount: data.discount_amount,\n          final_amount: data.final_amount\n        });\n        setValid(false);\n        setReason('Купон успешно активирован!');\n      } else {\n        alert(data.error || 'Ошибка активации');\n      }\n    } catch (err) {\n      alert('Ошибка активации купона');\n    } finally {\n      setActivating(false);\n    }\n  };\n\n  const fetchHistory = async () => {\n    setLoadingHistory(true);\n    try {\n      const res = await fetch(`${API_BASE}/api/coupons/history`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      if (res.ok) {\n        const data = await res.json();\n        setHistory(data.activations || []);\n      }\n    } catch (err) {\n      console.error('Failed to fetch history:', err);\n    } finally {\n      setLoadingHistory(false);\n    }\n  };\n\n  const resetCheck = () => {\n    setCouponCode('');\n    setCouponInfo(null);\n    setValid(null);\n    setReason('');\n    setActivationAmount('');\n    setActivationResult(null);\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      checkCoupon();\n    }\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Проверка купонов</h1>\n          <p className=\"text-gray-500\">Введите код для проверки и активации</p>\n        </div>\n        <button\n          onClick={() => { setShowHistory(true); fetchHistory(); }}\n          className=\"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n        >\n          <History className=\"w-5 h-5\" />\n          История\n        </button>\n      </div>\n\n      {/* Search Box */}\n      <div className=\"bg-white rounded-2xl shadow-lg border p-6 mb-6\">\n        <div className=\"flex gap-3\">\n          <div className=\"relative flex-1\">\n            <input\n              type=\"text\"\n              value={couponCode}\n              onChange={e => setCouponCode(e.target.value.toUpperCase())}\n              onKeyPress={handleKeyPress}\n              placeholder=\"Введите код купона (6 символов)\"\n              maxLength={6}\n              className=\"w-full px-4 py-4 text-2xl font-mono tracking-widest text-center border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 uppercase\"\n              autoFocus\n            />\n          </div>\n          <button\n            onClick={checkCoupon}\n            disabled={loading || couponCode.length < 6}\n            className=\"px-6 py-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n          >\n            {loading ? (\n              <Loader2 className=\"w-6 h-6 animate-spin\" />\n            ) : (\n              <Search className=\"w-6 h-6\" />\n            )}\n          </button>\n        </div>\n\n        {couponCode && (\n          <button\n            onClick={resetCheck}\n            className=\"mt-3 text-sm text-gray-500 hover:text-gray-700\"\n          >\n            Очистить\n          </button>\n        )}\n      </div>\n\n      {/* Result */}\n      {(couponInfo || valid === false) && (\n        <div className={`bg-white rounded-2xl shadow-lg border overflow-hidden ${\n          activationResult ? 'border-green-300' : valid ? 'border-green-200' : 'border-red-200'\n        }`}>\n          {/* Status Header */}\n          <div className={`p-4 ${\n            activationResult ? 'bg-green-500' : valid ? 'bg-green-100' : 'bg-red-100'\n          }`}>\n            <div className=\"flex items-center gap-3\">\n              {activationResult ? (\n                <CheckCircle className=\"w-8 h-8 text-white\" />\n              ) : valid ? (\n                <CheckCircle className=\"w-8 h-8 text-green-600\" />\n              ) : (\n                <XCircle className=\"w-8 h-8 text-red-600\" />\n              )}\n              <div>\n                <div className={`font-bold text-lg ${\n                  activationResult ? 'text-white' : valid ? 'text-green-800' : 'text-red-800'\n                }`}>\n                  {activationResult ? 'Купон активирован!' : valid ? 'Купон действителен' : 'Купон недействителен'}\n                </div>\n                {reason && (\n                  <div className={`text-sm ${\n                    activationResult ? 'text-green-100' : valid ? 'text-green-600' : 'text-red-600'\n                  }`}>\n                    {reason}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Coupon Info */}\n          {couponInfo && (\n            <div className=\"p-4 space-y-4\">\n              {/* Code */}\n              <div className=\"text-center\">\n                <code className=\"text-3xl font-mono font-bold tracking-widest text-gray-900\">\n                  {couponInfo.code}\n                </code>\n              </div>\n\n              {/* Discount */}\n              <div className=\"flex items-center justify-center\">\n                <div className=\"px-6 py-3 bg-purple-100 rounded-xl\">\n                  <span className=\"text-3xl font-bold text-purple-700\">-{couponInfo.discount_percent}%</span>\n                </div>\n              </div>\n\n              {/* Ad Info */}\n              <div className=\"bg-gray-50 rounded-xl p-4 space-y-2\">\n                <div className=\"font-semibold text-gray-900\">{couponInfo.ad_title}</div>\n                {couponInfo.ad_description && (\n                  <div className=\"text-sm text-gray-500\">{couponInfo.ad_description}</div>\n                )}\n                <div className=\"flex items-center gap-2 text-gray-600\">\n                  <Phone className=\"w-4 h-4\" />\n                  <span>{couponInfo.ad_phone}</span>\n                </div>\n              </div>\n\n              {/* User Info */}\n              <div className=\"flex items-center gap-3 p-3 bg-blue-50 rounded-xl\">\n                <div className=\"w-10 h-10 bg-blue-200 rounded-full flex items-center justify-center\">\n                  <User className=\"w-5 h-5 text-blue-700\" />\n                </div>\n                <div>\n                  <div className=\"font-medium text-gray-900\">{couponInfo.user_name}</div>\n                  <div className=\"text-sm text-gray-500\">{couponInfo.user_phone}</div>\n                </div>\n              </div>\n\n              {/* Dates */}\n              <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n                <div className=\"flex items-center gap-1\">\n                  <Clock className=\"w-4 h-4\" />\n                  Выдан: {new Date(couponInfo.issued_at).toLocaleDateString('ru-RU')}\n                </div>\n                {couponInfo.expires_at && (\n                  <div className=\"flex items-center gap-1\">\n                    <AlertTriangle className=\"w-4 h-4\" />\n                    Истекает: {new Date(couponInfo.expires_at).toLocaleDateString('ru-RU')}\n                  </div>\n                )}\n              </div>\n\n              {/* Activation Form */}\n              {valid && !activationResult && (\n                <div className=\"border-t pt-4 mt-4\">\n                  <label className=\"block text-sm font-medium mb-2\">\n                    Сумма покупки (сум)\n                  </label>\n                  <div className=\"flex gap-3\">\n                    <div className=\"relative flex-1\">\n                      <Calculator className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                      <input\n                        type=\"number\"\n                        value={activationAmount}\n                        onChange={e => setActivationAmount(e.target.value)}\n                        placeholder=\"0\"\n                        className=\"w-full pl-10 pr-4 py-3 border rounded-xl text-lg\"\n                        min=\"0\"\n                      />\n                    </div>\n                    <button\n                      onClick={activateCoupon}\n                      disabled={activating || !activationAmount}\n                      className=\"px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 disabled:opacity-50 flex items-center gap-2\"\n                    >\n                      {activating ? (\n                        <Loader2 className=\"w-5 h-5 animate-spin\" />\n                      ) : (\n                        <CheckCircle className=\"w-5 h-5\" />\n                      )}\n                      Активировать\n                    </button>\n                  </div>\n\n                  {/* Preview */}\n                  {activationAmount && parseFloat(activationAmount) > 0 && (\n                    <div className=\"mt-3 p-3 bg-green-50 rounded-xl\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span>Сумма покупки:</span>\n                        <span>{parseFloat(activationAmount).toLocaleString()} сум</span>\n                      </div>\n                      <div className=\"flex justify-between text-sm text-green-600\">\n                        <span>Скидка {couponInfo.discount_percent}%:</span>\n                        <span>-{(parseFloat(activationAmount) * couponInfo.discount_percent / 100).toLocaleString()} сум</span>\n                      </div>\n                      <div className=\"flex justify-between font-bold mt-1 pt-1 border-t border-green-200\">\n                        <span>К оплате:</span>\n                        <span>{(parseFloat(activationAmount) * (1 - couponInfo.discount_percent / 100)).toLocaleString()} сум</span>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Activation Result */}\n              {activationResult && (\n                <div className=\"border-t pt-4 mt-4\">\n                  <div className=\"p-4 bg-green-50 rounded-xl space-y-2\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Сумма покупки:</span>\n                      <span className=\"font-medium\">{(activationResult.final_amount + activationResult.discount_amount).toLocaleString()} сум</span>\n                    </div>\n                    <div className=\"flex justify-between text-green-600\">\n                      <span>Скидка:</span>\n                      <span className=\"font-medium\">-{activationResult.discount_amount.toLocaleString()} сум</span>\n                    </div>\n                    <div className=\"flex justify-between text-lg font-bold pt-2 border-t border-green-200\">\n                      <span>К оплате:</span>\n                      <span className=\"text-green-700\">{activationResult.final_amount.toLocaleString()} сум</span>\n                    </div>\n                  </div>\n\n                  <button\n                    onClick={resetCheck}\n                    className=\"w-full mt-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700\"\n                  >\n                    Проверить другой купон\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* History Modal */}\n      {showHistory && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10\">\n              <h2 className=\"text-lg font-semibold\">История активаций</h2>\n              <button\n                onClick={() => setShowHistory(false)}\n                className=\"p-2 hover:bg-gray-100 rounded-lg\"\n              >\n                <XCircle className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {loadingHistory ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"w-6 h-6 animate-spin text-blue-600\" />\n                </div>\n              ) : history.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500\">\n                  История пуста\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {history.map(item => (\n                    <div key={item.id} className=\"p-4 bg-gray-50 rounded-xl\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <div className=\"flex items-center gap-2\">\n                            <code className=\"px-2 py-1 bg-white border rounded font-mono text-sm\">\n                              {item.code}\n                            </code>\n                            <span className=\"text-sm text-gray-500\">{item.ad_title}</span>\n                          </div>\n                          <div className=\"text-sm text-gray-500 mt-1\">{item.user_name}</div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"text-green-600 font-medium\">\n                            -{item.discount_amount?.toLocaleString()} сум\n                          </div>\n                          <div className=\"text-xs text-gray-400\">\n                            {new Date(item.activated_at).toLocaleString('ru-RU')}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["CouponCheckerDashboard","token","useAuthStore","couponCode","setCouponCode","useState","loading","setLoading","couponInfo","setCouponInfo","valid","setValid","reason","setReason","activationAmount","setActivationAmount","activating","setActivating","activationResult","setActivationResult","history","setHistory","showHistory","setShowHistory","loadingHistory","setLoadingHistory","API_BASE","checkCoupon","res","data","activateCoupon","amount","fetchHistory","resetCheck","handleKeyPress","e","jsxs","jsx","History","Loader2","Search","CheckCircle","XCircle","Phone","User","Clock","AlertTriangle","Calculator","item"],"mappings":"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"}