{"version":3,"file":"TrainingsPage-1767960438672-DyE--jsg.js","sources":["../../src/stores/trainingStore.ts","../../src/pages/TrainingsPage.tsx"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport type {\n  Partner,\n  TrainingProposal,\n  TrainingVote,\n  TrainingFeedback,\n  TrainingNotification,\n  TrainingSettings,\n  TrainingProposalStatus,\n  TrainingFormat,\n  TrainingTimeSlot,\n  ParticipationIntent,\n} from '../types';\nimport {\n  trainingPartnersApi,\n  trainingProposalsApi,\n  trainingVotesApi,\n  trainingRegistrationsApi,\n  trainingFeedbackApi,\n  trainingNotificationsApi,\n  trainingSettingsApi,\n} from '../services/api';\n\n// ==================== Mappers (snake_case -> camelCase) ====================\n\nconst mapPartnerFromApi = (p: any): Partner => ({\n  id: p.id,\n  name: p.name,\n  position: p.position,\n  specialization: p.specialization,\n  email: p.email,\n  phone: p.phone,\n  bio: p.bio,\n  avatarUrl: p.avatar_url,\n  isActive: p.is_active === 1 || p.is_active === true,\n  trainingsСonducted: p.trainings_conducted,\n  averageRating: p.average_rating,\n});\n\nconst mapVoteFromApi = (v: any): TrainingVote => ({\n  id: v.id,\n  proposalId: v.proposal_id,\n  voterId: v.voter_id,\n  voterName: v.voter_name,\n  participationIntent: v.participation_intent as ParticipationIntent,\n  isAnonymous: v.is_anonymous === 1 || v.is_anonymous === true,\n  votedAt: v.voted_at,\n});\n\nconst mapFeedbackFromApi = (f: any): TrainingFeedback => ({\n  id: f.id,\n  proposalId: f.proposal_id,\n  reviewerId: f.reviewer_id,\n  reviewerName: f.reviewer_name,\n  isAnonymous: f.is_anonymous === 1 || f.is_anonymous === true,\n  rating: f.rating,\n  contentRating: f.content_rating,\n  presenterRating: f.presenter_rating,\n  usefulnessRating: f.usefulness_rating,\n  comment: f.comment,\n  createdAt: f.created_at,\n});\n\nconst mapProposalFromApi = (p: any): TrainingProposal => ({\n  id: p.id,\n  topic: p.topic,\n  description: p.description,\n  authorId: p.author_id,\n  authorName: p.author_name,\n  isAuthorAnonymous: p.is_author_anonymous === 1 || p.is_author_anonymous === true,\n  partnerId: p.partner_id,\n  partnerName: p.partner_name,\n  format: p.format as TrainingFormat,\n  preferredTimeSlots: Array.isArray(p.preferred_time_slots)\n    ? p.preferred_time_slots\n    : p.preferred_time_slots ? JSON.parse(p.preferred_time_slots) : [],\n  votes: p.votes ? p.votes.map(mapVoteFromApi) : [],\n  voteThreshold: p.vote_threshold || 5,\n  status: p.status as TrainingProposalStatus,\n  partnerResponse: p.partner_response,\n  partnerResponseAt: p.partner_response_at,\n  partnerResponseNote: p.partner_response_note,\n  scheduledDate: p.scheduled_date,\n  scheduledTime: p.scheduled_time,\n  scheduledLocation: p.scheduled_location,\n  scheduledLink: p.scheduled_link,\n  maxParticipants: p.max_participants,\n  registeredParticipants: p.registrations\n    ? p.registrations.map((r: any) => r.user_id)\n    : [],\n  feedback: p.feedback ? p.feedback.map(mapFeedbackFromApi) : [],\n  completedAt: p.completed_at,\n  actualParticipantsCount: p.actual_participants_count,\n  createdAt: p.created_at,\n  updatedAt: p.updated_at,\n  // Computed fields from API\n  voteCount: p.vote_count,\n  registeredCount: p.registered_count,\n});\n\nconst mapNotificationFromApi = (n: any): TrainingNotification => ({\n  id: n.id,\n  type: n.type,\n  proposalId: n.proposal_id,\n  recipientId: n.recipient_id,\n  recipientRole: n.recipient_role,\n  title: n.title,\n  message: n.message,\n  isRead: n.is_read === 1 || n.is_read === true,\n  createdAt: n.created_at,\n});\n\nconst mapSettingsFromApi = (s: Record<string, any>): TrainingSettings => ({\n  voteThreshold: s.vote_threshold ?? 5,\n  allowAnonymousProposals: s.allow_anonymous_proposals ?? true,\n  allowAnonymousVotes: s.allow_anonymous_votes ?? true,\n  allowAnonymousFeedback: s.allow_anonymous_feedback ?? true,\n  notifyAllOnNewProposal: s.notify_all_on_new_proposal ?? true,\n  autoCloseAfterDays: s.auto_close_after_days ?? 30,\n});\n\n// ==================== State Interface ====================\n\ninterface TrainingState {\n  // Data\n  partners: Partner[];\n  proposals: TrainingProposal[];\n  notifications: TrainingNotification[];\n  settings: TrainingSettings;\n\n  // Loading states\n  isLoadingPartners: boolean;\n  isLoadingProposals: boolean;\n  isLoadingNotifications: boolean;\n\n  // Partners (async)\n  fetchPartners: (activeOnly?: boolean) => Promise<void>;\n  addPartner: (partner: Omit<Partner, 'id'>) => Promise<Partner>;\n  updatePartner: (id: string, partner: Partial<Partner>) => Promise<void>;\n  deletePartner: (id: string) => Promise<void>;\n  getActivePartners: () => Partner[];\n\n  // Proposals (async)\n  fetchProposals: (options?: { status?: string; partnerId?: string; authorId?: string }) => Promise<void>;\n  fetchProposalById: (id: string) => Promise<TrainingProposal | null>;\n  addProposal: (proposal: {\n    topic: string;\n    description?: string;\n    partnerId: string;\n    format: TrainingFormat;\n    preferredTimeSlots: TrainingTimeSlot[];\n    isAuthorAnonymous?: boolean;\n  }) => Promise<TrainingProposal>;\n  updateProposal: (id: string, proposal: Partial<TrainingProposal>) => Promise<void>;\n  deleteProposal: (id: string) => Promise<void>;\n  getProposalById: (id: string) => TrainingProposal | undefined;\n  getProposalsByStatus: (status: TrainingProposalStatus) => TrainingProposal[];\n  getMyProposals: (userId: string) => TrainingProposal[];\n\n  // Voting (async)\n  addVote: (\n    proposalId: string,\n    vote: {\n      participationIntent: ParticipationIntent;\n      isAnonymous: boolean;\n    }\n  ) => Promise<void>;\n  removeVote: (proposalId: string) => Promise<void>;\n  hasVoted: (proposalId: string, voterId: string) => boolean;\n  getVoteCount: (proposalId: string) => number;\n  getDefinitelyCount: (proposalId: string) => number;\n\n  // Partner response (async)\n  setPartnerResponse: (\n    proposalId: string,\n    response: 'accepted' | 'rejected',\n    note?: string\n  ) => Promise<void>;\n\n  // Scheduling (async)\n  scheduleTraining: (\n    proposalId: string,\n    data: {\n      scheduledDate: string;\n      scheduledTime: string;\n      scheduledLocation?: string;\n      scheduledLink?: string;\n      maxParticipants?: number;\n    }\n  ) => Promise<void>;\n\n  // Complete training (async)\n  completeTraining: (proposalId: string, actualParticipantsCount?: number) => Promise<void>;\n\n  // Registration (async)\n  registerForTraining: (proposalId: string) => Promise<void>;\n  unregisterFromTraining: (proposalId: string) => Promise<void>;\n  isRegistered: (proposalId: string, userId: string) => boolean;\n  getRegisteredCount: (proposalId: string) => number;\n\n  // Feedback (async)\n  addFeedback: (\n    proposalId: string,\n    feedback: {\n      rating: number;\n      contentRating?: number;\n      presenterRating?: number;\n      usefulnessRating?: number;\n      comment?: string;\n      isAnonymous?: boolean;\n    }\n  ) => Promise<void>;\n  hasFeedback: (proposalId: string, reviewerId: string) => boolean;\n  getAverageRating: (proposalId: string) => number;\n\n  // Status (sync helpers)\n  changeStatus: (proposalId: string, status: TrainingProposalStatus) => Promise<void>;\n  checkThreshold: (proposalId: string) => boolean;\n\n  // Notifications (async)\n  fetchNotifications: (unreadOnly?: boolean) => Promise<void>;\n  markNotificationAsRead: (id: string) => Promise<void>;\n  markAllNotificationsAsRead: () => Promise<void>;\n  getUnreadNotifications: (recipientId: string) => TrainingNotification[];\n  getNotificationsByRecipient: (recipientId: string) => TrainingNotification[];\n\n  // Settings (async)\n  fetchSettings: () => Promise<void>;\n  updateSettings: (settings: Partial<TrainingSettings>) => Promise<void>;\n\n  // Stats (sync - computed from local state)\n  getStats: () => {\n    totalProposals: number;\n    votingProposals: number;\n    scheduledTrainings: number;\n    completedTrainings: number;\n    totalVotes: number;\n    totalParticipants: number;\n    averageRating: number;\n  };\n\n  // Anonymity helpers (sync)\n  getDisplayName: (name: string, isAnonymous: boolean, isAdmin: boolean) => string;\n  getVotesForDisplay: (proposalId: string, isAdmin: boolean) => TrainingVote[];\n}\n\n// ==================== Default Settings ====================\n\nconst defaultSettings: TrainingSettings = {\n  voteThreshold: 5,\n  allowAnonymousProposals: true,\n  allowAnonymousVotes: true,\n  allowAnonymousFeedback: true,\n  notifyAllOnNewProposal: true,\n  autoCloseAfterDays: 30,\n};\n\n// ==================== Store ====================\n\nexport const useTrainingStore = create<TrainingState>()(\n  persist(\n    (set, get) => ({\n      // Initial state\n      partners: [],\n      proposals: [],\n      notifications: [],\n      settings: defaultSettings,\n      isLoadingPartners: false,\n      isLoadingProposals: false,\n      isLoadingNotifications: false,\n\n      // Partners\n      fetchPartners: async (activeOnly?: boolean) => {\n        set({ isLoadingPartners: true });\n        try {\n          const response = await trainingPartnersApi.getAll(activeOnly);\n          set({ partners: response.partners.map(mapPartnerFromApi) });\n        } catch (error) {\n          console.error('Failed to fetch partners:', error);\n        } finally {\n          set({ isLoadingPartners: false });\n        }\n      },\n\n      addPartner: async (partnerData) => {\n        const response = await trainingPartnersApi.create(partnerData);\n        const newPartner = mapPartnerFromApi(response.partner);\n        set((state) => ({ partners: [...state.partners, newPartner] }));\n        return newPartner;\n      },\n\n      updatePartner: async (id, partnerData) => {\n        await trainingPartnersApi.update(id, partnerData);\n        set((state) => ({\n          partners: state.partners.map((p) =>\n            p.id === id ? { ...p, ...partnerData } : p\n          ),\n        }));\n      },\n\n      deletePartner: async (id) => {\n        await trainingPartnersApi.delete(id);\n        set((state) => ({\n          partners: state.partners.filter((p) => p.id !== id),\n        }));\n      },\n\n      getActivePartners: () => {\n        return get().partners.filter((p) => p.isActive);\n      },\n\n      // Proposals\n      fetchProposals: async (options) => {\n        set({ isLoadingProposals: true });\n        try {\n          const response = await trainingProposalsApi.getAll(options);\n          set({ proposals: response.proposals.map(mapProposalFromApi) });\n        } catch (error) {\n          console.error('Failed to fetch proposals:', error);\n        } finally {\n          set({ isLoadingProposals: false });\n        }\n      },\n\n      fetchProposalById: async (id) => {\n        try {\n          const response = await trainingProposalsApi.getById(id);\n          const proposal = mapProposalFromApi(response.proposal);\n          // Update in local state\n          set((state) => ({\n            proposals: state.proposals.some((p) => p.id === id)\n              ? state.proposals.map((p) => (p.id === id ? proposal : p))\n              : [...state.proposals, proposal],\n          }));\n          return proposal;\n        } catch (error) {\n          console.error('Failed to fetch proposal:', error);\n          return null;\n        }\n      },\n\n      addProposal: async (proposalData) => {\n        const response = await trainingProposalsApi.create({\n          topic: proposalData.topic,\n          description: proposalData.description,\n          partnerId: proposalData.partnerId,\n          format: proposalData.format,\n          preferredTimeSlots: proposalData.preferredTimeSlots,\n          isAuthorAnonymous: proposalData.isAuthorAnonymous,\n        });\n        const newProposal = mapProposalFromApi(response.proposal);\n        set((state) => ({ proposals: [...state.proposals, newProposal] }));\n        return newProposal;\n      },\n\n      updateProposal: async (id, proposalData) => {\n        await trainingProposalsApi.update(id, proposalData);\n        set((state) => ({\n          proposals: state.proposals.map((p) =>\n            p.id === id ? { ...p, ...proposalData, updatedAt: new Date().toISOString() } : p\n          ),\n        }));\n      },\n\n      deleteProposal: async (id) => {\n        await trainingProposalsApi.delete(id);\n        set((state) => ({\n          proposals: state.proposals.filter((p) => p.id !== id),\n        }));\n      },\n\n      getProposalById: (id) => {\n        return get().proposals.find((p) => p.id === id);\n      },\n\n      getProposalsByStatus: (status) => {\n        return get().proposals.filter((p) => p.status === status);\n      },\n\n      getMyProposals: (userId) => {\n        return get().proposals.filter((p) => p.authorId === userId);\n      },\n\n      // Voting\n      addVote: async (proposalId, voteData) => {\n        await trainingVotesApi.vote(proposalId, voteData);\n        // Refresh the proposal to get updated vote count\n        await get().fetchProposalById(proposalId);\n      },\n\n      removeVote: async (proposalId) => {\n        await trainingVotesApi.removeVote(proposalId);\n        // Refresh the proposal\n        await get().fetchProposalById(proposalId);\n      },\n\n      hasVoted: (proposalId, voterId) => {\n        const proposal = get().getProposalById(proposalId);\n        return proposal?.votes.some((v) => v.voterId === voterId) ?? false;\n      },\n\n      getVoteCount: (proposalId) => {\n        const proposal = get().getProposalById(proposalId);\n        return proposal?.votes.length ?? proposal?.voteCount ?? 0;\n      },\n\n      getDefinitelyCount: (proposalId) => {\n        const proposal = get().getProposalById(proposalId);\n        return (\n          proposal?.votes.filter((v) => v.participationIntent === 'definitely').length ?? 0\n        );\n      },\n\n      // Partner response\n      setPartnerResponse: async (proposalId, response, note) => {\n        await trainingProposalsApi.update(proposalId, {\n          partnerResponse: response,\n          partnerResponseNote: note,\n          status: response === 'accepted' ? 'approved' : 'rejected',\n        });\n        set((state) => ({\n          proposals: state.proposals.map((p) =>\n            p.id === proposalId\n              ? {\n                  ...p,\n                  partnerResponse: response,\n                  partnerResponseAt: new Date().toISOString(),\n                  partnerResponseNote: note,\n                  status: response === 'accepted' ? 'approved' : 'rejected',\n                  updatedAt: new Date().toISOString(),\n                }\n              : p\n          ),\n        }));\n      },\n\n      // Scheduling\n      scheduleTraining: async (proposalId, data) => {\n        await trainingProposalsApi.schedule(proposalId, data);\n        set((state) => ({\n          proposals: state.proposals.map((p) =>\n            p.id === proposalId\n              ? {\n                  ...p,\n                  ...data,\n                  status: 'scheduled' as TrainingProposalStatus,\n                  registeredParticipants: [],\n                  updatedAt: new Date().toISOString(),\n                }\n              : p\n          ),\n        }));\n      },\n\n      // Complete training\n      completeTraining: async (proposalId, actualParticipantsCount) => {\n        await trainingProposalsApi.complete(proposalId, { actualParticipantsCount });\n        set((state) => ({\n          proposals: state.proposals.map((p) =>\n            p.id === proposalId\n              ? {\n                  ...p,\n                  status: 'completed' as TrainingProposalStatus,\n                  completedAt: new Date().toISOString(),\n                  actualParticipantsCount,\n                  updatedAt: new Date().toISOString(),\n                }\n              : p\n          ),\n        }));\n      },\n\n      // Registration\n      registerForTraining: async (proposalId) => {\n        await trainingRegistrationsApi.register(proposalId);\n        // Refresh proposal to get updated registrations\n        await get().fetchProposalById(proposalId);\n      },\n\n      unregisterFromTraining: async (proposalId) => {\n        await trainingRegistrationsApi.unregister(proposalId);\n        // Refresh proposal\n        await get().fetchProposalById(proposalId);\n      },\n\n      isRegistered: (proposalId, userId) => {\n        const proposal = get().getProposalById(proposalId);\n        return proposal?.registeredParticipants?.includes(userId) ?? false;\n      },\n\n      getRegisteredCount: (proposalId) => {\n        const proposal = get().getProposalById(proposalId);\n        return proposal?.registeredParticipants?.length ?? proposal?.registeredCount ?? 0;\n      },\n\n      // Feedback\n      addFeedback: async (proposalId, feedbackData) => {\n        await trainingFeedbackApi.submit(proposalId, feedbackData);\n        // Refresh proposal to get updated feedback\n        await get().fetchProposalById(proposalId);\n      },\n\n      hasFeedback: (proposalId, reviewerId) => {\n        const proposal = get().getProposalById(proposalId);\n        return proposal?.feedback?.some((f) => f.reviewerId === reviewerId) ?? false;\n      },\n\n      getAverageRating: (proposalId) => {\n        const proposal = get().getProposalById(proposalId);\n        if (!proposal?.feedback?.length) return 0;\n        const sum = proposal.feedback.reduce((acc, f) => acc + f.rating, 0);\n        return sum / proposal.feedback.length;\n      },\n\n      // Status\n      changeStatus: async (proposalId, status) => {\n        await trainingProposalsApi.update(proposalId, { status });\n        set((state) => ({\n          proposals: state.proposals.map((p) =>\n            p.id === proposalId\n              ? { ...p, status, updatedAt: new Date().toISOString() }\n              : p\n          ),\n        }));\n      },\n\n      checkThreshold: (proposalId) => {\n        const proposal = get().getProposalById(proposalId);\n        if (!proposal) return false;\n        const voteCount = proposal.votes?.length ?? proposal.voteCount ?? 0;\n        return voteCount >= proposal.voteThreshold;\n      },\n\n      // Notifications\n      fetchNotifications: async (unreadOnly) => {\n        set({ isLoadingNotifications: true });\n        try {\n          const response = await trainingNotificationsApi.getAll(unreadOnly);\n          set({ notifications: response.notifications.map(mapNotificationFromApi) });\n        } catch (error) {\n          console.error('Failed to fetch notifications:', error);\n        } finally {\n          set({ isLoadingNotifications: false });\n        }\n      },\n\n      markNotificationAsRead: async (id) => {\n        await trainingNotificationsApi.markAsRead(id);\n        set((state) => ({\n          notifications: state.notifications.map((n) =>\n            n.id === id ? { ...n, isRead: true } : n\n          ),\n        }));\n      },\n\n      markAllNotificationsAsRead: async () => {\n        await trainingNotificationsApi.markAllAsRead();\n        set((state) => ({\n          notifications: state.notifications.map((n) => ({ ...n, isRead: true })),\n        }));\n      },\n\n      getUnreadNotifications: (recipientId) => {\n        return get().notifications.filter(\n          (n) =>\n            (n.recipientId === recipientId || n.recipientId === 'all') && !n.isRead\n        );\n      },\n\n      getNotificationsByRecipient: (recipientId) => {\n        return get().notifications.filter(\n          (n) => n.recipientId === recipientId || n.recipientId === 'all'\n        );\n      },\n\n      // Settings\n      fetchSettings: async () => {\n        try {\n          const response = await trainingSettingsApi.getAll();\n          set({ settings: mapSettingsFromApi(response.settings) });\n        } catch (error) {\n          console.error('Failed to fetch settings:', error);\n        }\n      },\n\n      updateSettings: async (settingsData) => {\n        // Convert camelCase to snake_case for API\n        const apiSettings: Record<string, any> = {};\n        if (settingsData.voteThreshold !== undefined) apiSettings.vote_threshold = settingsData.voteThreshold;\n        if (settingsData.allowAnonymousProposals !== undefined) apiSettings.allow_anonymous_proposals = settingsData.allowAnonymousProposals;\n        if (settingsData.allowAnonymousVotes !== undefined) apiSettings.allow_anonymous_votes = settingsData.allowAnonymousVotes;\n        if (settingsData.allowAnonymousFeedback !== undefined) apiSettings.allow_anonymous_feedback = settingsData.allowAnonymousFeedback;\n        if (settingsData.notifyAllOnNewProposal !== undefined) apiSettings.notify_all_on_new_proposal = settingsData.notifyAllOnNewProposal;\n        if (settingsData.autoCloseAfterDays !== undefined) apiSettings.auto_close_after_days = settingsData.autoCloseAfterDays;\n\n        await trainingSettingsApi.update(apiSettings);\n        set((state) => ({\n          settings: { ...state.settings, ...settingsData },\n        }));\n      },\n\n      // Stats (sync - computed from local state)\n      getStats: () => {\n        const proposals = get().proposals;\n        const completedProposals = proposals.filter((p) => p.status === 'completed');\n\n        let totalRating = 0;\n        let ratingCount = 0;\n        completedProposals.forEach((p) => {\n          if (p.feedback?.length) {\n            p.feedback.forEach((f) => {\n              totalRating += f.rating;\n              ratingCount++;\n            });\n          }\n        });\n\n        return {\n          totalProposals: proposals.length,\n          votingProposals: proposals.filter((p) => p.status === 'voting').length,\n          scheduledTrainings: proposals.filter((p) => p.status === 'scheduled').length,\n          completedTrainings: completedProposals.length,\n          totalVotes: proposals.reduce((acc, p) => acc + (p.votes?.length ?? 0), 0),\n          totalParticipants: proposals.reduce(\n            (acc, p) => acc + (p.registeredParticipants?.length ?? 0),\n            0\n          ),\n          averageRating: ratingCount > 0 ? totalRating / ratingCount : 0,\n        };\n      },\n\n      // Anonymity helpers\n      getDisplayName: (name, isAnonymous, isAdmin) => {\n        if (isAdmin) return name;\n        return isAnonymous ? 'Аноним' : name;\n      },\n\n      getVotesForDisplay: (proposalId, isAdmin) => {\n        const proposal = get().getProposalById(proposalId);\n        if (!proposal) return [];\n\n        if (isAdmin) return proposal.votes;\n\n        return proposal.votes.map((vote) => ({\n          ...vote,\n          voterName: vote.isAnonymous ? 'Аноним' : vote.voterName,\n        }));\n      },\n    }),\n    {\n      name: 'training-storage',\n      partialize: (state) => ({\n        // Only persist settings locally for offline fallback\n        settings: state.settings,\n      }),\n    }\n  )\n);\n\n// ==================== Constants for UI ====================\n\nexport const TRAINING_STATUS_LABELS: Record<TrainingProposalStatus, string> = {\n  voting: 'Голосование',\n  review: 'На рассмотрении',\n  approved: 'Одобрено',\n  scheduled: 'Запланировано',\n  completed: 'Завершено',\n  rejected: 'Отклонено',\n};\n\nexport const TRAINING_STATUS_COLORS: Record<TrainingProposalStatus, string> = {\n  voting: 'bg-blue-100 text-blue-800',\n  review: 'bg-yellow-100 text-yellow-800',\n  approved: 'bg-green-100 text-green-800',\n  scheduled: 'bg-purple-100 text-purple-800',\n  completed: 'bg-gray-100 text-gray-800',\n  rejected: 'bg-red-100 text-red-800',\n};\n\nexport const FORMAT_LABELS: Record<TrainingFormat, string> = {\n  online: 'Онлайн',\n  offline: 'Офлайн',\n  any: 'Любой формат',\n};\n\nexport const TIME_SLOT_LABELS: Record<TrainingTimeSlot, string> = {\n  morning: 'Утро (9:00-12:00)',\n  afternoon: 'День (12:00-17:00)',\n  evening: 'Вечер (17:00-20:00)',\n  weekend: 'Выходные',\n};\n\nexport const PARTICIPATION_LABELS: Record<ParticipationIntent, string> = {\n  definitely: 'Точно приду',\n  maybe: 'Возможно приду',\n  support_only: 'Поддерживаю идею',\n};\n\nexport const PARTICIPATION_COLORS: Record<ParticipationIntent, string> = {\n  definitely: 'bg-green-100 text-green-800',\n  maybe: 'bg-yellow-100 text-yellow-800',\n  support_only: 'bg-gray-100 text-gray-600',\n};\n","import { useState } from 'react';\nimport {\n  GraduationCap,\n  Plus,\n  Vote,\n  Clock,\n  CheckCircle,\n  Calendar,\n  Users,\n  Star,\n  ThumbsUp,\n  Eye,\n  X,\n  Send,\n  User,\n  MapPin,\n  Link as LinkIcon,\n  MessageSquare,\n  Settings,\n  UserCheck,\n} from 'lucide-react';\nimport { useAuthStore } from '../stores/authStore';\nimport {\n  useTrainingStore,\n  TRAINING_STATUS_LABELS,\n  TRAINING_STATUS_COLORS,\n  FORMAT_LABELS,\n  TIME_SLOT_LABELS,\n  PARTICIPATION_LABELS,\n  PARTICIPATION_COLORS,\n} from '../stores/trainingStore';\nimport type {\n  TrainingProposal,\n  TrainingProposalStatus,\n  TrainingFormat,\n  TrainingTimeSlot,\n  ParticipationIntent,\n} from '../types';\n\n// Компонент карточки статистики\nconst StatCard = ({\n  icon: Icon,\n  label,\n  value,\n  color,\n}: {\n  icon: React.ElementType;\n  label: string;\n  value: string | number;\n  color: string;\n}) => (\n  <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\n    <div className=\"flex items-center gap-4\">\n      <div className={`p-3 rounded-lg ${color}`}>\n        <Icon className=\"w-6 h-6 text-white\" />\n      </div>\n      <div>\n        <p className=\"text-2xl font-bold text-gray-900\">{value}</p>\n        <p className=\"text-sm text-gray-500\">{label}</p>\n      </div>\n    </div>\n  </div>\n);\n\n// Модальное окно создания предложения\nconst CreateProposalModal = ({\n  isOpen,\n  onClose,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n}) => {\n  const { user } = useAuthStore();\n  const { addProposal, getActivePartners, settings } = useTrainingStore();\n\n  const [topic, setTopic] = useState('');\n  const [description, setDescription] = useState('');\n  const [partnerId, setPartnerId] = useState('');\n  const [format, setFormat] = useState<TrainingFormat>('any');\n  const [timeSlots, setTimeSlots] = useState<TrainingTimeSlot[]>([]);\n  const [isAnonymous, setIsAnonymous] = useState(false);\n\n  const partners = getActivePartners();\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user || !partnerId) return;\n\n    const partner = partners.find((p) => p.id === partnerId);\n    if (!partner) return;\n\n    addProposal({\n      topic,\n      description,\n      isAuthorAnonymous: isAnonymous,\n      partnerId,\n      format,\n      preferredTimeSlots: timeSlots,\n    });\n\n    // Сброс формы\n    setTopic('');\n    setDescription('');\n    setPartnerId('');\n    setFormat('any');\n    setTimeSlots([]);\n    setIsAnonymous(false);\n    onClose();\n  };\n\n  const toggleTimeSlot = (slot: TrainingTimeSlot) => {\n    setTimeSlots((prev) =>\n      prev.includes(slot) ? prev.filter((s) => s !== slot) : [...prev, slot]\n    );\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between p-6 border-b\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            Предложить тренинг\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {/* Тема */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Тема тренинга *\n            </label>\n            <input\n              type=\"text\"\n              value={topic}\n              onChange={(e) => setTopic(e.target.value)}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"Введите тему тренинга\"\n              required\n            />\n          </div>\n\n          {/* Описание */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Описание\n            </label>\n            <textarea\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              rows={3}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"Опишите, чему хотели бы научиться\"\n            />\n          </div>\n\n          {/* Выбор лектора */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Предпочтительный лектор *\n            </label>\n            <select\n              value={partnerId}\n              onChange={(e) => setPartnerId(e.target.value)}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              required\n            >\n              <option value=\"\">Выберите партнёра</option>\n              {partners.map((partner) => (\n                <option key={partner.id} value={partner.id}>\n                  {partner.name}{' '}\n                  {partner.specialization && `(${partner.specialization})`}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Формат */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Предпочтительный формат\n            </label>\n            <div className=\"flex gap-4\">\n              {(Object.keys(FORMAT_LABELS) as TrainingFormat[]).map((f) => (\n                <label key={f} className=\"flex items-center gap-2 cursor-pointer\">\n                  <input\n                    type=\"radio\"\n                    name=\"format\"\n                    value={f}\n                    checked={format === f}\n                    onChange={() => setFormat(f)}\n                    className=\"text-blue-600 focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-700\">{FORMAT_LABELS[f]}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          {/* Время */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Удобное время\n            </label>\n            <div className=\"grid grid-cols-2 gap-2\">\n              {(Object.keys(TIME_SLOT_LABELS) as TrainingTimeSlot[]).map(\n                (slot) => (\n                  <label\n                    key={slot}\n                    className={`flex items-center gap-2 p-3 border rounded-lg cursor-pointer transition-colors ${\n                      timeSlots.includes(slot)\n                        ? 'border-blue-500 bg-blue-50'\n                        : 'border-gray-300 hover:bg-gray-50'\n                    }`}\n                  >\n                    <input\n                      type=\"checkbox\"\n                      checked={timeSlots.includes(slot)}\n                      onChange={() => toggleTimeSlot(slot)}\n                      className=\"text-blue-600 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-sm text-gray-700\">\n                      {TIME_SLOT_LABELS[slot]}\n                    </span>\n                  </label>\n                )\n              )}\n            </div>\n          </div>\n\n          {/* Анонимность */}\n          {settings.allowAnonymousProposals && (\n            <label className=\"flex items-center gap-3 p-4 bg-gray-50 rounded-lg cursor-pointer active:bg-gray-100 touch-manipulation\">\n              <input\n                type=\"checkbox\"\n                id=\"anonymous\"\n                checked={isAnonymous}\n                onChange={(e) => setIsAnonymous(e.target.checked)}\n                className=\"w-5 h-5 md:w-4 md:h-4 text-blue-600 focus:ring-blue-500 rounded\"\n              />\n              <span className=\"text-sm text-gray-700\">\n                Предложить анонимно (ваше имя не будет отображаться для других\n                сотрудников)\n              </span>\n            </label>\n          )}\n\n          {/* Кнопки */}\n          <div className=\"flex gap-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              Отмена\n            </button>\n            <button\n              type=\"submit\"\n              className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2\"\n            >\n              <Send className=\"w-4 h-4\" />\n              Предложить\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\n// Модальное окно голосования\nconst VoteModal = ({\n  isOpen,\n  onClose,\n  proposal,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  proposal: TrainingProposal | null;\n}) => {\n  const { user } = useAuthStore();\n  const { addVote, settings } = useTrainingStore();\n\n  const [intent, setIntent] = useState<ParticipationIntent>('definitely');\n  const [isAnonymous, setIsAnonymous] = useState(false);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user || !proposal) return;\n\n    addVote(proposal.id, {\n      participationIntent: intent,\n      isAnonymous,\n    });\n\n    onClose();\n  };\n\n  if (!isOpen || !proposal) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl shadow-xl max-w-md w-full\">\n        <div className=\"flex items-center justify-between p-6 border-b\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Голосование</h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          <div className=\"p-4 bg-gray-50 rounded-lg\">\n            <h3 className=\"font-medium text-gray-900\">{proposal.topic}</h3>\n            <p className=\"text-sm text-gray-500 mt-1\">\n              Лектор: {proposal.partnerName}\n            </p>\n          </div>\n\n          {/* Выбор намерения */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Ваше участие\n            </label>\n            <div className=\"space-y-2\">\n              {(Object.keys(PARTICIPATION_LABELS) as ParticipationIntent[]).map(\n                (i) => (\n                  <label\n                    key={i}\n                    className={`flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-colors ${\n                      intent === i\n                        ? 'border-blue-500 bg-blue-50'\n                        : 'border-gray-300 hover:bg-gray-50'\n                    }`}\n                  >\n                    <input\n                      type=\"radio\"\n                      name=\"intent\"\n                      value={i}\n                      checked={intent === i}\n                      onChange={() => setIntent(i)}\n                      className=\"text-blue-600 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-sm text-gray-700\">\n                      {PARTICIPATION_LABELS[i]}\n                    </span>\n                  </label>\n                )\n              )}\n            </div>\n          </div>\n\n          {/* Анонимность */}\n          {settings.allowAnonymousVotes && (\n            <div className=\"flex items-center gap-3 p-4 bg-gray-50 rounded-lg\">\n              <input\n                type=\"checkbox\"\n                id=\"voteAnonymous\"\n                checked={isAnonymous}\n                onChange={(e) => setIsAnonymous(e.target.checked)}\n                className=\"w-4 h-4 text-blue-600 focus:ring-blue-500\"\n              />\n              <label htmlFor=\"voteAnonymous\" className=\"text-sm text-gray-700\">\n                Голосовать анонимно\n              </label>\n            </div>\n          )}\n\n          {/* Кнопки */}\n          <div className=\"flex gap-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              Отмена\n            </button>\n            <button\n              type=\"submit\"\n              className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2\"\n            >\n              <ThumbsUp className=\"w-4 h-4\" />\n              Проголосовать\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\n// Модальное окно деталей предложения\nconst ProposalDetailModal = ({\n  isOpen,\n  onClose,\n  proposal,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  proposal: TrainingProposal | null;\n}) => {\n  const { user } = useAuthStore();\n  const {\n    getVotesForDisplay,\n    getDisplayName,\n    hasVoted,\n    isRegistered,\n    registerForTraining,\n    unregisterFromTraining,\n    getAverageRating,\n    hasFeedback,\n    addFeedback,\n    settings,\n  } = useTrainingStore();\n\n  const [showFeedbackForm, setShowFeedbackForm] = useState(false);\n  const [rating, setRating] = useState(5);\n  const [comment, setComment] = useState('');\n  const [isFeedbackAnonymous, setIsFeedbackAnonymous] = useState(false);\n\n  const isAdmin = user?.role === 'admin';\n\n  if (!isOpen || !proposal) return null;\n\n  const votes = getVotesForDisplay(proposal.id, isAdmin);\n  const userHasVoted = user ? hasVoted(proposal.id, user.id) : false;\n  const userIsRegistered = user ? isRegistered(proposal.id, user.id) : false;\n  const userHasFeedback = user ? hasFeedback(proposal.id, user.id) : false;\n  const avgRating = getAverageRating(proposal.id);\n\n  const handleRegister = () => {\n    if (!user) return;\n    if (userIsRegistered) {\n      unregisterFromTraining(proposal.id);\n    } else {\n      registerForTraining(proposal.id);\n    }\n  };\n\n  const handleFeedbackSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) return;\n\n    addFeedback(proposal.id, {\n      isAnonymous: isFeedbackAnonymous,\n      rating,\n      comment,\n    });\n\n    setShowFeedbackForm(false);\n    setRating(5);\n    setComment('');\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between p-6 border-b\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-xl font-semibold text-gray-900\">\n              {proposal.topic}\n            </h2>\n            <span\n              className={`px-2 py-1 text-xs font-medium rounded-full ${\n                TRAINING_STATUS_COLORS[proposal.status]\n              }`}\n            >\n              {TRAINING_STATUS_LABELS[proposal.status]}\n            </span>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* Основная информация */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"p-4 bg-gray-50 rounded-lg\">\n              <p className=\"text-sm text-gray-500\">Автор</p>\n              <p className=\"font-medium text-gray-900\">\n                {getDisplayName(\n                  proposal.authorName,\n                  proposal.isAuthorAnonymous,\n                  isAdmin\n                )}\n                {isAdmin && proposal.isAuthorAnonymous && (\n                  <span className=\"ml-2 text-xs text-gray-500\">(анонимно)</span>\n                )}\n              </p>\n            </div>\n            <div className=\"p-4 bg-gray-50 rounded-lg\">\n              <p className=\"text-sm text-gray-500\">Лектор</p>\n              <p className=\"font-medium text-gray-900\">{proposal.partnerName}</p>\n            </div>\n            <div className=\"p-4 bg-gray-50 rounded-lg\">\n              <p className=\"text-sm text-gray-500\">Формат</p>\n              <p className=\"font-medium text-gray-900\">\n                {FORMAT_LABELS[proposal.format]}\n              </p>\n            </div>\n            <div className=\"p-4 bg-gray-50 rounded-lg\">\n              <p className=\"text-sm text-gray-500\">Голосов</p>\n              <p className=\"font-medium text-gray-900\">\n                {proposal.votes.length} / {proposal.voteThreshold}\n              </p>\n            </div>\n          </div>\n\n          {/* Описание */}\n          {proposal.description && (\n            <div>\n              <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Описание</h3>\n              <p className=\"text-gray-600\">{proposal.description}</p>\n            </div>\n          )}\n\n          {/* Предпочтительное время */}\n          {proposal.preferredTimeSlots.length > 0 && (\n            <div>\n              <h3 className=\"text-sm font-medium text-gray-700 mb-2\">\n                Удобное время\n              </h3>\n              <div className=\"flex flex-wrap gap-2\">\n                {proposal.preferredTimeSlots.map((slot) => (\n                  <span\n                    key={slot}\n                    className=\"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full\"\n                  >\n                    {TIME_SLOT_LABELS[slot]}\n                  </span>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Информация о запланированном тренинге */}\n          {proposal.status === 'scheduled' && (\n            <div className=\"p-4 bg-purple-50 border border-purple-200 rounded-lg\">\n              <h3 className=\"font-medium text-purple-900 mb-3 flex items-center gap-2\">\n                <Calendar className=\"w-5 h-5\" />\n                Тренинг запланирован\n              </h3>\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  <Clock className=\"w-4 h-4 text-purple-600\" />\n                  <span>\n                    {proposal.scheduledDate} в {proposal.scheduledTime}\n                  </span>\n                </div>\n                {proposal.scheduledLocation && (\n                  <div className=\"flex items-center gap-2\">\n                    <MapPin className=\"w-4 h-4 text-purple-600\" />\n                    <span>{proposal.scheduledLocation}</span>\n                  </div>\n                )}\n                {proposal.scheduledLink && (\n                  <div className=\"flex items-center gap-2\">\n                    <LinkIcon className=\"w-4 h-4 text-purple-600\" />\n                    <a\n                      href={proposal.scheduledLink}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-purple-600 hover:underline\"\n                    >\n                      Ссылка на онлайн\n                    </a>\n                  </div>\n                )}\n                <div className=\"flex items-center gap-2\">\n                  <Users className=\"w-4 h-4 text-purple-600\" />\n                  <span>\n                    {proposal.registeredParticipants?.length || 0} участников\n                  </span>\n                </div>\n              </div>\n\n              {/* Кнопка регистрации */}\n              {user && (\n                <button\n                  onClick={handleRegister}\n                  className={`mt-4 w-full py-2 rounded-lg font-medium transition-colors ${\n                    userIsRegistered\n                      ? 'bg-red-100 text-red-700 hover:bg-red-200'\n                      : 'bg-purple-600 text-white hover:bg-purple-700'\n                  }`}\n                >\n                  {userIsRegistered\n                    ? 'Отменить регистрацию'\n                    : 'Зарегистрироваться'}\n                </button>\n              )}\n            </div>\n          )}\n\n          {/* Список голосов */}\n          {votes.length > 0 && (\n            <div>\n              <h3 className=\"text-sm font-medium text-gray-700 mb-3\">\n                Голоса ({votes.length})\n              </h3>\n              <div className=\"space-y-2\">\n                {votes.map((vote) => (\n                  <div\n                    key={vote.id}\n                    className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center\">\n                        <User className=\"w-4 h-4 text-gray-600\" />\n                      </div>\n                      <span className=\"text-sm font-medium text-gray-900\">\n                        {vote.voterName}\n                        {isAdmin && vote.isAnonymous && (\n                          <span className=\"ml-2 text-xs text-gray-500\">\n                            (анонимно)\n                          </span>\n                        )}\n                      </span>\n                    </div>\n                    <span\n                      className={`px-2 py-1 text-xs font-medium rounded-full ${\n                        PARTICIPATION_COLORS[vote.participationIntent]\n                      }`}\n                    >\n                      {PARTICIPATION_LABELS[vote.participationIntent]}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Обратная связь для завершённых тренингов */}\n          {proposal.status === 'completed' && (\n            <div>\n              <div className=\"flex items-center justify-between mb-3\">\n                <h3 className=\"text-sm font-medium text-gray-700\">\n                  Отзывы ({proposal.feedback?.length || 0})\n                </h3>\n                {avgRating > 0 && (\n                  <div className=\"flex items-center gap-1\">\n                    <Star className=\"w-4 h-4 text-yellow-500 fill-yellow-500\" />\n                    <span className=\"text-sm font-medium\">\n                      {avgRating.toFixed(1)}\n                    </span>\n                  </div>\n                )}\n              </div>\n\n              {/* Список отзывов */}\n              {proposal.feedback && proposal.feedback.length > 0 && (\n                <div className=\"space-y-3 mb-4\">\n                  {proposal.feedback.map((fb) => (\n                    <div key={fb.id} className=\"p-4 bg-gray-50 rounded-lg\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-medium text-gray-900\">\n                          {getDisplayName(fb.reviewerName, fb.isAnonymous, isAdmin)}\n                          {isAdmin && fb.isAnonymous && (\n                            <span className=\"ml-2 text-xs text-gray-500\">\n                              (анонимно)\n                            </span>\n                          )}\n                        </span>\n                        <div className=\"flex items-center gap-1\">\n                          {[...Array(5)].map((_, i) => (\n                            <Star\n                              key={i}\n                              className={`w-4 h-4 ${\n                                i < fb.rating\n                                  ? 'text-yellow-500 fill-yellow-500'\n                                  : 'text-gray-300'\n                              }`}\n                            />\n                          ))}\n                        </div>\n                      </div>\n                      {fb.comment && (\n                        <p className=\"text-sm text-gray-600\">{fb.comment}</p>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              {/* Форма отзыва */}\n              {user && !userHasFeedback && !showFeedbackForm && (\n                <button\n                  onClick={() => setShowFeedbackForm(true)}\n                  className=\"w-full py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center gap-2\"\n                >\n                  <MessageSquare className=\"w-4 h-4\" />\n                  Оставить отзыв\n                </button>\n              )}\n\n              {showFeedbackForm && (\n                <form\n                  onSubmit={handleFeedbackSubmit}\n                  className=\"p-4 border border-gray-200 rounded-lg space-y-4\"\n                >\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Оценка\n                    </label>\n                    <div className=\"flex items-center gap-2\">\n                      {[1, 2, 3, 4, 5].map((r) => (\n                        <button\n                          key={r}\n                          type=\"button\"\n                          onClick={() => setRating(r)}\n                          className=\"p-1\"\n                        >\n                          <Star\n                            className={`w-8 h-8 transition-colors ${\n                              r <= rating\n                                ? 'text-yellow-500 fill-yellow-500'\n                                : 'text-gray-300 hover:text-yellow-400'\n                            }`}\n                          />\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Комментарий\n                    </label>\n                    <textarea\n                      value={comment}\n                      onChange={(e) => setComment(e.target.value)}\n                      rows={3}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"Поделитесь впечатлениями...\"\n                    />\n                  </div>\n                  {settings.allowAnonymousFeedback && (\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"feedbackAnonymous\"\n                        checked={isFeedbackAnonymous}\n                        onChange={(e) => setIsFeedbackAnonymous(e.target.checked)}\n                        className=\"w-4 h-4 text-blue-600\"\n                      />\n                      <label\n                        htmlFor=\"feedbackAnonymous\"\n                        className=\"text-sm text-gray-700\"\n                      >\n                        Оставить анонимно\n                      </label>\n                    </div>\n                  )}\n                  <div className=\"flex gap-3\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowFeedbackForm(false)}\n                      className=\"flex-1 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50\"\n                    >\n                      Отмена\n                    </button>\n                    <button\n                      type=\"submit\"\n                      className=\"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n                    >\n                      Отправить\n                    </button>\n                  </div>\n                </form>\n              )}\n            </div>\n          )}\n\n          {/* Кнопка голосования */}\n          {proposal.status === 'voting' && user && !userHasVoted && (\n            <div className=\"pt-4 border-t\">\n              <p className=\"text-sm text-gray-500 mb-3\">\n                Вы ещё не голосовали за это предложение\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Модальное окно админ-панели\nconst AdminPanel = ({\n  isOpen,\n  onClose,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n}) => {\n  const {\n    getProposalsByStatus,\n    setPartnerResponse,\n    scheduleTraining,\n    settings,\n    updateSettings,\n    getStats,\n  } = useTrainingStore();\n\n  const [selectedProposal, setSelectedProposal] =\n    useState<TrainingProposal | null>(null);\n  const [scheduleDate, setScheduleDate] = useState('');\n  const [scheduleTime, setScheduleTime] = useState('');\n  const [scheduleLocation, setScheduleLocation] = useState('');\n  const [scheduleLink, setScheduleLink] = useState('');\n  const [activeTab, setActiveTab] = useState<'review' | 'settings' | 'stats'>(\n    'review'\n  );\n\n  const reviewProposals = getProposalsByStatus('review');\n  const approvedProposals = getProposalsByStatus('approved');\n  const stats = getStats();\n\n  const handleSchedule = () => {\n    if (!selectedProposal || !scheduleDate || !scheduleTime) return;\n\n    scheduleTraining(selectedProposal.id, {\n      scheduledDate: scheduleDate,\n      scheduledTime: scheduleTime,\n      scheduledLocation: scheduleLocation || undefined,\n      scheduledLink: scheduleLink || undefined,\n    });\n\n    setSelectedProposal(null);\n    setScheduleDate('');\n    setScheduleTime('');\n    setScheduleLocation('');\n    setScheduleLink('');\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between p-6 border-b\">\n          <h2 className=\"text-xl font-semibold text-gray-900 flex items-center gap-2\">\n            <Settings className=\"w-5 h-5\" />\n            Управление тренингами\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Вкладки */}\n        <div className=\"flex border-b\">\n          <button\n            onClick={() => setActiveTab('review')}\n            className={`px-6 py-3 text-sm font-medium transition-colors ${\n              activeTab === 'review'\n                ? 'text-blue-600 border-b-2 border-blue-600'\n                : 'text-gray-600 hover:text-gray-900'\n            }`}\n          >\n            На рассмотрении ({reviewProposals.length + approvedProposals.length})\n          </button>\n          <button\n            onClick={() => setActiveTab('stats')}\n            className={`px-6 py-3 text-sm font-medium transition-colors ${\n              activeTab === 'stats'\n                ? 'text-blue-600 border-b-2 border-blue-600'\n                : 'text-gray-600 hover:text-gray-900'\n            }`}\n          >\n            Статистика\n          </button>\n          <button\n            onClick={() => setActiveTab('settings')}\n            className={`px-6 py-3 text-sm font-medium transition-colors ${\n              activeTab === 'settings'\n                ? 'text-blue-600 border-b-2 border-blue-600'\n                : 'text-gray-600 hover:text-gray-900'\n            }`}\n          >\n            Настройки\n          </button>\n        </div>\n\n        <div className=\"p-6\">\n          {/* Вкладка рассмотрения */}\n          {activeTab === 'review' && (\n            <div className=\"space-y-6\">\n              {/* Предложения на рассмотрении */}\n              {reviewProposals.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n                    Ожидают ответа партнёра\n                  </h3>\n                  <div className=\"space-y-3\">\n                    {reviewProposals.map((p) => (\n                      <div\n                        key={p.id}\n                        className=\"p-4 border border-yellow-200 bg-yellow-50 rounded-lg\"\n                      >\n                        <div className=\"flex items-start justify-between\">\n                          <div>\n                            <h4 className=\"font-medium text-gray-900\">\n                              {p.topic}\n                            </h4>\n                            <p className=\"text-sm text-gray-600 mt-1\">\n                              Лектор: {p.partnerName}\n                            </p>\n                            <p className=\"text-sm text-gray-500\">\n                              Голосов: {p.votes.length}\n                            </p>\n                          </div>\n                          <div className=\"flex gap-2\">\n                            <button\n                              onClick={() =>\n                                setPartnerResponse(p.id, 'accepted')\n                              }\n                              className=\"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700\"\n                            >\n                              Принять\n                            </button>\n                            <button\n                              onClick={() =>\n                                setPartnerResponse(p.id, 'rejected')\n                              }\n                              className=\"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700\"\n                            >\n                              Отклонить\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Одобренные - нужно запланировать */}\n              {approvedProposals.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n                    Требуют планирования\n                  </h3>\n                  <div className=\"space-y-3\">\n                    {approvedProposals.map((p) => (\n                      <div\n                        key={p.id}\n                        className=\"p-4 border border-green-200 bg-green-50 rounded-lg\"\n                      >\n                        <div className=\"flex items-start justify-between\">\n                          <div>\n                            <h4 className=\"font-medium text-gray-900\">\n                              {p.topic}\n                            </h4>\n                            <p className=\"text-sm text-gray-600 mt-1\">\n                              Лектор: {p.partnerName}\n                            </p>\n                          </div>\n                          <button\n                            onClick={() => setSelectedProposal(p)}\n                            className=\"px-3 py-1 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700\"\n                          >\n                            Запланировать\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Форма планирования */}\n              {selectedProposal && (\n                <div className=\"p-4 border border-purple-200 bg-purple-50 rounded-lg\">\n                  <h3 className=\"font-medium text-purple-900 mb-4\">\n                    Планирование: {selectedProposal.topic}\n                  </h3>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Дата *\n                      </label>\n                      <input\n                        type=\"date\"\n                        value={scheduleDate}\n                        onChange={(e) => setScheduleDate(e.target.value)}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Время *\n                      </label>\n                      <input\n                        type=\"time\"\n                        value={scheduleTime}\n                        onChange={(e) => setScheduleTime(e.target.value)}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Место (офлайн)\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={scheduleLocation}\n                        onChange={(e) => setScheduleLocation(e.target.value)}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                        placeholder=\"Конференц-зал\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Ссылка (онлайн)\n                      </label>\n                      <input\n                        type=\"url\"\n                        value={scheduleLink}\n                        onChange={(e) => setScheduleLink(e.target.value)}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                        placeholder=\"https://meet.google.com/...\"\n                      />\n                    </div>\n                  </div>\n                  <div className=\"flex gap-3 mt-4\">\n                    <button\n                      onClick={() => setSelectedProposal(null)}\n                      className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50\"\n                    >\n                      Отмена\n                    </button>\n                    <button\n                      onClick={handleSchedule}\n                      className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\n                    >\n                      Запланировать\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {reviewProposals.length === 0 && approvedProposals.length === 0 && (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <CheckCircle className=\"w-12 h-12 mx-auto mb-3 text-green-500\" />\n                  <p>Нет предложений на рассмотрении</p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Вкладка статистики */}\n          {activeTab === 'stats' && (\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div className=\"p-4 bg-blue-50 rounded-lg text-center\">\n                  <p className=\"text-3xl font-bold text-blue-600\">\n                    {stats.totalProposals}\n                  </p>\n                  <p className=\"text-sm text-gray-600\">Всего предложений</p>\n                </div>\n                <div className=\"p-4 bg-green-50 rounded-lg text-center\">\n                  <p className=\"text-3xl font-bold text-green-600\">\n                    {stats.scheduledTrainings}\n                  </p>\n                  <p className=\"text-sm text-gray-600\">Запланировано</p>\n                </div>\n                <div className=\"p-4 bg-purple-50 rounded-lg text-center\">\n                  <p className=\"text-3xl font-bold text-purple-600\">\n                    {stats.completedTrainings}\n                  </p>\n                  <p className=\"text-sm text-gray-600\">Проведено</p>\n                </div>\n                <div className=\"p-4 bg-yellow-50 rounded-lg text-center\">\n                  <p className=\"text-3xl font-bold text-yellow-600\">\n                    {stats.averageRating.toFixed(1)}\n                  </p>\n                  <p className=\"text-sm text-gray-600\">Средняя оценка</p>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"p-4 bg-gray-50 rounded-lg\">\n                  <p className=\"text-2xl font-bold text-gray-900\">\n                    {stats.totalVotes}\n                  </p>\n                  <p className=\"text-sm text-gray-600\">Всего голосов</p>\n                </div>\n                <div className=\"p-4 bg-gray-50 rounded-lg\">\n                  <p className=\"text-2xl font-bold text-gray-900\">\n                    {stats.totalParticipants}\n                  </p>\n                  <p className=\"text-sm text-gray-600\">Участников</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Вкладка настроек */}\n          {activeTab === 'settings' && (\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Порог голосов для рассмотрения\n                </label>\n                <input\n                  type=\"number\"\n                  value={settings.voteThreshold}\n                  onChange={(e) =>\n                    updateSettings({ voteThreshold: parseInt(e.target.value) })\n                  }\n                  min={1}\n                  max={50}\n                  className=\"w-32 px-3 py-2 border border-gray-300 rounded-lg\"\n                />\n              </div>\n\n              <div className=\"space-y-3\">\n                <label className=\"flex items-center gap-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={settings.allowAnonymousProposals}\n                    onChange={(e) =>\n                      updateSettings({\n                        allowAnonymousProposals: e.target.checked,\n                      })\n                    }\n                    className=\"w-4 h-4 text-blue-600\"\n                  />\n                  <span className=\"text-sm text-gray-700\">\n                    Разрешить анонимные предложения\n                  </span>\n                </label>\n\n                <label className=\"flex items-center gap-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={settings.allowAnonymousVotes}\n                    onChange={(e) =>\n                      updateSettings({ allowAnonymousVotes: e.target.checked })\n                    }\n                    className=\"w-4 h-4 text-blue-600\"\n                  />\n                  <span className=\"text-sm text-gray-700\">\n                    Разрешить анонимное голосование\n                  </span>\n                </label>\n\n                <label className=\"flex items-center gap-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={settings.allowAnonymousFeedback}\n                    onChange={(e) =>\n                      updateSettings({\n                        allowAnonymousFeedback: e.target.checked,\n                      })\n                    }\n                    className=\"w-4 h-4 text-blue-600\"\n                  />\n                  <span className=\"text-sm text-gray-700\">\n                    Разрешить анонимные отзывы\n                  </span>\n                </label>\n\n                <label className=\"flex items-center gap-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={settings.notifyAllOnNewProposal}\n                    onChange={(e) =>\n                      updateSettings({\n                        notifyAllOnNewProposal: e.target.checked,\n                      })\n                    }\n                    className=\"w-4 h-4 text-blue-600\"\n                  />\n                  <span className=\"text-sm text-gray-700\">\n                    Уведомлять всех о новых предложениях\n                  </span>\n                </label>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Автозакрытие через (дней, 0 = выкл)\n                </label>\n                <input\n                  type=\"number\"\n                  value={settings.autoCloseAfterDays || 0}\n                  onChange={(e) =>\n                    updateSettings({\n                      autoCloseAfterDays:\n                        parseInt(e.target.value) || undefined,\n                    })\n                  }\n                  min={0}\n                  max={365}\n                  className=\"w-32 px-3 py-2 border border-gray-300 rounded-lg\"\n                />\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Главный компонент страницы\nexport default function TrainingsPage() {\n  const { user } = useAuthStore();\n  const {\n    proposals,\n    getProposalsByStatus,\n    hasVoted,\n    getStats,\n  } = useTrainingStore();\n\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showVoteModal, setShowVoteModal] = useState(false);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\n  const [selectedProposal, setSelectedProposal] =\n    useState<TrainingProposal | null>(null);\n  const [filterStatus, setFilterStatus] = useState<\n    TrainingProposalStatus | 'all'\n  >('all');\n\n  const isAdmin = user?.role === 'admin';\n  const stats = getStats();\n\n  const filteredProposals =\n    filterStatus === 'all'\n      ? proposals\n      : getProposalsByStatus(filterStatus);\n\n  const handleVote = (proposal: TrainingProposal) => {\n    setSelectedProposal(proposal);\n    setShowVoteModal(true);\n  };\n\n  const handleViewDetail = (proposal: TrainingProposal) => {\n    setSelectedProposal(proposal);\n    setShowDetailModal(true);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Заголовок */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900 flex items-center gap-3\">\n            <GraduationCap className=\"w-8 h-8 text-blue-600\" />\n            Тренинги\n          </h1>\n          <p className=\"text-gray-600 mt-1\">\n            Предлагайте темы, голосуйте и развивайтесь вместе\n          </p>\n        </div>\n        <div className=\"flex gap-3\">\n          {isAdmin && (\n            <button\n              onClick={() => setShowAdminPanel(true)}\n              className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2\"\n            >\n              <Settings className=\"w-4 h-4\" />\n              Управление\n            </button>\n          )}\n          <button\n            onClick={() => setShowCreateModal(true)}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            Предложить тренинг\n          </button>\n        </div>\n      </div>\n\n      {/* Статистика */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <StatCard\n          icon={Vote}\n          label=\"На голосовании\"\n          value={stats.votingProposals}\n          color=\"bg-blue-500\"\n        />\n        <StatCard\n          icon={Calendar}\n          label=\"Запланировано\"\n          value={stats.scheduledTrainings}\n          color=\"bg-purple-500\"\n        />\n        <StatCard\n          icon={CheckCircle}\n          label=\"Проведено\"\n          value={stats.completedTrainings}\n          color=\"bg-green-500\"\n        />\n        <StatCard\n          icon={Star}\n          label=\"Средняя оценка\"\n          value={stats.averageRating.toFixed(1)}\n          color=\"bg-yellow-500\"\n        />\n      </div>\n\n      {/* Фильтры */}\n      <div className=\"flex gap-2 flex-wrap\">\n        <button\n          onClick={() => setFilterStatus('all')}\n          className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n            filterStatus === 'all'\n              ? 'bg-blue-600 text-white'\n              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n          }`}\n        >\n          Все ({proposals.length})\n        </button>\n        {(\n          ['voting', 'review', 'scheduled', 'completed', 'rejected'] as TrainingProposalStatus[]\n        ).map((status) => {\n          const count = getProposalsByStatus(status).length;\n          return (\n            <button\n              key={status}\n              onClick={() => setFilterStatus(status)}\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n                filterStatus === status\n                  ? 'bg-blue-600 text-white'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              {TRAINING_STATUS_LABELS[status]} ({count})\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Список предложений */}\n      <div className=\"space-y-4\">\n        {filteredProposals.length === 0 ? (\n          <div className=\"text-center py-12 bg-white rounded-xl border border-gray-100\">\n            <GraduationCap className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\n            <p className=\"text-gray-500 text-lg\">Нет предложений</p>\n            <p className=\"text-gray-400 mt-1\">\n              Будьте первым, кто предложит тему для тренинга!\n            </p>\n          </div>\n        ) : (\n          filteredProposals.map((proposal) => {\n            const userHasVoted = user ? hasVoted(proposal.id, user.id) : false;\n            const progress =\n              (proposal.votes.length / proposal.voteThreshold) * 100;\n\n            return (\n              <div\n                key={proposal.id}\n                className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow\"\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <h3 className=\"text-lg font-semibold text-gray-900\">\n                        {proposal.topic}\n                      </h3>\n                      <span\n                        className={`px-2 py-1 text-xs font-medium rounded-full ${\n                          TRAINING_STATUS_COLORS[proposal.status]\n                        }`}\n                      >\n                        {TRAINING_STATUS_LABELS[proposal.status]}\n                      </span>\n                    </div>\n\n                    {proposal.description && (\n                      <p className=\"text-gray-600 mb-3\">{proposal.description}</p>\n                    )}\n\n                    <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n                      <span className=\"flex items-center gap-1\">\n                        <User className=\"w-4 h-4\" />\n                        Лектор: {proposal.partnerName}\n                      </span>\n                      <span className=\"flex items-center gap-1\">\n                        {FORMAT_LABELS[proposal.format]}\n                      </span>\n                      {proposal.status === 'scheduled' && (\n                        <span className=\"flex items-center gap-1 text-purple-600\">\n                          <Calendar className=\"w-4 h-4\" />\n                          {proposal.scheduledDate} в {proposal.scheduledTime}\n                        </span>\n                      )}\n                    </div>\n\n                    {/* Прогресс голосования */}\n                    {proposal.status === 'voting' && (\n                      <div className=\"mt-4\">\n                        <div className=\"flex items-center justify-between text-sm mb-1\">\n                          <span className=\"text-gray-600\">\n                            Голосов: {proposal.votes.length} /{' '}\n                            {proposal.voteThreshold}\n                          </span>\n                          <span className=\"text-gray-500\">\n                            {Math.round(progress)}%\n                          </span>\n                        </div>\n                        <div className=\"h-2 bg-gray-200 rounded-full overflow-hidden\">\n                          <div\n                            className=\"h-full bg-blue-500 rounded-full transition-all\"\n                            style={{ width: `${Math.min(progress, 100)}%` }}\n                          />\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Участники для запланированных */}\n                    {proposal.status === 'scheduled' && (\n                      <div className=\"mt-3 flex items-center gap-2 text-sm\">\n                        <UserCheck className=\"w-4 h-4 text-green-600\" />\n                        <span className=\"text-gray-600\">\n                          Зарегистрировано:{' '}\n                          {proposal.registeredParticipants?.length || 0}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Кнопки действий */}\n                  <div className=\"flex gap-2 ml-4\">\n                    <button\n                      onClick={() => handleViewDetail(proposal)}\n                      className=\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\n                      title=\"Подробнее\"\n                    >\n                      <Eye className=\"w-5 h-5\" />\n                    </button>\n\n                    {proposal.status === 'voting' && user && !userHasVoted && (\n                      <button\n                        onClick={() => handleVote(proposal)}\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\"\n                      >\n                        <ThumbsUp className=\"w-4 h-4\" />\n                        Голосовать\n                      </button>\n                    )}\n\n                    {proposal.status === 'voting' && user && userHasVoted && (\n                      <span className=\"px-4 py-2 bg-green-100 text-green-700 rounded-lg flex items-center gap-2\">\n                        <CheckCircle className=\"w-4 h-4\" />\n                        Вы проголосовали\n                      </span>\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        )}\n      </div>\n\n      {/* Модальные окна */}\n      <CreateProposalModal\n        isOpen={showCreateModal}\n        onClose={() => setShowCreateModal(false)}\n      />\n\n      <VoteModal\n        isOpen={showVoteModal}\n        onClose={() => {\n          setShowVoteModal(false);\n          setSelectedProposal(null);\n        }}\n        proposal={selectedProposal}\n      />\n\n      <ProposalDetailModal\n        isOpen={showDetailModal}\n        onClose={() => {\n          setShowDetailModal(false);\n          setSelectedProposal(null);\n        }}\n        proposal={selectedProposal}\n      />\n\n      <AdminPanel\n        isOpen={showAdminPanel}\n        onClose={() => setShowAdminPanel(false)}\n      />\n    </div>\n  );\n}\n"],"names":["mapPartnerFromApi","p","mapVoteFromApi","v","mapFeedbackFromApi","f","mapProposalFromApi","r","mapNotificationFromApi","n","mapSettingsFromApi","s","defaultSettings","useTrainingStore","create","persist","set","get","activeOnly","response","trainingPartnersApi","partnerData","newPartner","state","id","options","trainingProposalsApi","proposal","proposalData","newProposal","status","userId","proposalId","voteData","trainingVotesApi","voterId","note","data","actualParticipantsCount","trainingRegistrationsApi","feedbackData","trainingFeedbackApi","reviewerId","acc","unreadOnly","trainingNotificationsApi","recipientId","trainingSettingsApi","settingsData","apiSettings","proposals","completedProposals","totalRating","ratingCount","name","isAnonymous","isAdmin","vote","TRAINING_STATUS_LABELS","TRAINING_STATUS_COLORS","FORMAT_LABELS","TIME_SLOT_LABELS","PARTICIPATION_LABELS","PARTICIPATION_COLORS","StatCard","Icon","label","value","color","jsxs","jsx","CreateProposalModal","isOpen","onClose","user","useAuthStore","addProposal","getActivePartners","settings","topic","setTopic","useState","description","setDescription","partnerId","setPartnerId","format","setFormat","timeSlots","setTimeSlots","setIsAnonymous","partners","handleSubmit","e","toggleTimeSlot","slot","prev","X","partner","Send","VoteModal","addVote","intent","setIntent","i","ThumbsUp","ProposalDetailModal","getVotesForDisplay","getDisplayName","hasVoted","isRegistered","registerForTraining","unregisterFromTraining","getAverageRating","hasFeedback","addFeedback","showFeedbackForm","setShowFeedbackForm","rating","setRating","comment","setComment","isFeedbackAnonymous","setIsFeedbackAnonymous","votes","userHasVoted","userIsRegistered","userHasFeedback","avgRating","handleRegister","handleFeedbackSubmit","Calendar","Clock","MapPin","LinkIcon","Users","User","Star","fb","_","MessageSquare","AdminPanel","getProposalsByStatus","setPartnerResponse","scheduleTraining","updateSettings","getStats","selectedProposal","setSelectedProposal","scheduleDate","setScheduleDate","scheduleTime","setScheduleTime","scheduleLocation","setScheduleLocation","scheduleLink","setScheduleLink","activeTab","setActiveTab","reviewProposals","approvedProposals","stats","handleSchedule","Settings","CheckCircle","TrainingsPage","showCreateModal","setShowCreateModal","showVoteModal","setShowVoteModal","showDetailModal","setShowDetailModal","showAdminPanel","setShowAdminPanel","filterStatus","setFilterStatus","filteredProposals","handleVote","handleViewDetail","GraduationCap","Plus","Vote","count","progress","UserCheck","Eye"],"mappings":"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"}