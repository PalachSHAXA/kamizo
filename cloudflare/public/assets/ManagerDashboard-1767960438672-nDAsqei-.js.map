{"version":3,"file":"ManagerDashboard-1767960438672-nDAsqei-.js","sources":["../../src/pages/ManagerDashboard.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend,\n  ResponsiveContainer, PieChart, Pie, Cell\n} from '../components/LazyCharts';\nimport {\n  FileText, Clock, TrendingUp, X,\n  Phone, Star, Trash2, Eye, EyeOff, Copy, Check, AlertCircle,\n  Home, UserPlus, MapPin, Calendar, User, ChevronRight,\n  Download, CalendarDays, RefreshCw\n} from 'lucide-react';\nimport { useAuthStore } from '../stores/authStore';\nimport { useDataStore } from '../stores/dataStore';\nimport { formatAddress } from '../utils/formatAddress';\nimport { SPECIALIZATION_LABELS, STATUS_LABELS, PRIORITY_LABELS, RESCHEDULE_REASON_LABELS, RESCHEDULE_STATUS_LABELS } from '../types';\nimport type { ExecutorSpecialization, Request, RequestStatus, RequestPriority, Executor, RescheduleRequest } from '../types';\n\n// Format request number - if it's already formatted (e.g., YS-L-1001 or #ABC123), don't add #\nconst formatRequestNumber = (num: number | string): string => {\n  if (typeof num === 'string') {\n    // Already has prefix (YS-L-1001) or # symbol\n    if (num.includes('-') || num.startsWith('#')) {\n      return num;\n    }\n  }\n  return `#${num}`;\n};\n\nexport function ManagerDashboard() {\n  const navigate = useNavigate();\n  const {\n    executors, requests, getStats, getChartData,\n    addExecutor, deleteExecutor, updateExecutor, assignRequest, rescheduleRequests\n  } = useDataStore();\n  // Data is now fetched automatically by useRealtimeSync hook in Layout\n\n  const stats = getStats();\n  const chartData = getChartData();\n\n  const [showAddExecutorModal, setShowAddExecutorModal] = useState(false);\n  const [showAddResidentModal, setShowAddResidentModal] = useState(false);\n  const [showCredentials, setShowCredentials] = useState<{ login: string; password: string } | null>(null);\n  const [showAssignModal, setShowAssignModal] = useState<Request | null>(null);\n  const [selectedExecutor, setSelectedExecutor] = useState<Executor | null>(null);\n  const [selectedReschedule, setSelectedReschedule] = useState<RescheduleRequest | null>(null);\n\n  // Get pending reschedule requests (менеджер видит все активные запросы на перенос)\n  const pendingReschedules = rescheduleRequests.filter(r => r.status === 'pending');\n  const recentReschedules = rescheduleRequests\n    .filter(r => r.status !== 'pending')\n    .sort((a, b) => new Date(b.respondedAt || b.createdAt).getTime() - new Date(a.respondedAt || a.createdAt).getTime())\n    .slice(0, 5);\n\n  // Removed filters - now on separate pages\n\n  // Category colors - consistent with ReportsPage\n  const CATEGORY_COLORS: Record<string, string> = {\n    plumber: '#3b82f6',      // blue\n    electrician: '#f59e0b',   // amber/orange\n    security: '#ef4444',      // red\n    cleaning: '#10b981',      // green/emerald\n    elevator: '#8b5cf6',      // purple/violet\n    intercom: '#6366f1',      // indigo\n    carpenter: '#d97706',     // amber darker\n    locksmith: '#6b7280',     // gray\n    other: '#ec4899',         // pink\n  };\n\n  // Pie chart data for request categories\n  const categoryData = Object.entries(\n    requests.reduce((acc, r) => {\n      acc[r.category] = (acc[r.category] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>)\n  ).map(([category, value]) => ({\n    name: SPECIALIZATION_LABELS[category as ExecutorSpecialization] || category,\n    value,\n    color: CATEGORY_COLORS[category] || '#9ca3af',\n  }));\n\n  return (\n    <div className=\"space-y-4 md:space-y-6\">\n      {/* Header */}\n      <div className=\"min-w-0\">\n        <h1 className=\"text-xl md:text-2xl font-bold text-gray-900 truncate\">Панель менеджера</h1>\n        <p className=\"text-gray-500 text-sm md:text-base mt-0.5 md:mt-1 truncate\">Управление заявками и исполнителями</p>\n      </div>\n\n      {/* Overview - Stats Cards */}\n      <>\n          {/* Stats Cards - 2 columns on mobile */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4\">\n            <div\n              className=\"glass-card p-3 md:p-5 cursor-pointer hover:shadow-lg transition-shadow\"\n              onClick={() => navigate('/requests?status=new')}\n            >\n              <div className=\"flex items-center gap-2 md:gap-3\">\n                <div className=\"w-10 h-10 md:w-12 md:h-12 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0\">\n                  <FileText className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\n                </div>\n                <div className=\"min-w-0\">\n                  <div className=\"text-2xl md:text-3xl font-bold\">{stats.newRequests}</div>\n                  <div className=\"text-xs md:text-sm text-gray-500 truncate\">Новые</div>\n                </div>\n              </div>\n            </div>\n\n            <div\n              className=\"glass-card p-3 md:p-5 cursor-pointer hover:shadow-lg transition-shadow\"\n              onClick={() => navigate('/requests?status=in_progress')}\n            >\n              <div className=\"flex items-center gap-2 md:gap-3\">\n                <div className=\"w-10 h-10 md:w-12 md:h-12 bg-amber-500 rounded-xl flex items-center justify-center flex-shrink-0\">\n                  <Clock className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\n                </div>\n                <div className=\"min-w-0\">\n                  <div className=\"text-2xl md:text-3xl font-bold\">{stats.inProgress}</div>\n                  <div className=\"text-xs md:text-sm text-gray-500 truncate\">В работе</div>\n                </div>\n              </div>\n            </div>\n\n            <div\n              className=\"glass-card p-3 md:p-5 cursor-pointer hover:shadow-lg transition-shadow\"\n              onClick={() => navigate('/requests?status=pending_approval')}\n            >\n              <div className=\"flex items-center gap-2 md:gap-3\">\n                <div className=\"w-10 h-10 md:w-12 md:h-12 bg-purple-500 rounded-xl flex items-center justify-center flex-shrink-0\">\n                  <AlertCircle className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\n                </div>\n                <div className=\"min-w-0\">\n                  <div className=\"text-2xl md:text-3xl font-bold\">{stats.pendingApproval}</div>\n                  <div className=\"text-xs md:text-sm text-gray-500 truncate\">Ожидают</div>\n                </div>\n              </div>\n            </div>\n\n            <div\n              className=\"glass-card p-3 md:p-5 cursor-pointer hover:shadow-lg transition-shadow\"\n              onClick={() => navigate('/requests?status=completed')}\n            >\n              <div className=\"flex items-center gap-2 md:gap-3\">\n                <div className=\"w-10 h-10 md:w-12 md:h-12 bg-green-500 rounded-xl flex items-center justify-center flex-shrink-0\">\n                  <TrendingUp className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\n                </div>\n                <div className=\"min-w-0\">\n                  <div className=\"text-2xl md:text-3xl font-bold\">{stats.completedWeek}</div>\n                  <div className=\"text-xs md:text-sm text-gray-500 truncate\">За неделю</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Charts Row - Stack on mobile */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6\">\n            <div className=\"glass-card p-4 md:p-6\">\n              <h2 className=\"text-base md:text-lg font-semibold mb-3 md:mb-4\">Заявки за неделю</h2>\n              <ResponsiveContainer width=\"100%\" height={250}>\n                <BarChart data={chartData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n                  <XAxis dataKey=\"name\" stroke=\"#6b7280\" tick={{ fontSize: 12 }} />\n                  <YAxis stroke=\"#6b7280\" tick={{ fontSize: 12 }} width={30} />\n                  <Tooltip\n                    contentStyle={{\n                      background: 'rgba(255, 255, 255, 0.9)',\n                      borderRadius: '12px',\n                      border: '1px solid rgba(255, 255, 255, 0.5)',\n                      fontSize: '12px',\n                    }}\n                  />\n                  <Legend wrapperStyle={{ fontSize: '12px' }} />\n                  <Bar dataKey=\"created\" name=\"Создано\" fill=\"#3b82f6\" radius={[4, 4, 0, 0]} />\n                  <Bar dataKey=\"completed\" name=\"Выполнено\" fill=\"#10b981\" radius={[4, 4, 0, 0]} />\n                </BarChart>\n              </ResponsiveContainer>\n            </div>\n\n            <div className=\"glass-card p-4 md:p-6\">\n              <h2 className=\"text-base md:text-lg font-semibold mb-3 md:mb-4\">По категориям</h2>\n              {categoryData.length > 0 && categoryData.some(d => d.value > 0) ? (\n                <ResponsiveContainer width=\"100%\" height={250}>\n                  <PieChart>\n                    <Pie\n                      data={categoryData}\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      labelLine={false}\n                      label={({ name, percent }: any) => `${(name || '').slice(0, 6)}... ${((percent || 0) * 100).toFixed(0)}%`}\n                      outerRadius={80}\n                      fill=\"#8884d8\"\n                      dataKey=\"value\"\n                    >\n                      {categoryData.map((entry, index) => (\n                        <Cell key={`cell-${index}`} fill={entry.color} />\n                      ))}\n                    </Pie>\n                    <Tooltip />\n                  </PieChart>\n                </ResponsiveContainer>\n              ) : (\n                <div className=\"h-[250px] flex items-center justify-center text-gray-400\">\n                  Нет данных для отображения\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Reschedule Requests Section */}\n          {pendingReschedules.length > 0 && (\n            <div className=\"glass-card p-4 md:p-6 border-2 border-amber-400 bg-amber-50/50\">\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"w-10 h-10 bg-amber-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                  <RefreshCw className=\"w-5 h-5 text-white\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h2 className=\"text-lg font-bold text-amber-800\">Запросы на перенос времени</h2>\n                  <p className=\"text-sm text-amber-600\">\n                    {pendingReschedules.length} {pendingReschedules.length === 1 ? 'запрос ожидает' : 'запросов ожидают'} ответа\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                {pendingReschedules.map((reschedule) => (\n                  <RescheduleRequestCard\n                    key={reschedule.id}\n                    reschedule={reschedule}\n                    onClick={() => setSelectedReschedule(reschedule)}\n                  />\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Recent Reschedules History */}\n          {recentReschedules.length > 0 && (\n            <div className=\"glass-card p-4 md:p-6\">\n              <h2 className=\"text-base md:text-lg font-semibold mb-3 md:mb-4\">История переносов</h2>\n              <div className=\"space-y-2\">\n                {recentReschedules.map((reschedule) => (\n                  <RescheduleHistoryCard\n                    key={reschedule.id}\n                    reschedule={reschedule}\n                  />\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Recent Requests */}\n          <div className=\"glass-card p-4 md:p-6\">\n            <div className=\"flex items-center justify-between mb-3 md:mb-4\">\n              <h2 className=\"text-base md:text-lg font-semibold\">Последние заявки</h2>\n              <a href=\"/requests\" className=\"text-primary-600 text-sm font-medium hover:underline touch-manipulation\">\n                Все →\n              </a>\n            </div>\n            <div className=\"space-y-2 md:space-y-3\">\n              {requests.slice(0, 5).map((request) => (\n                <RequestCard\n                  key={request.id}\n                  request={request}\n                  onAssign={() => setShowAssignModal(request)}\n                  compact\n                />\n              ))}\n            </div>\n          </div>\n        </>\n\n      {/* Modals */}\n      {showAddExecutorModal && (\n        <AddExecutorModal\n          onClose={() => setShowAddExecutorModal(false)}\n          onAdd={(data) => {\n            addExecutor(data);\n            setShowCredentials({ login: data.login, password: data.password });\n            setShowAddExecutorModal(false);\n          }}\n        />\n      )}\n\n      {showAddResidentModal && (\n        <AddResidentModal\n          onClose={() => setShowAddResidentModal(false)}\n        />\n      )}\n\n      {showCredentials && (\n        <CredentialsModal\n          login={showCredentials.login}\n          password={showCredentials.password}\n          onClose={() => setShowCredentials(null)}\n        />\n      )}\n\n      {showAssignModal && (\n        <AssignExecutorModal\n          request={showAssignModal}\n          executors={executors}\n          onClose={() => setShowAssignModal(null)}\n          onAssign={(executorId) => {\n            assignRequest(showAssignModal.id, executorId);\n            setShowAssignModal(null);\n          }}\n        />\n      )}\n\n      {selectedExecutor && (\n        <ExecutorDetailsModal\n          executor={selectedExecutor}\n          requests={requests}\n          onClose={() => setSelectedExecutor(null)}\n          onStatusChange={(status) => {\n            updateExecutor(selectedExecutor.id, { status });\n            setSelectedExecutor({ ...selectedExecutor, status });\n          }}\n          onDelete={() => {\n            deleteExecutor(selectedExecutor.id);\n            setSelectedExecutor(null);\n          }}\n        />\n      )}\n\n      {selectedReschedule && (\n        <RescheduleDetailsModal\n          reschedule={selectedReschedule}\n          onClose={() => setSelectedReschedule(null)}\n        />\n      )}\n    </div>\n  );\n}\n\n// Request Card Component\nfunction RequestCard({\n  request,\n  onAssign,\n  compact = false\n}: {\n  request: Request;\n  onAssign: () => void;\n  compact?: boolean;\n}) {\n  const getStatusBadge = (status: RequestStatus) => {\n    const colors: Record<RequestStatus, string> = {\n      new: 'bg-purple-100 text-purple-700',\n      assigned: 'bg-blue-100 text-blue-700',\n      accepted: 'bg-cyan-100 text-cyan-700',\n      in_progress: 'bg-amber-100 text-amber-700',\n      pending_approval: 'bg-orange-100 text-orange-700',\n      completed: 'bg-green-100 text-green-700',\n      cancelled: 'bg-red-100 text-red-700'\n    };\n    return <span className={`badge ${colors[status]}`}>{STATUS_LABELS[status]}</span>;\n  };\n\n  const getPriorityBadge = (priority: RequestPriority) => {\n    const colors: Record<RequestPriority, string> = {\n      low: 'bg-gray-100 text-gray-600',\n      medium: 'bg-yellow-100 text-yellow-700',\n      high: 'bg-orange-100 text-orange-700',\n      urgent: 'bg-red-100 text-red-700'\n    };\n    return <span className={`badge ${colors[priority]}`}>{PRIORITY_LABELS[priority]}</span>;\n  };\n\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleString('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (compact) {\n    return (\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between p-2.5 md:p-3 bg-white/30 rounded-xl hover:bg-white/50 transition-colors touch-manipulation gap-2\">\n        <div className=\"flex items-center gap-2 md:gap-3 flex-wrap min-w-0\">\n          <span className=\"text-xs md:text-sm text-gray-500\">{formatRequestNumber(request.number)}</span>\n          <span className=\"font-medium text-sm md:text-base truncate\">{request.title}</span>\n          {getStatusBadge(request.status)}\n        </div>\n        <div className=\"flex items-center gap-2 md:gap-3 justify-between sm:justify-end\">\n          <span className=\"text-xs md:text-sm text-gray-500 truncate\">{request.residentName}</span>\n          {request.status === 'new' && (\n            <button onClick={onAssign} className=\"btn-secondary text-xs md:text-sm py-1 px-2 md:px-3 touch-manipulation flex-shrink-0\">\n              Назначить\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"glass-card p-3 md:p-5\">\n      <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-3\">\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2 md:gap-3 flex-wrap mb-2\">\n            <span className=\"text-xs md:text-sm text-gray-500\">{formatRequestNumber(request.number)}</span>\n            <h3 className=\"font-semibold text-base md:text-lg\">{request.title}</h3>\n            {getStatusBadge(request.status)}\n            {getPriorityBadge(request.priority)}\n          </div>\n          <p className=\"text-gray-600 mb-2 md:mb-3 text-sm md:text-base line-clamp-2\">{request.description}</p>\n          <div className=\"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs md:text-sm text-gray-500\">\n            <span className=\"flex items-center gap-1\">\n              <User className=\"w-3 h-3 md:w-4 md:h-4\" />\n              {request.residentName}\n            </span>\n            <span className=\"flex items-center gap-1\">\n              <Phone className=\"w-3 h-3 md:w-4 md:h-4\" />\n              {request.residentPhone}\n            </span>\n            <span className=\"flex items-center gap-1\">\n              <MapPin className=\"w-3 h-3 md:w-4 md:h-4\" />\n              <span className=\"truncate max-w-[120px] md:max-w-none\">{formatAddress(request.address, request.apartment)}</span>\n            </span>\n            <span className=\"flex items-center gap-1\">\n              <Calendar className=\"w-3 h-3 md:w-4 md:h-4\" />\n              {formatDate(request.createdAt)}\n            </span>\n          </div>\n          {request.executorName && (\n            <div className=\"mt-2 text-xs md:text-sm\">\n              <span className=\"text-gray-500\">Исполнитель: </span>\n              <span className=\"font-medium\">{request.executorName}</span>\n            </div>\n          )}\n        </div>\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\n          {request.status === 'new' && (\n            <button onClick={onAssign} className=\"btn-primary flex items-center gap-2 py-2 px-3 md:py-2.5 md:px-4 touch-manipulation text-sm\">\n              <UserPlus className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline\">Назначить</span>\n              <span className=\"sm:hidden\">Назн.</span>\n            </button>\n          )}\n          {request.status === 'assigned' && (\n            <button onClick={onAssign} className=\"btn-secondary flex items-center gap-2 py-2 px-3 touch-manipulation text-sm\">\n              <span className=\"hidden sm:inline\">Переназначить</span>\n              <span className=\"sm:hidden\">Перен.</span>\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Executor Card Component - used in ExecutorsPage\nexport function ExecutorCard({\n  executor,\n  onClick,\n  onDelete,\n  onStatusChange\n}: {\n  executor: Executor;\n  onClick: () => void;\n  onDelete: () => void;\n  onStatusChange: (status: 'available' | 'busy' | 'offline') => void;\n}) {\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'available': return <span className=\"badge bg-green-100 text-green-700 text-xs\">Доступен</span>;\n      case 'busy': return <span className=\"badge bg-amber-100 text-amber-700 text-xs\">Занят</span>;\n      case 'offline': return <span className=\"badge bg-gray-100 text-gray-600 text-xs\">Оффлайн</span>;\n      default: return <span className=\"badge text-xs\">{status}</span>;\n    }\n  };\n\n  return (\n    <div\n      onClick={onClick}\n      className=\"flex flex-col sm:flex-row sm:items-center justify-between p-3 md:p-4 bg-white/30 rounded-xl hover:bg-white/50 transition-colors gap-3 cursor-pointer active:scale-[0.99] touch-manipulation\"\n    >\n      <div className=\"flex items-center gap-3 md:gap-4 min-w-0 flex-1\">\n        <div className=\"w-10 h-10 md:w-12 md:h-12 bg-primary-100 rounded-full flex items-center justify-center text-sm md:text-lg font-medium text-primary-700 flex-shrink-0\">\n          {executor.name.split(' ').map((n: string) => n[0]).join('').slice(0, 2)}\n        </div>\n        <div className=\"min-w-0 flex-1\">\n          <div className=\"font-semibold flex items-center gap-2 flex-wrap text-sm md:text-base\">\n            <span className=\"truncate\">{executor.name}</span>\n            {getStatusBadge(executor.status)}\n          </div>\n          <div className=\"text-xs md:text-sm text-gray-500 truncate\">\n            {SPECIALIZATION_LABELS[executor.specialization as ExecutorSpecialization]}\n          </div>\n          <div className=\"flex items-center gap-2 md:gap-4 text-xs md:text-sm text-gray-500 mt-1 flex-wrap\">\n            <span className=\"flex items-center gap-1\">\n              <Phone className=\"w-3 h-3\" />\n              <span className=\"hidden sm:inline\">{executor.phone}</span>\n            </span>\n            <span className=\"flex items-center gap-1\">\n              <Star className=\"w-3 h-3 text-amber-400 fill-amber-400\" />\n              {executor.rating.toFixed(1)}\n            </span>\n            <span className=\"hidden sm:inline\">{executor.completedCount} вып.</span>\n            <span>{executor.activeRequests} акт.</span>\n          </div>\n        </div>\n      </div>\n      <div className=\"flex items-center gap-2 flex-shrink-0 self-end sm:self-auto\">\n        <select\n          value={executor.status}\n          onClick={(e) => e.stopPropagation()}\n          onChange={(e) => {\n            e.stopPropagation();\n            onStatusChange(e.target.value as 'available' | 'busy' | 'offline');\n          }}\n          className=\"glass-input text-xs md:text-sm py-1.5 md:py-2 px-2 md:px-3\"\n        >\n          <option value=\"available\">Доступен</option>\n          <option value=\"busy\">Занят</option>\n          <option value=\"offline\">Оффлайн</option>\n        </select>\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            onDelete();\n          }}\n          className=\"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors touch-manipulation\"\n          title=\"Удалить\"\n        >\n          <Trash2 className=\"w-4 h-4 md:w-5 md:h-5\" />\n        </button>\n        <ChevronRight className=\"w-5 h-5 text-gray-400 hidden sm:block\" />\n      </div>\n    </div>\n  );\n}\n\n// Residents Section - used in ResidentsPage\nexport function ResidentsSection() {\n  const { requests } = useDataStore();\n\n  // Get unique residents from requests\n  const residents = Array.from(\n    new Map(\n      requests.map(r => [r.residentId, {\n        id: r.residentId,\n        name: r.residentName,\n        phone: r.residentPhone,\n        address: r.address,\n        apartment: r.apartment\n      }])\n    ).values()\n  );\n\n  const getResidentStats = (residentId: string) => {\n    const residentRequests = requests.filter(r => r.residentId === residentId);\n    return {\n      total: residentRequests.length,\n      completed: residentRequests.filter(r => r.status === 'completed').length,\n      active: residentRequests.filter(r => !['completed', 'cancelled'].includes(r.status)).length\n    };\n  };\n\n  return (\n    <div className=\"space-y-3 md:space-y-4\">\n      <div className=\"glass-card p-3 md:p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-base md:text-lg font-semibold\">Жители</h2>\n            <p className=\"text-xs md:text-sm text-gray-500\">{residents.length} жителей в системе</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-2 md:space-y-3\">\n        {residents.length === 0 ? (\n          <div className=\"glass-card p-6 md:p-8 text-center\">\n            <Home className=\"w-10 h-10 md:w-12 md:h-12 text-gray-300 mx-auto mb-2 md:mb-3\" />\n            <h3 className=\"text-base md:text-lg font-medium text-gray-600\">Жителей пока нет</h3>\n            <p className=\"text-gray-400 mt-1 text-sm\">Жители появятся после создания заявок</p>\n          </div>\n        ) : (\n          residents.map((resident) => {\n            const stats = getResidentStats(resident.id);\n            return (\n              <div key={resident.id} className=\"glass-card p-3 md:p-4\">\n                <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-3\">\n                  <div className=\"flex items-center gap-3 md:gap-4 min-w-0\">\n                    <div className=\"w-10 h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center text-sm md:text-lg font-medium text-blue-700 flex-shrink-0\">\n                      {resident.name.split(' ').map((n: string) => n[0]).join('').slice(0, 2)}\n                    </div>\n                    <div className=\"min-w-0\">\n                      <div className=\"font-semibold text-sm md:text-base truncate\">{resident.name}</div>\n                      <div className=\"text-xs md:text-sm text-gray-500 flex flex-wrap items-center gap-2 md:gap-3\">\n                        <span className=\"flex items-center gap-1\">\n                          <Phone className=\"w-3 h-3\" />\n                          {resident.phone}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <MapPin className=\"w-3 h-3\" />\n                          <span className=\"truncate max-w-[100px] md:max-w-none\">кв. {resident.apartment}</span>\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-3 md:gap-4 text-xs md:text-sm justify-end sm:justify-start flex-shrink-0\">\n                    <div className=\"text-center\">\n                      <div className=\"font-bold\">{stats.total}</div>\n                      <div className=\"text-gray-500\">всего</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"font-bold text-green-600\">{stats.completed}</div>\n                      <div className=\"text-gray-500\">вып.</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"font-bold text-amber-600\">{stats.active}</div>\n                      <div className=\"text-gray-500\">акт.</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Reports Section - used in ReportsPage\nexport function ReportsSection({ requests, executors }: { requests: Request[]; executors: Executor[] }) {\n  const [period, setPeriod] = useState<'today' | 'week' | 'month' | 'custom'>('week');\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n\n  // Calculate date range\n  const getDateRange = () => {\n    const now = new Date();\n    const end = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59);\n    let start = new Date(end);\n\n    switch (period) {\n      case 'today':\n        start = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 0, 0, 0);\n        break;\n      case 'week':\n        start = new Date(end.getTime() - 7 * 24 * 60 * 60 * 1000);\n        break;\n      case 'month':\n        start = new Date(end.getTime() - 30 * 24 * 60 * 60 * 1000);\n        break;\n      case 'custom':\n        if (startDate && endDate) {\n          return {\n            start: new Date(startDate),\n            end: new Date(endDate + 'T23:59:59')\n          };\n        }\n        break;\n    }\n    return { start, end };\n  };\n\n  const { start, end } = getDateRange();\n\n  // Filter requests by date range\n  const filteredRequests = requests.filter(r => {\n    const created = new Date(r.createdAt);\n    return created >= start && created <= end;\n  });\n\n  // Calculate stats\n  const stats = {\n    total: filteredRequests.length,\n    new: filteredRequests.filter(r => r.status === 'new').length,\n    inProgress: filteredRequests.filter(r => ['assigned', 'accepted', 'in_progress'].includes(r.status)).length,\n    pendingApproval: filteredRequests.filter(r => r.status === 'pending_approval').length,\n    completed: filteredRequests.filter(r => r.status === 'completed').length,\n    cancelled: filteredRequests.filter(r => r.status === 'cancelled').length,\n  };\n\n  // Stats by category\n  const categoryStats = Object.entries(\n    filteredRequests.reduce((acc, r) => {\n      acc[r.category] = (acc[r.category] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>)\n  ).map(([category, count]) => ({\n    category,\n    label: SPECIALIZATION_LABELS[category as ExecutorSpecialization] || category,\n    count: count as number\n  })).sort((a, b) => b.count - a.count);\n\n  // Executor performance\n  const executorStats = executors.map(executor => {\n    const executorRequests = filteredRequests.filter(r => r.executorId === executor.id);\n    const completed = executorRequests.filter(r => r.status === 'completed');\n    const ratings = completed.filter(r => r.rating).map(r => r.rating!);\n    const avgRating = ratings.length > 0 ? ratings.reduce((a, b) => a + b, 0) / ratings.length : 0;\n    const totalTime = completed.reduce((sum, r) => sum + (r.workDuration || 0), 0);\n    const avgTime = completed.length > 0 ? totalTime / completed.length : 0;\n\n    return {\n      id: executor.id,\n      name: executor.name,\n      specialization: SPECIALIZATION_LABELS[executor.specialization as ExecutorSpecialization],\n      total: executorRequests.length,\n      completed: completed.length,\n      avgRating: Math.round(avgRating * 10) / 10,\n      avgTime: Math.round(avgTime / 60), // in minutes\n    };\n  }).filter(e => e.total > 0).sort((a, b) => b.completed - a.completed);\n\n  // Export to Excel\n  const exportToExcel = () => {\n    // Create CSV content\n    const headers = ['Исполнитель', 'Специализация', 'Всего заявок', 'Выполнено', 'Средний рейтинг', 'Среднее время (мин)'];\n    const rows = executorStats.map(e => [\n      e.name,\n      e.specialization,\n      e.total,\n      e.completed,\n      e.avgRating || '-',\n      e.avgTime || '-'\n    ]);\n\n    const csvContent = [\n      headers.join(','),\n      ...rows.map(row => row.join(','))\n    ].join('\\n');\n\n    // Add BOM for Excel UTF-8 support\n    const BOM = '\\uFEFF';\n    const blob = new Blob([BOM + csvContent], { type: 'text/csv;charset=utf-8' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `report_${period}_${new Date().toISOString().slice(0, 10)}.csv`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  };\n\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric'\n    });\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Period Selection */}\n      <div className=\"glass-card p-4\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-3\">\n          <div>\n            <h2 className=\"text-lg font-semibold\">Отчёты</h2>\n            <p className=\"text-sm text-gray-500\">\n              {formatDate(start)} — {formatDate(end)}\n            </p>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex bg-white/30 rounded-xl p-1 gap-1\">\n              {[\n                { id: 'today' as const, label: 'Сегодня' },\n                { id: 'week' as const, label: 'Неделя' },\n                { id: 'month' as const, label: 'Месяц' },\n                { id: 'custom' as const, label: 'Период' },\n              ].map(p => (\n                <button\n                  key={p.id}\n                  onClick={() => setPeriod(p.id)}\n                  className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${\n                    period === p.id ? 'bg-primary-500 text-gray-900' : 'hover:bg-white/30'\n                  }`}\n                >\n                  {p.label}\n                </button>\n              ))}\n            </div>\n            <button\n              onClick={exportToExcel}\n              className=\"btn-secondary flex items-center gap-2 py-2 px-3\"\n              title=\"Экспорт в Excel\"\n            >\n              <Download className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline\">Экспорт</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Custom date range */}\n        {period === 'custom' && (\n          <div className=\"flex flex-wrap items-center gap-3 mt-4 pt-4 border-t border-gray-200\">\n            <div className=\"flex items-center gap-2\">\n              <CalendarDays className=\"w-4 h-4 text-gray-500\" />\n              <span className=\"text-sm text-gray-500\">С:</span>\n              <input\n                type=\"date\"\n                value={startDate}\n                onChange={(e) => setStartDate(e.target.value)}\n                className=\"glass-input py-1.5 px-3 text-sm\"\n              />\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm text-gray-500\">По:</span>\n              <input\n                type=\"date\"\n                value={endDate}\n                onChange={(e) => setEndDate(e.target.value)}\n                className=\"glass-input py-1.5 px-3 text-sm\"\n              />\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Summary Stats */}\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 md:gap-3\">\n        <div className=\"glass-card p-3 text-center\">\n          <div className=\"text-2xl font-bold\">{stats.total}</div>\n          <div className=\"text-xs text-gray-500\">Всего</div>\n        </div>\n        <div className=\"glass-card p-3 text-center\">\n          <div className=\"text-2xl font-bold text-purple-600\">{stats.new}</div>\n          <div className=\"text-xs text-gray-500\">Новые</div>\n        </div>\n        <div className=\"glass-card p-3 text-center\">\n          <div className=\"text-2xl font-bold text-amber-600\">{stats.inProgress}</div>\n          <div className=\"text-xs text-gray-500\">В работе</div>\n        </div>\n        <div className=\"glass-card p-3 text-center\">\n          <div className=\"text-2xl font-bold text-orange-600\">{stats.pendingApproval}</div>\n          <div className=\"text-xs text-gray-500\">Ожидают</div>\n        </div>\n        <div className=\"glass-card p-3 text-center\">\n          <div className=\"text-2xl font-bold text-green-600\">{stats.completed}</div>\n          <div className=\"text-xs text-gray-500\">Выполнено</div>\n        </div>\n        <div className=\"glass-card p-3 text-center\">\n          <div className=\"text-2xl font-bold text-red-600\">{stats.cancelled}</div>\n          <div className=\"text-xs text-gray-500\">Отменено</div>\n        </div>\n      </div>\n\n      {/* Categories and Executors */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n        {/* By Category */}\n        <div className=\"glass-card p-4\">\n          <h3 className=\"text-base font-semibold mb-3\">По категориям</h3>\n          {categoryStats.length === 0 ? (\n            <div className=\"text-center py-6 text-gray-400 text-sm\">\n              Нет данных за выбранный период\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {categoryStats.map(cat => (\n                <div key={cat.category} className=\"flex items-center justify-between p-2 bg-white/30 rounded-lg\">\n                  <span className=\"text-sm font-medium\">{cat.label}</span>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-32 bg-gray-200 rounded-full h-2\">\n                      <div\n                        className=\"bg-primary-500 h-2 rounded-full\"\n                        style={{ width: `${(cat.count / stats.total) * 100}%` }}\n                      />\n                    </div>\n                    <span className=\"text-sm font-bold w-8 text-right\">{cat.count}</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Executor Performance */}\n        <div className=\"glass-card p-4\">\n          <h3 className=\"text-base font-semibold mb-3\">Исполнители</h3>\n          {executorStats.length === 0 ? (\n            <div className=\"text-center py-6 text-gray-400 text-sm\">\n              Нет данных за выбранный период\n            </div>\n          ) : (\n            <div className=\"space-y-2 max-h-80 overflow-y-auto\">\n              {executorStats.map(exec => (\n                <div key={exec.id} className=\"p-3 bg-white/30 rounded-lg\">\n                  <div className=\"flex items-center justify-between gap-2 mb-1\">\n                    <span className=\"font-medium text-sm truncate\">{exec.name}</span>\n                    <div className=\"flex items-center gap-1 text-amber-500 flex-shrink-0\">\n                      <Star className=\"w-3 h-3 fill-amber-400\" />\n                      <span className=\"text-sm font-bold\">{exec.avgRating || '-'}</span>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center justify-between text-xs text-gray-500\">\n                    <span>{exec.specialization}</span>\n                    <div className=\"flex items-center gap-3\">\n                      <span>Заявок: <b className=\"text-gray-700\">{exec.total}</b></span>\n                      <span>Выполнено: <b className=\"text-green-600\">{exec.completed}</b></span>\n                      {exec.avgTime > 0 && (\n                        <span>Ср. время: <b className=\"text-gray-700\">{exec.avgTime} мин</b></span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Full Executor Table for Desktop */}\n      <div className=\"glass-card p-4 hidden lg:block\">\n        <h3 className=\"text-base font-semibold mb-3\">Детальная статистика исполнителей</h3>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full text-sm\">\n            <thead>\n              <tr className=\"border-b border-gray-200\">\n                <th className=\"text-left py-2 px-3 font-medium text-gray-500\">Исполнитель</th>\n                <th className=\"text-left py-2 px-3 font-medium text-gray-500\">Специализация</th>\n                <th className=\"text-center py-2 px-3 font-medium text-gray-500\">Всего</th>\n                <th className=\"text-center py-2 px-3 font-medium text-gray-500\">Выполнено</th>\n                <th className=\"text-center py-2 px-3 font-medium text-gray-500\">Рейтинг</th>\n                <th className=\"text-center py-2 px-3 font-medium text-gray-500\">Ср. время</th>\n              </tr>\n            </thead>\n            <tbody>\n              {executorStats.map(exec => (\n                <tr key={exec.id} className=\"border-b border-gray-100 hover:bg-white/30\">\n                  <td className=\"py-2 px-3 font-medium\">{exec.name}</td>\n                  <td className=\"py-2 px-3 text-gray-500\">{exec.specialization}</td>\n                  <td className=\"py-2 px-3 text-center\">{exec.total}</td>\n                  <td className=\"py-2 px-3 text-center text-green-600 font-medium\">{exec.completed}</td>\n                  <td className=\"py-2 px-3 text-center\">\n                    <span className=\"flex items-center justify-center gap-1 text-amber-500\">\n                      <Star className=\"w-3 h-3 fill-amber-400\" />\n                      {exec.avgRating || '-'}\n                    </span>\n                  </td>\n                  <td className=\"py-2 px-3 text-center text-gray-500\">\n                    {exec.avgTime > 0 ? `${exec.avgTime} мин` : '-'}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Assign Executor Modal\nfunction AssignExecutorModal({\n  request,\n  executors,\n  onClose,\n  onAssign\n}: {\n  request: Request;\n  executors: any[];\n  onClose: () => void;\n  onAssign: (executorId: string) => void;\n}) {\n  // Filter executors by specialization\n  const matchingExecutors = executors.filter(e => e.specialization === request.category);\n  const otherExecutors = executors.filter(e => e.specialization !== request.category);\n\n  const ExecutorOption = ({ executor, recommended }: { executor: any; recommended?: boolean }) => (\n    <button\n      onClick={() => onAssign(executor.id)}\n      className={`w-full p-3 md:p-4 rounded-xl text-left transition-colors touch-manipulation ${\n        recommended ? 'bg-green-50 hover:bg-green-100 border-2 border-green-200' : 'bg-white/30 hover:bg-white/50'\n      }`}\n    >\n      <div className=\"flex items-center justify-between gap-2\">\n        <div className=\"flex items-center gap-2 md:gap-3 min-w-0\">\n          <div className=\"w-9 h-9 md:w-10 md:h-10 bg-primary-100 rounded-full flex items-center justify-center text-xs md:text-sm font-medium text-primary-700 flex-shrink-0\">\n            {executor.name.split(' ').map((n: string) => n[0]).join('').slice(0, 2)}\n          </div>\n          <div className=\"min-w-0\">\n            <div className=\"font-semibold flex items-center gap-1.5 md:gap-2 flex-wrap text-sm md:text-base\">\n              <span className=\"truncate\">{executor.name}</span>\n              {recommended && <span className=\"text-[10px] md:text-xs bg-green-500 text-white px-1.5 md:px-2 py-0.5 rounded-full flex-shrink-0\">Рек.</span>}\n            </div>\n            <div className=\"text-xs md:text-sm text-gray-500 truncate\">\n              {SPECIALIZATION_LABELS[executor.specialization as ExecutorSpecialization]}\n            </div>\n          </div>\n        </div>\n        <div className=\"text-right text-xs md:text-sm flex-shrink-0\">\n          <div className=\"flex items-center gap-1 text-amber-500\">\n            <Star className=\"w-3 h-3 md:w-4 md:h-4 fill-amber-500\" />\n            {executor.rating}\n          </div>\n          <div className=\"text-gray-500\">{executor.activeRequests} акт.</div>\n        </div>\n      </div>\n    </button>\n  );\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"glass-card p-4 md:p-6 w-full max-w-lg mx-3 md:mx-4 max-h-[85vh] overflow-y-auto\">\n        <div className=\"flex items-start justify-between mb-4 md:mb-6 gap-2\">\n          <div className=\"min-w-0\">\n            <h2 className=\"text-lg md:text-xl font-bold\">Назначить исполнителя</h2>\n            <p className=\"text-xs md:text-sm text-gray-500 mt-1 truncate\">Заявка {formatRequestNumber(request.number)}: {request.title}</p>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg touch-manipulation flex-shrink-0\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-3 md:space-y-4\">\n          {matchingExecutors.length > 0 && (\n            <div>\n              <h3 className=\"text-xs md:text-sm font-medium text-gray-500 mb-2\">\n                {SPECIALIZATION_LABELS[request.category as ExecutorSpecialization]} ({matchingExecutors.length})\n              </h3>\n              <div className=\"space-y-2\">\n                {matchingExecutors.map(executor => (\n                  <ExecutorOption key={executor.id} executor={executor} recommended />\n                ))}\n              </div>\n            </div>\n          )}\n\n          {otherExecutors.length > 0 && (\n            <div>\n              <h3 className=\"text-xs md:text-sm font-medium text-gray-500 mb-2\">Другие специалисты</h3>\n              <div className=\"space-y-2\">\n                {otherExecutors.map(executor => (\n                  <ExecutorOption key={executor.id} executor={executor} />\n                ))}\n              </div>\n            </div>\n          )}\n\n          {executors.length === 0 && (\n            <div className=\"text-center py-6 md:py-8 text-gray-500 text-sm\">\n              Нет доступных исполнителей\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Add Executor Modal\nfunction AddExecutorModal({\n  onClose,\n  onAdd\n}: {\n  onClose: () => void;\n  onAdd: (data: { name: string; phone: string; login: string; password: string; specialization: ExecutorSpecialization }) => void;\n}) {\n  const [name, setName] = useState('');\n  const [phone, setPhone] = useState('');\n  const [login, setLogin] = useState('');\n  const [password, setPassword] = useState('');\n  const [specialization, setSpecialization] = useState<ExecutorSpecialization>('plumber');\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState('');\n\n  const generatePassword = () => {\n    const chars = 'ABCDEFGHJKMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789';\n    let pass = '';\n    for (let i = 0; i < 10; i++) {\n      pass += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    setPassword(pass);\n    setShowPassword(true);\n  };\n\n  const generateLogin = () => {\n    const prefix = specialization.slice(0, 3);\n    const num = Math.floor(Math.random() * 900) + 100;\n    setLogin(`${prefix}${num}`);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    if (!name || !phone || !login || !password) {\n      setError('Заполните все поля');\n      return;\n    }\n\n    onAdd({ name, phone, login, password, specialization });\n  };\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"glass-card p-4 md:p-6 w-full max-w-md mx-3 md:mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-4 md:mb-6\">\n          <h2 className=\"text-lg md:text-xl font-bold\">Добавить исполнителя</h2>\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg touch-manipulation\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-3 md:space-y-4\">\n          <div>\n            <label className=\"block text-xs md:text-sm font-medium text-gray-700 mb-1\">ФИО</label>\n            <input\n              type=\"text\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"Иванов Иван Иванович\"\n              className=\"glass-input text-sm md:text-base\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-xs md:text-sm font-medium text-gray-700 mb-1\">Телефон</label>\n            <input\n              type=\"tel\"\n              value={phone}\n              onChange={(e) => setPhone(e.target.value)}\n              placeholder=\"+998 90 XXX XX XX\"\n              className=\"glass-input text-sm md:text-base\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-xs md:text-sm font-medium text-gray-700 mb-1\">Специализация</label>\n            <select\n              value={specialization}\n              onChange={(e) => setSpecialization(e.target.value as ExecutorSpecialization)}\n              className=\"glass-input text-sm md:text-base\"\n            >\n              {Object.entries(SPECIALIZATION_LABELS).map(([value, label]) => (\n                <option key={value} value={value}>{label}</option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-xs md:text-sm font-medium text-gray-700 mb-1\">Логин</label>\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={login}\n                onChange={(e) => setLogin(e.target.value)}\n                placeholder=\"plumber001\"\n                className=\"glass-input flex-1 text-sm md:text-base\"\n                required\n              />\n              <button type=\"button\" onClick={generateLogin} className=\"btn-secondary px-2 md:px-4 text-xs md:text-sm touch-manipulation\">\n                <span className=\"hidden sm:inline\">Сгенерировать</span>\n                <span className=\"sm:hidden\">Ген.</span>\n              </button>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-xs md:text-sm font-medium text-gray-700 mb-1\">Пароль</label>\n            <div className=\"flex gap-2\">\n              <div className=\"relative flex-1\">\n                <input\n                  type={showPassword ? 'text' : 'password'}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"••••••••\"\n                  className=\"glass-input pr-10 text-sm md:text-base\"\n                  required\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 touch-manipulation\"\n                >\n                  {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                </button>\n              </div>\n              <button type=\"button\" onClick={generatePassword} className=\"btn-secondary px-2 md:px-4 text-xs md:text-sm touch-manipulation\">\n                <span className=\"hidden sm:inline\">Сгенерировать</span>\n                <span className=\"sm:hidden\">Ген.</span>\n              </button>\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"flex items-center gap-2 p-2.5 md:p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-xs md:text-sm\">\n              <AlertCircle className=\"w-4 h-4 flex-shrink-0\" />\n              {error}\n            </div>\n          )}\n\n          <div className=\"flex gap-2 md:gap-3 pt-3 md:pt-4\">\n            <button type=\"button\" onClick={onClose} className=\"btn-secondary flex-1 py-2.5 text-sm touch-manipulation\">\n              Отмена\n            </button>\n            <button type=\"submit\" className=\"btn-primary flex-1 py-2.5 text-sm touch-manipulation\">\n              Добавить\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\n// Available branches for the UK\nconst BRANCHES = [\n  { code: 'YS', name: 'Юнусабад' },\n  { code: 'CH', name: 'Чиланзар' },\n  { code: 'SG', name: 'Сергели' },\n  { code: 'MR', name: 'Мирзо-Улугбек' },\n  { code: 'YK', name: 'Яккасарай' },\n  { code: 'SH', name: 'Шайхантаур' },\n  { code: 'UC', name: 'Учтепа' },\n  { code: 'BK', name: 'Бектемир' },\n];\n\n// Add Resident Modal\nfunction AddResidentModal({ onClose }: { onClose: () => void }) {\n  const [name, setName] = useState('');\n  const [phone, setPhone] = useState('');\n  const [branch, setBranch] = useState('YS');\n  const [building, setBuilding] = useState('');\n  const [apartment, setApartment] = useState('');\n  const [login, setLogin] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState('');\n  const { addMockUser } = useAuthStore.getState();\n\n  // Auto-generate credentials when building/apartment changes\n  const generateCredentials = () => {\n    if (!building || !apartment) {\n      setError('Сначала укажите дом и квартиру');\n      return;\n    }\n    // Login: branch_building_apartment (e.g., YS_8A_23)\n    const generatedLogin = `${branch}_${building}_${apartment}`.toUpperCase();\n    setLogin(generatedLogin);\n    // Password: BRANCH/BUILDING/APT (e.g., YS/8A/23)\n    const generatedPassword = `${branch}/${building}/${apartment}`.toUpperCase();\n    setPassword(generatedPassword);\n    setShowPassword(true);\n  };\n\n  // Update login/password when branch/building/apartment changes if already generated\n  const updateCredentialsIfNeeded = () => {\n    if (login && password && building && apartment) {\n      const expectedLogin = `${branch}_${building}_${apartment}`.toUpperCase();\n      const expectedPassword = `${branch}/${building}/${apartment}`.toUpperCase();\n      setLogin(expectedLogin);\n      setPassword(expectedPassword);\n    }\n  };\n\n  // Generate address from branch\n  const getAddress = () => {\n    const branchInfo = BRANCHES.find(b => b.code === branch);\n    return branchInfo ? `${branchInfo.name}, дом ${building}` : `Дом ${building}`;\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    if (!name || !phone || !building || !apartment || !login || !password) {\n      setError('Заполните все обязательные поля');\n      return;\n    }\n\n    const address = getAddress();\n\n    addMockUser(login, password, {\n      id: `resident_${Date.now()}`,\n      phone,\n      name,\n      login,\n      role: 'resident',\n      address,\n      apartment,\n      branch,\n      building\n    });\n\n    alert(`Житель добавлен!\\nЛогин: ${login}\\nПароль: ${password}`);\n    onClose();\n  };\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"glass-card p-4 md:p-6 w-full max-w-md mx-3 md:mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-4 md:mb-6\">\n          <h2 className=\"text-lg md:text-xl font-bold\">Добавить жителя</h2>\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg touch-manipulation\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-3 md:space-y-4\">\n          <div>\n            <label className=\"block text-xs md:text-sm font-medium text-gray-700 mb-1\">ФИО</label>\n            <input\n              type=\"text\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"Иванов Иван Иванович\"\n              className=\"glass-input text-sm md:text-base\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-xs md:text-sm font-medium text-gray-700 mb-1\">Телефон</label>\n            <input\n              type=\"tel\"\n              value={phone}\n              onChange={(e) => setPhone(e.target.value)}\n              placeholder=\"+998 90 XXX XX XX\"\n              className=\"glass-input text-sm md:text-base\"\n              required\n            />\n          </div>\n\n          {/* Location: Branch / Building / Apartment */}\n          <div className=\"border-t pt-3 md:pt-4\">\n            <label className=\"block text-xs md:text-sm font-medium text-gray-700 mb-2\">Расположение</label>\n            <div className=\"grid grid-cols-3 gap-2 md:gap-3\">\n              <div>\n                <label className=\"block text-[10px] md:text-xs text-gray-500 mb-1\">Филиал</label>\n                <select\n                  value={branch}\n                  onChange={(e) => {\n                    setBranch(e.target.value);\n                    updateCredentialsIfNeeded();\n                  }}\n                  className=\"glass-input text-sm md:text-base py-2\"\n                >\n                  {BRANCHES.map(b => (\n                    <option key={b.code} value={b.code}>{b.code} - {b.name}</option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-[10px] md:text-xs text-gray-500 mb-1\">Дом</label>\n                <input\n                  type=\"text\"\n                  value={building}\n                  onChange={(e) => {\n                    setBuilding(e.target.value.toUpperCase());\n                    updateCredentialsIfNeeded();\n                  }}\n                  placeholder=\"8A\"\n                  className=\"glass-input text-sm md:text-base\"\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-[10px] md:text-xs text-gray-500 mb-1\">Кв.</label>\n                <input\n                  type=\"text\"\n                  value={apartment}\n                  onChange={(e) => {\n                    setApartment(e.target.value);\n                    updateCredentialsIfNeeded();\n                  }}\n                  placeholder=\"23\"\n                  className=\"glass-input text-sm md:text-base\"\n                  required\n                />\n              </div>\n            </div>\n            {/* Preview address */}\n            {building && (\n              <div className=\"mt-2 text-xs text-gray-500 flex items-center gap-1\">\n                <MapPin className=\"w-3 h-3\" />\n                {getAddress()}, кв. {apartment || '...'}\n              </div>\n            )}\n          </div>\n\n          {/* Login credentials */}\n          <div className=\"border-t pt-3 md:pt-4\">\n            <div className=\"flex items-center justify-between mb-2 md:mb-3\">\n              <span className=\"text-xs md:text-sm font-medium text-gray-700\">Данные для входа</span>\n              <button type=\"button\" onClick={generateCredentials} className=\"btn-secondary text-xs md:text-sm py-1 px-2 md:px-3 touch-manipulation\">\n                Сгенерировать\n              </button>\n            </div>\n\n            {/* Hint about password format */}\n            <div className=\"mb-2 p-2 bg-blue-50 border border-blue-100 rounded-lg text-xs text-blue-600\">\n              💡 Пароль будет в формате: <span className=\"font-mono font-bold\">ФИЛИАЛ/ДОМ/КВАРТИРА</span>\n              <br />\n              Например: <span className=\"font-mono\">YS/8A/23</span>\n            </div>\n\n            <div className=\"space-y-2 md:space-y-3\">\n              <div>\n                <label className=\"block text-[10px] md:text-xs text-gray-500 mb-1\">Логин</label>\n                <input\n                  type=\"text\"\n                  value={login}\n                  onChange={(e) => setLogin(e.target.value)}\n                  placeholder=\"YS_8A_23\"\n                  className=\"glass-input text-sm md:text-base font-mono\"\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-[10px] md:text-xs text-gray-500 mb-1\">Пароль</label>\n                <div className=\"relative\">\n                  <input\n                    type={showPassword ? 'text' : 'password'}\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    placeholder=\"YS/8A/23\"\n                    className=\"glass-input pr-10 text-sm md:text-base font-mono\"\n                    required\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 touch-manipulation\"\n                  >\n                    {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"flex items-center gap-2 p-2.5 md:p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-xs md:text-sm\">\n              <AlertCircle className=\"w-4 h-4 flex-shrink-0\" />\n              {error}\n            </div>\n          )}\n\n          <div className=\"flex gap-2 md:gap-3 pt-3 md:pt-4\">\n            <button type=\"button\" onClick={onClose} className=\"btn-secondary flex-1 py-2.5 text-sm touch-manipulation\">\n              Отмена\n            </button>\n            <button type=\"submit\" className=\"btn-primary flex-1 py-2.5 text-sm touch-manipulation\">\n              Добавить\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\n// Credentials Modal\nfunction CredentialsModal({\n  login,\n  password,\n  onClose\n}: {\n  login: string;\n  password: string;\n  onClose: () => void;\n}) {\n  const [copied, setCopied] = useState(false);\n\n  const copyCredentials = () => {\n    navigator.clipboard.writeText(`Логин: ${login}\\nПароль: ${password}`);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"glass-card p-4 md:p-6 w-full max-w-md mx-3 md:mx-4\">\n        <div className=\"text-center mb-4 md:mb-6\">\n          <div className=\"w-14 h-14 md:w-16 md:h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4\">\n            <Check className=\"w-7 h-7 md:w-8 md:h-8 text-green-600\" />\n          </div>\n          <h2 className=\"text-lg md:text-xl font-bold\">Исполнитель добавлен!</h2>\n          <p className=\"text-gray-500 mt-1.5 md:mt-2 text-sm md:text-base\">Сохраните данные для входа</p>\n        </div>\n\n        <div className=\"bg-gray-50 rounded-xl p-3 md:p-4 space-y-2 md:space-y-3\">\n          <div>\n            <div className=\"text-xs md:text-sm text-gray-500\">Логин</div>\n            <div className=\"font-mono text-base md:text-lg font-semibold\">{login}</div>\n          </div>\n          <div>\n            <div className=\"text-xs md:text-sm text-gray-500\">Пароль</div>\n            <div className=\"font-mono text-base md:text-lg font-semibold\">{password}</div>\n          </div>\n        </div>\n\n        <div className=\"flex gap-2 md:gap-3 mt-4 md:mt-6\">\n          <button\n            onClick={copyCredentials}\n            className=\"btn-secondary flex-1 flex items-center justify-center gap-2 py-2.5 text-sm touch-manipulation\"\n          >\n            {copied ? <Check className=\"w-4 h-4\" /> : <Copy className=\"w-4 h-4\" />}\n            {copied ? 'Скопировано!' : 'Копировать'}\n          </button>\n          <button onClick={onClose} className=\"btn-primary flex-1 py-2.5 text-sm touch-manipulation\">\n            Готово\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Executor Details Modal\nfunction ExecutorDetailsModal({\n  executor,\n  requests,\n  onClose,\n  onStatusChange,\n  onDelete\n}: {\n  executor: Executor;\n  requests: Request[];\n  onClose: () => void;\n  onStatusChange: (status: 'available' | 'busy' | 'offline') => void;\n  onDelete: () => void;\n}) {\n  const executorRequests = requests.filter(r => r.executorId === executor.id);\n  const completedRequests = executorRequests.filter(r => r.status === 'completed');\n  const activeRequests = executorRequests.filter(r => ['assigned', 'accepted', 'in_progress', 'pending_approval'].includes(r.status));\n\n  // Calculate average completion time\n  const avgTime = completedRequests.length > 0\n    ? completedRequests.reduce((sum, r) => sum + (r.workDuration || 0), 0) / completedRequests.length\n    : 0;\n\n  const formatDuration = (seconds: number) => {\n    if (seconds < 60) return `${seconds} сек`;\n    if (seconds < 3600) return `${Math.floor(seconds / 60)} мин`;\n    return `${Math.floor(seconds / 3600)}ч ${Math.floor((seconds % 3600) / 60)}мин`;\n  };\n\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric'\n    });\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'available': return <span className=\"badge bg-green-100 text-green-700\">Доступен</span>;\n      case 'busy': return <span className=\"badge bg-amber-100 text-amber-700\">Занят</span>;\n      case 'offline': return <span className=\"badge bg-gray-100 text-gray-600\">Оффлайн</span>;\n      default: return <span className=\"badge\">{status}</span>;\n    }\n  };\n\n  const getRequestStatusBadge = (status: string) => {\n    const labels: Record<string, { bg: string; text: string; label: string }> = {\n      'assigned': { bg: 'bg-blue-100', text: 'text-blue-700', label: 'Назначена' },\n      'accepted': { bg: 'bg-cyan-100', text: 'text-cyan-700', label: 'Принята' },\n      'in_progress': { bg: 'bg-amber-100', text: 'text-amber-700', label: 'В работе' },\n      'pending_approval': { bg: 'bg-purple-100', text: 'text-purple-700', label: 'Ожидает' },\n      'completed': { bg: 'bg-green-100', text: 'text-green-700', label: 'Выполнена' },\n    };\n    const info = labels[status] || { bg: 'bg-gray-100', text: 'text-gray-700', label: status };\n    return <span className={`badge ${info.bg} ${info.text} text-xs`}>{info.label}</span>;\n  };\n\n  return (\n    <div className=\"modal-backdrop\" onClick={onClose}>\n      <div\n        className=\"glass-card p-4 md:p-6 w-full max-w-lg mx-3 md:mx-4 max-h-[90vh] overflow-y-auto\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"flex items-start justify-between mb-4 md:mb-6 gap-3\">\n          <div className=\"flex items-center gap-3 md:gap-4 min-w-0\">\n            <div className=\"w-14 h-14 md:w-16 md:h-16 bg-primary-100 rounded-full flex items-center justify-center text-lg md:text-xl font-bold text-primary-700 flex-shrink-0\">\n              {executor.name.split(' ').map((n: string) => n[0]).join('').slice(0, 2)}\n            </div>\n            <div className=\"min-w-0\">\n              <h2 className=\"text-lg md:text-xl font-bold truncate\">{executor.name}</h2>\n              <div className=\"flex items-center gap-2 flex-wrap mt-1\">\n                <span className=\"text-sm text-gray-500\">\n                  {SPECIALIZATION_LABELS[executor.specialization as ExecutorSpecialization]}\n                </span>\n                {getStatusBadge(executor.status)}\n              </div>\n            </div>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg touch-manipulation flex-shrink-0\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Contact Info */}\n        <div className=\"glass-card bg-white/30 p-3 md:p-4 rounded-xl mb-4\">\n          <div className=\"flex items-center gap-2 text-sm\">\n            <Phone className=\"w-4 h-4 text-gray-500\" />\n            <a href={`tel:${executor.phone}`} className=\"text-primary-600 font-medium\">\n              {executor.phone}\n            </a>\n          </div>\n          <div className=\"flex items-center gap-2 text-sm mt-2\">\n            <User className=\"w-4 h-4 text-gray-500\" />\n            <span className=\"text-gray-600\">Логин: <span className=\"font-mono\">{executor.login}</span></span>\n          </div>\n          <div className=\"flex items-center gap-2 text-sm mt-2\">\n            <Calendar className=\"w-4 h-4 text-gray-500\" />\n            <span className=\"text-gray-600\">Добавлен: {formatDate(executor.createdAt)}</span>\n          </div>\n        </div>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3 mb-4\">\n          <div className=\"glass-card bg-white/30 p-3 text-center rounded-xl\">\n            <div className=\"flex items-center justify-center gap-1 text-amber-500 mb-1\">\n              <Star className=\"w-4 h-4 fill-amber-400\" />\n              <span className=\"text-xl md:text-2xl font-bold\">{executor.rating.toFixed(1)}</span>\n            </div>\n            <div className=\"text-xs text-gray-500\">Рейтинг</div>\n          </div>\n          <div className=\"glass-card bg-white/30 p-3 text-center rounded-xl\">\n            <div className=\"text-xl md:text-2xl font-bold text-green-600\">{completedRequests.length}</div>\n            <div className=\"text-xs text-gray-500\">Выполнено</div>\n          </div>\n          <div className=\"glass-card bg-white/30 p-3 text-center rounded-xl\">\n            <div className=\"text-xl md:text-2xl font-bold text-blue-600\">{activeRequests.length}</div>\n            <div className=\"text-xs text-gray-500\">Активных</div>\n          </div>\n          <div className=\"glass-card bg-white/30 p-3 text-center rounded-xl\">\n            <div className=\"text-xl md:text-2xl font-bold text-purple-600\">{formatDuration(avgTime)}</div>\n            <div className=\"text-xs text-gray-500\">Ср. время</div>\n          </div>\n        </div>\n\n        {/* Status Change */}\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">Статус</label>\n          <select\n            value={executor.status}\n            onChange={(e) => onStatusChange(e.target.value as 'available' | 'busy' | 'offline')}\n            className=\"glass-input w-full\"\n          >\n            <option value=\"available\">Доступен</option>\n            <option value=\"busy\">Занят</option>\n            <option value=\"offline\">Оффлайн</option>\n          </select>\n        </div>\n\n        {/* Active Requests */}\n        {activeRequests.length > 0 && (\n          <div className=\"mb-4\">\n            <h3 className=\"text-sm font-semibold text-gray-700 mb-2\">Активные заявки</h3>\n            <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n              {activeRequests.map(request => (\n                <div key={request.id} className=\"glass-card bg-white/30 p-2.5 rounded-lg\">\n                  <div className=\"flex items-center justify-between gap-2\">\n                    <div className=\"min-w-0\">\n                      <div className=\"flex items-center gap-2 flex-wrap\">\n                        <span className=\"text-xs text-gray-400\">{formatRequestNumber(request.number)}</span>\n                        {getRequestStatusBadge(request.status)}\n                      </div>\n                      <div className=\"text-sm font-medium truncate\">{request.title}</div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Recent Completed */}\n        {completedRequests.length > 0 && (\n          <div className=\"mb-4\">\n            <h3 className=\"text-sm font-semibold text-gray-700 mb-2\">Последние выполненные</h3>\n            <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n              {completedRequests.slice(0, 5).map(request => (\n                <div key={request.id} className=\"glass-card bg-white/30 p-2.5 rounded-lg\">\n                  <div className=\"flex items-center justify-between gap-2\">\n                    <div className=\"min-w-0\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-xs text-gray-400\">{formatRequestNumber(request.number)}</span>\n                        {request.rating && (\n                          <span className=\"flex items-center gap-0.5 text-xs text-amber-500\">\n                            <Star className=\"w-3 h-3 fill-amber-400\" />\n                            {request.rating}\n                          </span>\n                        )}\n                      </div>\n                      <div className=\"text-sm font-medium truncate\">{request.title}</div>\n                    </div>\n                    {request.workDuration && (\n                      <span className=\"text-xs text-gray-500 flex-shrink-0\">\n                        {formatDuration(request.workDuration)}\n                      </span>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Actions */}\n        <div className=\"flex gap-2 md:gap-3 pt-2\">\n          <button\n            onClick={onDelete}\n            className=\"btn-secondary flex-1 py-2.5 text-sm text-red-600 hover:bg-red-50 flex items-center justify-center gap-2 touch-manipulation\"\n          >\n            <Trash2 className=\"w-4 h-4\" />\n            Удалить\n          </button>\n          <button onClick={onClose} className=\"btn-primary flex-1 py-2.5 text-sm touch-manipulation\">\n            Закрыть\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Reschedule Request Card - показывает ожидающий запрос на перенос\nfunction RescheduleRequestCard({\n  reschedule,\n  onClick\n}: {\n  reschedule: RescheduleRequest;\n  onClick: () => void;\n}) {\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString('ru-RU', {\n      day: 'numeric',\n      month: 'short',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  return (\n    <button\n      onClick={onClick}\n      className=\"w-full p-3 bg-white/60 rounded-xl text-left hover:bg-white/80 active:bg-white transition-colors\"\n    >\n      <div className=\"flex items-start justify-between gap-3\">\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2 flex-wrap mb-1\">\n            <span className=\"text-sm font-mono text-gray-500\">#{reschedule.requestNumber}</span>\n            <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${\n              reschedule.initiator === 'resident'\n                ? 'bg-blue-100 text-blue-700'\n                : 'bg-purple-100 text-purple-700'\n            }`}>\n              {reschedule.initiator === 'resident' ? 'От жителя' : 'От исполнителя'}\n            </span>\n          </div>\n\n          <div className=\"text-sm text-gray-600 mb-2\">\n            <span className=\"font-medium text-gray-800\">{reschedule.initiatorName}</span>\n            {' → '}\n            <span className=\"font-medium text-gray-800\">{reschedule.recipientName}</span>\n          </div>\n\n          <div className=\"flex items-center gap-2 text-sm\">\n            <CalendarDays className=\"w-4 h-4 text-amber-600\" />\n            <span className=\"font-medium text-amber-700\">\n              {reschedule.proposedDate} в {reschedule.proposedTime}\n            </span>\n          </div>\n\n          <div className=\"text-xs text-gray-500 mt-2\">\n            Причина: {RESCHEDULE_REASON_LABELS[reschedule.reason].label}\n            {reschedule.reasonText && ` - ${reschedule.reasonText}`}\n          </div>\n\n          <div className=\"text-xs text-gray-400 mt-1\">\n            Создан: {formatDate(reschedule.createdAt)}\n          </div>\n        </div>\n\n        <ChevronRight className=\"w-5 h-5 text-amber-500 flex-shrink-0\" />\n      </div>\n    </button>\n  );\n}\n\n// Reschedule History Card - показывает историю переносов (принятые/отклонённые)\nfunction RescheduleHistoryCard({\n  reschedule\n}: {\n  reschedule: RescheduleRequest;\n}) {\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString('ru-RU', {\n      day: 'numeric',\n      month: 'short',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const statusInfo = RESCHEDULE_STATUS_LABELS[reschedule.status];\n\n  return (\n    <div className=\"p-3 bg-white/40 rounded-xl border border-gray-100\">\n      <div className=\"flex items-start justify-between gap-3\">\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2 flex-wrap mb-1\">\n            <span className=\"text-sm font-mono text-gray-500\">#{reschedule.requestNumber}</span>\n            <span className={`px-2 py-0.5 rounded-full text-xs font-medium bg-${statusInfo.color}-100 text-${statusInfo.color}-700`}>\n              {statusInfo.label}\n            </span>\n            <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${\n              reschedule.initiator === 'resident'\n                ? 'bg-blue-100 text-blue-700'\n                : 'bg-purple-100 text-purple-700'\n            }`}>\n              {reschedule.initiator === 'resident' ? 'От жителя' : 'От исполнителя'}\n            </span>\n          </div>\n\n          <div className=\"text-sm text-gray-600 mb-1\">\n            <span className=\"font-medium\">{reschedule.initiatorName}</span>\n            {' → '}\n            <span className=\"font-medium\">{reschedule.recipientName}</span>\n          </div>\n\n          {reschedule.status === 'accepted' && (\n            <div className=\"flex items-center gap-2 text-sm text-green-700 mb-1\">\n              <Check className=\"w-4 h-4\" />\n              <span>Перенесено на {reschedule.proposedDate} в {reschedule.proposedTime}</span>\n            </div>\n          )}\n\n          {reschedule.status === 'rejected' && (\n            <div className=\"text-sm text-red-700 mb-1\">\n              <X className=\"w-4 h-4 inline mr-1\" />\n              Отклонено\n              {reschedule.responseNote && `: ${reschedule.responseNote}`}\n            </div>\n          )}\n\n          {reschedule.respondedAt && (\n            <div className=\"text-xs text-gray-400\">\n              Ответ: {formatDate(reschedule.respondedAt)}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Modal для просмотра деталей запроса на перенос (если нужен в будущем)\nfunction RescheduleDetailsModal({\n  reschedule,\n  onClose\n}: {\n  reschedule: RescheduleRequest;\n  onClose: () => void;\n}) {\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleString('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const statusInfo = RESCHEDULE_STATUS_LABELS[reschedule.status];\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"modal-content p-6 w-full max-w-md mx-4\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold flex items-center gap-2\">\n            <RefreshCw className=\"w-5 h-5 text-amber-600\" />\n            Запрос на перенос\n          </h2>\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div>\n            <div className=\"text-sm text-gray-500 mb-1\">Заявка</div>\n            <div className=\"font-mono text-lg\">#{reschedule.requestNumber}</div>\n          </div>\n\n          <div>\n            <div className=\"text-sm text-gray-500 mb-1\">Статус</div>\n            <span className={`px-3 py-1 rounded-full text-sm font-medium bg-${statusInfo.color}-100 text-${statusInfo.color}-700`}>\n              {statusInfo.label}\n            </span>\n          </div>\n\n          <div>\n            <div className=\"text-sm text-gray-500 mb-1\">Инициатор</div>\n            <div className=\"flex items-center gap-2\">\n              <User className=\"w-4 h-4 text-gray-400\" />\n              <span className=\"font-medium\">{reschedule.initiatorName}</span>\n              <span className={`px-2 py-0.5 rounded-full text-xs ${\n                reschedule.initiator === 'resident'\n                  ? 'bg-blue-100 text-blue-700'\n                  : 'bg-purple-100 text-purple-700'\n              }`}>\n                {reschedule.initiator === 'resident' ? 'Житель' : 'Исполнитель'}\n              </span>\n            </div>\n          </div>\n\n          <div>\n            <div className=\"text-sm text-gray-500 mb-1\">Получатель</div>\n            <div className=\"flex items-center gap-2\">\n              <User className=\"w-4 h-4 text-gray-400\" />\n              <span className=\"font-medium\">{reschedule.recipientName}</span>\n            </div>\n          </div>\n\n          {reschedule.currentDate && (\n            <div>\n              <div className=\"text-sm text-gray-500 mb-1\">Текущее время</div>\n              <div className=\"flex items-center gap-2\">\n                <Calendar className=\"w-4 h-4 text-gray-400\" />\n                <span>{reschedule.currentDate} {reschedule.currentTime}</span>\n              </div>\n            </div>\n          )}\n\n          <div>\n            <div className=\"text-sm text-gray-500 mb-1\">Предложенное время</div>\n            <div className=\"flex items-center gap-2 text-amber-700 font-medium\">\n              <CalendarDays className=\"w-4 h-4\" />\n              <span>{reschedule.proposedDate} в {reschedule.proposedTime}</span>\n            </div>\n          </div>\n\n          <div>\n            <div className=\"text-sm text-gray-500 mb-1\">Причина</div>\n            <div className=\"p-3 bg-gray-50 rounded-lg\">\n              <div className=\"font-medium\">{RESCHEDULE_REASON_LABELS[reschedule.reason].label}</div>\n              {reschedule.reasonText && (\n                <div className=\"text-sm text-gray-600 mt-1\">{reschedule.reasonText}</div>\n              )}\n            </div>\n          </div>\n\n          {reschedule.responseNote && (\n            <div>\n              <div className=\"text-sm text-gray-500 mb-1\">Комментарий при ответе</div>\n              <div className=\"p-3 bg-gray-50 rounded-lg text-sm\">\n                {reschedule.responseNote}\n              </div>\n            </div>\n          )}\n\n          <div className=\"text-xs text-gray-400 pt-2 border-t\">\n            <div>Создан: {formatDate(reschedule.createdAt)}</div>\n            {reschedule.respondedAt && (\n              <div>Ответ: {formatDate(reschedule.respondedAt)}</div>\n            )}\n            <div>Истекает: {formatDate(reschedule.expiresAt)}</div>\n          </div>\n        </div>\n\n        <button\n          onClick={onClose}\n          className=\"w-full mt-6 py-2.5 px-4 rounded-xl font-medium bg-gray-100 hover:bg-gray-200 transition-colors\"\n        >\n          Закрыть\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":["formatRequestNumber","num","ManagerDashboard","navigate","useNavigate","executors","requests","getStats","getChartData","addExecutor","deleteExecutor","updateExecutor","assignRequest","rescheduleRequests","useDataStore","stats","chartData","showAddExecutorModal","setShowAddExecutorModal","useState","showAddResidentModal","setShowAddResidentModal","showCredentials","setShowCredentials","showAssignModal","setShowAssignModal","selectedExecutor","setSelectedExecutor","selectedReschedule","setSelectedReschedule","pendingReschedules","recentReschedules","a","b","CATEGORY_COLORS","categoryData","acc","r","category","value","SPECIALIZATION_LABELS","jsxs","jsx","Fragment","FileText","Clock","AlertCircle","TrendingUp","ResponsiveContainer","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Legend","Bar","d","PieChart","Pie","name","percent","entry","index","Cell","RefreshCw","reschedule","RescheduleRequestCard","RescheduleHistoryCard","request","RequestCard","AddExecutorModal","data","AddResidentModal","CredentialsModal","AssignExecutorModal","executorId","ExecutorDetailsModal","status","RescheduleDetailsModal","onAssign","compact","getStatusBadge","colors","STATUS_LABELS","getPriorityBadge","priority","PRIORITY_LABELS","formatDate","dateStr","User","Phone","MapPin","Calendar","UserPlus","ExecutorCard","executor","onClick","onDelete","onStatusChange","n","Star","e","Trash2","ChevronRight","ResidentsSection","residents","getResidentStats","residentId","residentRequests","Home","resident","ReportsSection","period","setPeriod","startDate","setStartDate","endDate","setEndDate","getDateRange","now","end","start","filteredRequests","created","categoryStats","count","executorStats","executorRequests","completed","ratings","avgRating","totalTime","sum","avgTime","exportToExcel","headers","rows","csvContent","row","BOM","blob","url","link","date","p","Download","CalendarDays","cat","exec","onClose","matchingExecutors","otherExecutors","ExecutorOption","recommended","X","onAdd","setName","phone","setPhone","login","setLogin","password","setPassword","specialization","setSpecialization","showPassword","setShowPassword","error","setError","generatePassword","chars","pass","i","generateLogin","prefix","handleSubmit","label","EyeOff","Eye","BRANCHES","branch","setBranch","building","setBuilding","apartment","setApartment","addMockUser","useAuthStore","generateCredentials","generatedLogin","generatedPassword","updateCredentialsIfNeeded","expectedLogin","expectedPassword","getAddress","branchInfo","address","copied","setCopied","copyCredentials","Check","Copy","completedRequests","activeRequests","formatDuration","seconds","getRequestStatusBadge","info","RESCHEDULE_REASON_LABELS","statusInfo","RESCHEDULE_STATUS_LABELS"],"mappings":"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"}