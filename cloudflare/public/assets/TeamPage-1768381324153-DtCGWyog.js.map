{"version":3,"file":"TeamPage-1768381324153-DtCGWyog.js","sources":["../../src/pages/admin/TeamPage.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport {\n  UserCog, Wrench, Phone, Star, X, Eye, EyeOff, Plus,\n  Copy, Check, Edit3, Save, Clock, Award, Loader2, RefreshCw,\n  Shield, ChevronDown, ChevronUp, Search, Filter,\n  Droplets, Zap, ArrowUpDown, Bell, Brush, ShieldCheck,\n  Hammer, Flame, Wind, Trash2, Key\n} from 'lucide-react';\nimport { teamApi } from '../../services/api';\nimport { SPECIALIZATION_LABELS } from '../../types';\nimport type { ExecutorSpecialization } from '../../types';\n\ninterface StaffMember {\n  id: string;\n  login: string;\n  password?: string;\n  name: string;\n  phone: string;\n  role: 'manager' | 'department_head' | 'executor';\n  specialization?: ExecutorSpecialization;\n  status?: string;\n  created_at: string;\n  completed_count?: number;\n  active_count?: number;\n  avg_rating?: number;\n}\n\nconst ROLE_LABELS: Record<string, string> = {\n  manager: 'Менеджер',\n  department_head: 'Глава отдела',\n  executor: 'Исполнитель',\n};\n\nconst ROLE_COLORS: Record<string, string> = {\n  manager: 'bg-purple-100 text-purple-700',\n  department_head: 'bg-blue-100 text-blue-700',\n  executor: 'bg-green-100 text-green-700',\n};\n\n// Иконки для специализаций\nconst SPECIALIZATION_ICONS: Record<ExecutorSpecialization, React.ReactNode> = {\n  plumber: <Droplets className=\"w-4 h-4\" />,\n  electrician: <Zap className=\"w-4 h-4\" />,\n  elevator: <ArrowUpDown className=\"w-4 h-4\" />,\n  intercom: <Bell className=\"w-4 h-4\" />,\n  cleaning: <Brush className=\"w-4 h-4\" />,\n  security: <ShieldCheck className=\"w-4 h-4\" />,\n  carpenter: <Hammer className=\"w-4 h-4\" />,\n  boiler: <Flame className=\"w-4 h-4\" />,\n  ac: <Wind className=\"w-4 h-4\" />,\n  other: <Wrench className=\"w-4 h-4\" />,\n};\n\n// Цвета для специализаций\nconst SPECIALIZATION_COLORS: Record<ExecutorSpecialization, string> = {\n  plumber: 'bg-blue-100 text-blue-700',\n  electrician: 'bg-yellow-100 text-yellow-700',\n  elevator: 'bg-gray-100 text-gray-700',\n  intercom: 'bg-purple-100 text-purple-700',\n  cleaning: 'bg-pink-100 text-pink-700',\n  security: 'bg-red-100 text-red-700',\n  carpenter: 'bg-amber-100 text-amber-700',\n  boiler: 'bg-orange-100 text-orange-700',\n  ac: 'bg-cyan-100 text-cyan-700',\n  other: 'bg-gray-100 text-gray-700',\n};\n\nexport function TeamPage() {\n  const [managers, setManagers] = useState<StaffMember[]>([]);\n  const [departmentHeads, setDepartmentHeads] = useState<StaffMember[]>([]);\n  const [executors, setExecutors] = useState<StaffMember[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // UI State\n  const [selectedMember, setSelectedMember] = useState<StaffMember | null>(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const [copiedField, setCopiedField] = useState<string | null>(null);\n  const [showCredentialsModal, setShowCredentialsModal] = useState<{ login: string; password: string } | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [specializationFilter, setSpecializationFilter] = useState<ExecutorSpecialization | 'all'>('all');\n  const [expandedSections, setExpandedSections] = useState({\n    managers: true,\n    departmentHeads: true,\n    executors: true,\n  });\n\n  // Edit form\n  const [editForm, setEditForm] = useState({\n    name: '',\n    phone: '',\n    login: '',\n    password: '',\n    specialization: '' as ExecutorSpecialization | '',\n  });\n  const [isLoadingDetails, setIsLoadingDetails] = useState(false);\n\n  // Add new member modal\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [addForm, setAddForm] = useState({\n    name: '',\n    phone: '',\n    login: '',\n    password: '',\n    role: 'executor' as 'manager' | 'department_head' | 'executor',\n    specialization: '' as ExecutorSpecialization | '',\n  });\n  const [addLoading, setAddLoading] = useState(false);\n  const [addError, setAddError] = useState<string | null>(null);\n\n  // Fetch team data\n  const fetchTeam = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await teamApi.getAll();\n      setManagers(data.managers || []);\n      setDepartmentHeads(data.departmentHeads || []);\n      setExecutors(data.executors || []);\n    } catch (err: any) {\n      setError(err.message || 'Ошибка загрузки данных');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchTeam();\n  }, []);\n\n  const handleOpenDetails = async (member: StaffMember) => {\n    // Show modal immediately with cached data\n    setSelectedMember(member);\n    setEditForm({\n      name: member.name,\n      phone: member.phone,\n      login: member.login,\n      password: '',\n      specialization: member.specialization || '',\n    });\n    setIsEditing(false);\n    setShowPassword(false);\n\n    // Then fetch fresh data from API (including password)\n    setIsLoadingDetails(true);\n    try {\n      const response = await teamApi.getById(member.id);\n      if (response.user) {\n        const freshData = {\n          ...member,\n          ...response.user,\n        };\n        setSelectedMember(freshData);\n        setEditForm({\n          name: freshData.name,\n          phone: freshData.phone,\n          login: freshData.login,\n          password: '',\n          specialization: freshData.specialization || '',\n        });\n      }\n    } catch (err) {\n      console.error('Failed to fetch staff details:', err);\n    } finally {\n      setIsLoadingDetails(false);\n    }\n  };\n\n  const handleCloseDetails = () => {\n    setSelectedMember(null);\n    setIsEditing(false);\n    setShowPassword(false);\n  };\n\n  const handleCopy = (text: string, field: string) => {\n    navigator.clipboard.writeText(text);\n    setCopiedField(field);\n    setTimeout(() => setCopiedField(null), 2000);\n  };\n\n  const handleSaveChanges = async () => {\n    if (!selectedMember) return;\n\n    try {\n      const updates: any = {};\n      if (editForm.name !== selectedMember.name) updates.name = editForm.name;\n      if (editForm.phone !== selectedMember.phone) updates.phone = editForm.phone;\n      if (editForm.login !== selectedMember.login) updates.login = editForm.login;\n      if (editForm.password) updates.password = editForm.password;\n      if (editForm.specialization !== selectedMember.specialization) {\n        updates.specialization = editForm.specialization;\n      }\n\n      if (Object.keys(updates).length > 0) {\n        const response = await teamApi.update(selectedMember.id, updates);\n\n        // Refresh data from server\n        await fetchTeam();\n\n        // Update selected member with response data (includes password from server)\n        if (response.user) {\n          setSelectedMember({\n            ...selectedMember,\n            ...response.user,\n          });\n        }\n      }\n\n      setIsEditing(false);\n      setEditForm(prev => ({ ...prev, password: '' })); // Clear password field\n    } catch (err: any) {\n      alert('Ошибка сохранения: ' + err.message);\n    }\n  };\n\n  // Generate random password\n  const generatePassword = () => {\n    const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    let password = '';\n    for (let i = 0; i < 8; i++) {\n      password += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return password;\n  };\n\n  // Handle add new member\n  const handleAddMember = async () => {\n    setAddError(null);\n\n    // Validation\n    if (!addForm.name.trim()) {\n      setAddError('Введите ФИО');\n      return;\n    }\n    if (!addForm.login.trim()) {\n      setAddError('Введите логин');\n      return;\n    }\n    if (!addForm.password.trim()) {\n      setAddError('Введите пароль');\n      return;\n    }\n    if ((addForm.role === 'executor' || addForm.role === 'department_head') && !addForm.specialization) {\n      setAddError('Выберите специализацию');\n      return;\n    }\n\n    setAddLoading(true);\n    try {\n      const result = await teamApi.create({\n        login: addForm.login,\n        password: addForm.password,\n        name: addForm.name,\n        phone: addForm.phone,\n        role: addForm.role,\n        specialization: addForm.specialization || undefined,\n      });\n\n      // Show credentials modal (password comes from server response or use submitted)\n      setShowCredentialsModal({\n        login: addForm.login,\n        password: result.user?.password || addForm.password,\n      });\n\n      // Reset form and close modal\n      setAddForm({\n        name: '',\n        phone: '',\n        login: '',\n        password: '',\n        role: 'executor',\n        specialization: '',\n      });\n      setShowAddModal(false);\n\n      // Refresh data\n      await fetchTeam();\n    } catch (err: any) {\n      setAddError(err.message || 'Ошибка создания сотрудника');\n    } finally {\n      setAddLoading(false);\n    }\n  };\n\n  const openAddModal = (role: 'manager' | 'department_head' | 'executor' = 'executor') => {\n    setAddForm({\n      name: '',\n      phone: '',\n      login: '',\n      password: generatePassword(),\n      role,\n      specialization: '',\n    });\n    setAddError(null);\n    setShowAddModal(true);\n  };\n\n  // Handle delete member\n  const handleDeleteMember = async (member: StaffMember) => {\n    if (!confirm(`Удалить сотрудника \"${member.name}\"? Это действие необратимо.`)) {\n      return;\n    }\n\n    try {\n      await teamApi.delete(member.id);\n      // Close modal if this member was selected\n      if (selectedMember?.id === member.id) {\n        setSelectedMember(null);\n      }\n      // Refresh data\n      await fetchTeam();\n    } catch (err: any) {\n      alert('Ошибка удаления: ' + err.message);\n    }\n  };\n\n  // Handle reset all passwords for staff without password_plain\n  const handleResetAllPasswords = async () => {\n    // Count staff without passwords\n    const staffWithoutPassword = [\n      ...managers.filter(m => !m.password),\n      ...departmentHeads.filter(m => !m.password),\n      ...executors.filter(m => !m.password),\n    ];\n\n    if (staffWithoutPassword.length === 0) {\n      alert('Все сотрудники уже имеют пароли');\n      return;\n    }\n\n    if (!confirm(`Сбросить пароли для ${staffWithoutPassword.length} сотрудников без паролей?\\n\\nЭто сгенерирует новые пароли для всех сотрудников, у которых не отображается пароль.`)) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const result = await teamApi.resetAllPasswords();\n\n      if (result.updated > 0) {\n        // Show list of updated users with their new passwords\n        const message = result.staff.map(s => `${s.name}: ${s.login} / ${s.password}`).join('\\n');\n        alert(`Обновлено ${result.updated} сотрудников:\\n\\n${message}`);\n      } else {\n        alert(result.message);\n      }\n\n      // Refresh data\n      await fetchTeam();\n    } catch (err: any) {\n      alert('Ошибка сброса паролей: ' + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const toggleSection = (section: keyof typeof expandedSections) => {\n    setExpandedSections(prev => ({ ...prev, [section]: !prev[section] }));\n  };\n\n  // Filter by search query and specialization\n  const filterMembers = (members: StaffMember[]) => {\n    let filtered = members;\n\n    // Filter by specialization\n    if (specializationFilter !== 'all') {\n      filtered = filtered.filter(m => m.specialization === specializationFilter);\n    }\n\n    // Filter by search query\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(m =>\n        m.name.toLowerCase().includes(query) ||\n        m.phone.includes(query) ||\n        m.login.toLowerCase().includes(query) ||\n        (m.specialization && SPECIALIZATION_LABELS[m.specialization]?.toLowerCase().includes(query))\n      );\n    }\n\n    return filtered;\n  };\n\n  // Get unique specializations from all staff\n  const allSpecializations = [...new Set([\n    ...departmentHeads.map(m => m.specialization).filter(Boolean),\n    ...executors.map(m => m.specialization).filter(Boolean),\n  ])] as ExecutorSpecialization[];\n\n  const filteredManagers = filterMembers(managers);\n  const filteredDepartmentHeads = filterMembers(departmentHeads);\n  const filteredExecutors = filterMembers(executors);\n\n  const getStatusBadge = (status?: string) => {\n    switch (status) {\n      case 'available': return <span className=\"badge badge-done text-xs\">Доступен</span>;\n      case 'busy': return <span className=\"badge badge-progress text-xs\">Занят</span>;\n      case 'offline': return <span className=\"badge bg-gray-100 text-gray-600 text-xs\">Не в сети</span>;\n      default: return null;\n    }\n  };\n\n  const renderStaffCard = (member: StaffMember) => (\n    <div\n      key={member.id}\n      className=\"glass-card p-4 hover:shadow-lg transition-shadow cursor-pointer relative group\"\n      onClick={() => handleOpenDetails(member)}\n    >\n      {/* Delete button */}\n      <button\n        onClick={(e) => {\n          e.stopPropagation();\n          handleDeleteMember(member);\n        }}\n        className=\"absolute top-2 right-2 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg opacity-0 group-hover:opacity-100 transition-all\"\n        title=\"Удалить сотрудника\"\n      >\n        <Trash2 className=\"w-4 h-4\" />\n      </button>\n\n      <div className=\"flex items-start justify-between mb-3 pr-8\">\n        <div className=\"flex items-center gap-3\">\n          <div className={`w-12 h-12 rounded-full flex items-center justify-center text-lg font-medium ${\n            member.specialization\n              ? SPECIALIZATION_COLORS[member.specialization]\n              : 'bg-primary-100 text-primary-700'\n          }`}>\n            {member.specialization\n              ? SPECIALIZATION_ICONS[member.specialization]\n              : member.name.split(' ').map(n => n[0]).join('').slice(0, 2)\n            }\n          </div>\n          <div>\n            <h3 className=\"font-semibold\">{member.name}</h3>\n            {member.specialization && (\n              <div className=\"flex items-center gap-1 text-sm text-gray-500\">\n                {SPECIALIZATION_LABELS[member.specialization] || member.specialization}\n              </div>\n            )}\n          </div>\n        </div>\n        <div className=\"flex flex-col items-end gap-1\">\n          <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${ROLE_COLORS[member.role]}`}>\n            {ROLE_LABELS[member.role]}\n          </span>\n          {getStatusBadge(member.status)}\n        </div>\n      </div>\n\n      <div className=\"space-y-2 text-sm text-gray-600\">\n        <div className=\"flex items-center gap-2\">\n          <Phone className=\"w-4 h-4\" />\n          {member.phone}\n        </div>\n        {(member.role === 'executor' || member.role === 'department_head') && (\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex items-center gap-1\">\n              <Star className=\"w-4 h-4 text-amber-400\" />\n              {member.avg_rating || 0}\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <Check className=\"w-4 h-4 text-green-500\" />\n              {member.completed_count || 0} выполнено\n            </div>\n            {member.active_count ? (\n              <div className=\"flex items-center gap-1\">\n                <Clock className=\"w-4 h-4 text-blue-500\" />\n                {member.active_count} активных\n              </div>\n            ) : null}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderSection = (\n    title: string,\n    icon: React.ReactNode,\n    members: StaffMember[],\n    sectionKey: keyof typeof expandedSections\n  ) => (\n    <div className=\"glass-card overflow-hidden\">\n      <button\n        className=\"w-full p-4 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors\"\n        onClick={() => toggleSection(sectionKey)}\n      >\n        <div className=\"flex items-center gap-3\">\n          {icon}\n          <h2 className=\"text-lg font-semibold\">{title}</h2>\n          <span className=\"px-2 py-0.5 rounded-full bg-gray-200 text-gray-700 text-sm\">\n            {members.length}\n          </span>\n        </div>\n        {expandedSections[sectionKey] ? (\n          <ChevronUp className=\"w-5 h-5 text-gray-500\" />\n        ) : (\n          <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n        )}\n      </button>\n\n      {expandedSections[sectionKey] && (\n        <div className=\"p-4\">\n          {members.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">\n              Нет сотрудников\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {members.map(renderStaffCard)}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary-500\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"glass-card p-8 text-center\">\n        <div className=\"text-red-500 mb-4\">{error}</div>\n        <button onClick={fetchTeam} className=\"btn-primary\">\n          Повторить\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between flex-wrap gap-4\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Персонал</h1>\n          <p className=\"text-gray-500 text-sm mt-1\">\n            Всего: {managers.length + departmentHeads.length + executors.length} сотрудников\n          </p>\n        </div>\n        <div className=\"flex items-center gap-3 flex-wrap\">\n          {/* Search */}\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Поиск...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-10 pr-4 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n            />\n          </div>\n          {/* Specialization Filter */}\n          <div className=\"relative\">\n            <Filter className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n            <select\n              value={specializationFilter}\n              onChange={(e) => setSpecializationFilter(e.target.value as ExecutorSpecialization | 'all')}\n              className=\"pl-10 pr-8 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-500 focus:border-transparent appearance-none bg-white\"\n            >\n              <option value=\"all\">Все специализации</option>\n              {allSpecializations.map(spec => (\n                <option key={spec} value={spec}>{SPECIALIZATION_LABELS[spec]}</option>\n              ))}\n            </select>\n          </div>\n          <button\n            onClick={fetchTeam}\n            className=\"btn-secondary p-2\"\n            title=\"Обновить\"\n          >\n            <RefreshCw className=\"w-5 h-5\" />\n          </button>\n          {/* Show reset passwords button only if there are staff without passwords */}\n          {[...managers, ...departmentHeads, ...executors].some(m => !m.password) && (\n            <button\n              onClick={handleResetAllPasswords}\n              className=\"btn-secondary flex items-center gap-2 text-orange-600 hover:bg-orange-50\"\n              title=\"Сбросить пароли для сотрудников без паролей\"\n            >\n              <Key className=\"w-5 h-5\" />\n              <span className=\"hidden sm:inline\">Сбросить пароли</span>\n            </button>\n          )}\n          <button\n            onClick={() => openAddModal('executor')}\n            className=\"btn-primary flex items-center gap-2\"\n          >\n            <Plus className=\"w-5 h-5\" />\n            <span className=\"hidden sm:inline\">Добавить сотрудника</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Stats Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div className=\"glass-card p-5\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center\">\n              <Shield className=\"w-6 h-6 text-purple-600\" />\n            </div>\n            <div>\n              <div className=\"text-2xl font-bold\">{managers.length}</div>\n              <div className=\"text-sm text-gray-500\">Менеджеров</div>\n            </div>\n          </div>\n        </div>\n        <div className=\"glass-card p-5\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center\">\n              <UserCog className=\"w-6 h-6 text-blue-600\" />\n            </div>\n            <div>\n              <div className=\"text-2xl font-bold\">{departmentHeads.length}</div>\n              <div className=\"text-sm text-gray-500\">Глав отделов</div>\n            </div>\n          </div>\n        </div>\n        <div className=\"glass-card p-5\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center\">\n              <Wrench className=\"w-6 h-6 text-green-600\" />\n            </div>\n            <div>\n              <div className=\"text-2xl font-bold\">{executors.length}</div>\n              <div className=\"text-sm text-gray-500\">Исполнителей</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Sections */}\n      <div className=\"space-y-4\">\n        {renderSection(\n          'Менеджеры',\n          <Shield className=\"w-5 h-5 text-purple-500\" />,\n          filteredManagers,\n          'managers'\n        )}\n        {renderSection(\n          'Главы отделов',\n          <UserCog className=\"w-5 h-5 text-blue-500\" />,\n          filteredDepartmentHeads,\n          'departmentHeads'\n        )}\n        {renderSection(\n          'Исполнители',\n          <Wrench className=\"w-5 h-5 text-green-500\" />,\n          filteredExecutors,\n          'executors'\n        )}\n      </div>\n\n      {/* Add Member Modal */}\n      {showAddModal && (\n        <div className=\"modal-backdrop\" onClick={() => setShowAddModal(false)}>\n          <div className=\"modal-content p-6 w-full max-w-lg mx-4\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-bold\">Добавить сотрудника</h2>\n              <button onClick={() => setShowAddModal(false)} className=\"p-2 hover:bg-gray-100 rounded-lg\">\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {addError && (\n              <div className=\"bg-red-50 text-red-600 p-3 rounded-xl mb-4 text-sm\">\n                {addError}\n              </div>\n            )}\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Роль *</label>\n                <select\n                  value={addForm.role}\n                  onChange={(e) => setAddForm({ ...addForm, role: e.target.value as 'manager' | 'department_head' | 'executor' })}\n                  className=\"input-field\"\n                >\n                  <option value=\"executor\">Исполнитель</option>\n                  <option value=\"department_head\">Глава отдела</option>\n                  <option value=\"manager\">Менеджер</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">ФИО *</label>\n                <input\n                  type=\"text\"\n                  value={addForm.name}\n                  onChange={(e) => setAddForm({ ...addForm, name: e.target.value })}\n                  className=\"input-field\"\n                  placeholder=\"Иванов Иван Иванович\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Телефон</label>\n                <input\n                  type=\"text\"\n                  value={addForm.phone}\n                  onChange={(e) => setAddForm({ ...addForm, phone: e.target.value })}\n                  className=\"input-field\"\n                  placeholder=\"+998 XX XXX XX XX\"\n                />\n              </div>\n\n              {(addForm.role === 'executor' || addForm.role === 'department_head') && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Специализация *</label>\n                  <select\n                    value={addForm.specialization}\n                    onChange={(e) => setAddForm({ ...addForm, specialization: e.target.value as ExecutorSpecialization })}\n                    className=\"input-field\"\n                  >\n                    <option value=\"\">Выберите специализацию</option>\n                    <option value=\"plumber\">Сантехник</option>\n                    <option value=\"electrician\">Электрик</option>\n                    <option value=\"elevator\">Лифтёр</option>\n                    <option value=\"intercom\">Домофон</option>\n                    <option value=\"cleaning\">Уборщица</option>\n                    <option value=\"security\">Охранник</option>\n                    <option value=\"carpenter\">Столяр</option>\n                    <option value=\"boiler\">Котельщик</option>\n                    <option value=\"ac\">Кондиционерщик</option>\n                    <option value=\"other\">Другое</option>\n                  </select>\n                </div>\n              )}\n\n              <div className=\"border-t pt-4 mt-4\">\n                <div className=\"text-sm font-medium text-gray-700 mb-3\">Данные для входа</div>\n\n                <div className=\"mb-3\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Логин *</label>\n                  <input\n                    type=\"text\"\n                    value={addForm.login}\n                    onChange={(e) => setAddForm({ ...addForm, login: e.target.value })}\n                    className=\"input-field\"\n                    placeholder=\"ivanov\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Пароль *</label>\n                  <div className=\"flex gap-2\">\n                    <input\n                      type=\"text\"\n                      value={addForm.password}\n                      onChange={(e) => setAddForm({ ...addForm, password: e.target.value })}\n                      className=\"input-field flex-1\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => setAddForm({ ...addForm, password: generatePassword() })}\n                      className=\"btn-secondary px-3\"\n                      title=\"Сгенерировать пароль\"\n                    >\n                      <RefreshCw className=\"w-4 h-4\" />\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => handleCopy(addForm.password, 'addPassword')}\n                      className=\"btn-secondary px-3\"\n                      title=\"Копировать пароль\"\n                    >\n                      {copiedField === 'addPassword' ? <Check className=\"w-4 h-4 text-green-500\" /> : <Copy className=\"w-4 h-4\" />}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex gap-3 mt-6\">\n              <button\n                onClick={() => setShowAddModal(false)}\n                className=\"btn-secondary flex-1\"\n                disabled={addLoading}\n              >\n                Отмена\n              </button>\n              <button\n                onClick={handleAddMember}\n                disabled={addLoading}\n                className=\"btn-primary flex-1 flex items-center justify-center gap-2\"\n              >\n                {addLoading ? (\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                ) : (\n                  <Plus className=\"w-4 h-4\" />\n                )}\n                Добавить\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Details Modal */}\n      {selectedMember && (\n        <div className=\"modal-backdrop\" onClick={handleCloseDetails}>\n          <div className=\"modal-content p-6 w-full max-w-lg mx-4\" onClick={(e) => e.stopPropagation()}>\n            {/* Header */}\n            <div className=\"flex items-start justify-between mb-6\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center text-2xl font-medium text-primary-700\">\n                  {selectedMember.name.split(' ').map(n => n[0]).join('').slice(0, 2)}\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-bold\">{selectedMember.name}</h2>\n                  <div className=\"flex items-center gap-2 mt-1\">\n                    <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${ROLE_COLORS[selectedMember.role]}`}>\n                      {ROLE_LABELS[selectedMember.role]}\n                    </span>\n                    {selectedMember.specialization && (\n                      <span className=\"text-sm text-gray-500\">\n                        {SPECIALIZATION_LABELS[selectedMember.specialization]}\n                      </span>\n                    )}\n                  </div>\n                  {getStatusBadge(selectedMember.status)}\n                </div>\n              </div>\n              <button onClick={handleCloseDetails} className=\"p-2 hover:bg-gray-100 rounded-lg\">\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* Stats for executors */}\n            {selectedMember.role === 'executor' && (\n              <div className=\"grid grid-cols-3 gap-3 mb-6\">\n                <div className=\"bg-amber-50 rounded-xl p-3 text-center\">\n                  <div className=\"flex items-center justify-center gap-1 text-amber-600 mb-1\">\n                    <Star className=\"w-4 h-4\" />\n                    <span className=\"font-bold text-lg\">{selectedMember.avg_rating || 0}</span>\n                  </div>\n                  <div className=\"text-xs text-gray-500\">Рейтинг</div>\n                </div>\n                <div className=\"bg-green-50 rounded-xl p-3 text-center\">\n                  <div className=\"flex items-center justify-center gap-1 text-green-600 mb-1\">\n                    <Award className=\"w-4 h-4\" />\n                    <span className=\"font-bold text-lg\">{selectedMember.completed_count || 0}</span>\n                  </div>\n                  <div className=\"text-xs text-gray-500\">Выполнено</div>\n                </div>\n                <div className=\"bg-blue-50 rounded-xl p-3 text-center\">\n                  <div className=\"flex items-center justify-center gap-1 text-blue-600 mb-1\">\n                    <Clock className=\"w-4 h-4\" />\n                    <span className=\"font-bold text-lg\">{selectedMember.active_count || 0}</span>\n                  </div>\n                  <div className=\"text-xs text-gray-500\">Активных</div>\n                </div>\n              </div>\n            )}\n\n            {/* Info / Edit Form */}\n            {isEditing ? (\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">ФИО</label>\n                  <input\n                    type=\"text\"\n                    value={editForm.name}\n                    onChange={(e) => setEditForm({ ...editForm, name: e.target.value })}\n                    className=\"input-field\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Телефон</label>\n                  <input\n                    type=\"text\"\n                    value={editForm.phone}\n                    onChange={(e) => setEditForm({ ...editForm, phone: e.target.value })}\n                    className=\"input-field\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Логин</label>\n                  <input\n                    type=\"text\"\n                    value={editForm.login}\n                    onChange={(e) => setEditForm({ ...editForm, login: e.target.value })}\n                    className=\"input-field\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Новый пароль</label>\n                  <input\n                    type=\"text\"\n                    value={editForm.password}\n                    onChange={(e) => setEditForm({ ...editForm, password: e.target.value })}\n                    className=\"input-field\"\n                    placeholder=\"Оставьте пустым, чтобы не менять\"\n                  />\n                </div>\n                {(selectedMember.role === 'executor' || selectedMember.role === 'department_head') && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Специализация</label>\n                    <select\n                      value={editForm.specialization}\n                      onChange={(e) => setEditForm({ ...editForm, specialization: e.target.value as ExecutorSpecialization })}\n                      className=\"input-field\"\n                    >\n                      <option value=\"\">Не указана</option>\n                      <option value=\"plumber\">Сантехник</option>\n                      <option value=\"electrician\">Электрик</option>\n                      <option value=\"elevator\">Лифтёр</option>\n                      <option value=\"intercom\">Домофон</option>\n                      <option value=\"cleaning\">Уборщица</option>\n                      <option value=\"gardener\">Садовник</option>\n                      <option value=\"security\">Охранник</option>\n                      <option value=\"carpenter\">Столяр</option>\n                      <option value=\"boiler\">Котельщик</option>\n                      <option value=\"ac\">Кондиционерщик</option>\n                      <option value=\"other\">Другое</option>\n                    </select>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {/* Contact Info */}\n                <div className=\"bg-gray-50 rounded-xl p-4 space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2 text-gray-600\">\n                      <Phone className=\"w-4 h-4\" />\n                      <span className=\"text-sm\">Телефон</span>\n                    </div>\n                    <span className=\"font-medium\">{selectedMember.phone}</span>\n                  </div>\n                </div>\n\n                {/* Credentials */}\n                <div className=\"bg-blue-50 rounded-xl p-4 space-y-3\">\n                  <div className=\"text-sm font-medium text-blue-800 mb-2\">Данные для входа</div>\n\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-600\">Логин</span>\n                    <div className=\"flex items-center gap-2\">\n                      <code className=\"bg-white px-2 py-1 rounded text-sm font-mono\">{selectedMember.login}</code>\n                      <button\n                        onClick={() => handleCopy(selectedMember.login, 'login')}\n                        className=\"p-1 hover:bg-blue-100 rounded\"\n                        title=\"Копировать\"\n                      >\n                        {copiedField === 'login' ? <Check className=\"w-4 h-4 text-green-500\" /> : <Copy className=\"w-4 h-4 text-gray-400\" />}\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-600\">Пароль</span>\n                    <div className=\"flex items-center gap-2\">\n                      {isLoadingDetails ? (\n                        <span className=\"flex items-center gap-2 text-sm text-gray-400\">\n                          <Loader2 className=\"w-4 h-4 animate-spin\" />\n                          Загрузка...\n                        </span>\n                      ) : selectedMember.password ? (\n                        <>\n                          <code className=\"bg-white px-2 py-1 rounded text-sm font-mono\">\n                            {showPassword ? selectedMember.password : '••••••••'}\n                          </code>\n                          <button\n                            type=\"button\"\n                            onClick={(e) => {\n                              e.preventDefault();\n                              e.stopPropagation();\n                              setShowPassword(!showPassword);\n                            }}\n                            className=\"p-2 hover:bg-blue-100 active:bg-blue-200 rounded touch-manipulation z-10\"\n                            title={showPassword ? 'Скрыть' : 'Показать'}\n                          >\n                            {showPassword ? <EyeOff className=\"w-4 h-4 text-gray-400\" /> : <Eye className=\"w-4 h-4 text-gray-400\" />}\n                          </button>\n                          <button\n                            onClick={() => handleCopy(selectedMember.password || '', 'password')}\n                            className=\"p-1 hover:bg-blue-100 rounded\"\n                            title=\"Копировать\"\n                          >\n                            {copiedField === 'password' ? <Check className=\"w-4 h-4 text-green-500\" /> : <Copy className=\"w-4 h-4 text-gray-400\" />}\n                          </button>\n                        </>\n                      ) : (\n                        <span className=\"text-sm text-gray-400 italic\">Задайте через \"Редактировать\"</span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Created date */}\n                <div className=\"text-sm text-gray-500 text-center\">\n                  Добавлен: {new Date(selectedMember.created_at).toLocaleDateString('ru-RU')}\n                </div>\n              </div>\n            )}\n\n            {/* Actions */}\n            <div className=\"flex gap-3 mt-6\">\n              {isEditing ? (\n                <>\n                  <button onClick={() => setIsEditing(false)} className=\"btn-secondary flex-1\">\n                    Отмена\n                  </button>\n                  <button onClick={handleSaveChanges} className=\"btn-primary flex-1 flex items-center justify-center gap-2\">\n                    <Save className=\"w-4 h-4\" />\n                    Сохранить\n                  </button>\n                </>\n              ) : (\n                <button onClick={() => setIsEditing(true)} className=\"btn-primary w-full flex items-center justify-center gap-2\">\n                  <Edit3 className=\"w-4 h-4\" />\n                  Редактировать\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Credentials Modal - shows after creating new user */}\n      {showCredentialsModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-fade-in\">\n            <div className=\"text-center mb-6\">\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Check className=\"w-8 h-8 text-green-600\" />\n              </div>\n              <h3 className=\"text-xl font-bold text-gray-900\">Сотрудник создан!</h3>\n              <p className=\"text-gray-500 mt-2\">Сохраните учетные данные для входа</p>\n            </div>\n\n            <div className=\"space-y-4 bg-gray-50 rounded-xl p-4\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-gray-600\">Логин</span>\n                <div className=\"flex items-center gap-2\">\n                  <code className=\"bg-white px-3 py-1.5 rounded-lg text-sm font-mono font-medium\">\n                    {showCredentialsModal.login}\n                  </code>\n                  <button\n                    onClick={() => {\n                      navigator.clipboard.writeText(showCredentialsModal.login);\n                      setCopiedField('cred-login');\n                      setTimeout(() => setCopiedField(null), 2000);\n                    }}\n                    className=\"p-1.5 hover:bg-gray-200 rounded-lg transition-colors\"\n                  >\n                    {copiedField === 'cred-login' ? <Check className=\"w-4 h-4 text-green-500\" /> : <Copy className=\"w-4 h-4 text-gray-400\" />}\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-gray-600\">Пароль</span>\n                <div className=\"flex items-center gap-2\">\n                  <code className=\"bg-white px-3 py-1.5 rounded-lg text-sm font-mono font-medium\">\n                    {showCredentialsModal.password}\n                  </code>\n                  <button\n                    onClick={() => {\n                      navigator.clipboard.writeText(showCredentialsModal.password);\n                      setCopiedField('cred-password');\n                      setTimeout(() => setCopiedField(null), 2000);\n                    }}\n                    className=\"p-1.5 hover:bg-gray-200 rounded-lg transition-colors\"\n                  >\n                    {copiedField === 'cred-password' ? <Check className=\"w-4 h-4 text-green-500\" /> : <Copy className=\"w-4 h-4 text-gray-400\" />}\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mt-6 p-3 bg-yellow-50 rounded-xl border border-yellow-200\">\n              <p className=\"text-sm text-yellow-800\">\n                ⚠️ Сохраните эти данные! Пароль показывается только один раз.\n              </p>\n            </div>\n\n            <button\n              onClick={() => setShowCredentialsModal(null)}\n              className=\"btn-primary w-full mt-6\"\n            >\n              Готово\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["ROLE_LABELS","ROLE_COLORS","SPECIALIZATION_ICONS","jsx","Droplets","Zap","ArrowUpDown","Bell","Brush","ShieldCheck","Hammer","Flame","Wind","Wrench","SPECIALIZATION_COLORS","TeamPage","managers","setManagers","useState","departmentHeads","setDepartmentHeads","executors","setExecutors","loading","setLoading","error","setError","selectedMember","setSelectedMember","isEditing","setIsEditing","showPassword","setShowPassword","copiedField","setCopiedField","showCredentialsModal","setShowCredentialsModal","searchQuery","setSearchQuery","specializationFilter","setSpecializationFilter","expandedSections","setExpandedSections","editForm","setEditForm","isLoadingDetails","setIsLoadingDetails","showAddModal","setShowAddModal","addForm","setAddForm","addLoading","setAddLoading","addError","setAddError","fetchTeam","data","teamApi","err","useEffect","handleOpenDetails","member","response","freshData","handleCloseDetails","handleCopy","text","field","handleSaveChanges","updates","prev","generatePassword","chars","password","i","handleAddMember","result","openAddModal","role","handleDeleteMember","handleResetAllPasswords","staffWithoutPassword","m","message","s","toggleSection","section","filterMembers","members","filtered","query","SPECIALIZATION_LABELS","allSpecializations","filteredManagers","filteredDepartmentHeads","filteredExecutors","getStatusBadge","status","renderStaffCard","jsxs","e","Trash2","n","Phone","Star","Check","Clock","renderSection","title","icon","sectionKey","ChevronUp","ChevronDown","Loader2","Search","Filter","spec","RefreshCw","Key","Plus","Shield","UserCog","X","Copy","Award","Fragment","EyeOff","Eye","Save","Edit3"],"mappings":"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"}