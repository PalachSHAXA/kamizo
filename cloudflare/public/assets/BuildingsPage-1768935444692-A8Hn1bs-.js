import{r as c,j as e,$ as G,aA as pe,a7 as je,au as z,z as fe,aB as q,aC as H,aa as U,ab as O,D as y,B as Q,aD as R,aE as be,aF as Ne,f as ve,aG as W,X as w}from"./react-vendor-1768935444692-B1b45RTo.js";import{h as ye,e as f,B as we}from"./index-1768935444692-CsUEvcLn.js";import"./vendor-1768935444692-CoA8TQ05.js";import"./qr-scanner-1768935444692-cr32YHjo.js";import"./zustand-1768935444692-wNUYBKDB.js";function De(){const{buildings:r,addBuilding:x,updateBuilding:u,deleteBuilding:d,fetchBuildings:a,isLoadingBuildings:i}=ye(),[n,m]=c.useState("branches"),[l,t]=c.useState(null),[h,b]=c.useState(null),[I,V]=c.useState([]),[C,M]=c.useState([]),[X,P]=c.useState(!1),[K,T]=c.useState(!1),[Z,k]=c.useState(!1),[ee,N]=c.useState(!1),[se,B]=c.useState(!1),[ae,S]=c.useState(!1),[E,L]=c.useState(null),[_,A]=c.useState(null),[p,v]=c.useState("");c.useEffect(()=>{g()},[]),c.useEffect(()=>{l&&j(l.id)},[l]),c.useEffect(()=>{h&&D(h.id)},[h]);const g=async()=>{P(!0);try{const s=await f("/api/branches");V(s.branches||[])}catch{}finally{P(!1)}},j=async s=>{await a()},D=async s=>{T(!0);try{const o=await f(`/api/buildings/${s}/entrances`);M(o.entrances||[])}catch{M([])}finally{T(!1)}},$=(l?r.filter(s=>s.branchCode===l.code):r).filter(s=>p===""||s.name.toLowerCase().includes(p.toLowerCase())||s.address.toLowerCase().includes(p.toLowerCase())),F=I.filter(s=>p===""||s.name.toLowerCase().includes(p.toLowerCase())||s.code.toLowerCase().includes(p.toLowerCase())),te=s=>{t(s),m("buildings"),v("")},le=s=>{b(s),m("entrances"),v("")},ne=()=>{n==="entrances"?(b(null),m("buildings")):n==="buildings"&&(t(null),m("branches")),v("")},re=async s=>{try{await f("/api/branches",{method:"POST",body:JSON.stringify(s)}),g(),k(!1)}catch(o){alert("Ошибка: "+(o.message||"Не удалось создать филиал"))}},ie=async(s,o)=>{try{await f(`/api/branches/${s}`,{method:"PATCH",body:JSON.stringify(o)}),g(),L(null)}catch(ge){alert("Ошибка: "+(ge.message||"Не удалось обновить филиал"))}},ce=async s=>{if(confirm("Удалить этот филиал? Сначала удалите все дома в этом филиале."))try{await f(`/api/branches/${s}`,{method:"DELETE"}),g()}catch(o){alert("Ошибка: "+(o.message||"Не удалось удалить филиал"))}},de=async s=>{const o={...s,branchId:l?.id,branchCode:l?.code};await x(o),N(!1),l&&j(l.id),g()},oe=async s=>{const o={name:`Дом ${s}`,address:l?.address||`Дом ${s}`,buildingNumber:s.toUpperCase(),branchId:l?.id,branchCode:l?.code,floors:9,entrances:4,totalApartments:144,yearBuilt:2020,buildingType:"monolith",hasElevator:!0,hasGas:!0,hasHotWater:!0,hasParkingLot:!1};await x(o),B(!1),l&&j(l.id),g()},me=async(s,o)=>{await u(s,o),A(null),l&&j(l.id)},xe=async s=>{if(confirm("Удалить это здание? Все связанные данные также будут удалены."))try{await d(s),l&&j(l.id),g()}catch(o){alert("Ошибка: "+(o.message||"Не удалось удалить здание"))}},he=async s=>{if(h)try{await f(`/api/buildings/${h.id}/entrances`,{method:"POST",body:JSON.stringify(s)}),D(h.id),S(!1)}catch(o){alert("Ошибка: "+(o.message||"Не удалось добавить подъезд"))}},ue=()=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-4",children:[e.jsx("button",{onClick:()=>{m("branches"),t(null),b(null)},className:`hover:text-primary-600 ${n==="branches"?"text-gray-900 font-medium":""}`,children:"Филиалы"}),l&&e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("button",{onClick:()=>{m("buildings"),b(null)},className:`hover:text-primary-600 ${n==="buildings"?"text-gray-900 font-medium":""}`,children:l.name})]}),h&&e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{className:"text-gray-900 font-medium",children:h.name})]})]});return X&&I.length===0||i&&r.length===0&&n==="buildings"?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(G,{className:"w-8 h-8 animate-spin text-primary-500"}),e.jsx("p",{className:"text-gray-500",children:"Загрузка..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[n!=="branches"&&e.jsx("button",{onClick:ne,className:"p-2 hover:bg-white/30 rounded-lg",children:e.jsx(pe,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[n==="branches"&&"Филиалы / Объекты",n==="buildings"&&`Дома: ${l?.name}`,n==="entrances"&&`Подъезды: ${h?.name}`]}),e.jsxs("p",{className:"text-gray-500 mt-1",children:[n==="branches"&&"Выберите филиал для просмотра домов",n==="buildings"&&"Выберите дом для просмотра подъездов",n==="entrances"&&"Управление подъездами и квартирами"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{n==="branches"?g():n==="buildings"&&l?j(l.id):n==="entrances"&&h&&D(h.id)},className:"btn-secondary flex items-center gap-2",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>{n==="branches"?k(!0):n==="buildings"?N(!0):n==="entrances"&&S(!0)},className:"btn-primary flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),n==="branches"&&"Добавить филиал",n==="buildings"&&"Добавить ЖК",n==="entrances"&&"Добавить подъезд"]})]})]}),ue(),n!=="entrances"&&e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:n==="branches"?"Поиск по филиалам...":"Поиск по домам...",value:p,onChange:s=>v(s.target.value),className:"input-field pl-10"})]}),n==="branches"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[F.map(s=>e.jsxs("div",{className:"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>te(s),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-400 to-indigo-500 rounded-xl flex items-center justify-center",children:e.jsx(q,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsx("span",{className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full font-mono",children:s.code})]})]}),e.jsxs("div",{className:"flex gap-1",onClick:o=>o.stopPropagation(),children:[e.jsx("button",{onClick:()=>L(s),className:"p-2 hover:bg-white/30 rounded-lg",title:"Редактировать",children:e.jsx(H,{className:"w-4 h-4 text-gray-500"})}),e.jsx("button",{onClick:()=>ce(s.id),className:"p-2 hover:bg-red-50 rounded-lg",title:"Удалить",children:e.jsx(U,{className:"w-4 h-4 text-red-500"})})]})]}),s.address&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 mb-3",children:[e.jsx(O,{className:"w-3 h-3"}),s.address]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-white/30 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.buildings_count}),e.jsx("div",{className:"text-xs text-gray-500",children:"Домов"})]}),e.jsxs("div",{className:"bg-white/30 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.residents_count}),e.jsx("div",{className:"text-xs text-gray-500",children:"Жителей"})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-center text-sm text-primary-600",children:[e.jsx("span",{children:"Открыть"}),e.jsx(y,{className:"w-4 h-4"})]})]},s.id)),F.length===0&&e.jsxs("div",{className:"col-span-full glass-card p-8 text-center",children:[e.jsx(q,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600",children:"Филиалы не найдены"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Добавьте первый филиал"})]})]}),n==="buildings"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[$.map(s=>e.jsxs("div",{className:"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>le(s),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl flex items-center justify-center",children:e.jsx(Q,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(O,{className:"w-3 h-3"}),s.address]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full",children:we[s.buildingType]}),s.buildingNumber&&e.jsxs("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded-full font-mono",children:["Дом ",s.buildingNumber]})]})]})]}),e.jsxs("div",{className:"flex gap-1",onClick:o=>o.stopPropagation(),children:[e.jsx("button",{onClick:()=>A(s),className:"p-2 hover:bg-white/30 rounded-lg",title:"Редактировать",children:e.jsx(H,{className:"w-4 h-4 text-gray-500"})}),e.jsx("button",{onClick:()=>xe(s.id),className:"p-2 hover:bg-red-50 rounded-lg",title:"Удалить",children:e.jsx(U,{className:"w-4 h-4 text-red-500"})})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[e.jsxs("div",{className:"bg-white/30 rounded-lg p-2 text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.floors}),e.jsx("div",{className:"text-xs text-gray-500",children:"Этажей"})]}),e.jsxs("div",{className:"bg-white/30 rounded-lg p-2 text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.entrances}),e.jsx("div",{className:"text-xs text-gray-500",children:"Подъездов"})]}),e.jsxs("div",{className:"bg-white/30 rounded-lg p-2 text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.totalApartments}),e.jsx("div",{className:"text-xs text-gray-500",children:"Квартир"})]}),e.jsxs("div",{className:"bg-white/30 rounded-lg p-2 text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.residentsCount}),e.jsx("div",{className:"text-xs text-gray-500",children:"Жителей"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[s.hasElevator&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 bg-gray-100 rounded-full",children:[e.jsx(R,{className:"w-3 h-3"})," Лифт"]}),s.hasGas&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 bg-gray-100 rounded-full",children:[e.jsx(be,{className:"w-3 h-3"})," Газ"]}),s.hasHotWater&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 bg-gray-100 rounded-full",children:[e.jsx(Ne,{className:"w-3 h-3"})," ГВС"]}),s.hasParkingLot&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 bg-gray-100 rounded-full",children:[e.jsx(ve,{className:"w-3 h-3"})," Парковка"]})]}),e.jsxs("div",{className:"flex items-center justify-center text-sm text-primary-600",children:[e.jsx("span",{children:"Подъезды"}),e.jsx(y,{className:"w-4 h-4"})]})]},s.id)),$.length===0&&e.jsxs("div",{className:"col-span-full glass-card p-8 text-center",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600",children:"Дома не найдены"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Добавьте первый дом в этом филиале"})]})]}),n==="entrances"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:K?e.jsx("div",{className:"col-span-full flex items-center justify-center py-8",children:e.jsx(G,{className:"w-6 h-6 animate-spin text-primary-500"})}):e.jsxs(e.Fragment,{children:[C.map(s=>e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-teal-500 rounded-xl flex items-center justify-center",children:e.jsx(W,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:["Подъезд ",s.number]}),s.intercom_code&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Код: ",s.intercom_code]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.floors_from!==void 0&&s.floors_to!==void 0&&e.jsxs("div",{className:"bg-white/30 rounded-lg p-2 text-center",children:[e.jsxs("div",{className:"text-sm font-medium",children:[s.floors_from,"-",s.floors_to]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Этажи"})]}),s.apartments_from!==void 0&&s.apartments_to!==void 0&&e.jsxs("div",{className:"bg-white/30 rounded-lg p-2 text-center",children:[e.jsxs("div",{className:"text-sm font-medium",children:[s.apartments_from,"-",s.apartments_to]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Квартиры"})]})]}),s.has_elevator===1&&e.jsxs("div",{className:"mt-3 flex items-center gap-1 text-xs text-green-600",children:[e.jsx(R,{className:"w-3 h-3"}),"Есть лифт"]})]},s.id)),C.length===0&&e.jsxs("div",{className:"col-span-full glass-card p-8 text-center",children:[e.jsx(W,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600",children:"Подъезды не добавлены"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Добавьте подъезды для этого дома"})]})]})}),Z&&e.jsx(J,{branch:null,onClose:()=>k(!1),onSave:re}),E&&e.jsx(J,{branch:E,onClose:()=>L(null),onSave:s=>ie(E.id,s)}),se&&e.jsx(ke,{onClose:()=>B(!1),onSave:oe,branchCode:l?.code||""}),ee&&e.jsx(Y,{building:null,onClose:()=>N(!1),onSave:de,onSwitchToQuick:()=>{N(!1),B(!0)}}),_&&e.jsx(Y,{building:_,onClose:()=>A(null),onSave:s=>me(_.id,s)}),ae&&e.jsx(Ce,{onClose:()=>S(!1),onSave:he,existingEntrances:C})]})}function J({branch:r,onClose:x,onSave:u}){const[d,a]=c.useState({code:r?.code||"",name:r?.name||"",address:r?.address||"",phone:r?.phone||""}),[i,n]=c.useState(""),m=l=>{if(l.preventDefault(),n(""),!d.code.trim()||!d.name.trim()){n("Заполните обязательные поля");return}u(d)};return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:r?"Редактировать филиал":"Новый филиал"}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-white/30 rounded-lg",children:e.jsx(w,{className:"w-5 h-5"})})]}),i&&e.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-lg mb-4 text-sm",children:i}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Код филиала *"}),e.jsx("input",{type:"text",value:d.code,onChange:l=>a({...d,code:l.target.value.toUpperCase()}),className:"input-field font-mono",placeholder:"YS, CH, MR...",maxLength:5,required:!0,disabled:!!r}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Используется для генерации паролей жильцов"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Название *"}),e.jsx("input",{type:"text",value:d.name,onChange:l=>a({...d,name:l.target.value}),className:"input-field",placeholder:"Юнусабад",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Адрес"}),e.jsx("input",{type:"text",value:d.address,onChange:l=>a({...d,address:l.target.value}),className:"input-field",placeholder:"ул. Примера, 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Телефон"}),e.jsx("input",{type:"tel",value:d.phone,onChange:l=>a({...d,phone:l.target.value}),className:"input-field",placeholder:"+998 90 123 45 67"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:x,className:"btn-secondary flex-1",children:"Отмена"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1",children:r?"Сохранить":"Создать"})]})]})]})})}function Y({building:r,onClose:x,onSave:u,onSwitchToQuick:d}){const[a,i]=c.useState({name:r?.name||"",address:r?.address||"",buildingNumber:r?.buildingNumber||"",floors:r?.floors||5,entrances:r?.entrances||2,totalApartments:r?.totalApartments||40,yearBuilt:r?.yearBuilt||2020,buildingType:r?.buildingType||"monolith",hasElevator:r?.hasElevator??!0,elevatorCount:r?.elevatorCount||2,hasGas:r?.hasGas??!0,hasHotWater:r?.hasHotWater??!0,hasParkingLot:r?.hasParkingLot??!0,parkingSpaces:r?.parkingSpaces||20}),[n,m]=c.useState(""),l=t=>{if(t.preventDefault(),m(""),!a.name.trim()||!a.address.trim()){m("Заполните обязательные поля");return}u(a)};return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:r?"Редактировать ЖК":"Новый ЖК"}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-white/30 rounded-lg",children:e.jsx(w,{className:"w-5 h-5"})})]}),!r&&d&&e.jsxs("button",{type:"button",onClick:d,className:"w-full mb-4 p-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-600 hover:border-primary-400 hover:text-primary-600 hover:bg-primary-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Добавить просто дом (5Б, 121, 8А...)"]}),n&&e.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-lg mb-4 text-sm",children:n}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Название *"}),e.jsx("input",{type:"text",value:a.name,onChange:t=>i({...a,name:t.target.value}),className:"input-field",placeholder:'ЖК "Название"',required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Адрес *"}),e.jsx("input",{type:"text",value:a.address,onChange:t=>i({...a,address:t.target.value}),className:"input-field",placeholder:"ул. Пример, 1",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Номер дома"}),e.jsx("input",{type:"text",value:a.buildingNumber,onChange:t=>i({...a,buildingNumber:t.target.value.toUpperCase()}),className:"input-field",placeholder:"8A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Год постройки"}),e.jsx("input",{type:"number",value:a.yearBuilt,onChange:t=>i({...a,yearBuilt:parseInt(t.target.value)||2e3}),className:"input-field"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Этажей"}),e.jsx("input",{type:"number",value:a.floors,onChange:t=>i({...a,floors:parseInt(t.target.value)||1}),className:"input-field",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Подъездов"}),e.jsx("input",{type:"number",value:a.entrances,onChange:t=>i({...a,entrances:parseInt(t.target.value)||1}),className:"input-field",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Квартир"}),e.jsx("input",{type:"number",value:a.totalApartments,onChange:t=>i({...a,totalApartments:parseInt(t.target.value)||1}),className:"input-field",min:"1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Тип здания"}),e.jsxs("select",{value:a.buildingType,onChange:t=>i({...a,buildingType:t.target.value}),className:"input-field",children:[e.jsx("option",{value:"panel",children:"Панельный"}),e.jsx("option",{value:"brick",children:"Кирпичный"}),e.jsx("option",{value:"monolith",children:"Монолитный"}),e.jsx("option",{value:"block",children:"Блочный"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.hasElevator,onChange:t=>i({...a,hasElevator:t.target.checked})}),e.jsx("span",{children:"Лифт"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.hasGas,onChange:t=>i({...a,hasGas:t.target.checked})}),e.jsx("span",{children:"Газ"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.hasHotWater,onChange:t=>i({...a,hasHotWater:t.target.checked})}),e.jsx("span",{children:"Горячая вода"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.hasParkingLot,onChange:t=>i({...a,hasParkingLot:t.target.checked})}),e.jsx("span",{children:"Парковка"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:x,className:"btn-secondary flex-1",children:"Отмена"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1",children:r?"Сохранить":"Создать"})]})]})]})})}function Ce({onClose:r,onSave:x,existingEntrances:u}){const d=u.length>0?Math.max(...u.map(t=>t.number))+1:1,[a,i]=c.useState({number:d,floors_from:1,floors_to:9,apartments_from:1,apartments_to:36}),[n,m]=c.useState(""),l=t=>{if(t.preventDefault(),m(""),a.number<1){m("Номер подъезда должен быть больше 0");return}x(a)};return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Новый подъезд"}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white/30 rounded-lg",children:e.jsx(w,{className:"w-5 h-5"})})]}),n&&e.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-lg mb-4 text-sm",children:n}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Номер подъезда *"}),e.jsx("input",{type:"number",value:a.number,onChange:t=>i({...a,number:parseInt(t.target.value)||1}),className:"input-field",min:"1",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Этаж с"}),e.jsx("input",{type:"number",value:a.floors_from,onChange:t=>i({...a,floors_from:parseInt(t.target.value)||1}),className:"input-field",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Этаж по"}),e.jsx("input",{type:"number",value:a.floors_to,onChange:t=>i({...a,floors_to:parseInt(t.target.value)||1}),className:"input-field",min:"1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Квартира с"}),e.jsx("input",{type:"number",value:a.apartments_from,onChange:t=>i({...a,apartments_from:parseInt(t.target.value)||1}),className:"input-field",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Квартира по"}),e.jsx("input",{type:"number",value:a.apartments_to,onChange:t=>i({...a,apartments_to:parseInt(t.target.value)||1}),className:"input-field",min:"1"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"btn-secondary flex-1",children:"Отмена"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Создать"})]})]})]})})}function ke({onClose:r,onSave:x,branchCode:u}){const[d,a]=c.useState(""),[i,n]=c.useState(""),m=l=>{if(l.preventDefault(),n(""),!d.trim()){n("Введите номер дома");return}x(d.trim())};return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content p-6 w-full max-w-sm mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Добавить дом"}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white/30 rounded-lg",children:e.jsx(w,{className:"w-5 h-5"})})]}),i&&e.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-lg mb-4 text-sm",children:i}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Номер дома *"}),e.jsx("input",{type:"text",value:d,onChange:l=>a(l.target.value.toUpperCase()),className:"input-field text-2xl text-center font-bold",placeholder:"5Б, 121, 8А...",autoFocus:!0,required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2 text-center",children:["Пароль жителей: ",e.jsxs("span",{className:"font-mono bg-gray-100 px-1 rounded",children:[u,"/",d||"?","/[кв]"]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:r,className:"btn-secondary flex-1",children:"Отмена"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Добавить"})]})]})]})})}export{De as BuildingsPage};
//# sourceMappingURL=BuildingsPage-1768935444692-A8Hn1bs-.js.map
