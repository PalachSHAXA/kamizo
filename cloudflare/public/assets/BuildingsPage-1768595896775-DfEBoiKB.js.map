{"version":3,"file":"BuildingsPage-1768595896775-DfEBoiKB.js","sources":["../../src/pages/BuildingsPage.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport {\r\n  Building2, Plus, Search, MapPin,\r\n  Trash2, Edit, X, ChevronRight,\r\n  Layers, Thermometer, Droplets, Car, Loader2, RefreshCw,\r\n  GitBranch, DoorOpen, ArrowLeft\r\n} from 'lucide-react';\r\nimport { useCRMStore } from '../stores/crmStore';\r\nimport { apiRequest } from '../services/api';\r\nimport type { BuildingFull } from '../types';\r\nimport { BUILDING_TYPE_LABELS } from '../types';\r\n\r\n// Branch type\r\ninterface Branch {\r\n  id: string;\r\n  code: string;\r\n  name: string;\r\n  address?: string;\r\n  phone?: string;\r\n  buildings_count: number;\r\n  residents_count: number;\r\n}\r\n\r\n// Entrance type\r\ninterface Entrance {\r\n  id: string;\r\n  building_id: string;\r\n  number: number;\r\n  floors_from?: number;\r\n  floors_to?: number;\r\n  apartments_from?: number;\r\n  apartments_to?: number;\r\n  has_elevator?: number;\r\n  intercom_type?: string;\r\n  intercom_code?: string;\r\n}\r\n\r\n// Navigation levels\r\ntype ViewLevel = 'branches' | 'buildings' | 'entrances';\r\n\r\nexport function BuildingsPage() {\r\n  const {\r\n    buildings,\r\n    addBuilding,\r\n    updateBuilding,\r\n    deleteBuilding,\r\n    fetchBuildings,\r\n    isLoadingBuildings,\r\n  } = useCRMStore();\r\n\r\n  // Navigation state\r\n  const [viewLevel, setViewLevel] = useState<ViewLevel>('branches');\r\n  const [selectedBranch, setSelectedBranch] = useState<Branch | null>(null);\r\n  const [selectedBuilding, setSelectedBuilding] = useState<BuildingFull | null>(null);\r\n\r\n  // Data\r\n  const [branches, setBranches] = useState<Branch[]>([]);\r\n  const [entrances, setEntrances] = useState<Entrance[]>([]);\r\n  const [isLoadingBranches, setIsLoadingBranches] = useState(false);\r\n  const [isLoadingEntrances, setIsLoadingEntrances] = useState(false);\r\n\r\n  // Modals\r\n  const [showAddBranchModal, setShowAddBranchModal] = useState(false);\r\n  const [showAddBuildingModal, setShowAddBuildingModal] = useState(false);\r\n  const [showQuickAddBuildingModal, setShowQuickAddBuildingModal] = useState(false);\r\n  const [showAddEntranceModal, setShowAddEntranceModal] = useState(false);\r\n  const [editingBranch, setEditingBranch] = useState<Branch | null>(null);\r\n  const [editingBuilding, setEditingBuilding] = useState<BuildingFull | null>(null);\r\n\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  // Load branches on mount\r\n  useEffect(() => {\r\n    fetchBranches();\r\n  }, []);\r\n\r\n  // Load buildings when branch is selected\r\n  useEffect(() => {\r\n    if (selectedBranch) {\r\n      fetchBuildingsForBranch(selectedBranch.id);\r\n    }\r\n  }, [selectedBranch]);\r\n\r\n  // Load entrances when building is selected\r\n  useEffect(() => {\r\n    if (selectedBuilding) {\r\n      fetchEntrancesForBuilding(selectedBuilding.id);\r\n    }\r\n  }, [selectedBuilding]);\r\n\r\n  const fetchBranches = async () => {\r\n    setIsLoadingBranches(true);\r\n    try {\r\n      const response = await apiRequest<{ branches: Branch[] }>('/api/branches');\r\n      setBranches(response.branches || []);\r\n    } catch (error) {\r\n      console.error('Failed to fetch branches:', error);\r\n    } finally {\r\n      setIsLoadingBranches(false);\r\n    }\r\n  };\r\n\r\n  const fetchBuildingsForBranch = async (_branchId: string) => {\r\n    await fetchBuildings();\r\n  };\r\n\r\n  const fetchEntrancesForBuilding = async (buildingId: string) => {\r\n    setIsLoadingEntrances(true);\r\n    try {\r\n      const response = await apiRequest<{ entrances: Entrance[] }>(`/api/buildings/${buildingId}/entrances`);\r\n      setEntrances(response.entrances || []);\r\n    } catch (error) {\r\n      console.error('Failed to fetch entrances:', error);\r\n      setEntrances([]);\r\n    } finally {\r\n      setIsLoadingEntrances(false);\r\n    }\r\n  };\r\n\r\n  // Filter buildings by selected branch\r\n  const filteredBuildings = selectedBranch\r\n    ? buildings.filter(b => b.branchCode === selectedBranch.code)\r\n    : buildings;\r\n\r\n  // Search filter\r\n  const searchedBuildings = filteredBuildings.filter(b =>\r\n    searchQuery === '' ||\r\n    b.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    b.address.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  const searchedBranches = branches.filter(b =>\r\n    searchQuery === '' ||\r\n    b.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    b.code.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  // Navigation handlers\r\n  const handleBranchClick = (branch: Branch) => {\r\n    setSelectedBranch(branch);\r\n    setViewLevel('buildings');\r\n    setSearchQuery('');\r\n  };\r\n\r\n  const handleBuildingClick = (building: BuildingFull) => {\r\n    setSelectedBuilding(building);\r\n    setViewLevel('entrances');\r\n    setSearchQuery('');\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (viewLevel === 'entrances') {\r\n      setSelectedBuilding(null);\r\n      setViewLevel('buildings');\r\n    } else if (viewLevel === 'buildings') {\r\n      setSelectedBranch(null);\r\n      setViewLevel('branches');\r\n    }\r\n    setSearchQuery('');\r\n  };\r\n\r\n  // CRUD handlers for branches\r\n  const handleAddBranch = async (data: { code: string; name: string; address?: string; phone?: string }) => {\r\n    try {\r\n      await apiRequest('/api/branches', {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      });\r\n      fetchBranches();\r\n      setShowAddBranchModal(false);\r\n    } catch (error: any) {\r\n      alert('Ошибка: ' + (error.message || 'Не удалось создать филиал'));\r\n    }\r\n  };\r\n\r\n  const handleUpdateBranch = async (id: string, data: Partial<Branch>) => {\r\n    try {\r\n      await apiRequest(`/api/branches/${id}`, {\r\n        method: 'PATCH',\r\n        body: JSON.stringify(data),\r\n      });\r\n      fetchBranches();\r\n      setEditingBranch(null);\r\n    } catch (error: any) {\r\n      alert('Ошибка: ' + (error.message || 'Не удалось обновить филиал'));\r\n    }\r\n  };\r\n\r\n  const handleDeleteBranch = async (id: string) => {\r\n    if (!confirm('Удалить этот филиал? Сначала удалите все дома в этом филиале.')) return;\r\n    try {\r\n      await apiRequest(`/api/branches/${id}`, { method: 'DELETE' });\r\n      fetchBranches();\r\n    } catch (error: any) {\r\n      alert('Ошибка: ' + (error.message || 'Не удалось удалить филиал'));\r\n    }\r\n  };\r\n\r\n  // CRUD handlers for buildings\r\n  const handleAddBuilding = async (data: any) => {\r\n    const buildingData = {\r\n      ...data,\r\n      branchId: selectedBranch?.id,\r\n      branchCode: selectedBranch?.code,\r\n    };\r\n    await addBuilding(buildingData);\r\n    setShowAddBuildingModal(false);\r\n    if (selectedBranch) {\r\n      fetchBuildingsForBranch(selectedBranch.id);\r\n    }\r\n    fetchBranches(); // Refresh counts\r\n  };\r\n\r\n  // Quick add building (simplified - just building number)\r\n  const handleQuickAddBuilding = async (buildingNumber: string) => {\r\n    const buildingData: any = {\r\n      name: `Дом ${buildingNumber}`,\r\n      address: selectedBranch?.address || `Дом ${buildingNumber}`,\r\n      buildingNumber: buildingNumber.toUpperCase(),\r\n      branchId: selectedBranch?.id,\r\n      branchCode: selectedBranch?.code,\r\n      floors: 9,\r\n      entrances: 4,\r\n      totalApartments: 144,\r\n      yearBuilt: 2020,\r\n      buildingType: 'monolith',\r\n      hasElevator: true,\r\n      hasGas: true,\r\n      hasHotWater: true,\r\n      hasParkingLot: false,\r\n    };\r\n    await addBuilding(buildingData);\r\n    setShowQuickAddBuildingModal(false);\r\n    if (selectedBranch) {\r\n      fetchBuildingsForBranch(selectedBranch.id);\r\n    }\r\n    fetchBranches(); // Refresh counts\r\n  };\r\n\r\n  const handleUpdateBuilding = async (id: string, data: Partial<BuildingFull>) => {\r\n    await updateBuilding(id, data);\r\n    setEditingBuilding(null);\r\n    if (selectedBranch) {\r\n      fetchBuildingsForBranch(selectedBranch.id);\r\n    }\r\n  };\r\n\r\n  const handleDeleteBuilding = async (id: string) => {\r\n    if (!confirm('Удалить это здание? Все связанные данные также будут удалены.')) return;\r\n    try {\r\n      await deleteBuilding(id);\r\n      if (selectedBranch) {\r\n        fetchBuildingsForBranch(selectedBranch.id);\r\n      }\r\n      fetchBranches(); // Refresh counts\r\n    } catch (error: any) {\r\n      alert('Ошибка: ' + (error.message || 'Не удалось удалить здание'));\r\n    }\r\n  };\r\n\r\n  // CRUD handlers for entrances\r\n  const handleAddEntrance = async (data: { number: number; floors_from?: number; floors_to?: number; apartments_from?: number; apartments_to?: number }) => {\r\n    if (!selectedBuilding) return;\r\n    try {\r\n      await apiRequest(`/api/buildings/${selectedBuilding.id}/entrances`, {\r\n        method: 'POST',\r\n        body: JSON.stringify(data),\r\n      });\r\n      fetchEntrancesForBuilding(selectedBuilding.id);\r\n      setShowAddEntranceModal(false);\r\n    } catch (error: any) {\r\n      alert('Ошибка: ' + (error.message || 'Не удалось добавить подъезд'));\r\n    }\r\n  };\r\n\r\n  // Breadcrumb\r\n  const renderBreadcrumb = () => (\r\n    <div className=\"flex items-center gap-2 text-sm text-gray-500 mb-4\">\r\n      <button\r\n        onClick={() => { setViewLevel('branches'); setSelectedBranch(null); setSelectedBuilding(null); }}\r\n        className={`hover:text-primary-600 ${viewLevel === 'branches' ? 'text-gray-900 font-medium' : ''}`}\r\n      >\r\n        Филиалы\r\n      </button>\r\n      {selectedBranch && (\r\n        <>\r\n          <ChevronRight className=\"w-4 h-4\" />\r\n          <button\r\n            onClick={() => { setViewLevel('buildings'); setSelectedBuilding(null); }}\r\n            className={`hover:text-primary-600 ${viewLevel === 'buildings' ? 'text-gray-900 font-medium' : ''}`}\r\n          >\r\n            {selectedBranch.name}\r\n          </button>\r\n        </>\r\n      )}\r\n      {selectedBuilding && (\r\n        <>\r\n          <ChevronRight className=\"w-4 h-4\" />\r\n          <span className=\"text-gray-900 font-medium\">{selectedBuilding.name}</span>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  // Loading state\r\n  if ((isLoadingBranches && branches.length === 0) || (isLoadingBuildings && buildings.length === 0 && viewLevel === 'buildings')) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"flex flex-col items-center gap-3\">\r\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary-500\" />\r\n          <p className=\"text-gray-500\">Загрузка...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          {viewLevel !== 'branches' && (\r\n            <button\r\n              onClick={handleBack}\r\n              className=\"p-2 hover:bg-white/30 rounded-lg\"\r\n            >\r\n              <ArrowLeft className=\"w-5 h-5\" />\r\n            </button>\r\n          )}\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">\r\n              {viewLevel === 'branches' && 'Филиалы / Объекты'}\r\n              {viewLevel === 'buildings' && `Дома: ${selectedBranch?.name}`}\r\n              {viewLevel === 'entrances' && `Подъезды: ${selectedBuilding?.name}`}\r\n            </h1>\r\n            <p className=\"text-gray-500 mt-1\">\r\n              {viewLevel === 'branches' && 'Выберите филиал для просмотра домов'}\r\n              {viewLevel === 'buildings' && 'Выберите дом для просмотра подъездов'}\r\n              {viewLevel === 'entrances' && 'Управление подъездами и квартирами'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => {\r\n              if (viewLevel === 'branches') fetchBranches();\r\n              else if (viewLevel === 'buildings' && selectedBranch) fetchBuildingsForBranch(selectedBranch.id);\r\n              else if (viewLevel === 'entrances' && selectedBuilding) fetchEntrancesForBuilding(selectedBuilding.id);\r\n            }}\r\n            className=\"btn-secondary flex items-center gap-2\"\r\n          >\r\n            <RefreshCw className=\"w-4 h-4\" />\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              if (viewLevel === 'branches') setShowAddBranchModal(true);\r\n              else if (viewLevel === 'buildings') setShowAddBuildingModal(true);\r\n              else if (viewLevel === 'entrances') setShowAddEntranceModal(true);\r\n            }}\r\n            className=\"btn-primary flex items-center gap-2\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n            {viewLevel === 'branches' && 'Добавить филиал'}\r\n            {viewLevel === 'buildings' && 'Добавить ЖК'}\r\n            {viewLevel === 'entrances' && 'Добавить подъезд'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Breadcrumb */}\r\n      {renderBreadcrumb()}\r\n\r\n      {/* Search */}\r\n      {viewLevel !== 'entrances' && (\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder={viewLevel === 'branches' ? 'Поиск по филиалам...' : 'Поиск по домам...'}\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"input-field pl-10\"\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Branches Grid */}\r\n      {viewLevel === 'branches' && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {searchedBranches.map((branch) => (\r\n            <div\r\n              key={branch.id}\r\n              className=\"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow\"\r\n              onClick={() => handleBranchClick(branch)}\r\n            >\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-14 h-14 bg-gradient-to-br from-purple-400 to-indigo-500 rounded-xl flex items-center justify-center\">\r\n                    <GitBranch className=\"w-7 h-7 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-lg\">{branch.name}</h3>\r\n                    <span className=\"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full font-mono\">\r\n                      {branch.code}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-1\" onClick={(e) => e.stopPropagation()}>\r\n                  <button\r\n                    onClick={() => setEditingBranch(branch)}\r\n                    className=\"p-2 hover:bg-white/30 rounded-lg\"\r\n                    title=\"Редактировать\"\r\n                  >\r\n                    <Edit className=\"w-4 h-4 text-gray-500\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDeleteBranch(branch.id)}\r\n                    className=\"p-2 hover:bg-red-50 rounded-lg\"\r\n                    title=\"Удалить\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4 text-red-500\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {branch.address && (\r\n                <div className=\"flex items-center gap-1 text-sm text-gray-500 mb-3\">\r\n                  <MapPin className=\"w-3 h-3\" />\r\n                  {branch.address}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <div className=\"bg-white/30 rounded-lg p-3 text-center\">\r\n                  <div className=\"text-2xl font-bold text-blue-600\">{branch.buildings_count}</div>\r\n                  <div className=\"text-xs text-gray-500\">Домов</div>\r\n                </div>\r\n                <div className=\"bg-white/30 rounded-lg p-3 text-center\">\r\n                  <div className=\"text-2xl font-bold text-green-600\">{branch.residents_count}</div>\r\n                  <div className=\"text-xs text-gray-500\">Жителей</div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mt-4 flex items-center justify-center text-sm text-primary-600\">\r\n                <span>Открыть</span>\r\n                <ChevronRight className=\"w-4 h-4\" />\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {searchedBranches.length === 0 && (\r\n            <div className=\"col-span-full glass-card p-8 text-center\">\r\n              <GitBranch className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\r\n              <h3 className=\"text-lg font-medium text-gray-600\">Филиалы не найдены</h3>\r\n              <p className=\"text-gray-400 mt-1\">Добавьте первый филиал</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Buildings Grid */}\r\n      {viewLevel === 'buildings' && (\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n          {searchedBuildings.map((building) => (\r\n            <div\r\n              key={building.id}\r\n              className=\"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow\"\r\n              onClick={() => handleBuildingClick(building)}\r\n            >\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-14 h-14 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl flex items-center justify-center\">\r\n                    <Building2 className=\"w-7 h-7 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-lg\">{building.name}</h3>\r\n                    <div className=\"flex items-center gap-1 text-sm text-gray-500\">\r\n                      <MapPin className=\"w-3 h-3\" />\r\n                      {building.address}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 mt-1\">\r\n                      <span className=\"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full\">\r\n                        {BUILDING_TYPE_LABELS[building.buildingType]}\r\n                      </span>\r\n                      {building.buildingNumber && (\r\n                        <span className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded-full font-mono\">\r\n                          Дом {building.buildingNumber}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-1\" onClick={(e) => e.stopPropagation()}>\r\n                  <button\r\n                    onClick={() => setEditingBuilding(building)}\r\n                    className=\"p-2 hover:bg-white/30 rounded-lg\"\r\n                    title=\"Редактировать\"\r\n                  >\r\n                    <Edit className=\"w-4 h-4 text-gray-500\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDeleteBuilding(building.id)}\r\n                    className=\"p-2 hover:bg-red-50 rounded-lg\"\r\n                    title=\"Удалить\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4 text-red-500\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-4 gap-2 mb-4\">\r\n                <div className=\"bg-white/30 rounded-lg p-2 text-center\">\r\n                  <div className=\"text-lg font-bold\">{building.floors}</div>\r\n                  <div className=\"text-xs text-gray-500\">Этажей</div>\r\n                </div>\r\n                <div className=\"bg-white/30 rounded-lg p-2 text-center\">\r\n                  <div className=\"text-lg font-bold\">{building.entrances}</div>\r\n                  <div className=\"text-xs text-gray-500\">Подъездов</div>\r\n                </div>\r\n                <div className=\"bg-white/30 rounded-lg p-2 text-center\">\r\n                  <div className=\"text-lg font-bold\">{building.totalApartments}</div>\r\n                  <div className=\"text-xs text-gray-500\">Квартир</div>\r\n                </div>\r\n                <div className=\"bg-white/30 rounded-lg p-2 text-center\">\r\n                  <div className=\"text-lg font-bold\">{building.residentsCount}</div>\r\n                  <div className=\"text-xs text-gray-500\">Жителей</div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex flex-wrap gap-2 mb-3\">\r\n                {building.hasElevator && (\r\n                  <span className=\"inline-flex items-center gap-1 text-xs px-2 py-1 bg-gray-100 rounded-full\">\r\n                    <Layers className=\"w-3 h-3\" /> Лифт\r\n                  </span>\r\n                )}\r\n                {building.hasGas && (\r\n                  <span className=\"inline-flex items-center gap-1 text-xs px-2 py-1 bg-gray-100 rounded-full\">\r\n                    <Thermometer className=\"w-3 h-3\" /> Газ\r\n                  </span>\r\n                )}\r\n                {building.hasHotWater && (\r\n                  <span className=\"inline-flex items-center gap-1 text-xs px-2 py-1 bg-gray-100 rounded-full\">\r\n                    <Droplets className=\"w-3 h-3\" /> ГВС\r\n                  </span>\r\n                )}\r\n                {building.hasParkingLot && (\r\n                  <span className=\"inline-flex items-center gap-1 text-xs px-2 py-1 bg-gray-100 rounded-full\">\r\n                    <Car className=\"w-3 h-3\" /> Парковка\r\n                  </span>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-center text-sm text-primary-600\">\r\n                <span>Подъезды</span>\r\n                <ChevronRight className=\"w-4 h-4\" />\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {searchedBuildings.length === 0 && (\r\n            <div className=\"col-span-full glass-card p-8 text-center\">\r\n              <Building2 className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\r\n              <h3 className=\"text-lg font-medium text-gray-600\">Дома не найдены</h3>\r\n              <p className=\"text-gray-400 mt-1\">Добавьте первый дом в этом филиале</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Entrances Grid */}\r\n      {viewLevel === 'entrances' && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {isLoadingEntrances ? (\r\n            <div className=\"col-span-full flex items-center justify-center py-8\">\r\n              <Loader2 className=\"w-6 h-6 animate-spin text-primary-500\" />\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {entrances.map((entrance) => (\r\n                <div key={entrance.id} className=\"glass-card p-5\">\r\n                  <div className=\"flex items-center gap-3 mb-4\">\r\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-green-400 to-teal-500 rounded-xl flex items-center justify-center\">\r\n                      <DoorOpen className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-lg\">Подъезд {entrance.number}</h3>\r\n                      {entrance.intercom_code && (\r\n                        <span className=\"text-xs text-gray-500\">Код: {entrance.intercom_code}</span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-2 gap-2\">\r\n                    {entrance.floors_from !== undefined && entrance.floors_to !== undefined && (\r\n                      <div className=\"bg-white/30 rounded-lg p-2 text-center\">\r\n                        <div className=\"text-sm font-medium\">{entrance.floors_from}-{entrance.floors_to}</div>\r\n                        <div className=\"text-xs text-gray-500\">Этажи</div>\r\n                      </div>\r\n                    )}\r\n                    {entrance.apartments_from !== undefined && entrance.apartments_to !== undefined && (\r\n                      <div className=\"bg-white/30 rounded-lg p-2 text-center\">\r\n                        <div className=\"text-sm font-medium\">{entrance.apartments_from}-{entrance.apartments_to}</div>\r\n                        <div className=\"text-xs text-gray-500\">Квартиры</div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {entrance.has_elevator === 1 && (\r\n                    <div className=\"mt-3 flex items-center gap-1 text-xs text-green-600\">\r\n                      <Layers className=\"w-3 h-3\" />\r\n                      Есть лифт\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n\r\n              {entrances.length === 0 && (\r\n                <div className=\"col-span-full glass-card p-8 text-center\">\r\n                  <DoorOpen className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\r\n                  <h3 className=\"text-lg font-medium text-gray-600\">Подъезды не добавлены</h3>\r\n                  <p className=\"text-gray-400 mt-1\">Добавьте подъезды для этого дома</p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Add Branch Modal */}\r\n      {showAddBranchModal && (\r\n        <BranchModal\r\n          branch={null}\r\n          onClose={() => setShowAddBranchModal(false)}\r\n          onSave={handleAddBranch}\r\n        />\r\n      )}\r\n\r\n      {/* Edit Branch Modal */}\r\n      {editingBranch && (\r\n        <BranchModal\r\n          branch={editingBranch}\r\n          onClose={() => setEditingBranch(null)}\r\n          onSave={(data) => handleUpdateBranch(editingBranch.id, data)}\r\n        />\r\n      )}\r\n\r\n      {/* Quick Add Building Modal */}\r\n      {showQuickAddBuildingModal && (\r\n        <QuickBuildingModal\r\n          onClose={() => setShowQuickAddBuildingModal(false)}\r\n          onSave={handleQuickAddBuilding}\r\n          branchCode={selectedBranch?.code || ''}\r\n        />\r\n      )}\r\n\r\n      {/* Add Building Modal (Full - for ЖК) */}\r\n      {showAddBuildingModal && (\r\n        <BuildingModal\r\n          building={null}\r\n          onClose={() => setShowAddBuildingModal(false)}\r\n          onSave={handleAddBuilding}\r\n          onSwitchToQuick={() => {\r\n            setShowAddBuildingModal(false);\r\n            setShowQuickAddBuildingModal(true);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Edit Building Modal */}\r\n      {editingBuilding && (\r\n        <BuildingModal\r\n          building={editingBuilding}\r\n          onClose={() => setEditingBuilding(null)}\r\n          onSave={(data) => handleUpdateBuilding(editingBuilding.id, data)}\r\n        />\r\n      )}\r\n\r\n      {/* Add Entrance Modal */}\r\n      {showAddEntranceModal && (\r\n        <EntranceModal\r\n          onClose={() => setShowAddEntranceModal(false)}\r\n          onSave={handleAddEntrance}\r\n          existingEntrances={entrances}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Branch Modal\r\nfunction BranchModal({\r\n  branch,\r\n  onClose,\r\n  onSave\r\n}: {\r\n  branch: Branch | null;\r\n  onClose: () => void;\r\n  onSave: (data: { code: string; name: string; address?: string; phone?: string }) => void;\r\n}) {\r\n  const [formData, setFormData] = useState({\r\n    code: branch?.code || '',\r\n    name: branch?.name || '',\r\n    address: branch?.address || '',\r\n    phone: branch?.phone || '',\r\n  });\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (!formData.code.trim() || !formData.name.trim()) {\r\n      setError('Заполните обязательные поля');\r\n      return;\r\n    }\r\n\r\n    onSave(formData);\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"modal-content p-6 w-full max-w-md mx-4\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold\">\r\n            {branch ? 'Редактировать филиал' : 'Новый филиал'}\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"p-3 bg-red-100 text-red-700 rounded-lg mb-4 text-sm\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Код филиала *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.code}\r\n              onChange={(e) => setFormData({ ...formData, code: e.target.value.toUpperCase() })}\r\n              className=\"input-field font-mono\"\r\n              placeholder=\"YS, CH, MR...\"\r\n              maxLength={5}\r\n              required\r\n              disabled={!!branch}\r\n            />\r\n            <p className=\"text-xs text-gray-500 mt-1\">Используется для генерации паролей жильцов</p>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Название *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n              className=\"input-field\"\r\n              placeholder=\"Юнусабад\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Адрес\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.address}\r\n              onChange={(e) => setFormData({ ...formData, address: e.target.value })}\r\n              className=\"input-field\"\r\n              placeholder=\"ул. Примера, 1\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Телефон\r\n            </label>\r\n            <input\r\n              type=\"tel\"\r\n              value={formData.phone}\r\n              onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\r\n              className=\"input-field\"\r\n              placeholder=\"+998 90 123 45 67\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 pt-4\">\r\n            <button type=\"button\" onClick={onClose} className=\"btn-secondary flex-1\">\r\n              Отмена\r\n            </button>\r\n            <button type=\"submit\" className=\"btn-primary flex-1\">\r\n              {branch ? 'Сохранить' : 'Создать'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Building Modal (full form for ЖК)\r\nfunction BuildingModal({\r\n  building,\r\n  onClose,\r\n  onSave,\r\n  onSwitchToQuick\r\n}: {\r\n  building: BuildingFull | null;\r\n  onClose: () => void;\r\n  onSave: (data: any) => void;\r\n  onSwitchToQuick?: () => void;\r\n}) {\r\n  const [formData, setFormData] = useState({\r\n    name: building?.name || '',\r\n    address: building?.address || '',\r\n    buildingNumber: building?.buildingNumber || '',\r\n    floors: building?.floors || 5,\r\n    entrances: building?.entrances || 2,\r\n    totalApartments: building?.totalApartments || 40,\r\n    yearBuilt: building?.yearBuilt || 2020,\r\n    buildingType: building?.buildingType || 'monolith' as const,\r\n    hasElevator: building?.hasElevator ?? true,\r\n    elevatorCount: building?.elevatorCount || 2,\r\n    hasGas: building?.hasGas ?? true,\r\n    hasHotWater: building?.hasHotWater ?? true,\r\n    hasParkingLot: building?.hasParkingLot ?? true,\r\n    parkingSpaces: building?.parkingSpaces || 20,\r\n  });\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (!formData.name.trim() || !formData.address.trim()) {\r\n      setError('Заполните обязательные поля');\r\n      return;\r\n    }\r\n\r\n    onSave(formData);\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"modal-content p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-xl font-bold\">\r\n            {building ? 'Редактировать ЖК' : 'Новый ЖК'}\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Switch to quick add */}\r\n        {!building && onSwitchToQuick && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={onSwitchToQuick}\r\n            className=\"w-full mb-4 p-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-600 hover:border-primary-400 hover:text-primary-600 hover:bg-primary-50 transition-all flex items-center justify-center gap-2\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n            Добавить просто дом (5Б, 121, 8А...)\r\n          </button>\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"p-3 bg-red-100 text-red-700 rounded-lg mb-4 text-sm\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Название *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n              className=\"input-field\"\r\n              placeholder='ЖК \"Название\"'\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Адрес *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.address}\r\n              onChange={(e) => setFormData({ ...formData, address: e.target.value })}\r\n              className=\"input-field\"\r\n              placeholder=\"ул. Пример, 1\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Номер дома\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.buildingNumber}\r\n                onChange={(e) => setFormData({ ...formData, buildingNumber: e.target.value.toUpperCase() })}\r\n                className=\"input-field\"\r\n                placeholder=\"8A\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Год постройки\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={formData.yearBuilt}\r\n                onChange={(e) => setFormData({ ...formData, yearBuilt: parseInt(e.target.value) || 2000 })}\r\n                className=\"input-field\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-3 gap-3\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Этажей\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={formData.floors}\r\n                onChange={(e) => setFormData({ ...formData, floors: parseInt(e.target.value) || 1 })}\r\n                className=\"input-field\"\r\n                min=\"1\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Подъездов\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={formData.entrances}\r\n                onChange={(e) => setFormData({ ...formData, entrances: parseInt(e.target.value) || 1 })}\r\n                className=\"input-field\"\r\n                min=\"1\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Квартир\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={formData.totalApartments}\r\n                onChange={(e) => setFormData({ ...formData, totalApartments: parseInt(e.target.value) || 1 })}\r\n                className=\"input-field\"\r\n                min=\"1\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Тип здания\r\n            </label>\r\n            <select\r\n              value={formData.buildingType}\r\n              onChange={(e) => setFormData({ ...formData, buildingType: e.target.value as any })}\r\n              className=\"input-field\"\r\n            >\r\n              <option value=\"panel\">Панельный</option>\r\n              <option value=\"brick\">Кирпичный</option>\r\n              <option value=\"monolith\">Монолитный</option>\r\n              <option value=\"block\">Блочный</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <label className=\"flex items-center gap-2 p-3 bg-gray-50 rounded-lg cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={formData.hasElevator}\r\n                onChange={(e) => setFormData({ ...formData, hasElevator: e.target.checked })}\r\n              />\r\n              <span>Лифт</span>\r\n            </label>\r\n            <label className=\"flex items-center gap-2 p-3 bg-gray-50 rounded-lg cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={formData.hasGas}\r\n                onChange={(e) => setFormData({ ...formData, hasGas: e.target.checked })}\r\n              />\r\n              <span>Газ</span>\r\n            </label>\r\n            <label className=\"flex items-center gap-2 p-3 bg-gray-50 rounded-lg cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={formData.hasHotWater}\r\n                onChange={(e) => setFormData({ ...formData, hasHotWater: e.target.checked })}\r\n              />\r\n              <span>Горячая вода</span>\r\n            </label>\r\n            <label className=\"flex items-center gap-2 p-3 bg-gray-50 rounded-lg cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={formData.hasParkingLot}\r\n                onChange={(e) => setFormData({ ...formData, hasParkingLot: e.target.checked })}\r\n              />\r\n              <span>Парковка</span>\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 pt-4\">\r\n            <button type=\"button\" onClick={onClose} className=\"btn-secondary flex-1\">\r\n              Отмена\r\n            </button>\r\n            <button type=\"submit\" className=\"btn-primary flex-1\">\r\n              {building ? 'Сохранить' : 'Создать'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Entrance Modal\r\nfunction EntranceModal({\r\n  onClose,\r\n  onSave,\r\n  existingEntrances\r\n}: {\r\n  onClose: () => void;\r\n  onSave: (data: { number: number; floors_from?: number; floors_to?: number; apartments_from?: number; apartments_to?: number }) => void;\r\n  existingEntrances: Entrance[];\r\n}) {\r\n  const nextNumber = existingEntrances.length > 0\r\n    ? Math.max(...existingEntrances.map(e => e.number)) + 1\r\n    : 1;\r\n\r\n  const [formData, setFormData] = useState({\r\n    number: nextNumber,\r\n    floors_from: 1,\r\n    floors_to: 9,\r\n    apartments_from: 1,\r\n    apartments_to: 36,\r\n  });\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (formData.number < 1) {\r\n      setError('Номер подъезда должен быть больше 0');\r\n      return;\r\n    }\r\n\r\n    onSave(formData);\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"modal-content p-6 w-full max-w-md mx-4\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold\">Новый подъезд</h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"p-3 bg-red-100 text-red-700 rounded-lg mb-4 text-sm\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Номер подъезда *\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={formData.number}\r\n              onChange={(e) => setFormData({ ...formData, number: parseInt(e.target.value) || 1 })}\r\n              className=\"input-field\"\r\n              min=\"1\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Этаж с\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={formData.floors_from}\r\n                onChange={(e) => setFormData({ ...formData, floors_from: parseInt(e.target.value) || 1 })}\r\n                className=\"input-field\"\r\n                min=\"1\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Этаж по\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={formData.floors_to}\r\n                onChange={(e) => setFormData({ ...formData, floors_to: parseInt(e.target.value) || 1 })}\r\n                className=\"input-field\"\r\n                min=\"1\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Квартира с\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={formData.apartments_from}\r\n                onChange={(e) => setFormData({ ...formData, apartments_from: parseInt(e.target.value) || 1 })}\r\n                className=\"input-field\"\r\n                min=\"1\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Квартира по\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={formData.apartments_to}\r\n                onChange={(e) => setFormData({ ...formData, apartments_to: parseInt(e.target.value) || 1 })}\r\n                className=\"input-field\"\r\n                min=\"1\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 pt-4\">\r\n            <button type=\"button\" onClick={onClose} className=\"btn-secondary flex-1\">\r\n              Отмена\r\n            </button>\r\n            <button type=\"submit\" className=\"btn-primary flex-1\">\r\n              Создать\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Quick Building Modal (simplified - just building number)\r\nfunction QuickBuildingModal({\r\n  onClose,\r\n  onSave,\r\n  branchCode\r\n}: {\r\n  onClose: () => void;\r\n  onSave: (buildingNumber: string) => void;\r\n  branchCode: string;\r\n}) {\r\n  const [buildingNumber, setBuildingNumber] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (!buildingNumber.trim()) {\r\n      setError('Введите номер дома');\r\n      return;\r\n    }\r\n\r\n    onSave(buildingNumber.trim());\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"modal-content p-6 w-full max-w-sm mx-4\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold\">Добавить дом</h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"p-3 bg-red-100 text-red-700 rounded-lg mb-4 text-sm\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Номер дома *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={buildingNumber}\r\n              onChange={(e) => setBuildingNumber(e.target.value.toUpperCase())}\r\n              className=\"input-field text-2xl text-center font-bold\"\r\n              placeholder=\"5Б, 121, 8А...\"\r\n              autoFocus\r\n              required\r\n            />\r\n            <p className=\"text-xs text-gray-500 mt-2 text-center\">\r\n              Пароль жителей: <span className=\"font-mono bg-gray-100 px-1 rounded\">{branchCode}/{buildingNumber || '?'}/[кв]</span>\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button type=\"button\" onClick={onClose} className=\"btn-secondary flex-1\">\r\n              Отмена\r\n            </button>\r\n            <button type=\"submit\" className=\"btn-primary flex-1\">\r\n              Добавить\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["BuildingsPage","buildings","addBuilding","updateBuilding","deleteBuilding","fetchBuildings","isLoadingBuildings","useCRMStore","viewLevel","setViewLevel","useState","selectedBranch","setSelectedBranch","selectedBuilding","setSelectedBuilding","branches","setBranches","entrances","setEntrances","isLoadingBranches","setIsLoadingBranches","isLoadingEntrances","setIsLoadingEntrances","showAddBranchModal","setShowAddBranchModal","showAddBuildingModal","setShowAddBuildingModal","showQuickAddBuildingModal","setShowQuickAddBuildingModal","showAddEntranceModal","setShowAddEntranceModal","editingBranch","setEditingBranch","editingBuilding","setEditingBuilding","searchQuery","setSearchQuery","useEffect","fetchBranches","fetchBuildingsForBranch","fetchEntrancesForBuilding","response","apiRequest","_branchId","buildingId","searchedBuildings","b","searchedBranches","handleBranchClick","branch","handleBuildingClick","building","handleBack","handleAddBranch","data","error","handleUpdateBranch","id","handleDeleteBranch","handleAddBuilding","buildingData","handleQuickAddBuilding","buildingNumber","handleUpdateBuilding","handleDeleteBuilding","handleAddEntrance","renderBreadcrumb","jsxs","jsx","Fragment","ChevronRight","Loader2","ArrowLeft","RefreshCw","Plus","Search","e","GitBranch","Edit","Trash2","MapPin","Building2","BUILDING_TYPE_LABELS","Layers","Thermometer","Droplets","Car","entrance","DoorOpen","BranchModal","QuickBuildingModal","BuildingModal","EntranceModal","onClose","onSave","formData","setFormData","setError","handleSubmit","X","onSwitchToQuick","existingEntrances","nextNumber","branchCode","setBuildingNumber"],"mappings":"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"}