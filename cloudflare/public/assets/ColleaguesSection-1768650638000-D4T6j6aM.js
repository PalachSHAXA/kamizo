import{r as u,j as e,Y as Z,h as A,ar as I,aV as J,m as B,I as Q,k as ee,X as L}from"./react-vendor-1768650638000-BuN04sTN.js";import{d as se,u as te,b as ae,S as ne}from"./index-1768650638000-whvq43RX.js";import"./vendor-1768650638000-HaoOR8eO.js";import"./qr-scanner-1768650638000-cr32YHjo.js";import"./zustand-1768650638000-wNUYBKDB.js";const C=n=>({plumber:"Ð¡Ð°Ð½Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¾Ñ‚Ð´ÐµÐ»",electrician:"Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¾Ñ‚Ð´ÐµÐ»",elevator:"Ð›Ð¸Ñ„Ñ‚Ð¾Ð²Ð°Ñ ÑÐ»ÑƒÐ¶Ð±Ð°",intercom:"Ð”Ð¾Ð¼Ð¾Ñ„Ð¾Ð½Ð½Ð°Ñ ÑÐ»ÑƒÐ¶Ð±Ð°",cleaning:"ÐšÐ»Ð¸Ð½Ð¸Ð½Ð³",security:"Ð¡Ð»ÑƒÐ¶Ð±Ð° Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸",carpenter:"Ð¡Ñ‚Ð¾Ð»ÑÑ€Ð½Ñ‹Ð¹ Ð¾Ñ‚Ð´ÐµÐ»",boiler:"ÐšÐ¾Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ ÑÐ»ÑƒÐ¶Ð±Ð°",ac:"ÐšÐ»Ð¸Ð¼Ð°Ñ‚-ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ",courier:"Ð¡Ð»ÑƒÐ¶Ð±Ð° Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸",other:"ÐžÐ±Ñ‰Ð¸Ð¹ Ð¾Ñ‚Ð´ÐµÐ»"})[n]||"ÐžÐ±Ñ‰Ð¸Ð¹ Ð¾Ñ‚Ð´ÐµÐ»",le=(n,c)=>`https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(n+c)}&backgroundColor=f59e0b,eab308,84cc16,22c55e,14b8a6,06b6d4,0ea5e9,3b82f6,6366f1,8b5cf6,a855f7,d946ef,ec4899,f43f5e&backgroundType=gradientLinear`,re=(n,c)=>{const x=[];return n>=4.8&&x.push("ÐŸÑ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»"),n>=4.5&&x.push("ÐÐ°Ð´Ñ‘Ð¶Ð½Ð¾ÑÑ‚ÑŒ"),c>=100&&x.push("ÐžÐ¿Ñ‹Ñ‚Ð½Ñ‹Ð¹ Ð¼Ð°ÑÑ‚ÐµÑ€"),c>=50&&x.push("ÐœÐ°ÑÑ‚ÐµÑ€"),x.slice(0,2)},U={professionalKnowledge:"ÐŸÑ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð·Ð½Ð°Ð½Ð¸Ñ",legislationKnowledge:"Ð—Ð½Ð°Ð½Ð¸Ðµ Ð·Ð°ÐºÐ¾Ð½Ð¾Ð´Ð°Ñ‚ÐµÐ»ÑŒÑÑ‚Ð²Ð°",analyticalSkills:"ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸",qualityOfWork:"ÐšÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹",execution:"Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ",reliability:"ÐÐ°Ð´Ñ‘Ð¶Ð½Ð¾ÑÑ‚ÑŒ",teamwork:"ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ð¾ÑÑ‚ÑŒ",communication:"ÐšÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ñ",initiative:"Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ñ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ",humanity:"Ð§ÐµÐ»Ð¾Ð²ÐµÑ‡Ð½Ð¾ÑÑ‚ÑŒ"},T=["ÐŸÐ¾Ð¼Ð¾Ð³ Ñ Ð·Ð°Ð´Ð°Ñ‡ÐµÐ¹","ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð°Ð» Ð² ÑÐ»Ð¾Ð¶Ð½Ñ‹Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚","ÐÐ°ÑƒÑ‡Ð¸Ð» Ñ‡ÐµÐ¼Ñƒ-Ñ‚Ð¾ Ð½Ð¾Ð²Ð¾Ð¼Ñƒ","Ð’Ñ‹Ñ€ÑƒÑ‡Ð¸Ð» Ð² Ð´ÐµÐ´Ð»Ð°Ð¹Ð½","ÐŸÑ€Ð¾ÑÑ‚Ð¾ ÑÐ¿Ð°ÑÐ¸Ð±Ð¾"];function y({rating:n,maxStars:c=5,size:x="md",onChange:h}){const l=x==="sm"?"w-4 h-4":x==="lg"?"w-6 h-6":"w-5 h-5";return e.jsx("div",{className:"flex gap-1",children:[...Array(c)].map((a,d)=>e.jsx(B,{className:`${l} ${d<Math.floor(n)?"fill-yellow-400 text-yellow-400":"text-gray-300"} ${h?"cursor-pointer hover:scale-110 transition-transform":""}`,onClick:()=>h?.(d+1)},d))})}function ie({employee:n,onClose:c,onSubmit:x}){const[h,l]=u.useState({professionalKnowledge:0,legislationKnowledge:0,analyticalSkills:0,qualityOfWork:0,execution:0,reliability:0,teamwork:0,communication:0,initiative:0,humanity:0}),[a,d]=u.useState(""),g=()=>{if(!Object.values(h).every(f=>f>0)){alert("ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¾Ñ†ÐµÐ½Ð¸Ñ‚Ðµ Ð²ÑÐµ ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸");return}x(h),c()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center z-10",children:[e.jsxs("h2",{className:"text-xl font-bold truncate pr-4",children:["ÐžÑ†ÐµÐ½Ð¸Ñ‚ÑŒ: ",n.name]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 flex-shrink-0",children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"Ð’Ð°ÑˆÐ° Ð¾Ñ†ÐµÐ½ÐºÐ° Ð°Ð±ÑÐ¾Ð»ÑŽÑ‚Ð½Ð¾ Ð°Ð½Ð¾Ð½Ð¸Ð¼Ð½Ð°"})}),e.jsx("div",{className:"space-y-4",children:Object.entries(U).map(([m,f])=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:f}),e.jsx(y,{rating:h[m],onChange:j=>l({...h,[m]:j})})]},m))}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)"}),e.jsx("textarea",{value:a,onChange:m=>d(m.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm resize-none",rows:4,placeholder:"ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ ÑÐ²Ð¾Ð¸Ð¼Ð¸ Ð¼Ñ‹ÑÐ»ÑÐ¼Ð¸..."})]}),e.jsx("button",{onClick:g,className:"w-full mt-6 bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 rounded-lg transition-colors",children:"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ"})]})]})})}function ce({employee:n,onClose:c,onSubmit:x}){const[h,l]=u.useState(T[0]),[a,d]=u.useState(!1),g=()=>{x(h,a),c()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold truncate pr-4",children:["ÐŸÐ¾Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð¸Ñ‚ÑŒ: ",n.name]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 flex-shrink-0",children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ð—Ð° Ñ‡Ñ‚Ð¾ ÑÐ¿Ð°ÑÐ¸Ð±Ð¾?"}),e.jsx("select",{value:h,onChange:m=>l(m.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm mb-4",children:T.map(m=>e.jsx("option",{value:m,children:m},m))}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:m=>d(m.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð°Ð½Ð¾Ð½Ð¸Ð¼Ð½Ð¾"})]}),e.jsx("button",{onClick:g,className:"w-full mt-6 bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 rounded-lg transition-colors",children:"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ¿Ð°ÑÐ¸Ð±Ð¾"})]})]})})}function oe({employee:n,onBack:c,thanks:x}){const h=(Object.values(n.ratings).reduce((a,d)=>a+d,0)/10).toFixed(1),l=x.filter(a=>a.toId===n.id);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("button",{onClick:c,className:"mb-4 flex items-center gap-2 text-gray-600 hover:text-gray-800 font-medium",children:"â† ÐÐ°Ð·Ð°Ð´ Ðº ÑÐ¿Ð¸ÑÐºÑƒ"}),e.jsx("div",{className:"glass-card p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:gap-6",children:[e.jsx("img",{src:n.photo,alt:n.name,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-xl object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold truncate",children:n.name}),e.jsx("p",{className:"text-gray-600 mb-1",children:n.position}),e.jsx("p",{className:"text-sm text-gray-500",children:n.department}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center sm:justify-start gap-2 sm:gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{rating:parseFloat(h),size:"sm"}),e.jsx("span",{className:"font-bold text-lg",children:h})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[n.totalRatings," Ð¾Ñ†ÐµÐ½Ð¾Ðº"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[n.monthlyRatings," Ð² ÑÑ‚Ð¾Ð¼ Ð¼ÐµÑÑÑ†Ðµ"]})]}),n.badges.length>0&&e.jsx("div",{className:"flex flex-wrap justify-center sm:justify-start gap-2 mt-4",children:n.badges.map((a,d)=>e.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full flex items-center gap-1",children:[e.jsx(I,{className:"w-3 h-3"}),a]},d))})]})]})}),e.jsxs("div",{className:"glass-card p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"ÐžÑ†ÐµÐ½ÐºÐ¸ Ð¿Ð¾ ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸ÑÐ¼"}),e.jsx("div",{className:"space-y-3",children:Object.entries(U).map(([a,d])=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-sm truncate",children:d}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(y,{rating:n.ratings[a],size:"sm"}),e.jsx("span",{className:"text-sm font-medium w-8 text-right",children:n.ratings[a].toFixed(1)})]})]},a))})]}),e.jsxs("div",{className:"glass-card p-4 sm:p-6",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4",children:["ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð½Ñ‹Ðµ Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚Ð¸ (",l.length,")"]}),l.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"ÐŸÐ¾ÐºÐ° Ð½ÐµÑ‚ Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚ÐµÐ¹"}):e.jsx("div",{className:"space-y-3",children:l.map(a=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(J,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium truncate",children:a.isAnonymous?"ÐÐ½Ð¾Ð½Ð¸Ð¼Ð½Ð¾":a.fromName})]}),e.jsx("p",{className:"text-sm text-gray-700",children:a.reason}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(a.createdAt).toLocaleDateString()})]},a.id))})]})]})}function de({news:n}){return e.jsxs("div",{className:"glass-card p-4 sm:p-6",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-primary-500 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ"})]}),e.jsx("div",{className:"space-y-3",children:n.slice(0,5).map(c=>e.jsxs("div",{className:"flex items-start gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(ee,{className:"w-4 h-4 text-gray-400 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm break-words",children:c.text}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(c.createdAt).toLocaleDateString()})]})]},c.id))})]})}function me({employees:n}){const x=[...n].sort((l,a)=>{const d=Object.values(l.ratings).reduce((m,f)=>m+f,0)/10;return Object.values(a.ratings).reduce((m,f)=>m+f,0)/10-d}).slice(0,3),h=l=>[...n].sort((a,d)=>d.ratings[l]-a.ratings[l])[0];return n.length===0?null:e.jsxs("div",{className:"glass-card p-4 sm:p-6 mb-6 overflow-hidden",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-primary-500 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Ð›ÑƒÑ‡ÑˆÐ¸Ðµ ÐºÐ¾Ð»Ð»ÐµÐ³Ð¸ Ð¼ÐµÑÑÑ†Ð°"})]}),e.jsx("div",{className:"space-y-3 mb-6",children:x.map((l,a)=>{const d=(Object.values(l.ratings).reduce((g,m)=>g+m,0)/10).toFixed(1);return e.jsxs("div",{className:`p-3 rounded-xl border-2 flex items-center gap-3 ${a===0?"border-orange-400 bg-orange-50":a===1?"border-gray-300 bg-gray-50":"border-orange-300 bg-orange-50"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:a===0?"ðŸ¥‡":a===1?"ðŸ¥ˆ":"ðŸ¥‰"}),e.jsx("img",{src:l.photo,alt:l.name,className:"w-10 h-10 rounded-lg object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm truncate",children:l.name}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:l.position})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx(B,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-sm font-bold",children:d})]})]},l.id)})}),n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold mb-3 text-sm",children:"Ð›Ð¸Ð´ÐµÑ€Ñ‹ Ð¿Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑÐ¼"}),e.jsx("div",{className:"space-y-2",children:[{key:"teamwork",label:"ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ð¾ÑÑ‚ÑŒ",icon:"ðŸ¤"},{key:"professionalKnowledge",label:"Ð—Ð½Ð°Ð½Ð¸Ñ",icon:"ðŸŽ“"},{key:"communication",label:"ÐšÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ñ",icon:"ðŸ’¬"},{key:"initiative",label:"Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ñ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ",icon:"ðŸš€"}].map(({key:l,label:a,icon:d})=>{const g=h(l);return g?e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"flex-shrink-0",children:d}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 w-24",children:a}),e.jsx("span",{className:"text-xs font-medium flex-1 min-w-0 truncate",children:g.name}),e.jsx("span",{className:"text-xs font-bold flex-shrink-0 bg-primary-100 text-primary-700 px-1.5 py-0.5 rounded",children:g.ratings[l].toFixed(1)})]},l):null})})]})]})}function fe(){const{language:n}=se(),{executors:c,fetchExecutors:x,isLoadingExecutors:h}=te(),{user:l}=ae(),[a,d]=u.useState([]),[g,m]=u.useState(new Set),[f,j]=u.useState(null),[R,w]=u.useState(null),[O,v]=u.useState(null),[K,q]=u.useState([]),[H,M]=u.useState([]);u.useEffect(()=>{x(!0)},[x]),u.useEffect(()=>{if(c.length>0){const s=c.map(t=>{const r=t.rating||4.5,o=.3,i=()=>{const p=r+(Math.random()-.5)*o*2;return Math.min(5,Math.max(3.5,parseFloat(p.toFixed(1))))};return{id:t.id,name:t.name,position:ne[t.specialization]||"Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚",department:C(t.specialization),photo:le(t.name,t.id),ratings:{professionalKnowledge:i(),legislationKnowledge:i(),analyticalSkills:i(),qualityOfWork:i(),execution:i(),reliability:i(),teamwork:i(),communication:i(),initiative:i(),humanity:i()},totalRatings:t.completedCount||Math.floor(Math.random()*50)+10,monthlyRatings:Math.floor(Math.random()*10)+1,badges:re(t.rating||4.5,t.completedCount||0)}});if(d(s),s.length>0){const t=[{id:"1",type:"top",text:`${s[0]?.name||"Ð¡Ð¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸Ðº"} Ð²Ð¾ÑˆÑ‘Ð» Ð² Ñ‚Ð¾Ð¿ Ð»ÑƒÑ‡ÑˆÐ¸Ñ… ÐºÐ¾Ð»Ð»ÐµÐ³ Ð¼ÐµÑÑÑ†Ð°!`,createdAt:new Date().toISOString()},{id:"2",type:"department",text:"ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð² ÑÑ‚Ð¾Ð¼ Ð¼ÐµÑÑÑ†Ðµ",createdAt:new Date().toISOString()}];M(t)}}},[c]);const W="current-user",_=(s,t)=>{d(o=>o.map(i=>{if(i.id===s){const p={...i.ratings};return Object.keys(t).forEach(V=>{const E=V,Y=i.ratings[E],F=i.totalRatings;p[E]=parseFloat(((Y*F+t[E])/(F+1)).toFixed(1))}),{...i,ratings:p,totalRatings:i.totalRatings+1,monthlyRatings:i.monthlyRatings+1}}return i})),m(o=>new Set([...o,s]));const r=a.find(o=>o.id===s);r&&M(o=>[{id:Date.now().toString(),type:"top",text:`${r.name} Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð» Ð½Ð¾Ð²ÑƒÑŽ Ð¾Ñ†ÐµÐ½ÐºÑƒ!`,createdAt:new Date().toISOString()},...o])},P=(s,t,r)=>{const o={id:Date.now().toString(),fromId:W,fromName:r?void 0:"Ð’Ñ‹",toId:s,reason:t,isAnonymous:r,createdAt:new Date().toISOString()};q(p=>[o,...p]);const i=a.find(p=>p.id===s);i&&!r&&M(p=>[{id:Date.now().toString(),type:"thank",text:`${i.name} Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð» Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚ÑŒ: "${t}"`,createdAt:new Date().toISOString()},...p])};if(h&&a.length===0)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Z,{className:"w-8 h-8 animate-spin text-primary-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÐºÐ¾Ð»Ð»ÐµÐ³..."})]})});if(f)return e.jsx(oe,{employee:f,onBack:()=>j(null),thanks:K});const k=l?.role==="department_head",z=l?.role==="executor",X=l?.specialization,G=z||k?c.find(s=>s.login===l?.login||s.id===l?.id):null,b=X||G?.specialization,N=b?a.filter(s=>{const t=c.find(o=>o.id===s.id),r=t?.id===l?.id||t?.login===l?.login;return t?.specialization===b&&!r}):[],S=b?a.filter(s=>{const t=c.find(o=>o.id===s.id),r=t?.id===l?.id||t?.login===l?.login;return t?.specialization!==b&&!r}):a.filter(s=>{const t=c.find(o=>o.id===s.id);return!(t?.id===l?.id||t?.login===l?.login)}),$=S.reduce((s,t)=>{const r=c.find(i=>i.id===t.id),o=r?.specialization?C(r.specialization):"Ð”Ñ€ÑƒÐ³Ð¸Ðµ";return s[o]||(s[o]=[]),s[o].push(t),s},{}),D=Object.keys($).sort((s,t)=>{const r=b?C(b):"";return s===r?-1:t===r?1:s.localeCompare(t)});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold flex items-center gap-3",children:[e.jsx(A,{className:"w-8 h-8 text-primary-500 flex-shrink-0"}),e.jsx("span",{children:n==="ru"?"ÐœÐ¾Ð¸ ÐºÐ¾Ð»Ð»ÐµÐ³Ð¸":"Mening hamkasblarim"})]})}),a.length===0?e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx(A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:n==="ru"?"ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¾ ÐºÐ¾Ð»Ð»ÐµÐ³Ð°Ñ…":"Hamkasblar haqida ma'lumot yo'q"}),e.jsx("p",{className:"text-gray-500",children:n==="ru"?"Ð¡Ð¿Ð¸ÑÐ¾Ðº ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¾Ð² Ð¿Ð¾ÐºÐ° Ð¿ÑƒÑÑ‚":"Xodimlar ro'yxati hali bo'sh"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[(k||z)&&N.length>0&&e.jsxs("div",{className:"glass-card p-4 sm:p-6",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),n==="ru"?k?`ÐœÐ¾Ð¸ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¸ (${N.length})`:`ÐœÐ¾Ð¹ Ð¾Ñ‚Ð´ÐµÐ»: ${C(b)} (${N.length})`:k?`Mening xodimlarim (${N.length})`:`Mening bo'limim (${N.length})`]}),e.jsx("div",{className:"space-y-3",children:N.map(s=>{const t=g.has(s.id),r=(Object.values(s.ratings).reduce((o,i)=>o+i,0)/10).toFixed(1);return e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 p-4 bg-blue-50/50 border border-blue-200 rounded-xl hover:bg-blue-50 hover:shadow-md transition-all",children:[e.jsx("img",{src:s.photo,alt:s.name,className:"w-14 h-14 sm:w-16 sm:h-16 rounded-xl object-cover cursor-pointer flex-shrink-0",onClick:()=>j(s)}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>j(s),children:[e.jsx("h3",{className:"font-bold truncate",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.position}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(y,{rating:parseFloat(r),size:"sm"}),e.jsx("span",{className:"text-sm font-medium",children:r})]})]}),e.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>!t&&w(s),disabled:t,className:`flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap ${t?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-primary-500 hover:bg-primary-600 text-gray-900"}`,children:t?"âœ“ ÐžÑ†ÐµÐ½ÐµÐ½Ð¾":"ÐžÑ†ÐµÐ½Ð¸Ñ‚ÑŒ"}),e.jsx("button",{onClick:()=>v(s),className:"flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm bg-purple-50 hover:bg-purple-100 text-purple-700 transition-colors whitespace-nowrap",children:"â¤ï¸ Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾"})]})]},s.id)})})]}),(k||z)&&D.length>0?D.map(s=>e.jsxs("div",{className:"glass-card p-4 sm:p-6",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full"}),s," (",$[s].length,")"]}),e.jsx("div",{className:"space-y-3",children:$[s].map(t=>{const r=g.has(t.id),o=(Object.values(t.ratings).reduce((i,p)=>i+p,0)/10).toFixed(1);return e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 p-4 bg-white/60 border border-gray-200 rounded-xl hover:bg-white/80 hover:shadow-md transition-all",children:[e.jsx("img",{src:t.photo,alt:t.name,className:"w-14 h-14 sm:w-16 sm:h-16 rounded-xl object-cover cursor-pointer flex-shrink-0",onClick:()=>j(t)}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>j(t),children:[e.jsx("h3",{className:"font-bold truncate",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.position}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(y,{rating:parseFloat(o),size:"sm"}),e.jsx("span",{className:"text-sm font-medium",children:o})]})]}),e.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>!r&&w(t),disabled:r,className:`flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap ${r?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-primary-500 hover:bg-primary-600 text-gray-900"}`,children:r?"âœ“ ÐžÑ†ÐµÐ½ÐµÐ½Ð¾":"ÐžÑ†ÐµÐ½Ð¸Ñ‚ÑŒ"}),e.jsx("button",{onClick:()=>v(t),className:"flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm bg-purple-50 hover:bg-purple-100 text-purple-700 transition-colors whitespace-nowrap",children:"â¤ï¸ Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾"})]})]},t.id)})})]},s)):e.jsxs("div",{className:"glass-card p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:n==="ru"?`Ð’ÑÐµ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¸ (${S.length})`:`Barcha xodimlar (${S.length})`}),e.jsx("div",{className:"space-y-3",children:S.map(s=>{const t=g.has(s.id),r=(Object.values(s.ratings).reduce((o,i)=>o+i,0)/10).toFixed(1);return e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 p-4 bg-white/60 border border-gray-200 rounded-xl hover:bg-white/80 hover:shadow-md transition-all",children:[e.jsx("img",{src:s.photo,alt:s.name,className:"w-14 h-14 sm:w-16 sm:h-16 rounded-xl object-cover cursor-pointer flex-shrink-0",onClick:()=>j(s)}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>j(s),children:[e.jsx("h3",{className:"font-bold truncate",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.position}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(y,{rating:parseFloat(r),size:"sm"}),e.jsx("span",{className:"text-sm font-medium",children:r})]})]}),e.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>!t&&w(s),disabled:t,className:`flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap ${t?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-primary-500 hover:bg-primary-600 text-gray-900"}`,children:t?"âœ“ ÐžÑ†ÐµÐ½ÐµÐ½Ð¾":"ÐžÑ†ÐµÐ½Ð¸Ñ‚ÑŒ"}),e.jsx("button",{onClick:()=>v(s),className:"flex-1 sm:flex-none px-3 py-2 rounded-lg font-medium text-sm bg-purple-50 hover:bg-purple-100 text-purple-700 transition-colors whitespace-nowrap",children:"â¤ï¸ Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾"})]})]},s.id)})})]})]}),e.jsxs("div",{children:[e.jsx(me,{employees:a}),e.jsx(de,{news:H})]})]}),R&&e.jsx(ie,{employee:R,onClose:()=>w(null),onSubmit:s=>{_(R.id,s),w(null)}}),O&&e.jsx(ce,{employee:O,onClose:()=>v(null),onSubmit:(s,t)=>{P(O.id,s,t),v(null)}})]})}export{fe as ColleaguesSection};
//# sourceMappingURL=ColleaguesSection-1768650638000-D4T6j6aM.js.map
