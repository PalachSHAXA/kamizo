import{r as i,j as e,$ as O,z as Ae,aH as Le,a7 as K,K as Ee,at as V,p as E,a4 as Y,W as T,X as ee,a2 as h,af as S,m as se,aq as _e,A as ae,l as te,a0 as Pe,a1 as De,a_ as Ie,aZ as Me,ba as Fe,bb as Oe,aa as Te,I as Xe,bc as $e,b4 as Be,bd as He,a6 as Re,be as Ze,x as Ue,bf as We,Z as qe,aF as Qe}from"./react-vendor-1770493083576-vH-hHAng.js";import{S as _,t as j}from"./index-1770493083576-CfAzBj-W.js";import"./vendor-1770493083576-DMjXTqd7.js";import"./qr-scanner-1770493083576-B_vB3SDT.js";import"./zustand-1770493083576-wNUYBKDB.js";const le={admin:"Администратор",manager:"Менеджер",department_head:"Глава отдела",executor:"Исполнитель"},ne={admin:"bg-red-100 text-red-700",manager:"bg-purple-100 text-purple-700",department_head:"bg-blue-100 text-blue-700",executor:"bg-green-100 text-green-700"},Ge={plumber:e.jsx(Qe,{className:"w-4 h-4"}),electrician:e.jsx(qe,{className:"w-4 h-4"}),elevator:e.jsx(We,{className:"w-4 h-4"}),intercom:e.jsx(Ue,{className:"w-4 h-4"}),cleaning:e.jsx(Ze,{className:"w-4 h-4"}),security:e.jsx(Re,{className:"w-4 h-4"}),carpenter:e.jsx(He,{className:"w-4 h-4"}),boiler:e.jsx(Be,{className:"w-4 h-4"}),ac:e.jsx($e,{className:"w-4 h-4"}),courier:e.jsx(Xe,{className:"w-4 h-4"}),other:e.jsx(T,{className:"w-4 h-4"})},Je={plumber:"bg-blue-100 text-blue-700",electrician:"bg-yellow-100 text-yellow-700",elevator:"bg-gray-100 text-gray-700",intercom:"bg-purple-100 text-purple-700",cleaning:"bg-pink-100 text-pink-700",security:"bg-red-100 text-red-700",carpenter:"bg-amber-100 text-amber-700",boiler:"bg-orange-100 text-orange-700",ac:"bg-cyan-100 text-cyan-700",courier:"bg-green-100 text-green-700",other:"bg-gray-100 text-gray-700"};function as(){const[f,ie]=i.useState([]),[N,re]=i.useState([]),[p,ce]=i.useState([]),[u,de]=i.useState([]),[oe,k]=i.useState(!0),[X,$]=i.useState(null),[l,v]=i.useState(null),[B,b]=i.useState(!1),[z,P]=i.useState(!1),[y,g]=i.useState(null),[w,H]=i.useState(null),[D,xe]=i.useState(""),[I,me]=i.useState("all"),[R,he]=i.useState({admins:!0,managers:!0,departmentHeads:!0,executors:!0}),[r,o]=i.useState({name:"",phone:"",login:"",password:"",specialization:""}),[pe,Z]=i.useState(!1),[ue,C]=i.useState(!1),[t,d]=i.useState({name:"",phone:"",login:"",password:"",role:"executor",specialization:""}),[M,U]=i.useState(!1),[W,x]=i.useState(null),m=async()=>{k(!0),$(null);try{const s=await j.getAll();ie(s.admins||[]),re(s.managers||[]),ce(s.departmentHeads||[]),de(s.executors||[])}catch(s){$(s.message||"Ошибка загрузки данных")}finally{k(!1)}};i.useEffect(()=>{m()},[]);const ge=async s=>{v(s),o({name:s.name,phone:s.phone,login:s.login,password:"",specialization:s.specialization||""}),b(!1),P(!1),Z(!0);try{const a=await j.getById(s.id);if(a.user){const n={...s,...a.user};v(n),o({name:n.name,phone:n.phone,login:n.login,password:"",specialization:n.specialization||""})}}catch{}finally{Z(!1)}},q=()=>{v(null),b(!1),P(!1)},F=(s,a)=>{navigator.clipboard.writeText(s),g(a),setTimeout(()=>g(null),2e3)},je=async()=>{if(l)try{const s={};if(r.name!==l.name&&(s.name=r.name),r.phone!==l.phone&&(s.phone=r.phone),r.login!==l.login&&(s.login=r.login),r.password&&(s.password=r.password),r.specialization!==l.specialization&&(s.specialization=r.specialization),Object.keys(s).length>0){const a=await j.update(l.id,s);await m(),a.user&&v({...l,...a.user})}b(!1),o(a=>({...a,password:""}))}catch(s){alert("Ошибка сохранения: "+s.message)}},Q=()=>{const s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let a="";for(let n=0;n<8;n++)a+=s.charAt(Math.floor(Math.random()*s.length));return a},fe=async()=>{if(x(null),!t.name.trim()){x("Введите ФИО");return}if(!t.login.trim()){x("Введите логин");return}if(!t.password.trim()){x("Введите пароль");return}if((t.role==="executor"||t.role==="department_head")&&!t.specialization){x("Выберите специализацию");return}U(!0);try{const s=await j.create({login:t.login,password:t.password,name:t.name,phone:t.phone,role:t.role,specialization:t.specialization||void 0});H({login:t.login,password:s.user?.password||t.password}),d({name:"",phone:"",login:"",password:"",role:"executor",specialization:""}),C(!1),await m()}catch(s){x(s.message||"Ошибка создания сотрудника")}finally{U(!1)}},Ne=(s="executor")=>{d({name:"",phone:"",login:"",password:Q(),role:s,specialization:""}),x(null),C(!0)},ve=async s=>{if(confirm(`Удалить сотрудника "${s.name}"? Это действие необратимо.`))try{await j.delete(s.id),l?.id===s.id&&v(null),await m()}catch(a){alert("Ошибка удаления: "+a.message)}},be=async()=>{const s=[...N.filter(a=>!a.password),...p.filter(a=>!a.password),...u.filter(a=>!a.password)];if(s.length===0){alert("Все сотрудники уже имеют пароли");return}if(confirm(`Сбросить пароли для ${s.length} сотрудников без паролей?

Это сгенерирует новые пароли для всех сотрудников, у которых не отображается пароль.`))try{k(!0);const a=await j.resetAllPasswords();if(a.updated>0){const n=a.staff.map(c=>`${c.name}: ${c.login} / ${c.password}`).join(`
`);alert(`Обновлено ${a.updated} сотрудников:

${n}`)}else alert(a.message);await m()}catch(a){alert("Ошибка сброса паролей: "+a.message)}finally{k(!1)}},ye=s=>{he(a=>({...a,[s]:!a[s]}))},A=s=>{let a=s;if(I!=="all"&&(a=a.filter(n=>n.specialization===I)),D){const n=D.toLowerCase();a=a.filter(c=>c.name.toLowerCase().includes(n)||c.phone.includes(n)||c.login.toLowerCase().includes(n)||c.specialization&&_[c.specialization]?.toLowerCase().includes(n))}return a},we=[...new Set([...p.map(s=>s.specialization).filter(Boolean),...u.map(s=>s.specialization).filter(Boolean)])],G=A(f),Ce=A(N),Se=A(p),ke=A(u),J=s=>{switch(s){case"available":return e.jsx("span",{className:"badge badge-done text-xs",children:"Доступен"});case"busy":return e.jsx("span",{className:"badge badge-progress text-xs",children:"Занят"});case"offline":return e.jsx("span",{className:"badge bg-gray-100 text-gray-600 text-xs",children:"Не в сети"});default:return null}},ze=s=>e.jsxs("div",{className:"glass-card p-4 hover:shadow-lg transition-shadow cursor-pointer relative group",onClick:()=>ge(s),children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),ve(s)},className:"absolute top-2 right-2 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg opacity-0 group-hover:opacity-100 transition-all",title:"Удалить сотрудника",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-start justify-between mb-3 pr-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg font-medium ${s.specialization?Je[s.specialization]:"bg-primary-100 text-primary-700"}`,children:s.specialization?Ge[s.specialization]:s.name.split(" ").map(a=>a[0]).join("").slice(0,2)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),s.specialization&&e.jsx("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:_[s.specialization]||s.specialization})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ne[s.role]}`,children:le[s.role]}),J(s.status)]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),s.phone]}),(s.role==="executor"||s.role==="department_head")&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"w-4 h-4 text-amber-400"}),s.avg_rating||0]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-4 h-4 text-green-500"}),s.completed_count||0," выполнено"]}),s.active_count?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4 text-blue-500"}),s.active_count," активных"]}):null]})]})]},s.id),L=(s,a,n,c)=>e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("button",{className:"w-full p-4 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors",onClick:()=>ye(c),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a,e.jsx("h2",{className:"text-lg font-semibold",children:s}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-gray-200 text-gray-700 text-sm",children:n.length})]}),R[c]?e.jsx(Fe,{className:"w-5 h-5 text-gray-500"}):e.jsx(Oe,{className:"w-5 h-5 text-gray-500"})]}),R[c]&&e.jsx("div",{className:"p-4",children:n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Нет сотрудников"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(ze)})})]});return oe?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(O,{className:"w-8 h-8 animate-spin text-primary-500"})}):X?e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:X}),e.jsx("button",{onClick:m,className:"btn-primary",children:"Повторить"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Персонал"}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Всего: ",f.length+N.length+p.length+u.length," сотрудников"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Поиск...",value:D,onChange:s=>xe(s.target.value),className:"pl-10 pr-4 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsxs("select",{value:I,onChange:s=>me(s.target.value),className:"pl-10 pr-8 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-500 focus:border-transparent appearance-none bg-white",children:[e.jsx("option",{value:"all",children:"Все специализации"}),we.map(s=>e.jsx("option",{value:s,children:_[s]},s))]})]}),e.jsx("button",{onClick:m,className:"btn-secondary p-2",title:"Обновить",children:e.jsx(K,{className:"w-5 h-5"})}),[...f,...N,...p,...u].some(s=>!s.password)&&e.jsxs("button",{onClick:be,className:"btn-secondary flex items-center gap-2 text-orange-600 hover:bg-orange-50",title:"Сбросить пароли для сотрудников без паролей",children:[e.jsx(Ee,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Сбросить пароли"})]}),e.jsxs("button",{onClick:()=>Ne("executor"),className:"btn-primary flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Добавить сотрудника"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[f.length>0&&e.jsx("div",{className:"glass-card p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:e.jsx(E,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Администраторов"})]})]})}),e.jsx("div",{className:"glass-card p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(E,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Менеджеров"})]})]})}),e.jsx("div",{className:"glass-card p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(Y,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Глав отделов"})]})]})}),e.jsx("div",{className:"glass-card p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(T,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Исполнителей"})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[G.length>0&&L("Администраторы",e.jsx(E,{className:"w-5 h-5 text-red-500"}),G,"admins"),L("Менеджеры",e.jsx(E,{className:"w-5 h-5 text-purple-500"}),Ce,"managers"),L("Главы отделов",e.jsx(Y,{className:"w-5 h-5 text-blue-500"}),Se,"departmentHeads"),L("Исполнители",e.jsx(T,{className:"w-5 h-5 text-green-500"}),ke,"executors")]}),ue&&e.jsx("div",{className:"modal-backdrop",onClick:()=>C(!1),children:e.jsxs("div",{className:"modal-content p-6 w-full max-w-lg mx-4",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Добавить сотрудника"}),e.jsx("button",{onClick:()=>C(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ee,{className:"w-5 h-5"})})]}),W&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-xl mb-4 text-sm",children:W}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Роль *"}),e.jsxs("select",{value:t.role,onChange:s=>d({...t,role:s.target.value}),className:"input-field",children:[e.jsx("option",{value:"executor",children:"Исполнитель"}),e.jsx("option",{value:"department_head",children:"Глава отдела"}),e.jsx("option",{value:"manager",children:"Менеджер"}),e.jsx("option",{value:"admin",children:"Администратор"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ФИО *"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>d({...t,name:s.target.value}),className:"input-field",placeholder:"Иванов Иван Иванович"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Телефон"}),e.jsx("input",{type:"text",value:t.phone,onChange:s=>d({...t,phone:s.target.value}),className:"input-field",placeholder:"+998 XX XXX XX XX"})]}),(t.role==="executor"||t.role==="department_head")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Специализация *"}),e.jsxs("select",{value:t.specialization,onChange:s=>d({...t,specialization:s.target.value}),className:"input-field",children:[e.jsx("option",{value:"",children:"Выберите специализацию"}),e.jsx("option",{value:"plumber",children:"Сантехник"}),e.jsx("option",{value:"electrician",children:"Электрик"}),e.jsx("option",{value:"elevator",children:"Лифтёр"}),e.jsx("option",{value:"intercom",children:"Домофон"}),e.jsx("option",{value:"cleaning",children:"Уборщица"}),e.jsx("option",{value:"security",children:"Охранник"}),e.jsx("option",{value:"carpenter",children:"Столяр"}),e.jsx("option",{value:"boiler",children:"Котельщик"}),e.jsx("option",{value:"ac",children:"Кондиционерщик"}),e.jsx("option",{value:"courier",children:"Курьер"}),e.jsx("option",{value:"other",children:"Другое"})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Данные для входа"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Логин *"}),e.jsx("input",{type:"text",value:t.login,onChange:s=>d({...t,login:s.target.value}),className:"input-field",placeholder:"ivanov"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Пароль *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t.password,onChange:s=>d({...t,password:s.target.value}),className:"input-field flex-1"}),e.jsx("button",{type:"button",onClick:()=>d({...t,password:Q()}),className:"btn-secondary px-3",title:"Сгенерировать пароль",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>F(t.password,"addPassword"),className:"btn-secondary px-3",title:"Копировать пароль",children:y==="addPassword"?e.jsx(h,{className:"w-4 h-4 text-green-500"}):e.jsx(S,{className:"w-4 h-4"})})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>C(!1),className:"btn-secondary flex-1",disabled:M,children:"Отмена"}),e.jsxs("button",{onClick:fe,disabled:M,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[M?e.jsx(O,{className:"w-4 h-4 animate-spin"}):e.jsx(V,{className:"w-4 h-4"}),"Добавить"]})]})]})}),l&&e.jsx("div",{className:"modal-backdrop",onClick:q,children:e.jsxs("div",{className:"modal-content p-6 w-full max-w-lg mx-4",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center text-2xl font-medium text-primary-700",children:l.name.split(" ").map(s=>s[0]).join("").slice(0,2)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:l.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ne[l.role]}`,children:le[l.role]}),l.specialization&&e.jsx("span",{className:"text-sm text-gray-500",children:_[l.specialization]})]}),J(l.status)]})]}),e.jsx("button",{onClick:q,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ee,{className:"w-5 h-5"})})]}),l.role==="executor"&&e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-amber-50 rounded-xl p-3 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-amber-600 mb-1",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-lg",children:l.avg_rating||0})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Рейтинг"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-3 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-green-600 mb-1",children:[e.jsx(_e,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-lg",children:l.completed_count||0})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Выполнено"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-blue-600 mb-1",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-lg",children:l.active_count||0})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Активных"})]})]}),B?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ФИО"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>o({...r,name:s.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Телефон"}),e.jsx("input",{type:"text",value:r.phone,onChange:s=>o({...r,phone:s.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Логин"}),e.jsx("input",{type:"text",value:r.login,onChange:s=>o({...r,login:s.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Новый пароль"}),e.jsx("input",{type:"text",value:r.password,onChange:s=>o({...r,password:s.target.value}),className:"input-field",placeholder:"Оставьте пустым, чтобы не менять"})]}),(l.role==="executor"||l.role==="department_head")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Специализация"}),e.jsxs("select",{value:r.specialization,onChange:s=>o({...r,specialization:s.target.value}),className:"input-field",children:[e.jsx("option",{value:"",children:"Не указана"}),e.jsx("option",{value:"plumber",children:"Сантехник"}),e.jsx("option",{value:"electrician",children:"Электрик"}),e.jsx("option",{value:"elevator",children:"Лифтёр"}),e.jsx("option",{value:"intercom",children:"Домофон"}),e.jsx("option",{value:"cleaning",children:"Уборщица"}),e.jsx("option",{value:"gardener",children:"Садовник"}),e.jsx("option",{value:"security",children:"Охранник"}),e.jsx("option",{value:"carpenter",children:"Столяр"}),e.jsx("option",{value:"boiler",children:"Котельщик"}),e.jsx("option",{value:"ac",children:"Кондиционерщик"}),e.jsx("option",{value:"other",children:"Другое"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Телефон"})]}),e.jsx("span",{className:"font-medium",children:l.phone})]})}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 space-y-3",children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 mb-2",children:"Данные для входа"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Логин"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded text-sm font-mono",children:l.login}),e.jsx("button",{onClick:()=>F(l.login,"login"),className:"p-1 hover:bg-blue-100 rounded",title:"Копировать",children:y==="login"?e.jsx(h,{className:"w-4 h-4 text-green-500"}):e.jsx(S,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Пароль"}),e.jsx("div",{className:"flex items-center gap-2",children:pe?e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(O,{className:"w-4 h-4 animate-spin"}),"Загрузка..."]}):l.password?e.jsxs(e.Fragment,{children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded text-sm font-mono",children:z?l.password:"••••••••"}),e.jsx("button",{type:"button",onClick:s=>{s.preventDefault(),s.stopPropagation(),P(!z)},className:"p-2 hover:bg-blue-100 active:bg-blue-200 rounded touch-manipulation z-10",title:z?"Скрыть":"Показать",children:z?e.jsx(Pe,{className:"w-4 h-4 text-gray-400"}):e.jsx(De,{className:"w-4 h-4 text-gray-400"})}),e.jsx("button",{onClick:()=>F(l.password||"","password"),className:"p-1 hover:bg-blue-100 rounded",title:"Копировать",children:y==="password"?e.jsx(h,{className:"w-4 h-4 text-green-500"}):e.jsx(S,{className:"w-4 h-4 text-gray-400"})})]}):e.jsx("span",{className:"text-sm text-gray-400 italic",children:'Задайте через "Редактировать"'})})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["Добавлен: ",new Date(l.created_at).toLocaleDateString("ru-RU")]})]}),e.jsx("div",{className:"flex gap-3 mt-6",children:B?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>b(!1),className:"btn-secondary flex-1",children:"Отмена"}),e.jsxs("button",{onClick:je,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Сохранить"]})]}):e.jsxs("button",{onClick:()=>b(!0),className:"btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4"}),"Редактировать"]})})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(h,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Сотрудник создан!"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Сохраните учетные данные для входа"})]}),e.jsxs("div",{className:"space-y-4 bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Логин"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-3 py-1.5 rounded-lg text-sm font-mono font-medium",children:w.login}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(w.login),g("cred-login"),setTimeout(()=>g(null),2e3)},className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors",children:y==="cred-login"?e.jsx(h,{className:"w-4 h-4 text-green-500"}):e.jsx(S,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Пароль"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-3 py-1.5 rounded-lg text-sm font-mono font-medium",children:w.password}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(w.password),g("cred-password"),setTimeout(()=>g(null),2e3)},className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors",children:y==="cred-password"?e.jsx(h,{className:"w-4 h-4 text-green-500"}):e.jsx(S,{className:"w-4 h-4 text-gray-400"})})]})]})]}),e.jsx("div",{className:"mt-6 p-3 bg-yellow-50 rounded-xl border border-yellow-200",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"⚠️ Сохраните эти данные! Пароль показывается только один раз."})}),e.jsx("button",{onClick:()=>H(null),className:"btn-primary w-full mt-6",children:"Готово"})]})})]})}export{as as TeamPage};
//# sourceMappingURL=TeamPage-1770493083576-BY5D1Fe9.js.map
