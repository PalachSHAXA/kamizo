import{r as i,f as g,y as F,j as e,au as J,aW as se,a8 as he,X as te,U as ae,l as ge,B as re,H as pe,a9 as fe,ab as be,J as le,E as ye}from"./react-vendor-1768651145376-Da9nsNcA.js";import{b as je,u as ne,d as Ne,V as $,s as E}from"./index-1768651145376-CL3hhAYk.js";import"./vendor-1768651145376-nZMZRBr7.js";import"./qr-scanner-1768651145376-cr32YHjo.js";import"./zustand-1768651145376-wNUYBKDB.js";const M=[{code:"01",name:"Ташкент",nameUz:"Toshkent"},{code:"10",name:"Ташкентская область",nameUz:"Toshkent viloyati"},{code:"20",name:"Сырдарьинская область",nameUz:"Sirdaryo viloyati"},{code:"25",name:"Джизакская область",nameUz:"Jizzax viloyati"},{code:"30",name:"Самаркандская область",nameUz:"Samarqand viloyati"},{code:"40",name:"Ферганская область",nameUz:"Farg'ona viloyati"},{code:"50",name:"Наманганская область",nameUz:"Namangan viloyati"},{code:"60",name:"Андижанская область",nameUz:"Andijon viloyati"},{code:"70",name:"Кашкадарьинская область",nameUz:"Qashqadaryo viloyati"},{code:"75",name:"Сурхандарьинская область",nameUz:"Surxondaryo viloyati"},{code:"80",name:"Бухарская область",nameUz:"Buxoro viloyati"},{code:"85",name:"Навоийская область",nameUz:"Navoiy viloyati"},{code:"90",name:"Хорезмская область",nameUz:"Xorazm viloyati"},{code:"95",name:"Республика Каракалпакстан",nameUz:"Qoraqalpog'iston Respublikasi"}],ie=({className:a="w-8 h-5 sm:w-12 sm:h-8"})=>e.jsxs("svg",{viewBox:"0 0 30 20",className:a,children:[e.jsx("rect",{width:"30",height:"6.67",fill:"#1EB53A"}),e.jsx("rect",{y:"6.67",width:"30",height:"6.67",fill:"#FFFFFF"}),e.jsx("rect",{y:"13.33",width:"30",height:"6.67",fill:"#0099B5"}),e.jsx("rect",{y:"6.17",width:"30",height:"1",fill:"#CE1126"}),e.jsx("rect",{y:"12.83",width:"30",height:"1",fill:"#CE1126"}),e.jsx("circle",{cx:"8",cy:"3.33",r:"2",fill:"#FFFFFF"}),e.jsx("circle",{cx:"9",cy:"3.33",r:"2",fill:"#0099B5"}),[0,1,2,3,4,5,6,7,8,9,10,11].map(n=>e.jsx("circle",{cx:14+n%4*2.5,cy:1.5+Math.floor(n/4)*2,r:"0.6",fill:"#FFFFFF"},n))]});function ve({value:a,onChange:n,language:m,onSearch:w}){const y=i.useRef(null),u=i.useRef(null),t=i.useRef(null),[k,p]=i.useState(!1),z=r=>{n({...a,region:r}),p(!1),setTimeout(()=>{y.current?.focus()},100)},R=r=>{const x=r.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,1);/^\d$/.test(x)?(n({...a,letters1:"",digits:x}),u.current?.focus()):(n({...a,letters1:x}),x.length===1&&u.current?.focus())},v=r=>{const x=r.target.value.replace(/\D/g,"").slice(0,3);n({...a,digits:x}),x.length===3&&t.current?.focus()},f=r=>{const x=r.target.value.toUpperCase().replace(/[^A-Z]/g,"").slice(0,3);n({...a,letters2:x})},h=(r,x)=>{r.key==="Backspace"&&r.target.value===""&&(x==="letters2"?u.current?.focus():x==="digits"&&y.current?.focus()),r.key==="Enter"&&w&&w()},j=M.find(r=>r.code===a.region),l=a.letters1===""&&a.digits.length>0;return e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"relative bg-white border-[3px] border-black rounded-xl shadow-xl overflow-visible w-full max-w-[380px]",children:e.jsxs("div",{className:"flex items-center h-14 sm:h-20 bg-white rounded-xl",children:[e.jsxs("div",{className:"relative flex items-center justify-center border-r-2 border-black h-full px-2 sm:px-3 bg-gray-50 rounded-l-xl",children:[e.jsx("button",{type:"button",onClick:()=>p(!k),className:"text-2xl sm:text-4xl font-bold text-center hover:text-primary-600 transition-colors cursor-pointer min-w-[36px] sm:min-w-[50px]",children:a.region||e.jsx("span",{className:"text-gray-300",children:"01"})}),k&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[89]",onClick:()=>p(!1)}),e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-2xl z-50 max-h-72 overflow-y-auto min-w-[280px]",children:M.map(r=>e.jsxs("button",{type:"button",onClick:()=>z(r.code),className:`w-full px-4 py-3 text-left hover:bg-primary-50 flex items-center gap-4 transition-colors first:rounded-t-xl last:rounded-b-xl ${a.region===r.code?"bg-primary-100 text-primary-700":""}`,children:[e.jsx("span",{className:"text-2xl font-bold text-gray-700 w-10",children:r.code}),e.jsx("span",{className:"text-sm text-gray-600",children:m==="ru"?r.name:r.nameUz})]},r.code))})]})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center px-1 sm:px-2 gap-0.5 sm:gap-1",children:[e.jsx("input",{ref:y,type:"text",value:a.letters1,onChange:R,onKeyDown:r=>h(r,"letters1"),className:"w-6 sm:w-10 text-2xl sm:text-4xl font-bold text-center outline-none bg-transparent uppercase",placeholder:"A",maxLength:1}),e.jsx("input",{ref:u,type:"text",inputMode:"numeric",value:a.digits,onChange:v,onKeyDown:r=>h(r,"digits"),className:"w-14 sm:w-20 text-2xl sm:text-4xl font-bold text-center outline-none bg-transparent tracking-wider",placeholder:"123",maxLength:3}),e.jsx("input",{ref:t,type:"text",value:a.letters2,onChange:f,onKeyDown:r=>h(r,"letters2"),className:"w-12 sm:w-20 text-2xl sm:text-4xl font-bold text-center outline-none bg-transparent uppercase",placeholder:l?"ABC":"BC",maxLength:3})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center border-l-2 border-black h-full px-1.5 sm:px-3 bg-gray-50 rounded-r-xl",children:[e.jsx(ie,{}),e.jsx("span",{className:"text-xs sm:text-sm font-bold mt-0.5",children:"UZ"})]})]})}),j&&e.jsx("p",{className:"text-sm text-primary-600 mt-3 font-medium",children:m==="ru"?j.name:j.nameUz}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:m==="ru"?"Введите любую часть номера для поиска":"Qidirish uchun raqamning istalgan qismini kiriting"})]})}function we({ownerType:a,value:n,onChange:m,language:w}){const y=i.useRef(null),u=i.useRef(null),t=i.useRef(null),[k,p]=i.useState(!1),z=l=>{m({...n,region:l}),p(!1),setTimeout(()=>{a==="legal_entity"||a==="service"?u.current?.focus():y.current?.focus()},100)},R=l=>{const r=l.target.value.toUpperCase().replace(/[^A-Z]/g,"").slice(0,1);m({...n,letters1:r}),r.length===1&&u.current?.focus()},v=l=>{const r=l.target.value.replace(/\D/g,"").slice(0,3);m({...n,digits:r}),r.length===3&&t.current?.focus()},f=l=>{const r=a==="legal_entity"||a==="service"?3:2,x=l.target.value.toUpperCase().replace(/[^A-Z]/g,"").slice(0,r);m({...n,letters2:x})},h=(l,r)=>{l.key==="Backspace"&&l.target.value===""&&(r==="letters2"?u.current?.focus():r==="digits"&&a!=="legal_entity"&&a!=="service"&&y.current?.focus())},j=M.find(l=>l.code===n.region);return e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"relative bg-white border-[3px] border-black rounded-xl shadow-xl overflow-visible w-full max-w-[420px]",children:e.jsxs("div",{className:"flex items-center h-16 sm:h-24 bg-white rounded-xl",children:[e.jsxs("div",{className:"relative flex items-center justify-center border-r-2 border-black h-full px-2 sm:px-4 bg-gray-50 rounded-l-xl",children:[e.jsx("button",{type:"button",onClick:()=>p(!k),className:"text-3xl sm:text-5xl font-bold text-center hover:text-primary-600 transition-colors cursor-pointer min-w-[40px] sm:min-w-[60px]",children:n.region||e.jsx("span",{className:"text-gray-300",children:"01"})}),k&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[100]",onClick:()=>p(!1)}),e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-2xl z-[101] max-h-72 overflow-y-auto min-w-[280px]",children:M.map(l=>e.jsxs("button",{type:"button",onClick:()=>z(l.code),className:`w-full px-4 py-3 text-left hover:bg-primary-50 flex items-center gap-4 transition-colors first:rounded-t-xl last:rounded-b-xl ${n.region===l.code?"bg-primary-100 text-primary-700":""}`,children:[e.jsx("span",{className:"text-2xl font-bold text-gray-700 w-10",children:l.code}),e.jsx("span",{className:"text-sm text-gray-600",children:w==="ru"?l.name:l.nameUz})]},l.code))})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-1 sm:px-4",children:a!=="legal_entity"&&a!=="service"?e.jsxs("div",{className:"flex items-center gap-1 sm:gap-3",children:[e.jsx("input",{ref:y,type:"text",value:n.letters1,onChange:R,onKeyDown:l=>h(l,"letters1"),className:"w-8 sm:w-14 text-3xl sm:text-5xl font-bold text-center outline-none bg-transparent uppercase",placeholder:"A",maxLength:1}),e.jsx("input",{ref:u,type:"text",inputMode:"numeric",value:n.digits,onChange:v,onKeyDown:l=>h(l,"digits"),className:"w-16 sm:w-28 text-3xl sm:text-5xl font-bold text-center outline-none bg-transparent tracking-wider",placeholder:"123",maxLength:3}),e.jsx("input",{ref:t,type:"text",value:n.letters2,onChange:f,onKeyDown:l=>h(l,"letters2"),className:"w-12 sm:w-20 text-3xl sm:text-5xl font-bold text-center outline-none bg-transparent uppercase",placeholder:"EA",maxLength:2})]}):e.jsxs("div",{className:"flex items-center gap-1 sm:gap-3",children:[e.jsx("input",{ref:u,type:"text",inputMode:"numeric",value:n.digits,onChange:v,onKeyDown:l=>h(l,"digits"),className:"w-16 sm:w-28 text-3xl sm:text-5xl font-bold text-center outline-none bg-transparent tracking-wider",placeholder:"123",maxLength:3}),e.jsx("input",{ref:t,type:"text",value:n.letters2,onChange:f,onKeyDown:l=>h(l,"letters2"),className:"w-16 sm:w-28 text-3xl sm:text-5xl font-bold text-center outline-none bg-transparent uppercase",placeholder:"EAA",maxLength:3})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center border-l-2 border-black h-full px-1.5 sm:px-3 bg-gray-50 rounded-r-xl",children:[e.jsx(ie,{}),e.jsx("span",{className:"text-xs sm:text-base font-bold mt-0.5 sm:mt-1",children:"UZ"})]})]})}),j&&e.jsx("p",{className:"text-sm text-primary-600 mt-3 font-medium",children:w==="ru"?j.name:j.nameUz}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:w==="ru"?"Нажмите на код региона для выбора":"Viloyat kodini tanlash uchun bosing"})]})}function ke(a,n){const m=a.toUpperCase().replace(/[^A-Z0-9]/g,"");return n==="legal_entity"||n==="service"?{region:m.slice(0,2),letters1:"",digits:m.slice(2,5),letters2:m.slice(5,8)}:{region:m.slice(0,2),letters1:m.slice(2,3),digits:m.slice(3,6),letters2:m.slice(6,8)}}function Ce(a,n){return n==="legal_entity"||n==="service"?`${a.region}${a.digits}${a.letters2}`.toUpperCase():`${a.region}${a.letters1}${a.digits}${a.letters2}`.toUpperCase()}function Se(a,n){const m=parseInt(a.region);return isNaN(m)||m<1||m>99?!1:n==="legal_entity"||n==="service"?a.digits.length===3&&a.letters2.length===3:a.letters1.length===1&&a.digits.length===3&&a.letters2.length===2}function qe(){const{user:a}=je(),{addVehicle:n,updateVehicle:m,deleteVehicle:w,fetchVehicles:y,searchVehiclesByPlate:u}=ne(),{language:t}=Ne(),k=i.useRef(!1);i.useEffect(()=>{!k.current&&a&&(k.current=!0,y())},[y,a]);const[p,z]=i.useState("my_vehicles"),[R,v]=i.useState(!1),[f,h]=i.useState(null),[j,l]=i.useState(null),[r,x]=i.useState(null),[b,K]=i.useState({region:"",letters1:"",digits:"",letters2:""}),[I,D]=i.useState(null),[P,Z]=i.useState([]),[W,X]=i.useState(!1),[C,V]=i.useState("individual"),[Q,L]=i.useState({region:"",letters1:"",digits:"",letters2:""}),[o,N]=i.useState({brand:"",model:"",color:"",year:"",type:"car",companyName:"",parkingSpot:"",notes:""}),G=ne(s=>s.vehicles),S=i.useMemo(()=>a?G.filter(s=>s.ownerId===a.id):[],[G,a]),T=()=>{N({brand:"",model:"",color:"",year:"",type:"car",companyName:"",parkingSpot:"",notes:""}),L({region:"",letters1:"",digits:"",letters2:""}),V("individual"),h(null),x(null)},q=s=>{if(s){h(s);const c=s.ownerType||"individual";V(c),L(ke(s.plateNumber,c)),N({brand:s.brand,model:s.model,color:s.color,year:s.year?.toString()||"",type:s.type,companyName:s.companyName||"",parkingSpot:s.parkingSpot||"",notes:s.notes||""})}else T();v(!0)};i.useEffect(()=>{f||L(s=>({region:s.region,letters1:"",digits:"",letters2:""}))},[C,f]);const O=i.useMemo(()=>{const{region:s,letters1:c,digits:U,letters2:H}=b;return`${s}${c}${U}${H}`.toUpperCase()},[b]),Y=i.useMemo(()=>{const{region:s,letters1:c,digits:U,letters2:H}=b;return!!(s||c||U||H)},[b]);i.useEffect(()=>{if(!Y||O.length<2){Z([]);return}const s=setTimeout(async()=>{X(!0);try{const c=await u(O);Z(c)}catch{Z([])}finally{X(!1)}},300);return()=>clearTimeout(s)},[O,Y,u]);const d=i.useMemo(()=>I||(P.length===1?P[0]:null),[P,I]),A=P,B=Y,ee=s=>{if(s.preventDefault(),!a)return;if(!Se(Q,C)){x(t==="ru"?"Заполните все поля номера авто":"Avto raqamining barcha maydonlarini to'ldiring");return}const c=Ce(Q,C),U={ownerId:a.id,ownerName:a.name,ownerPhone:a.phone,apartment:a.apartment||"",address:a.address||"ул. Мустакиллик, 15",plateNumber:c,brand:o.brand,model:o.model,color:o.color,year:o.year?parseInt(o.year):void 0,type:o.type,ownerType:C,companyName:C!=="individual"?o.companyName:void 0,parkingSpot:o.parkingSpot||void 0,notes:o.notes||void 0};f?m(f.id,U):n(U),v(!1),T()},ce=s=>{w(s),l(null)},oe=s=>{D(s)},de=s=>new Date(s).toLocaleDateString(t==="ru"?"ru-RU":"uz-UZ",{day:"2-digit",month:"short",year:"numeric"}),_=s=>{const c=s.toUpperCase().replace(/[^A-Z0-9]/g,"");return c.length===8&&/^\d{2}[A-Z]\d{3}[A-Z]{2}$/.test(c)?`${c.slice(0,2)} ${c.slice(2,3)} ${c.slice(3,6)} ${c.slice(6,8)}`:c.length===8&&/^\d{5}[A-Z]{3}$/.test(c)?`${c.slice(0,2)} ${c.slice(2,5)} ${c.slice(5,8)}`:s},me=s=>{switch(s){case"individual":return e.jsx(ae,{className:"w-4 h-4"});case"legal_entity":return e.jsx(re,{className:"w-4 h-4"});case"service":return e.jsx(g,{className:"w-4 h-4"})}},xe=[{id:"my_vehicles",label:t==="ru"?"Мои авто":"Avtomobillarim",icon:g,count:S.length},{id:"search",label:t==="ru"?"Поиск":"Qidirish",icon:F}],ue=["individual","legal_entity"];return e.jsxs("div",{className:"space-y-4 md:space-y-6 pb-20 md:pb-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-xl md:text-2xl font-bold flex items-center gap-3",children:[e.jsx(g,{className:"w-7 h-7 text-blue-500"}),t==="ru"?"Мои автомобили":"Mening avtomobillarim"]}),e.jsxs("button",{onClick:()=>q(),className:"btn-primary flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:t==="ru"?"Добавить":"Qo'shish"})]})]}),e.jsx("div",{className:"glass-card p-1.5 md:p-1 overflow-x-auto scrollbar-hide -mx-4 px-4 md:mx-0 md:px-0",children:e.jsx("div",{className:"flex gap-1 md:inline-flex min-w-max",children:xe.map(s=>e.jsxs("button",{onClick:()=>{z(s.id),s.id==="my_vehicles"&&(K({region:"",letters1:"",digits:"",letters2:""}),D(null))},className:`px-4 py-3 md:py-2 rounded-xl font-medium transition-all flex items-center gap-2 whitespace-nowrap touch-manipulation ${p===s.id?"bg-primary-500 text-gray-900 shadow-md":"hover:bg-white/30 active:bg-white/50 text-gray-600"}`,children:[e.jsx(s.icon,{className:"w-5 h-5 md:w-4 md:h-4"}),e.jsx("span",{className:"text-sm md:text-base",children:s.label}),s.count!==void 0&&s.count>0&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs text-white font-medium bg-blue-500",children:s.count})]},s.id))})}),p==="my_vehicles"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"glass-card p-4 bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-blue-700",children:t==="ru"?"Зарегистрируйте свои автомобили для быстрой идентификации на территории комплекса. Это поможет охране и управляющей компании.":"Avtomobillaringizni majmua hududida tez aniqlash uchun ro'yxatdan o'tkazing. Bu qo'riqlash va boshqaruv kompaniyasiga yordam beradi."})]})}),S.length===0?e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(g,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:t==="ru"?"Нет зарегистрированных авто":"Ro'yxatdan o'tgan avtomobillar yo'q"}),e.jsx("p",{className:"text-gray-400 mb-4",children:t==="ru"?"Добавьте свой автомобиль, нажав кнопку выше":"Yuqoridagi tugmani bosib avtomobilingizni qo'shing"}),e.jsxs("button",{onClick:()=>q(),className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),t==="ru"?"Добавить первый авто":"Birinchi avtoni qo'shish"]})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:S.map(s=>e.jsxs("div",{className:"glass-card p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(g,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 tracking-wider",children:_(s.plateNumber)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.brand," ",s.model]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>q(s),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(se,{className:"w-4 h-4 text-gray-500"})}),e.jsx("button",{onClick:()=>l(s.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(he,{className:"w-4 h-4 text-red-500"})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[s.ownerType&&e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${s.ownerType==="individual"?"bg-blue-100 text-blue-700":s.ownerType==="legal_entity"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:[me(s.ownerType),t==="ru"?$[s.ownerType].label:$[s.ownerType].labelUz]})}),s.companyName&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-500",children:[t==="ru"?"Компания":"Kompaniya",":"]}),e.jsx("span",{className:"text-gray-900 font-medium",children:s.companyName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-500",children:[t==="ru"?"Тип":"Turi",":"]}),e.jsx("span",{className:"text-gray-900",children:t==="ru"?E[s.type].label:E[s.type].labelUz})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-500",children:[t==="ru"?"Цвет":"Rangi",":"]}),e.jsx("span",{className:"text-gray-900",children:s.color})]}),s.year&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-500",children:[t==="ru"?"Год":"Yili",":"]}),e.jsx("span",{className:"text-gray-900",children:s.year})]}),s.parkingSpot&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-500",children:[t==="ru"?"Парковка":"Avtoturargoh",":"]}),e.jsx("span",{className:"text-gray-900",children:s.parkingSpot})]})]})]},s.id))})]}),p==="search"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-blue-500"}),t==="ru"?"Поиск автомобиля":"Avtomobil qidirish"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[t==="ru"?"Всего:":"Jami:"," ",S.length]})]}),e.jsx("div",{className:"glass-card p-6 relative z-10 overflow-visible",children:e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsx(ve,{value:b,onChange:K,language:t,onSearch:()=>{A.length===1&&D(A[0])}}),(b.region||b.letters1||b.digits||b.letters2)&&e.jsxs("button",{onClick:()=>{K({region:"",letters1:"",digits:"",letters2:""}),D(null)},className:"mt-4 px-4 py-2 text-sm text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),t==="ru"?"Очистить поиск":"Qidiruvni tozalash"]})]})}),B&&A.length>1&&!d&&e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("h3",{className:"font-medium text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-primary-500"}),t==="ru"?"Найденные автомобили":"Topilgan avtomobillar",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-primary-100 text-primary-600 text-sm",children:A.length})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:A.map(s=>e.jsxs("button",{type:"button",className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-primary-50 cursor-pointer transition-colors border-2 border-transparent hover:border-primary-300 active:scale-[0.99] text-left",onClick:()=>D(s),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 tracking-wider",children:_(s.plateNumber)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.brand," ",s.model," • ",s.color]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-primary-500",children:[e.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:t==="ru"?"Подробнее":"Batafsil"}),e.jsx(F,{className:"w-4 h-4"})]})]},s.id))})]}),d&&e.jsxs("div",{className:"glass-card p-6 border-2 border-green-200 bg-green-50/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(g,{className:"w-4 h-4 text-green-600"})}),e.jsx("h2",{className:"text-lg font-bold text-green-700",children:t==="ru"?"Автомобиль найден!":"Avtomobil topildi!"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(g,{className:"w-8 h-8 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 tracking-wider",children:_(d.plateNumber)}),e.jsxs("p",{className:"text-gray-500",children:[d.brand," ",d.model," • ",d.color,d.year&&` • ${d.year}`]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[d.ownerName&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:t==="ru"?"Владелец":"Egasi"}),e.jsx("p",{className:"font-medium",children:d.ownerName})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ge,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:t==="ru"?"Телефон":"Telefon"}),d.ownerPhone?e.jsx("a",{href:`tel:${d.ownerPhone}`,className:"font-medium text-primary-600 hover:underline",children:d.ownerPhone}):e.jsx("p",{className:"font-medium text-gray-400",children:t==="ru"?"Не указан":"Ko'rsatilmagan"})]})]}),d.apartment&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:t==="ru"?"Квартира":"Kvartira"}),e.jsxs("p",{className:"font-medium",children:[t==="ru"?"Кв.":""," ",d.apartment]})]})]}),d.address&&d.address!=="Служебный автомобиль"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:t==="ru"?"Адрес":"Manzil"}),e.jsx("p",{className:"font-medium",children:d.address})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:t==="ru"?"Тип транспорта":"Transport turi"}),e.jsx("p",{className:"font-medium",children:t==="ru"?E[d.type].label:E[d.type].labelUz})]})]}),d.parkingSpot&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:t==="ru"?"Парковочное место":"Avtoturargoh joyi"}),e.jsx("p",{className:"font-medium",children:d.parkingSpot})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:t==="ru"?"Дата регистрации":"Ro'yxatga olingan sana"}),e.jsx("p",{className:"font-medium",children:de(d.createdAt)})]})]})]})]})]}),a&&d.ownerId===a.id&&e.jsxs("button",{onClick:()=>q(d),className:"w-full py-3 px-4 rounded-xl font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),t==="ru"?"Редактировать":"Tahrirlash"]})]}),W&&e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:t==="ru"?"Поиск...":"Qidirilmoqda..."})]}),!W&&B&&A.length===0&&(b.region||b.digits)&&e.jsxs("div",{className:"glass-card p-8 text-center border-2 border-amber-200 bg-amber-50/50",children:[e.jsx(le,{className:"w-12 h-12 mx-auto text-amber-400 mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-amber-700 mb-2",children:t==="ru"?"Автомобиль не найден":"Avtomobil topilmadi"}),e.jsx("p",{className:"text-amber-600 text-sm",children:t==="ru"?"По введённым данным автомобиль не найден в системе":"Kiritilgan ma'lumotlar bo'yicha avtomobil topilmadi"})]}),S.length>0&&!B&&e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"font-medium text-gray-700 mb-3",children:t==="ru"?"Ваши автомобили":"Sizning avtomobillaringiz"}),e.jsx("div",{className:"space-y-2",children:S.map(s=>e.jsxs("button",{type:"button",className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-primary-50 cursor-pointer transition-colors border-2 border-transparent hover:border-primary-300 active:scale-[0.99] text-left",onClick:()=>oe(s),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 tracking-wider",children:_(s.plateNumber)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.brand," ",s.model]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-primary-500",children:[e.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:t==="ru"?"Подробнее":"Batafsil"}),e.jsx(F,{className:"w-4 h-4"})]})]},s.id))})]}),S.length===0&&!B&&e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(g,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:t==="ru"?"Нет автомобилей для поиска":"Qidirish uchun avtomobillar yo'q"}),e.jsx("p",{className:"text-gray-400 mb-4",children:t==="ru"?"Сначала добавьте свои автомобили":"Avval avtomobillaringizni qo'shing"}),e.jsxs("button",{onClick:()=>{z("my_vehicles"),q()},className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),t==="ru"?"Добавить авто":"Avto qo'shish"]})]})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 md:flex md:items-center md:justify-center",children:e.jsxs("div",{className:"h-full md:h-auto w-full md:max-w-2xl md:mx-4 bg-white md:rounded-2xl overflow-hidden md:max-h-[85vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-white",children:[e.jsx("h2",{className:"text-lg font-bold",children:f?t==="ru"?"Редактировать авто":"Avtoni tahrirlash":t==="ru"?"Добавить авто":"Avto qo'shish"}),e.jsx("button",{onClick:()=>{v(!1),T()},className:"p-3 hover:bg-gray-100 active:bg-gray-200 rounded-xl transition-colors touch-manipulation",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:ee,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t==="ru"?"Тип владельца":"Egasi turi"}),e.jsx("div",{className:"flex gap-2",children:ue.map(s=>e.jsxs("button",{type:"button",onClick:()=>V(s),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl border-2 transition-all ${C===s?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("span",{className:"text-base",children:$[s].icon}),e.jsx("span",{className:"font-medium text-sm",children:t==="ru"?$[s].label:$[s].labelUz})]},s))})]}),C!=="individual"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t==="ru"?"Название компании":"Kompaniya nomi"}),e.jsx("input",{type:"text",value:o.companyName,onChange:s=>N({...o,companyName:s.target.value}),placeholder:t==="ru"?'ООО "Компания"':'"Kompaniya" MChJ',className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-center",children:t==="ru"?"Номер автомобиля":"Avtomobil raqami"}),e.jsx(we,{ownerType:C,value:Q,onChange:s=>{L(s),x(null)},language:t}),r&&e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-2 text-red-500 text-sm",children:[e.jsx(le,{className:"w-4 h-4"}),r]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t==="ru"?"Тип транспорта":"Transport turi"}),e.jsx("select",{value:o.type,onChange:s=>N({...o,type:s.target.value}),className:"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm",required:!0,children:Object.entries(E).map(([s,c])=>e.jsx("option",{value:s,children:t==="ru"?c.label:c.labelUz},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t==="ru"?"Марка":"Markasi"}),e.jsx("input",{type:"text",value:o.brand,onChange:s=>N({...o,brand:s.target.value}),placeholder:"Chevrolet",className:"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t==="ru"?"Модель":"Modeli"}),e.jsx("input",{type:"text",value:o.model,onChange:s=>N({...o,model:s.target.value}),placeholder:"Malibu",className:"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t==="ru"?"Цвет":"Rangi"}),e.jsx("input",{type:"text",value:o.color,onChange:s=>N({...o,color:s.target.value}),placeholder:t==="ru"?"Белый":"Oq",className:"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t==="ru"?"Год":"Yili"}),e.jsx("input",{type:"number",value:o.year,onChange:s=>N({...o,year:s.target.value}),placeholder:"2020",min:"1990",max:new Date().getFullYear(),className:"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t==="ru"?"Парковка":"Avtoturargoh"}),e.jsx("input",{type:"text",value:o.parkingSpot,onChange:s=>N({...o,parkingSpot:s.target.value}),placeholder:"A-15",className:"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm"})]}),e.jsxs("div",{className:"col-span-2 md:col-span-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t==="ru"?"Примечания":"Izohlar"}),e.jsx("input",{type:"text",value:o.notes,onChange:s=>N({...o,notes:s.target.value}),placeholder:t==="ru"?"Дополнительная информация...":"Qo'shimcha ma'lumot...",className:"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary-200 focus:border-primary-400 outline-none text-sm"})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-100 bg-white safe-area-bottom",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{v(!1),T()},className:"flex-1 py-4 px-4 rounded-xl font-medium bg-gray-100 hover:bg-gray-200 active:bg-gray-300 transition-colors touch-manipulation",children:t==="ru"?"Отмена":"Bekor qilish"}),e.jsx("button",{type:"submit",onClick:ee,className:"flex-1 py-4 px-4 rounded-xl font-semibold text-gray-900 bg-gradient-to-r from-primary-400 to-primary-500 hover:from-primary-500 hover:to-primary-600 active:from-primary-600 active:to-primary-700 transition-all touch-manipulation",children:f?t==="ru"?"Сохранить":"Saqlash":t==="ru"?"Добавить":"Qo'shish"})]})})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-red-100 mx-auto mb-4",children:e.jsx(ye,{className:"w-6 h-6 text-red-500"})}),e.jsx("h3",{className:"text-lg font-bold text-center mb-2",children:t==="ru"?"Удалить автомобиль?":"Avtomobilni o'chirish?"}),e.jsx("p",{className:"text-gray-500 text-center text-sm mb-6",children:t==="ru"?"Это действие нельзя отменить":"Bu amalni bekor qilib bo'lmaydi"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>l(null),className:"flex-1 py-3 px-4 rounded-xl font-medium bg-gray-100 hover:bg-gray-200 transition-colors",children:t==="ru"?"Отмена":"Bekor qilish"}),e.jsx("button",{onClick:()=>ce(j),className:"flex-1 py-3 px-4 rounded-xl font-medium text-white bg-red-500 hover:bg-red-600 transition-colors",children:t==="ru"?"Удалить":"O'chirish"})]})]})})]})}export{qe as ResidentVehiclesPage};
//# sourceMappingURL=ResidentVehiclesPage-1768651145376-yadAQZnc.js.map
