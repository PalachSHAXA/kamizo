{"version":3,"file":"SuperAdminDashboard-1770493083576-BmNOze4H.js","sources":["../../src/pages/admin/SuperAdminDashboard.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Building2, Users, DollarSign, Plus, Edit2, Trash2, CheckCircle, XCircle, RefreshCw, FileText, TrendingUp, BarChart3, Upload, X } from 'lucide-react';\nimport { apiRequest } from '../../services/api';\nimport {\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend,\n  ResponsiveContainer, PieChart, Pie, Cell, AreaChart, Area\n} from '../../components/LazyCharts';\n\ninterface Tenant {\n  id: string;\n  name: string;\n  slug: string;\n  url: string;\n  admin_url: string | null;\n  color: string;\n  color_secondary: string;\n  plan: 'basic' | 'pro' | 'enterprise';\n  features: string;\n  logo: string | null;\n  admin_email: string | null;\n  admin_phone: string | null;\n  users_count: number;\n  requests_count: number;\n  votes_count: number;\n  qr_count: number;\n  revenue: number;\n  is_active: number;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface TenantFormData {\n  name: string;\n  slug: string;\n  url: string;\n  admin_url: string;\n  color: string;\n  color_secondary: string;\n  plan: 'basic' | 'pro' | 'enterprise';\n  features: string[];\n  admin_email: string;\n  admin_phone: string;\n  logo: string;\n  director_login: string;\n  director_password: string;\n  director_name: string;\n}\n\ninterface GrowthPoint {\n  period: string;\n  users: number;\n  requests: number;\n  revenue: number;\n  orders: number;\n  buildings: number;\n}\n\ninterface AnalyticsData {\n  totals: {\n    users: number;\n    requests: number;\n    buildings: number;\n    revenue: number;\n    tenants: number;\n  };\n  perTenant: Array<{\n    name: string;\n    slug: string;\n    users_count: number;\n    requests_count: number;\n    buildings_count: number;\n    revenue: number;\n  }>;\n  planDistribution: Array<{ plan: string; count: number }>;\n  featureUsage: Array<{ feature: string; count: number }>;\n  growth: {\n    daily: GrowthPoint[];\n    weekly: GrowthPoint[];\n    monthly: GrowthPoint[];\n  };\n}\n\ntype TabType = 'companies' | 'analytics';\ntype TimePeriod = 'daily' | 'weekly' | 'monthly';\n\nconst INITIAL_FORM_DATA: TenantFormData = {\n  name: '',\n  slug: '',\n  url: 'https://.kamizo.uz',\n  admin_url: 'https://.kamizo.uz/admin',\n  color: '#F97316',\n  color_secondary: '#fb923c',\n  plan: 'basic',\n  features: ['requests', 'votes', 'qr'],\n  admin_email: '',\n  admin_phone: '',\n  logo: '',\n  director_login: '',\n  director_password: '',\n  director_name: '',\n};\n\nconst AVAILABLE_FEATURES = [\n  { value: 'requests', label: 'Заявки' },\n  { value: 'votes', label: 'Голосования' },\n  { value: 'qr', label: 'QR Коды' },\n  { value: 'marketplace', label: 'Маркетплейс' },\n  { value: 'meetings', label: 'Собрания' },\n  { value: 'chat', label: 'Чат' },\n  { value: 'announcements', label: 'Объявления' },\n];\n\nconst PLAN_COLORS: Record<string, string> = {\n  basic: '#9CA3AF',\n  pro: '#3B82F6',\n  enterprise: '#8B5CF6',\n};\n\nconst PLAN_LABELS: Record<string, string> = {\n  basic: 'Basic',\n  pro: 'Pro',\n  enterprise: 'Enterprise',\n};\n\nconst FEATURE_COLORS = ['#6366f1', '#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899'];\n\nconst FEATURE_LABELS: Record<string, string> = {\n  requests: 'Заявки',\n  votes: 'Голосования',\n  qr: 'QR Коды',\n  marketplace: 'Маркетплейс',\n  meetings: 'Собрания',\n  chat: 'Чат',\n  announcements: 'Объявления',\n};\n\nexport function SuperAdminDashboard() {\n  const [tenants, setTenants] = useState<Tenant[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [editingTenant, setEditingTenant] = useState<Tenant | null>(null);\n  const [formData, setFormData] = useState<TenantFormData>(INITIAL_FORM_DATA);\n  const [error, setError] = useState<string>('');\n  const [activeTab, setActiveTab] = useState<TabType>('companies');\n  const [analytics, setAnalytics] = useState<AnalyticsData | null>(null);\n  const [isLoadingAnalytics, setIsLoadingAnalytics] = useState(false);\n  const [timePeriod, setTimePeriod] = useState<TimePeriod>('monthly');\n\n  useEffect(() => {\n    loadTenants();\n  }, []);\n\n  useEffect(() => {\n    if (activeTab === 'analytics' && !analytics) {\n      loadAnalytics();\n    }\n  }, [activeTab]);\n\n  const loadTenants = async () => {\n    setIsLoading(true);\n    setError('');\n    try {\n      const response = await apiRequest<{ tenants: Tenant[] }>('/api/tenants');\n      setTenants(response.tenants);\n    } catch (err: any) {\n      setError(err.message || 'Ошибка загрузки данных');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const loadAnalytics = async () => {\n    setIsLoadingAnalytics(true);\n    try {\n      const response = await apiRequest<{ analytics: AnalyticsData }>('/api/super-admin/analytics');\n      setAnalytics(response.analytics);\n    } catch (err: any) {\n      setError(err.message || 'Ошибка загрузки аналитики');\n    } finally {\n      setIsLoadingAnalytics(false);\n    }\n  };\n\n  const handleCreateTenant = () => {\n    setEditingTenant(null);\n    setFormData(INITIAL_FORM_DATA);\n    setShowModal(true);\n  };\n\n  const handleEditTenant = (tenant: Tenant) => {\n    setEditingTenant(tenant);\n    const features = tenant.features ? JSON.parse(tenant.features) : [];\n    setFormData({\n      name: tenant.name,\n      slug: tenant.slug,\n      url: tenant.url,\n      admin_url: tenant.admin_url || '',\n      color: tenant.color,\n      color_secondary: tenant.color_secondary,\n      plan: tenant.plan,\n      features,\n      admin_email: tenant.admin_email || '',\n      admin_phone: tenant.admin_phone || '',\n      logo: tenant.logo || '',\n      director_login: '',\n      director_password: '',\n      director_name: '',\n    });\n    setShowModal(true);\n  };\n\n  const handleDeleteTenant = async (tenant: Tenant) => {\n    if (!confirm(`Вы уверены что хотите удалить \"${tenant.name}\"?`)) return;\n\n    try {\n      await apiRequest(`/api/tenants/${tenant.id}`, {\n        method: 'DELETE',\n      });\n      await loadTenants();\n    } catch (err: any) {\n      alert(err.message || 'Ошибка удаления');\n    }\n  };\n\n  const handleToggleActive = async (tenant: Tenant) => {\n    try {\n      await apiRequest(`/api/tenants/${tenant.id}`, {\n        method: 'PATCH',\n        body: JSON.stringify({ is_active: tenant.is_active ? 0 : 1 }),\n      });\n      await loadTenants();\n    } catch (err: any) {\n      alert(err.message || 'Ошибка обновления статуса');\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    try {\n      const body = {\n        ...formData,\n        features: formData.features,\n      };\n\n      if (editingTenant) {\n        await apiRequest(`/api/tenants/${editingTenant.id}`, {\n          method: 'PATCH',\n          body: JSON.stringify(body),\n        });\n      } else {\n        await apiRequest('/api/tenants', {\n          method: 'POST',\n          body: JSON.stringify(body),\n        });\n      }\n\n      setShowModal(false);\n      await loadTenants();\n    } catch (err: any) {\n      setError(err.message || 'Ошибка сохранения');\n    }\n  };\n\n  const handleFeatureToggle = (feature: string) => {\n    setFormData(prev => ({\n      ...prev,\n      features: prev.features.includes(feature)\n        ? prev.features.filter(f => f !== feature)\n        : [...prev.features, feature],\n    }));\n  };\n\n  const handleLogoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    if (file.size > 2 * 1024 * 1024) {\n      alert('Максимальный размер логотипа: 2 МБ');\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = () => {\n      setFormData(prev => ({ ...prev, logo: reader.result as string }));\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const totalStats = {\n    total: tenants.length,\n    active: tenants.filter(t => t.is_active).length,\n    users: tenants.reduce((sum, t) => sum + t.users_count, 0),\n    revenue: tenants.reduce((sum, t) => sum + Number(t.revenue || 0), 0),\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <RefreshCw className=\"w-8 h-8 animate-spin text-indigo-600\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold\">Super Admin</h1>\n        {activeTab === 'companies' && (\n          <button\n            onClick={handleCreateTenant}\n            className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            Добавить УК\n          </button>\n        )}\n        {activeTab === 'analytics' && (\n          <button\n            onClick={() => { setAnalytics(null); loadAnalytics(); }}\n            className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2\"\n          >\n            <RefreshCw className=\"w-4 h-4\" />\n            Обновить\n          </button>\n        )}\n      </div>\n\n      {error && (\n        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700\">\n          {error}\n        </div>\n      )}\n\n      {/* Tabs */}\n      <div className=\"flex gap-1 border-b border-gray-200\">\n        <button\n          onClick={() => setActiveTab('companies')}\n          className={`px-4 py-2.5 font-medium text-sm border-b-2 transition-colors flex items-center gap-2 ${\n            activeTab === 'companies'\n              ? 'border-indigo-500 text-indigo-600'\n              : 'border-transparent text-gray-500 hover:text-gray-700'\n          }`}\n        >\n          <Building2 className=\"w-4 h-4\" />\n          Управляющие компании\n        </button>\n        <button\n          onClick={() => setActiveTab('analytics')}\n          className={`px-4 py-2.5 font-medium text-sm border-b-2 transition-colors flex items-center gap-2 ${\n            activeTab === 'analytics'\n              ? 'border-indigo-500 text-indigo-600'\n              : 'border-transparent text-gray-500 hover:text-gray-700'\n          }`}\n        >\n          <BarChart3 className=\"w-4 h-4\" />\n          Аналитика\n        </button>\n      </div>\n\n      {/* ========== TAB: Companies ========== */}\n      {activeTab === 'companies' && (\n        <>\n          {/* Stats Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"p-3 bg-indigo-100 rounded-lg\">\n                  <Building2 className=\"w-6 h-6 text-indigo-600\" />\n                </div>\n                <div>\n                  <div className=\"text-sm text-gray-500\">Всего УК</div>\n                  <div className=\"text-2xl font-bold\">{totalStats.total}</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"p-3 bg-green-100 rounded-lg\">\n                  <CheckCircle className=\"w-6 h-6 text-green-600\" />\n                </div>\n                <div>\n                  <div className=\"text-sm text-gray-500\">Активных</div>\n                  <div className=\"text-2xl font-bold\">{totalStats.active}</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"p-3 bg-blue-100 rounded-lg\">\n                  <Users className=\"w-6 h-6 text-blue-600\" />\n                </div>\n                <div>\n                  <div className=\"text-sm text-gray-500\">Всего жителей</div>\n                  <div className=\"text-2xl font-bold\">{totalStats.users}</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"p-3 bg-purple-100 rounded-lg\">\n                  <DollarSign className=\"w-6 h-6 text-purple-600\" />\n                </div>\n                <div>\n                  <div className=\"text-sm text-gray-500\">Общий доход</div>\n                  <div className=\"text-2xl font-bold\">${totalStats.revenue.toLocaleString('en-US')}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Tenants Table */}\n          <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-gray-50 border-b\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">УК</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">URL</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Тариф</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Жители</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Заявки</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Доход</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Статус</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Действия</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y\">\n                  {tenants.map((tenant) => (\n                    <tr key={tenant.id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center gap-3\">\n                          {tenant.logo ? (\n                            <img\n                              src={tenant.logo}\n                              alt={tenant.name}\n                              className=\"w-10 h-10 rounded-lg object-cover border\"\n                            />\n                          ) : (\n                            <div\n                              className=\"w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold\"\n                              style={{ background: `linear-gradient(135deg, ${tenant.color}, ${tenant.color_secondary})` }}\n                            >\n                              {tenant.name[0]}\n                            </div>\n                          )}\n                          <div>\n                            <div className=\"font-medium\">{tenant.name}</div>\n                            <div className=\"text-sm text-gray-500\">{tenant.slug}</div>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <a\n                          href={tenant.url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-indigo-600 hover:underline text-sm\"\n                        >\n                          {tenant.url}\n                        </a>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full ${\n                          tenant.plan === 'enterprise' ? 'bg-purple-100 text-purple-700' :\n                          tenant.plan === 'pro' ? 'bg-blue-100 text-blue-700' :\n                          'bg-gray-100 text-gray-700'\n                        }`}>\n                          {tenant.plan}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 text-sm\">{tenant.users_count}</td>\n                      <td className=\"px-6 py-4 text-sm\">{tenant.requests_count}</td>\n                      <td className=\"px-6 py-4 text-sm\">${Number(tenant.revenue || 0).toLocaleString('en-US')}</td>\n                      <td className=\"px-6 py-4\">\n                        <button\n                          onClick={() => handleToggleActive(tenant)}\n                          className=\"flex items-center gap-1\"\n                        >\n                          {tenant.is_active ? (\n                            <span className=\"flex items-center gap-1 text-green-600\">\n                              <CheckCircle className=\"w-4 h-4\" />\n                              <span className=\"text-sm\">Активен</span>\n                            </span>\n                          ) : (\n                            <span className=\"flex items-center gap-1 text-gray-400\">\n                              <XCircle className=\"w-4 h-4\" />\n                              <span className=\"text-sm\">Неактивен</span>\n                            </span>\n                          )}\n                        </button>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center gap-2\">\n                          <button\n                            onClick={() => handleEditTenant(tenant)}\n                            className=\"p-2 text-indigo-600 hover:bg-indigo-50 rounded\"\n                            title=\"Редактировать\"\n                          >\n                            <Edit2 className=\"w-4 h-4\" />\n                          </button>\n                          <button\n                            onClick={() => handleDeleteTenant(tenant)}\n                            className=\"p-2 text-red-600 hover:bg-red-50 rounded\"\n                            title=\"Удалить\"\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n\n              {tenants.length === 0 && (\n                <div className=\"text-center py-12 text-gray-500\">\n                  <Building2 className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                  <p>Нет управляющих компаний</p>\n                </div>\n              )}\n            </div>\n          </div>\n        </>\n      )}\n\n      {/* ========== TAB: Analytics ========== */}\n      {activeTab === 'analytics' && (\n        <div className=\"space-y-6\">\n          {isLoadingAnalytics ? (\n            <div className=\"flex items-center justify-center py-20\">\n              <RefreshCw className=\"w-8 h-8 animate-spin text-indigo-600\" />\n            </div>\n          ) : analytics ? (\n            <>\n              {/* Summary Stat Cards */}\n              <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n                <div className=\"bg-white p-5 rounded-lg shadow-sm border\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"p-2.5 bg-indigo-100 rounded-lg\">\n                      <Building2 className=\"w-5 h-5 text-indigo-600\" />\n                    </div>\n                    <div>\n                      <div className=\"text-xs text-gray-500\">Тенанты</div>\n                      <div className=\"text-xl font-bold\">{analytics.totals.tenants}</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"bg-white p-5 rounded-lg shadow-sm border\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"p-2.5 bg-blue-100 rounded-lg\">\n                      <Users className=\"w-5 h-5 text-blue-600\" />\n                    </div>\n                    <div>\n                      <div className=\"text-xs text-gray-500\">Пользователи</div>\n                      <div className=\"text-xl font-bold\">{analytics.totals.users.toLocaleString()}</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"bg-white p-5 rounded-lg shadow-sm border\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"p-2.5 bg-amber-100 rounded-lg\">\n                      <FileText className=\"w-5 h-5 text-amber-600\" />\n                    </div>\n                    <div>\n                      <div className=\"text-xs text-gray-500\">Заявки</div>\n                      <div className=\"text-xl font-bold\">{analytics.totals.requests.toLocaleString()}</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"bg-white p-5 rounded-lg shadow-sm border\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"p-2.5 bg-green-100 rounded-lg\">\n                      <Building2 className=\"w-5 h-5 text-green-600\" />\n                    </div>\n                    <div>\n                      <div className=\"text-xs text-gray-500\">Здания</div>\n                      <div className=\"text-xl font-bold\">{analytics.totals.buildings.toLocaleString()}</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"bg-white p-5 rounded-lg shadow-sm border\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"p-2.5 bg-purple-100 rounded-lg\">\n                      <DollarSign className=\"w-5 h-5 text-purple-600\" />\n                    </div>\n                    <div>\n                      <div className=\"text-xs text-gray-500\">Выручка</div>\n                      <div className=\"text-xl font-bold\">{Number(analytics.totals.revenue).toLocaleString('ru-RU')} сум</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Period Toggle */}\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm text-gray-500 mr-1\">Период:</span>\n                {([['daily', 'Дни'], ['weekly', 'Недели'], ['monthly', 'Месяцы']] as const).map(([key, label]) => (\n                  <button\n                    key={key}\n                    onClick={() => setTimePeriod(key)}\n                    className={`px-3 py-1.5 text-sm rounded-lg font-medium transition-colors ${\n                      timePeriod === key\n                        ? 'bg-indigo-600 text-white'\n                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                    }`}\n                  >\n                    {label}\n                  </button>\n                ))}\n              </div>\n\n              {/* Bar Charts Row */}\n              {(() => {\n                const growthData = analytics.growth[timePeriod] || [];\n                const periodLabel = timePeriod === 'daily' ? 'дням' : timePeriod === 'weekly' ? 'неделям' : 'месяцам';\n                const formatPeriod = (val: string) => {\n                  if (timePeriod === 'daily') {\n                    // \"2026-02-07\" → \"07.02\"\n                    const parts = val.split('-');\n                    return parts.length === 3 ? `${parts[2]}.${parts[1]}` : val;\n                  }\n                  if (timePeriod === 'weekly') {\n                    // \"2026-W06\" → \"Нед 6\"\n                    const m = val.match(/W(\\d+)/);\n                    return m ? `Нед ${parseInt(m[1])}` : val;\n                  }\n                  // \"2026-02\" → \"02.2026\"\n                  const parts = val.split('-');\n                  return parts.length === 2 ? `${parts[1]}.${parts[0]}` : val;\n                };\n                return (\n                  <div className=\"grid lg:grid-cols-3 gap-6\">\n                    <div className=\"bg-white p-5 rounded-lg shadow-sm border\">\n                      <h3 className=\"font-semibold text-sm mb-4 flex items-center gap-2 text-gray-700\">\n                        <Users className=\"w-4 h-4 text-blue-500\" />\n                        Пользователи по {periodLabel}\n                      </h3>\n                      <ResponsiveContainer width=\"100%\" height={240}>\n                        <BarChart data={growthData}>\n                          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n                          <XAxis dataKey=\"period\" tick={{ fontSize: 10 }} tickFormatter={formatPeriod} />\n                          <YAxis tick={{ fontSize: 11 }} allowDecimals={false} />\n                          <Tooltip labelFormatter={formatPeriod} />\n                          <Bar dataKey=\"users\" fill=\"#6366f1\" name=\"Пользователи\" radius={[4, 4, 0, 0]} />\n                        </BarChart>\n                      </ResponsiveContainer>\n                    </div>\n\n                    <div className=\"bg-white p-5 rounded-lg shadow-sm border\">\n                      <h3 className=\"font-semibold text-sm mb-4 flex items-center gap-2 text-gray-700\">\n                        <FileText className=\"w-4 h-4 text-amber-500\" />\n                        Заявки по {periodLabel}\n                      </h3>\n                      <ResponsiveContainer width=\"100%\" height={240}>\n                        <BarChart data={growthData}>\n                          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n                          <XAxis dataKey=\"period\" tick={{ fontSize: 10 }} tickFormatter={formatPeriod} />\n                          <YAxis tick={{ fontSize: 11 }} allowDecimals={false} />\n                          <Tooltip labelFormatter={formatPeriod} />\n                          <Bar dataKey=\"requests\" fill=\"#F59E0B\" name=\"Заявки\" radius={[4, 4, 0, 0]} />\n                        </BarChart>\n                      </ResponsiveContainer>\n                    </div>\n\n                    <div className=\"bg-white p-5 rounded-lg shadow-sm border\">\n                      <h3 className=\"font-semibold text-sm mb-4 flex items-center gap-2 text-gray-700\">\n                        <DollarSign className=\"w-4 h-4 text-green-500\" />\n                        Выручка по {periodLabel}\n                      </h3>\n                      <ResponsiveContainer width=\"100%\" height={240}>\n                        <BarChart data={growthData}>\n                          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n                          <XAxis dataKey=\"period\" tick={{ fontSize: 10 }} tickFormatter={formatPeriod} />\n                          <YAxis tick={{ fontSize: 11 }} />\n                          <Tooltip labelFormatter={formatPeriod} formatter={(value: number) => Number(value).toLocaleString('ru-RU') + ' сум'} />\n                          <Bar dataKey=\"revenue\" fill=\"#10B981\" name=\"Выручка\" radius={[4, 4, 0, 0]} />\n                        </BarChart>\n                      </ResponsiveContainer>\n                    </div>\n                  </div>\n                );\n              })()}\n\n              {/* Pie Charts Row */}\n              <div className=\"grid lg:grid-cols-2 gap-6\">\n                {/* Plan Distribution */}\n                <div className=\"bg-white p-5 rounded-lg shadow-sm border\">\n                  <h3 className=\"font-semibold text-sm mb-4 text-gray-700\">Распределение по тарифам</h3>\n                  <div className=\"flex items-center gap-6\">\n                    <div className=\"flex-1\">\n                      <ResponsiveContainer width=\"100%\" height={200}>\n                        <PieChart>\n                          <Pie\n                            data={analytics.planDistribution.map(p => ({ ...p, label: PLAN_LABELS[p.plan] || p.plan }))}\n                            cx=\"50%\" cy=\"50%\"\n                            outerRadius={80}\n                            innerRadius={40}\n                            dataKey=\"count\"\n                            nameKey=\"label\"\n                            label={false}\n                          >\n                            {analytics.planDistribution.map((entry, index) => (\n                              <Cell key={`plan-${index}`} fill={PLAN_COLORS[entry.plan] || '#9CA3AF'} />\n                            ))}\n                          </Pie>\n                          <Tooltip formatter={(value: number, name: string) => [`${value} УК`, name]} />\n                        </PieChart>\n                      </ResponsiveContainer>\n                    </div>\n                    <div className=\"space-y-3 shrink-0\">\n                      {analytics.planDistribution.map((entry) => (\n                        <div key={entry.plan} className=\"flex items-center gap-2\">\n                          <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: PLAN_COLORS[entry.plan] || '#9CA3AF' }} />\n                          <span className=\"text-sm text-gray-600\">{PLAN_LABELS[entry.plan] || entry.plan}</span>\n                          <span className=\"text-sm font-bold ml-1\">{entry.count}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Feature Usage - Pie Chart */}\n                <div className=\"bg-white p-5 rounded-lg shadow-sm border\">\n                  <h3 className=\"font-semibold text-sm mb-4 text-gray-700\">Использование функций</h3>\n                  <div className=\"flex items-center gap-6\">\n                    <div className=\"flex-1\">\n                      <ResponsiveContainer width=\"100%\" height={200}>\n                        <PieChart>\n                          <Pie\n                            data={analytics.featureUsage.map(f => ({ ...f, label: FEATURE_LABELS[f.feature] || f.feature }))}\n                            cx=\"50%\" cy=\"50%\"\n                            outerRadius={80}\n                            innerRadius={40}\n                            dataKey=\"count\"\n                            nameKey=\"label\"\n                            label={false}\n                          >\n                            {analytics.featureUsage.map((_, index) => (\n                              <Cell key={`feat-${index}`} fill={FEATURE_COLORS[index % FEATURE_COLORS.length]} />\n                            ))}\n                          </Pie>\n                          <Tooltip formatter={(value: number, name: string) => [`${value} УК`, name]} />\n                        </PieChart>\n                      </ResponsiveContainer>\n                    </div>\n                    <div className=\"space-y-2 shrink-0\">\n                      {analytics.featureUsage\n                        .sort((a, b) => b.count - a.count)\n                        .map((item, index) => (\n                          <div key={item.feature} className=\"flex items-center gap-2\">\n                            <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: FEATURE_COLORS[index % FEATURE_COLORS.length] }} />\n                            <span className=\"text-sm text-gray-600\">{FEATURE_LABELS[item.feature] || item.feature}</span>\n                            <span className=\"text-sm font-bold ml-1\">{item.count}</span>\n                          </div>\n                        ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Area Chart: Growth */}\n              {(() => {\n                const growthData = analytics.growth[timePeriod] || [];\n                const periodTitle = timePeriod === 'daily' ? 'за 30 дней' : timePeriod === 'weekly' ? 'за 12 недель' : 'за 12 месяцев';\n                const formatPeriod = (val: string) => {\n                  if (timePeriod === 'daily') {\n                    const parts = val.split('-');\n                    return parts.length === 3 ? `${parts[2]}.${parts[1]}` : val;\n                  }\n                  if (timePeriod === 'weekly') {\n                    const m = val.match(/W(\\d+)/);\n                    return m ? `Нед ${parseInt(m[1])}` : val;\n                  }\n                  const parts = val.split('-');\n                  return parts.length === 2 ? `${parts[1]}.${parts[0]}` : val;\n                };\n                return (\n                  <div className=\"bg-white p-5 rounded-lg shadow-sm border\">\n                    <h3 className=\"font-semibold text-sm mb-4 flex items-center gap-2 text-gray-700\">\n                      <TrendingUp className=\"w-4 h-4 text-green-500\" />\n                      Динамика роста {periodTitle}\n                    </h3>\n                    {growthData.length > 0 ? (\n                      <ResponsiveContainer width=\"100%\" height={300}>\n                        <AreaChart data={growthData}>\n                          <defs>\n                            <linearGradient id=\"gradUsers\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                              <stop offset=\"5%\" stopColor=\"#6366f1\" stopOpacity={0.3} />\n                              <stop offset=\"95%\" stopColor=\"#6366f1\" stopOpacity={0} />\n                            </linearGradient>\n                            <linearGradient id=\"gradRequests\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                              <stop offset=\"5%\" stopColor=\"#F59E0B\" stopOpacity={0.3} />\n                              <stop offset=\"95%\" stopColor=\"#F59E0B\" stopOpacity={0} />\n                            </linearGradient>\n                          </defs>\n                          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n                          <XAxis dataKey=\"period\" tick={{ fontSize: 11 }} tickFormatter={formatPeriod} />\n                          <YAxis tick={{ fontSize: 12 }} />\n                          <Tooltip labelFormatter={formatPeriod} />\n                          <Legend />\n                          <Area type=\"monotone\" dataKey=\"users\" stroke=\"#6366f1\" strokeWidth={2} fill=\"url(#gradUsers)\" name=\"Новые пользователи\" />\n                          <Area type=\"monotone\" dataKey=\"requests\" stroke=\"#F59E0B\" strokeWidth={2} fill=\"url(#gradRequests)\" name=\"Новые заявки\" />\n                        </AreaChart>\n                      </ResponsiveContainer>\n                    ) : (\n                      <div className=\"text-center py-12 text-gray-400\">\n                        Нет данных за выбранный период\n                      </div>\n                    )}\n                  </div>\n                );\n              })()}\n            </>\n          ) : (\n            <div className=\"text-center py-20 text-gray-400\">\n              Нет данных для отображения\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Modal */}\n      {showModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b\">\n              <h2 className=\"text-xl font-bold\">\n                {editingTenant ? 'Редактировать УК' : 'Создать УК'}\n              </h2>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n              {error && (\n                <div className=\"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm\">\n                  {error}\n                </div>\n              )}\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Название *</label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className=\"w-full px-3 py-2 border rounded-lg\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Slug *</label>\n                  <input\n                    type=\"text\"\n                    value={formData.slug}\n                    onChange={(e) => {\n                      const slug = e.target.value.toLowerCase().replace(/[^a-z0-9-]/g, '');\n                      setFormData({\n                        ...formData,\n                        slug,\n                        url: `https://${slug}.kamizo.uz`,\n                        admin_url: `https://${slug}.kamizo.uz/admin`\n                      });\n                    }}\n                    className=\"w-full px-3 py-2 border rounded-lg\"\n                    pattern=\"[a-z0-9-]+\"\n                    placeholder=\"my-uk\"\n                    required\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">URL (генерируется автоматически)</label>\n                <input\n                  type=\"text\"\n                  value={formData.url}\n                  className=\"w-full px-3 py-2 border rounded-lg bg-gray-50\"\n                  readOnly\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Домен будет доступен по адресу: {formData.slug ? `${formData.slug}.kamizo.uz` : '(введите slug)'}\n                </p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Логотип</label>\n                <div className=\"flex items-center gap-4\">\n                  {formData.logo ? (\n                    <div className=\"relative\">\n                      <img\n                        src={formData.logo}\n                        alt=\"Logo\"\n                        className=\"w-16 h-16 rounded-lg object-cover border\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => setFormData(prev => ({ ...prev, logo: '' }))}\n                        className=\"absolute -top-2 -right-2 p-0.5 bg-red-500 text-white rounded-full hover:bg-red-600\"\n                      >\n                        <X className=\"w-3 h-3\" />\n                      </button>\n                    </div>\n                  ) : (\n                    <label className=\"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center cursor-pointer hover:border-indigo-400 hover:bg-indigo-50 transition-colors\">\n                      <Upload className=\"w-5 h-5 text-gray-400\" />\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={handleLogoChange}\n                        className=\"hidden\"\n                      />\n                    </label>\n                  )}\n                  <div className=\"text-xs text-gray-500\">\n                    PNG, JPG до 2 МБ\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Основной цвет</label>\n                  <input\n                    type=\"color\"\n                    value={formData.color}\n                    onChange={(e) => setFormData({ ...formData, color: e.target.value })}\n                    className=\"w-full h-10 rounded-lg cursor-pointer\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Вторичный цвет</label>\n                  <input\n                    type=\"color\"\n                    value={formData.color_secondary}\n                    onChange={(e) => setFormData({ ...formData, color_secondary: e.target.value })}\n                    className=\"w-full h-10 rounded-lg cursor-pointer\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Тариф</label>\n                  <select\n                    value={formData.plan}\n                    onChange={(e) => setFormData({ ...formData, plan: e.target.value as any })}\n                    className=\"w-full px-3 py-2 border rounded-lg\"\n                  >\n                    <option value=\"basic\">Basic</option>\n                    <option value=\"pro\">Pro</option>\n                    <option value=\"enterprise\">Enterprise</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Email администратора</label>\n                  <input\n                    type=\"email\"\n                    value={formData.admin_email}\n                    onChange={(e) => setFormData({ ...formData, admin_email: e.target.value })}\n                    className=\"w-full px-3 py-2 border rounded-lg\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Телефон администратора</label>\n                  <input\n                    type=\"tel\"\n                    value={formData.admin_phone}\n                    onChange={(e) => setFormData({ ...formData, admin_phone: e.target.value })}\n                    className=\"w-full px-3 py-2 border rounded-lg\"\n                  />\n                </div>\n              </div>\n\n              {/* Director credentials - only for creating new tenant */}\n              {!editingTenant && (\n                <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3\">\n                  <label className=\"block text-sm font-semibold text-blue-800\">Первый директор (будет создан автоматически)</label>\n                  <div className=\"grid grid-cols-3 gap-3\">\n                    <div>\n                      <label className=\"block text-xs font-medium text-blue-700 mb-1\">ФИО *</label>\n                      <input\n                        type=\"text\"\n                        value={formData.director_name}\n                        onChange={(e) => setFormData({ ...formData, director_name: e.target.value })}\n                        className=\"w-full px-3 py-2 border border-blue-200 rounded-lg text-sm\"\n                        placeholder=\"Иванов И.И.\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs font-medium text-blue-700 mb-1\">Логин *</label>\n                      <input\n                        type=\"text\"\n                        value={formData.director_login}\n                        onChange={(e) => setFormData({ ...formData, director_login: e.target.value })}\n                        className=\"w-full px-3 py-2 border border-blue-200 rounded-lg text-sm\"\n                        placeholder=\"director\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs font-medium text-blue-700 mb-1\">Пароль *</label>\n                      <input\n                        type=\"text\"\n                        value={formData.director_password}\n                        onChange={(e) => setFormData({ ...formData, director_password: e.target.value })}\n                        className=\"w-full px-3 py-2 border border-blue-200 rounded-lg text-sm\"\n                        placeholder=\"password123\"\n                        required\n                      />\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Доступные функции</label>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {AVAILABLE_FEATURES.map((feature) => (\n                    <label key={feature.value} className=\"flex items-center gap-2 cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={formData.features.includes(feature.value)}\n                        onChange={() => handleFeatureToggle(feature.value)}\n                        className=\"rounded\"\n                      />\n                      <span className=\"text-sm\">{feature.label}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"flex justify-end gap-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowModal(false)}\n                  className=\"px-4 py-2 border rounded-lg hover:bg-gray-50\"\n                >\n                  Отмена\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700\"\n                >\n                  {editingTenant ? 'Сохранить' : 'Создать'}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["INITIAL_FORM_DATA","AVAILABLE_FEATURES","PLAN_COLORS","PLAN_LABELS","FEATURE_COLORS","FEATURE_LABELS","SuperAdminDashboard","tenants","setTenants","useState","isLoading","setIsLoading","showModal","setShowModal","editingTenant","setEditingTenant","formData","setFormData","error","setError","activeTab","setActiveTab","analytics","setAnalytics","isLoadingAnalytics","setIsLoadingAnalytics","timePeriod","setTimePeriod","useEffect","loadTenants","loadAnalytics","response","apiRequest","err","handleCreateTenant","handleEditTenant","tenant","features","handleDeleteTenant","handleToggleActive","handleSubmit","e","body","handleFeatureToggle","feature","prev","f","handleLogoChange","file","reader","totalStats","t","sum","jsx","RefreshCw","jsxs","Plus","Building2","BarChart3","Fragment","CheckCircle","Users","DollarSign","XCircle","Edit2","Trash2","FileText","key","label","growthData","periodLabel","formatPeriod","val","parts","m","ResponsiveContainer","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Bar","value","PieChart","Pie","p","entry","index","Cell","name","_","a","b","item","periodTitle","TrendingUp","AreaChart","Legend","Area","slug","X","Upload"],"mappings":"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"}