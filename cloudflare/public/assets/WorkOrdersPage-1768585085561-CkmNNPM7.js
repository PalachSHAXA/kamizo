import{r as x,j as e,au as z,F as E,z as A,ae as I,x as Q,E as U,y as X,W as O,B as G,ab as $,U as H,ah as J,a0 as P,X as _}from"./react-vendor-1768585085561-CM8YoXKY.js";import{h as C,u as T}from"./index-1768585085561-DY3gV71t.js";import"./vendor-1768585085561-eDq9GBqE.js";import"./qr-scanner-1768585085561-cr32YHjo.js";import"./zustand-1768585085561-wNUYBKDB.js";const K=[{id:"wo-1",number:"НР-2024-001",title:"Плановая проверка лифтового оборудования",description:"Ежемесячная проверка и обслуживание лифтов в доме",type:"planned",priority:"medium",status:"scheduled",buildingId:"building-1",assignedTo:"executor-1",scheduledDate:"2024-12-25",scheduledTime:"09:00",estimatedDuration:180,checklist:[{item:"Проверка тросов",completed:!1},{item:"Проверка дверей",completed:!1},{item:"Проверка кнопок",completed:!1},{item:"Смазка механизмов",completed:!1}],createdAt:"2024-12-20T10:00:00Z",updatedAt:"2024-12-20T10:00:00Z"},{id:"wo-2",number:"НР-2024-002",title:"Замена счетчика холодной воды",description:"Плановая замена ИПУ по истечении срока поверки",type:"planned",priority:"low",status:"pending",buildingId:"building-1",apartmentId:"apt-1",assignedTo:"executor-2",scheduledDate:"2024-12-26",estimatedDuration:60,materials:[{name:"Счетчик ИПУ",quantity:1,unit:"шт"},{name:"Прокладка",quantity:2,unit:"шт"}],createdAt:"2024-12-20T11:00:00Z",updatedAt:"2024-12-20T11:00:00Z"},{id:"wo-3",number:"АВ-2024-003",title:"Устранение течи в подвале",description:"Аварийный вызов - течь в подвальном помещении",type:"emergency",priority:"urgent",status:"in_progress",buildingId:"building-2",assignedTo:"executor-1",startedAt:"2024-12-21T08:30:00Z",estimatedDuration:120,createdAt:"2024-12-21T08:00:00Z",updatedAt:"2024-12-21T08:30:00Z"},{id:"wo-4",number:"СЕЗ-2024-004",title:"Подготовка отопительной системы к зиме",description:"Сезонные работы по подготовке системы отопления",type:"seasonal",priority:"high",status:"completed",buildingId:"building-1",assignedTeam:["executor-1","executor-2"],scheduledDate:"2024-10-15",startedAt:"2024-10-15T09:00:00Z",completedAt:"2024-10-15T17:00:00Z",estimatedDuration:480,actualDuration:450,checklist:[{item:"Проверка котла",completed:!0},{item:"Промывка системы",completed:!0},{item:"Опрессовка",completed:!0},{item:"Запуск отопления",completed:!0}],createdAt:"2024-10-10T10:00:00Z",updatedAt:"2024-10-15T17:00:00Z"}];function ne(){const{buildings:l}=C(),{executors:h}=T(),[r,p]=x.useState(K),[m,a]=x.useState(""),[i,j]=x.useState("all"),[g,t]=x.useState("all"),[v,N]=x.useState("all"),[b,n]=x.useState("all"),[o,y]=x.useState(null),[Z,k]=x.useState(!1),S=r.filter(s=>{const d=m===""||s.number.toLowerCase().includes(m.toLowerCase())||s.title.toLowerCase().includes(m.toLowerCase()),u=i==="all"||s.status===i,c=g==="all"||s.type===g,f=v==="all"||s.priority===v,R=b==="all"||s.buildingId===b;return d&&u&&c&&f&&R}),w={total:r.length,pending:r.filter(s=>s.status==="pending").length,inProgress:r.filter(s=>s.status==="in_progress").length,completed:r.filter(s=>s.status==="completed").length,urgent:r.filter(s=>s.priority==="urgent"&&s.status!=="completed").length},F=s=>{switch(s){case"pending":return"bg-gray-100 text-gray-700";case"scheduled":return"bg-blue-100 text-blue-700";case"in_progress":return"bg-yellow-100 text-yellow-700";case"completed":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700"}},L=s=>{switch(s){case"pending":return"Ожидает";case"scheduled":return"Запланирован";case"in_progress":return"Выполняется";case"completed":return"Завершен";case"cancelled":return"Отменен"}},M=s=>{switch(s){case"low":return"text-gray-500";case"medium":return"text-blue-500";case"high":return"text-orange-500";case"urgent":return"text-red-500"}},W=s=>{switch(s){case"low":return"Низкий";case"medium":return"Средний";case"high":return"Высокий";case"urgent":return"Срочный"}},B=s=>s?new Date(s).toLocaleDateString("ru-RU"):"-",q=s=>{const d=Math.floor(s/60),u=s%60;return d>0?`${d}ч ${u}м`:`${u}м`},D=(s,d)=>{p(u=>u.map(c=>{if(c.id===s){const f={status:d,updatedAt:new Date().toISOString()};return d==="in_progress"&&!c.startedAt&&(f.startedAt=new Date().toISOString()),d==="completed"&&!c.completedAt&&(f.completedAt=new Date().toISOString(),c.startedAt&&(f.actualDuration=Math.round((Date.now()-new Date(c.startedAt).getTime())/6e4))),{...c,...f}}return c}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Наряды на работы"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Управление плановыми и аварийными работами"})]}),e.jsxs("button",{onClick:()=>k(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Создать наряд"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(E,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Всего"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:w.total})]})]})}),e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(A,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ожидают"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:w.pending})]})]})}),e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(I,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"В работе"}),e.jsx("p",{className:"text-xl font-bold text-yellow-600",children:w.inProgress})]})]})}),e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Завершено"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:w.completed})]})]})}),e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(U,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Срочных"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:w.urgent})]})]})})]}),e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Поиск по номеру или названию...",value:m,onChange:s=>a(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("select",{value:i,onChange:s=>j(s.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Все статусы"}),e.jsx("option",{value:"pending",children:"Ожидает"}),e.jsx("option",{value:"scheduled",children:"Запланирован"}),e.jsx("option",{value:"in_progress",children:"Выполняется"}),e.jsx("option",{value:"completed",children:"Завершен"}),e.jsx("option",{value:"cancelled",children:"Отменен"})]}),e.jsxs("select",{value:g,onChange:s=>t(s.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Все типы"}),e.jsx("option",{value:"planned",children:"Плановый"}),e.jsx("option",{value:"preventive",children:"Профилактика"}),e.jsx("option",{value:"emergency",children:"Аварийный"}),e.jsx("option",{value:"seasonal",children:"Сезонный"})]}),e.jsxs("select",{value:v,onChange:s=>N(s.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Все приоритеты"}),e.jsx("option",{value:"low",children:"Низкий"}),e.jsx("option",{value:"medium",children:"Средний"}),e.jsx("option",{value:"high",children:"Высокий"}),e.jsx("option",{value:"urgent",children:"Срочный"})]}),e.jsxs("select",{value:b,onChange:s=>n(s.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Все дома"}),l.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})}),e.jsxs("div",{className:"space-y-3",children:[S.map(s=>{const d=l.find(c=>c.id===s.buildingId),u=h.find(c=>c.id===s.assignedTo);return e.jsx("div",{className:"glass-card p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>y(s),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${s.type==="emergency"?"bg-red-100":s.type==="seasonal"?"bg-orange-100":s.type==="preventive"?"bg-purple-100":"bg-blue-100"}`,children:e.jsx(O,{className:`w-6 h-6 ${s.type==="emergency"?"text-red-600":s.type==="seasonal"?"text-orange-600":s.type==="preventive"?"text-purple-600":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm text-gray-500",children:s.number}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${F(s.status)}`,children:L(s.status)}),e.jsx("span",{className:`text-xs font-medium ${M(s.priority)}`,children:W(s.priority)})]}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:d?.name||"Не указано"})]}),s.scheduledDate&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-4 h-4"}),e.jsxs("span",{children:[B(s.scheduledDate)," ",s.scheduledTime||""]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:q(s.estimatedDuration)})]}),u&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{children:u.name})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",onClick:c=>c.stopPropagation(),children:[s.status==="pending"&&e.jsx("button",{onClick:()=>D(s.id,"scheduled"),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Запланировать",children:e.jsx($,{className:"w-5 h-5"})}),s.status==="scheduled"&&e.jsx("button",{onClick:()=>D(s.id,"in_progress"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Начать выполнение",children:e.jsx(I,{className:"w-5 h-5"})}),s.status==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>D(s.id,"scheduled"),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors",title:"Приостановить",children:e.jsx(J,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>D(s.id,"completed"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Завершить",children:e.jsx(P,{className:"w-5 h-5"})})]})]})]})},s.id)}),S.length===0&&e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(O,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"Наряды не найдены"})]})]}),o&&e.jsx(V,{order:o,onClose:()=>y(null),onUpdateStatus:s=>{D(o.id,s),y({...o,status:s})}}),Z&&e.jsx(Y,{onClose:()=>k(!1),onSave:s=>{const d={...s,id:`wo-${Date.now()}`,number:`НР-2024-${String(r.length+1).padStart(3,"0")}`,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};p([...r,d]),k(!1)}})]})}function V({order:l,onClose:h,onUpdateStatus:r}){const{buildings:p,apartments:m}=C(),{executors:a}=T(),i=p.find(n=>n.id===l.buildingId),j=m.find(n=>n.id===l.apartmentId),g=a.find(n=>n.id===l.assignedTo),t=n=>{switch(n){case"pending":return"bg-gray-100 text-gray-700";case"scheduled":return"bg-blue-100 text-blue-700";case"in_progress":return"bg-yellow-100 text-yellow-700";case"completed":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700"}},v=n=>{switch(n){case"pending":return"Ожидает";case"scheduled":return"Запланирован";case"in_progress":return"Выполняется";case"completed":return"Завершен";case"cancelled":return"Отменен"}},N=n=>n?new Date(n).toLocaleString("ru-RU"):"-",b=n=>{const o=Math.floor(n/60),y=n%60;return o>0?`${o}ч ${y}м`:`${y}м`};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:h,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:n=>n.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-gray-500",children:l.number}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${t(l.status)}`,children:v(l.status)})]}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:l.title})]}),e.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(_,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Описание"}),e.jsx("p",{className:"text-gray-600",children:l.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Объект"}),e.jsx("p",{className:"font-medium",children:i?.name||"-"}),j&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Кв. ",j.number]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Исполнитель"}),e.jsx("p",{className:"font-medium",children:g?.name||"Не назначен"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Запланировано"}),e.jsx("p",{className:"font-medium",children:l.scheduledDate?`${l.scheduledDate} ${l.scheduledTime||""}`:"-"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Длительность"}),e.jsx("p",{className:"font-medium",children:b(l.estimatedDuration)}),l.actualDuration&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Факт: ",b(l.actualDuration)]})]})]}),(l.startedAt||l.completedAt)&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Хронология"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Создан: ",N(l.createdAt)]})]}),l.startedAt&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Начат: ",N(l.startedAt)]})]}),l.completedAt&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Завершен: ",N(l.completedAt)]})]})]})]}),l.checklist&&l.checklist.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Чек-лист"}),e.jsx("div",{className:"space-y-2",children:l.checklist.map((n,o)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center ${n.completed?"bg-green-500 text-white":"bg-gray-200"}`,children:n.completed&&e.jsx(P,{className:"w-3 h-3"})}),e.jsx("span",{className:n.completed?"text-gray-500 line-through":"text-gray-700",children:n.item})]},o))})]}),l.materials&&l.materials.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Материалы"}),e.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-gray-600",children:"Наименование"}),e.jsx("th",{className:"px-4 py-2 text-right text-gray-600",children:"Количество"}),e.jsx("th",{className:"px-4 py-2 text-left text-gray-600",children:"Ед."})]})}),e.jsx("tbody",{children:l.materials.map((n,o)=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"px-4 py-2",children:n.name}),e.jsx("td",{className:"px-4 py-2 text-right",children:n.quantity}),e.jsx("td",{className:"px-4 py-2",children:n.unit})]},o))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[l.status==="pending"&&e.jsx("button",{onClick:()=>r("scheduled"),className:"btn-primary",children:"Запланировать"}),l.status==="scheduled"&&e.jsx("button",{onClick:()=>r("in_progress"),className:"btn-primary",children:"Начать выполнение"}),l.status==="in_progress"&&e.jsx("button",{onClick:()=>r("completed"),className:"btn-primary",children:"Завершить"}),l.status!=="completed"&&l.status!=="cancelled"&&e.jsx("button",{onClick:()=>r("cancelled"),className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Отменить"})]})]})]})})}function Y({onClose:l,onSave:h}){const{buildings:r,apartments:p}=C(),{executors:m}=T(),[a,i]=x.useState({title:"",description:"",type:"planned",priority:"medium",buildingId:"",apartmentId:"",assignedTo:"",scheduledDate:"",scheduledTime:"",estimatedDuration:60}),j=p.filter(t=>t.buildingId===a.buildingId),g=t=>{t.preventDefault(),h({title:a.title,description:a.description,type:a.type,priority:a.priority,buildingId:a.buildingId,apartmentId:a.apartmentId||void 0,assignedTo:a.assignedTo||void 0,scheduledDate:a.scheduledDate||void 0,scheduledTime:a.scheduledTime||void 0,estimatedDuration:a.estimatedDuration})};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:l,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-xl max-h-[90vh] overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Новый наряд"}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(_,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Название *"}),e.jsx("input",{type:"text",required:!0,value:a.title,onChange:t=>i({...a,title:t.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Краткое описание работы"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Описание"}),e.jsx("textarea",{value:a.description,onChange:t=>i({...a,description:t.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Подробное описание работ"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Тип работы"}),e.jsxs("select",{value:a.type,onChange:t=>i({...a,type:t.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"planned",children:"Плановый"}),e.jsx("option",{value:"preventive",children:"Профилактика"}),e.jsx("option",{value:"emergency",children:"Аварийный"}),e.jsx("option",{value:"seasonal",children:"Сезонный"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Приоритет"}),e.jsxs("select",{value:a.priority,onChange:t=>i({...a,priority:t.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Низкий"}),e.jsx("option",{value:"medium",children:"Средний"}),e.jsx("option",{value:"high",children:"Высокий"}),e.jsx("option",{value:"urgent",children:"Срочный"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Дом *"}),e.jsxs("select",{required:!0,value:a.buildingId,onChange:t=>i({...a,buildingId:t.target.value,apartmentId:""}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Выберите дом"}),r.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Квартира"}),e.jsxs("select",{value:a.apartmentId,onChange:t=>i({...a,apartmentId:t.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!a.buildingId,children:[e.jsx("option",{value:"",children:"Общедомовые работы"}),j.map(t=>e.jsxs("option",{value:t.id,children:["Кв. ",t.number]},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Исполнитель"}),e.jsxs("select",{value:a.assignedTo,onChange:t=>i({...a,assignedTo:t.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Не назначен"}),m.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Дата"}),e.jsx("input",{type:"date",value:a.scheduledDate,onChange:t=>i({...a,scheduledDate:t.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Время"}),e.jsx("input",{type:"time",value:a.scheduledTime,onChange:t=>i({...a,scheduledTime:t.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Длительность (мин)"}),e.jsx("input",{type:"number",min:"15",step:"15",value:a.estimatedDuration,onChange:t=>i({...a,estimatedDuration:parseInt(t.target.value)||60}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Отмена"}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Создать"})]})]})]})})}export{ne as WorkOrdersPage};
//# sourceMappingURL=WorkOrdersPage-1768585085561-CkmNNPM7.js.map
