{"version":3,"file":"RentalsPage-1769968761754-DBzh52Ng.js","sources":["../../src/pages/manager/RentalsPage.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Key, User, Phone, FileText, Calendar, CheckCircle, AlertCircle, Loader2, GitBranch, Building2, ChevronRight } from 'lucide-react';\r\nimport { useAuthStore } from '../../stores/authStore';\r\nimport { useDataStore } from '../../stores/dataStore';\r\nimport { branchesApi, buildingsApi, usersApi } from '../../services/api';\r\n\r\ninterface Branch {\r\n  code: string;\r\n  name: string;\r\n}\r\n\r\ninterface Building {\r\n  id: string;\r\n  name: string;\r\n  address: string;\r\n  branch_code: string;\r\n}\r\n\r\ninterface Resident {\r\n  id: string;\r\n  name: string;\r\n  phone: string;\r\n  address: string;\r\n  apartment: string;\r\n  login?: string;\r\n}\r\n\r\nexport function RentalsPage() {\r\n  const { user } = useAuthStore();\r\n  const { rentalApartments, rentalRecords, addRentalApartment, deleteRentalApartment, addRentalRecord, deleteRentalRecord, fetchRentals } = useDataStore();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadRentals = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        await fetchRentals();\r\n      } catch (error) {\r\n        console.error('Failed to fetch rentals:', error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    loadRentals();\r\n  }, [fetchRentals]);\r\n  const [showAddApartmentModal, setShowAddApartmentModal] = useState(false);\r\n  const [showAddRecordModal, setShowAddRecordModal] = useState(false);\r\n  const [selectedApartment, setSelectedApartment] = useState<string | null>(null);\r\n  const [showCredentials, setShowCredentials] = useState<{ login: string; password: string } | null>(null);\r\n  const [deleteConfirmApartment, setDeleteConfirmApartment] = useState<{ id: string; ownerLogin: string } | null>(null);\r\n  const [deletePassword, setDeletePassword] = useState('');\r\n  const [deleteError, setDeleteError] = useState('');\r\n\r\n  const [newApartment, setNewApartment] = useState({\r\n    name: '',\r\n    address: '',\r\n    apartment: '',\r\n    ownerName: '',\r\n    ownerPhone: '',\r\n    ownerLogin: '',\r\n    password: '',\r\n    ownerType: 'tenant' as 'tenant' | 'commercial_owner',\r\n  });\r\n\r\n  // Cascading selection state for apartment modal\r\n  const [branches, setBranches] = useState<Branch[]>([]);\r\n  const [buildings, setBuildings] = useState<Building[]>([]);\r\n  const [residents, setResidents] = useState<Resident[]>([]);\r\n\r\n  const [selectedBranch, setSelectedBranch] = useState<string>('');\r\n  const [selectedBuilding, setSelectedBuilding] = useState<string>('');\r\n  const [selectedResident, setSelectedResident] = useState<Resident | null>(null);\r\n\r\n  const [loadingBranches, setLoadingBranches] = useState(false);\r\n  const [loadingBuildings, setLoadingBuildings] = useState(false);\r\n  const [loadingResidents, setLoadingResidents] = useState(false);\r\n\r\n  // Load branches when modal opens\r\n  useEffect(() => {\r\n    if (!showAddApartmentModal) return;\r\n\r\n    const loadBranches = async () => {\r\n      setLoadingBranches(true);\r\n      try {\r\n        const data = await branchesApi.getAll();\r\n        setBranches(data.branches || []);\r\n      } catch (error) {\r\n        console.error('Failed to load branches:', error);\r\n      } finally {\r\n        setLoadingBranches(false);\r\n      }\r\n    };\r\n    loadBranches();\r\n  }, [showAddApartmentModal]);\r\n\r\n  // Load buildings when branch changes\r\n  useEffect(() => {\r\n    if (!selectedBranch) {\r\n      setBuildings([]);\r\n      setSelectedBuilding('');\r\n      setResidents([]);\r\n      setSelectedResident(null);\r\n      return;\r\n    }\r\n\r\n    const loadBuildings = async () => {\r\n      setLoadingBuildings(true);\r\n      setSelectedBuilding('');\r\n      setResidents([]);\r\n      setSelectedResident(null);\r\n      try {\r\n        const data = await buildingsApi.getAll();\r\n        const filteredBuildings = (data.buildings || []).filter(\r\n          (b: Building) => b.branch_code === selectedBranch\r\n        );\r\n        setBuildings(filteredBuildings);\r\n      } catch (error) {\r\n        console.error('Failed to load buildings:', error);\r\n      } finally {\r\n        setLoadingBuildings(false);\r\n      }\r\n    };\r\n    loadBuildings();\r\n  }, [selectedBranch]);\r\n\r\n  // Load residents when building changes\r\n  useEffect(() => {\r\n    if (!selectedBuilding) {\r\n      setResidents([]);\r\n      setSelectedResident(null);\r\n      return;\r\n    }\r\n\r\n    const loadResidents = async () => {\r\n      setLoadingResidents(true);\r\n      setSelectedResident(null);\r\n      try {\r\n        const data = await usersApi.getAll({ role: 'resident', building_id: selectedBuilding, limit: 500 });\r\n        setResidents(data.users || []);\r\n      } catch (error) {\r\n        console.error('Failed to load residents:', error);\r\n      } finally {\r\n        setLoadingResidents(false);\r\n      }\r\n    };\r\n    loadResidents();\r\n  }, [selectedBuilding]);\r\n\r\n  // Auto-populate apartment data when resident is selected\r\n  const handleResidentSelect = (residentId: string) => {\r\n    const resident = residents.find(r => r.id === residentId);\r\n    setSelectedResident(resident || null);\r\n\r\n    if (resident) {\r\n      const buildingData = buildings.find(b => b.id === selectedBuilding);\r\n      setNewApartment(prev => ({\r\n        ...prev,\r\n        address: buildingData?.address || resident.address || '',\r\n        apartment: resident.apartment || '',\r\n        ownerName: resident.name || '',\r\n        ownerPhone: resident.phone || '',\r\n        ownerLogin: resident.login || '',\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Reset cascading selection when modal closes\r\n  const resetCascadingSelection = () => {\r\n    setSelectedBranch('');\r\n    setSelectedBuilding('');\r\n    setSelectedResident(null);\r\n    setBranches([]);\r\n    setBuildings([]);\r\n    setResidents([]);\r\n  };\r\n\r\n  const [newRecord, setNewRecord] = useState({\r\n    guestNames: '',\r\n    passportInfo: '',\r\n    checkInDate: '',\r\n    checkOutDate: '',\r\n    amount: '',\r\n    currency: 'UZS',\r\n    notes: '',\r\n  });\r\n\r\n  const generateCredentials = () => {\r\n    const prefix = newApartment.ownerType === 'commercial_owner' ? 'owner' : 'tenant';\r\n    const login = prefix + Math.floor(Math.random() * 10000);\r\n    const password = Math.random().toString(36).slice(-8);\r\n    setNewApartment({ ...newApartment, ownerLogin: login, password });\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!deleteConfirmApartment) return;\r\n\r\n    // Find apartment to get stored password\r\n    const apartment = rentalApartments.find(a => a.id === deleteConfirmApartment.id);\r\n\r\n    if (!apartment || apartment.ownerPassword !== deletePassword) {\r\n      setDeleteError('Неверный пароль');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await deleteRentalApartment(deleteConfirmApartment.id);\r\n      // Also remove user from auth store\r\n      const { removeUser } = useAuthStore.getState();\r\n      removeUser(deleteConfirmApartment.ownerLogin);\r\n\r\n      setDeleteConfirmApartment(null);\r\n      setDeletePassword('');\r\n      setDeleteError('');\r\n    } catch (error) {\r\n      setDeleteError('Ошибка удаления');\r\n    }\r\n  };\r\n\r\n  const handleAddApartment = async () => {\r\n    // Validate required fields - now uses cascading selection\r\n    if (!newApartment.name || !selectedResident || !newApartment.ownerLogin || !newApartment.password) {\r\n      alert('Пожалуйста, заполните все обязательные поля');\r\n      return;\r\n    }\r\n\r\n    const prefix = newApartment.ownerType === 'commercial_owner' ? 'owner_' : 'tenant_';\r\n    const ownerId = prefix + Math.random().toString(36).substr(2, 9);\r\n\r\n    try {\r\n      const result = await addRentalApartment({\r\n        ...newApartment,\r\n        ownerId,\r\n        password: newApartment.password,\r\n        ownerType: newApartment.ownerType,\r\n      });\r\n\r\n      if (result) {\r\n        setShowCredentials({ login: newApartment.ownerLogin, password: newApartment.password });\r\n        setNewApartment({ name: '', address: '', apartment: '', ownerName: '', ownerPhone: '', ownerLogin: '', password: '', ownerType: 'tenant' });\r\n        resetCascadingSelection();\r\n        setShowAddApartmentModal(false);\r\n      } else {\r\n        alert('Ошибка создания пользователя. Ответ сервера пустой.');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('[RentalsPage] Error creating apartment:', error);\r\n      alert(`Ошибка создания пользователя: ${error.message || 'Неизвестная ошибка'}`);\r\n    }\r\n  };\r\n\r\n  const handleAddRecord = async () => {\r\n    if (!selectedApartment || !newRecord.guestNames || !newRecord.passportInfo || !newRecord.checkInDate || !newRecord.checkOutDate || !newRecord.amount) return;\r\n\r\n    const result = await addRentalRecord({\r\n      apartmentId: selectedApartment,\r\n      guestNames: newRecord.guestNames,\r\n      passportInfo: newRecord.passportInfo,\r\n      checkInDate: newRecord.checkInDate,\r\n      checkOutDate: newRecord.checkOutDate,\r\n      amount: parseFloat(newRecord.amount),\r\n      currency: newRecord.currency,\r\n      notes: newRecord.notes,\r\n      createdBy: user?.id || '',\r\n    });\r\n\r\n    if (result) {\r\n      setNewRecord({ guestNames: '', passportInfo: '', checkInDate: '', checkOutDate: '', amount: '', currency: 'UZS', notes: '' });\r\n      setShowAddRecordModal(false);\r\n    } else {\r\n      alert('Ошибка сохранения записи');\r\n    }\r\n  };\r\n\r\n  const getApartmentRecords = (apartmentId: string) => {\r\n    return rentalRecords.filter(r => r.apartmentId === apartmentId).sort((a, b) =>\r\n      new Date(b.checkInDate).getTime() - new Date(a.checkInDate).getTime()\r\n    );\r\n  };\r\n\r\n  const formatDate = (date: string) => {\r\n    return new Date(date).toLocaleDateString('ru-RU', { day: 'numeric', month: 'short', year: 'numeric' });\r\n  };\r\n\r\n  const formatAmount = (amount: number, currency: string) => {\r\n    if (currency === 'UZS') {\r\n      return amount.toLocaleString('ru-RU') + ' сум';\r\n    }\r\n    return '$' + amount.toLocaleString('en-US');\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold text-gray-900\">Аренда квартир</h1>\r\n        <button onClick={() => setShowAddApartmentModal(true)} className=\"btn-primary\">\r\n          + Добавить квартиру\r\n        </button>\r\n      </div>\r\n\r\n      {isLoading ? (\r\n        <div className=\"glass-card p-8 text-center\">\r\n          <Loader2 className=\"w-12 h-12 text-primary-500 mx-auto mb-4 animate-spin\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Загрузка...</h3>\r\n        </div>\r\n      ) : rentalApartments.length === 0 ? (\r\n        <div className=\"glass-card p-8 text-center\">\r\n          <Key className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Квартир пока нет</h3>\r\n          <p className=\"text-gray-500\">Добавьте первую квартиру для управления арендой</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {rentalApartments.map((apartment) => {\r\n            const records = getApartmentRecords(apartment.id);\r\n            const activeRecord = records.find(r => new Date(r.checkOutDate) >= new Date());\r\n\r\n            return (\r\n              <div\r\n                key={apartment.id}\r\n                className=\"glass-card p-5 cursor-pointer hover:shadow-lg transition-shadow\"\r\n                onClick={() => setSelectedApartment(apartment.id)}\r\n              >\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-lg mb-1\">{apartment.name}</h3>\r\n                    <div className=\"text-sm text-gray-500\">{apartment.address}, кв. {apartment.apartment}</div>\r\n                  </div>\r\n                  {activeRecord ? (\r\n                    <span className=\"badge badge-progress\">Занята</span>\r\n                  ) : (\r\n                    <span className=\"badge badge-done\">Свободна</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"space-y-2 text-sm text-gray-600\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <User className=\"w-4 h-4\" />\r\n                    {apartment.ownerName}\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Phone className=\"w-4 h-4\" />\r\n                    {apartment.ownerPhone}\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <FileText className=\"w-4 h-4\" />\r\n                    {records.length} записей\r\n                  </div>\r\n                </div>\r\n                {activeRecord && (\r\n                  <div className=\"mt-3 pt-3 border-t border-gray-100\">\r\n                    <div className=\"text-xs text-gray-500\">Текущий гость:</div>\r\n                    <div className=\"text-sm font-medium\">{activeRecord.guestNames}</div>\r\n                    <div className=\"text-xs text-gray-500\">до {formatDate(activeRecord.checkOutDate)}</div>\r\n                  </div>\r\n                )}\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    setDeleteConfirmApartment({ id: apartment.id, ownerLogin: apartment.ownerLogin });\r\n                  }}\r\n                  className=\"mt-3 text-xs text-red-500 hover:text-red-700\"\r\n                >\r\n                  Удалить квартиру\r\n                </button>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Apartment Details Modal */}\r\n      {selectedApartment && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setSelectedApartment(null)}>\r\n          <div className=\"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\" onClick={e => e.stopPropagation()}>\r\n            {(() => {\r\n              const apartment = rentalApartments.find(a => a.id === selectedApartment);\r\n              const records = getApartmentRecords(selectedApartment);\r\n              if (!apartment) return null;\r\n\r\n              return (\r\n                <>\r\n                  <div className=\"flex items-center justify-between mb-6\">\r\n                    <div>\r\n                      <h2 className=\"text-xl font-bold\">{apartment.name}</h2>\r\n                      <div className=\"text-gray-500\">{apartment.address}, кв. {apartment.apartment}</div>\r\n                    </div>\r\n                    <button\r\n                      onClick={() => { setShowAddRecordModal(true); }}\r\n                      className=\"btn-primary text-sm\"\r\n                    >\r\n                      + Добавить запись\r\n                    </button>\r\n                  </div>\r\n\r\n                  <div className=\"mb-6 p-4 bg-gray-50 rounded-xl\">\r\n                    <div className=\"text-sm text-gray-500 mb-2\">Владелец</div>\r\n                    <div className=\"font-medium\">{apartment.ownerName}</div>\r\n                    <div className=\"text-sm text-gray-600\">{apartment.ownerPhone}</div>\r\n                    <div className=\"mt-3 pt-3 border-t border-gray-200\">\r\n                      <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                          <div className=\"text-xs text-gray-400\">Логин</div>\r\n                          <div className=\"font-mono text-sm font-medium text-gray-700\">{apartment.ownerLogin}</div>\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"text-xs text-gray-400\">Пароль</div>\r\n                          <div className=\"font-mono text-sm font-medium text-gray-700\">{apartment.ownerPassword || '—'}</div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <h3 className=\"font-semibold mb-4\">История аренды ({records.length})</h3>\r\n\r\n                  {records.length === 0 ? (\r\n                    <div className=\"text-center py-8 text-gray-500\">\r\n                      Записей пока нет\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"space-y-3\">\r\n                      {records.map(record => {\r\n                        const isActive = new Date(record.checkOutDate) >= new Date();\r\n                        return (\r\n                          <div key={record.id} className={`p-4 rounded-xl border ${isActive ? 'border-green-200 bg-green-50' : 'border-gray-200'}`}>\r\n                            <div className=\"flex items-start justify-between\">\r\n                              <div>\r\n                                <div className=\"font-medium\">{record.guestNames}</div>\r\n                                <div className=\"text-sm text-gray-500\">{record.passportInfo}</div>\r\n                              </div>\r\n                              <div className=\"text-right\">\r\n                                <div className=\"font-semibold text-green-600\">{formatAmount(record.amount, record.currency)}</div>\r\n                                {isActive && <span className=\"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded\">Активно</span>}\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-4 mt-2 text-sm text-gray-600\">\r\n                              <div className=\"flex items-center gap-1\">\r\n                                <Calendar className=\"w-4 h-4\" />\r\n                                {formatDate(record.checkInDate)} - {formatDate(record.checkOutDate)}\r\n                              </div>\r\n                            </div>\r\n                            {record.notes && (\r\n                              <div className=\"mt-2 text-sm text-gray-500\">{record.notes}</div>\r\n                            )}\r\n                            <button\r\n                              onClick={async () => {\r\n                                try {\r\n                                  await deleteRentalRecord(record.id);\r\n                                } catch (error) {\r\n                                  alert('Ошибка удаления записи');\r\n                                }\r\n                              }}\r\n                              className=\"mt-2 text-xs text-red-500 hover:text-red-700\"\r\n                            >\r\n                              Удалить\r\n                            </button>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex justify-end mt-6\">\r\n                    <button onClick={() => setSelectedApartment(null)} className=\"btn-secondary\">\r\n                      Закрыть\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              );\r\n            })()}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Add Apartment Modal */}\r\n      {showAddApartmentModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto\">\r\n            <h2 className=\"text-xl font-bold mb-6\">Добавить квартиру</h2>\r\n            <div className=\"space-y-4\">\r\n              {/* Apartment Name */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Название</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newApartment.name}\r\n                  onChange={e => setNewApartment({ ...newApartment, name: e.target.value })}\r\n                  placeholder=\"Квартира у моря\"\r\n                  className=\"glass-input\"\r\n                />\r\n              </div>\r\n\r\n              {/* Cascading Selection */}\r\n              <div className=\"border-t pt-4\">\r\n                <h3 className=\"font-medium mb-3 flex items-center gap-2\">\r\n                  <Building2 className=\"w-5 h-5\" />\r\n                  Выбор квартиры и владельца\r\n                </h3>\r\n\r\n                {/* Branch Selection */}\r\n                <div className=\"mb-3\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-1\">\r\n                    <GitBranch className=\"w-4 h-4\" />\r\n                    Филиал *\r\n                  </label>\r\n                  <select\r\n                    value={selectedBranch}\r\n                    onChange={(e) => setSelectedBranch(e.target.value)}\r\n                    className=\"glass-input w-full\"\r\n                    disabled={loadingBranches}\r\n                  >\r\n                    <option value=\"\">\r\n                      {loadingBranches ? 'Загрузка...' : 'Выберите филиал'}\r\n                    </option>\r\n                    {branches.map(branch => (\r\n                      <option key={branch.code} value={branch.code}>{branch.name}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Building Selection */}\r\n                <div className=\"mb-3\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-1\">\r\n                    <Building2 className=\"w-4 h-4\" />\r\n                    Дом *\r\n                  </label>\r\n                  <select\r\n                    value={selectedBuilding}\r\n                    onChange={(e) => setSelectedBuilding(e.target.value)}\r\n                    className=\"glass-input w-full\"\r\n                    disabled={!selectedBranch || loadingBuildings}\r\n                  >\r\n                    <option value=\"\">\r\n                      {loadingBuildings ? 'Загрузка...' : !selectedBranch ? 'Сначала выберите филиал' : 'Выберите дом'}\r\n                    </option>\r\n                    {buildings.map(building => (\r\n                      <option key={building.id} value={building.id}>\r\n                        {building.name} - {building.address}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Resident Selection */}\r\n                <div className=\"mb-3\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-1\">\r\n                    <User className=\"w-4 h-4\" />\r\n                    Житель (владелец) *\r\n                  </label>\r\n                  <select\r\n                    value={selectedResident?.id || ''}\r\n                    onChange={(e) => handleResidentSelect(e.target.value)}\r\n                    className=\"glass-input w-full\"\r\n                    disabled={!selectedBuilding || loadingResidents}\r\n                  >\r\n                    <option value=\"\">\r\n                      {loadingResidents ? 'Загрузка...' : !selectedBuilding ? 'Сначала выберите дом' : 'Выберите жителя'}\r\n                    </option>\r\n                    {residents.map(resident => (\r\n                      <option key={resident.id} value={resident.id}>\r\n                        {resident.name} {resident.apartment ? `- кв. ${resident.apartment}` : ''}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Selected Resident Info */}\r\n                {selectedResident && (\r\n                  <div className=\"bg-primary-50 border border-primary-200 rounded-xl p-4 mt-3\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <div className=\"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center\">\r\n                        <User className=\"w-5 h-5 text-primary-600\" />\r\n                      </div>\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <p className=\"font-semibold text-gray-900\">{selectedResident.name}</p>\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          {selectedResident.phone || 'Телефон не указан'}\r\n                        </p>\r\n                        <p className=\"text-sm text-gray-500 mt-1\">\r\n                          {buildings.find(b => b.id === selectedBuilding)?.address}\r\n                          {selectedResident.apartment && `, кв. ${selectedResident.apartment}`}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Selection Path Display */}\r\n                {(selectedBranch || selectedBuilding) && (\r\n                  <div className=\"flex items-center gap-1 text-xs text-gray-500 mt-2 flex-wrap\">\r\n                    {selectedBranch && (\r\n                      <>\r\n                        <span className=\"bg-gray-100 px-2 py-1 rounded\">\r\n                          {branches.find(b => b.code === selectedBranch)?.name}\r\n                        </span>\r\n                        {selectedBuilding && <ChevronRight className=\"w-3 h-3\" />}\r\n                      </>\r\n                    )}\r\n                    {selectedBuilding && (\r\n                      <>\r\n                        <span className=\"bg-gray-100 px-2 py-1 rounded\">\r\n                          {buildings.find(b => b.id === selectedBuilding)?.name}\r\n                        </span>\r\n                        {selectedResident && <ChevronRight className=\"w-3 h-3\" />}\r\n                      </>\r\n                    )}\r\n                    {selectedResident && (\r\n                      <span className=\"bg-primary-100 text-primary-700 px-2 py-1 rounded\">\r\n                        {selectedResident.name}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Owner Login/Password */}\r\n              <div className=\"border-t pt-4\">\r\n                <h3 className=\"font-medium mb-3\">Учётные данные владельца</h3>\r\n                <div className=\"space-y-3\">\r\n                  <div className=\"flex gap-2\">\r\n                    <div className=\"flex-1\">\r\n                      <label className=\"block text-sm font-medium mb-1\">Логин</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={newApartment.ownerLogin}\r\n                        onChange={e => setNewApartment({ ...newApartment, ownerLogin: e.target.value })}\r\n                        className=\"glass-input\"\r\n                        readOnly={!!selectedResident?.login}\r\n                      />\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <label className=\"block text-sm font-medium mb-1\">Пароль</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={newApartment.password}\r\n                        onChange={e => setNewApartment({ ...newApartment, password: e.target.value })}\r\n                        className=\"glass-input\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <button onClick={generateCredentials} className=\"text-sm text-primary-600 hover:text-primary-700\">\r\n                    Сгенерировать логин/пароль\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-3 mt-6\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowAddApartmentModal(false);\r\n                  resetCascadingSelection();\r\n                  setNewApartment({ name: '', address: '', apartment: '', ownerName: '', ownerPhone: '', ownerLogin: '', password: '', ownerType: 'tenant' });\r\n                }}\r\n                className=\"btn-secondary flex-1\"\r\n              >\r\n                Отмена\r\n              </button>\r\n              <button\r\n                onClick={handleAddApartment}\r\n                className=\"btn-primary flex-1\"\r\n                disabled={!selectedResident}\r\n              >\r\n                Добавить\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Add Record Modal */}\r\n      {showAddRecordModal && selectedApartment && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-2xl p-6 w-full max-w-md\">\r\n            <h2 className=\"text-xl font-bold mb-6\">Добавить запись</h2>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Имена гостей</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newRecord.guestNames}\r\n                  onChange={e => setNewRecord({ ...newRecord, guestNames: e.target.value })}\r\n                  placeholder=\"Иванов Иван, Петрова Мария\"\r\n                  className=\"glass-input\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Паспортные данные</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newRecord.passportInfo}\r\n                  onChange={e => setNewRecord({ ...newRecord, passportInfo: e.target.value })}\r\n                  placeholder=\"AA1234567\"\r\n                  className=\"glass-input\"\r\n                />\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Дата заезда</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={newRecord.checkInDate}\r\n                    onChange={e => setNewRecord({ ...newRecord, checkInDate: e.target.value })}\r\n                    className=\"glass-input\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Дата выезда</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={newRecord.checkOutDate}\r\n                    onChange={e => setNewRecord({ ...newRecord, checkOutDate: e.target.value })}\r\n                    className=\"glass-input\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Сумма</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newRecord.amount}\r\n                    onChange={e => setNewRecord({ ...newRecord, amount: e.target.value })}\r\n                    placeholder=\"1000000\"\r\n                    className=\"glass-input\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Валюта</label>\r\n                  <select\r\n                    value={newRecord.currency}\r\n                    onChange={e => setNewRecord({ ...newRecord, currency: e.target.value })}\r\n                    className=\"glass-input\"\r\n                  >\r\n                    <option value=\"UZS\">UZS (сум)</option>\r\n                    <option value=\"USD\">USD ($)</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Заметки (опционально)</label>\r\n                <textarea\r\n                  value={newRecord.notes}\r\n                  onChange={e => setNewRecord({ ...newRecord, notes: e.target.value })}\r\n                  className=\"glass-input min-h-[80px]\"\r\n                  placeholder=\"Дополнительная информация...\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-3 mt-6\">\r\n              <button onClick={() => { setShowAddRecordModal(false); }} className=\"btn-secondary flex-1\">\r\n                Отмена\r\n              </button>\r\n              <button onClick={handleAddRecord} className=\"btn-primary flex-1\">\r\n                Добавить\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Credentials Modal */}\r\n      {showCredentials && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-2xl p-6 w-full max-w-sm text-center\">\r\n            <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <CheckCircle className=\"w-8 h-8 text-green-600\" />\r\n            </div>\r\n            <h2 className=\"text-xl font-bold mb-2\">Квартира добавлена!</h2>\r\n            <p className=\"text-gray-500 mb-6\">Данные для входа владельца:</p>\r\n            <div className=\"bg-gray-50 rounded-xl p-4 mb-6\">\r\n              <div className=\"flex justify-between items-center mb-2\">\r\n                <span className=\"text-gray-500\">Логин:</span>\r\n                <span className=\"font-mono font-bold\">{showCredentials.login}</span>\r\n              </div>\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-gray-500\">Пароль:</span>\r\n                <span className=\"font-mono font-bold\">{showCredentials.password}</span>\r\n              </div>\r\n            </div>\r\n            <button onClick={() => setShowCredentials(null)} className=\"btn-primary w-full\">\r\n              Готово\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      {deleteConfirmApartment && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-2xl p-6 w-full max-w-sm\">\r\n            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <AlertCircle className=\"w-8 h-8 text-red-600\" />\r\n            </div>\r\n            <h2 className=\"text-xl font-bold mb-2 text-center\">Подтвердите удаление</h2>\r\n            <p className=\"text-gray-500 mb-6 text-center\">\r\n              Введите пароль владельца квартиры для подтверждения удаления\r\n            </p>\r\n            <div className=\"mb-4\">\r\n              <input\r\n                type=\"password\"\r\n                value={deletePassword}\r\n                onChange={e => {\r\n                  setDeletePassword(e.target.value);\r\n                  setDeleteError('');\r\n                }}\r\n                placeholder=\"Пароль владельца\"\r\n                className=\"glass-input w-full\"\r\n              />\r\n              {deleteError && (\r\n                <p className=\"text-red-500 text-sm mt-2\">{deleteError}</p>\r\n              )}\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => {\r\n                  setDeleteConfirmApartment(null);\r\n                  setDeletePassword('');\r\n                  setDeleteError('');\r\n                }}\r\n                className=\"btn-secondary flex-1\"\r\n              >\r\n                Отмена\r\n              </button>\r\n              <button\r\n                onClick={handleDeleteConfirm}\r\n                className=\"flex-1 bg-red-500 hover:bg-red-600 text-white py-3 rounded-xl font-medium transition-colors\"\r\n              >\r\n                Удалить\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["RentalsPage","user","useAuthStore","rentalApartments","rentalRecords","addRentalApartment","deleteRentalApartment","addRentalRecord","deleteRentalRecord","fetchRentals","useDataStore","isLoading","setIsLoading","useState","useEffect","showAddApartmentModal","setShowAddApartmentModal","showAddRecordModal","setShowAddRecordModal","selectedApartment","setSelectedApartment","showCredentials","setShowCredentials","deleteConfirmApartment","setDeleteConfirmApartment","deletePassword","setDeletePassword","deleteError","setDeleteError","newApartment","setNewApartment","branches","setBranches","buildings","setBuildings","residents","setResidents","selectedBranch","setSelectedBranch","selectedBuilding","setSelectedBuilding","selectedResident","setSelectedResident","loadingBranches","setLoadingBranches","loadingBuildings","setLoadingBuildings","loadingResidents","setLoadingResidents","data","branchesApi","filteredBuildings","buildingsApi","b","usersApi","handleResidentSelect","residentId","resident","r","buildingData","prev","resetCascadingSelection","newRecord","setNewRecord","generateCredentials","login","password","handleDeleteConfirm","apartment","a","removeUser","handleAddApartment","ownerId","error","handleAddRecord","getApartmentRecords","apartmentId","formatDate","date","formatAmount","amount","currency","jsxs","jsx","Loader2","Key","records","activeRecord","User","Phone","FileText","e","Fragment","record","isActive","Calendar","Building2","GitBranch","branch","building","ChevronRight","CheckCircle","AlertCircle"],"mappings":"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"}