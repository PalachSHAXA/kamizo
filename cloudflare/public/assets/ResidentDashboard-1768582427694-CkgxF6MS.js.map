{"version":3,"file":"ResidentDashboard-1768582427694-CkgxF6MS.js","sources":["../../src/components/RequestStatusTracker.tsx","../../src/pages/ResidentDashboard.tsx"],"sourcesContent":["import { CheckCircle, Clock, Wrench, User, Star, XCircle, Phone, MessageCircle, RefreshCw } from 'lucide-react';\r\nimport type { Request, RequestStatus } from '../types';\r\nimport { SERVICE_CATEGORIES, SPECIALIZATION_LABELS } from '../types';\r\n\r\n// Helper to get category info\r\nfunction getCategoryInfo(category: string) {\r\n  const cat = SERVICE_CATEGORIES.find(c => c.id === category);\r\n  return {\r\n    icon: cat?.icon || 'üîß',\r\n    name: cat?.name || SPECIALIZATION_LABELS[category as keyof typeof SPECIALIZATION_LABELS] || category,\r\n    nameUz: cat?.name || category\r\n  };\r\n}\r\n\r\ninterface RequestStatusTrackerProps {\r\n  request: Request;\r\n  executorName?: string;\r\n  language: 'ru' | 'uz';\r\n  onCancel?: () => void;\r\n  showActions?: boolean;\r\n  hasRescheduleRequest?: boolean;\r\n  rescheduleInfo?: {\r\n    proposedDate: string;\r\n    proposedTime: string;\r\n    initiator: 'resident' | 'executor';\r\n  };\r\n  hasConfirmedReschedule?: boolean;\r\n  confirmedRescheduleInfo?: {\r\n    proposedDate: string;\r\n    proposedTime: string;\r\n  };\r\n}\r\n\r\n// –≠—Ç–∞–ø—ã –∑–∞—è–≤–∫–∏\r\nconst STAGES = [\r\n  {\r\n    id: 'created',\r\n    statuses: ['new'],\r\n    labelRu: '–°–æ–∑–¥–∞–Ω–∞',\r\n    labelUz: 'Yaratildi',\r\n    descRu: '–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏ –æ–∂–∏–¥–∞–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è',\r\n    descUz: 'Ariza yaratildi va tayinlanishni kutmoqda',\r\n    icon: CheckCircle\r\n  },\r\n  {\r\n    id: 'assigned',\r\n    statuses: ['assigned', 'accepted'],\r\n    labelRu: '–ù–∞–∑–Ω–∞—á–µ–Ω–∞',\r\n    labelUz: 'Tayinlandi',\r\n    descRu: '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω',\r\n    descUz: 'Ijrochi tayinlandi',\r\n    icon: User\r\n  },\r\n  {\r\n    id: 'in_progress',\r\n    statuses: ['in_progress'],\r\n    labelRu: '–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è',\r\n    labelUz: 'Bajarilmoqda',\r\n    descRu: '–ú–∞—Å—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ –∑–∞—è–≤–∫–æ–π',\r\n    descUz: 'Usta ariza ustida ishlayapti',\r\n    icon: Wrench\r\n  },\r\n  {\r\n    id: 'done',\r\n    statuses: ['pending_approval', 'completed'],\r\n    labelRu: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ',\r\n    labelUz: 'Bajarildi',\r\n    descRu: '–†–∞–±–æ—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞',\r\n    descUz: 'Ish tugallandi',\r\n    icon: Star\r\n  },\r\n];\r\n\r\nfunction getStageIndex(status: RequestStatus): number {\r\n  if (status === 'cancelled') return -1;\r\n  for (let i = 0; i < STAGES.length; i++) {\r\n    if (STAGES[i].statuses.includes(status)) {\r\n      return i;\r\n    }\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getStatusMessage(request: Request, language: 'ru' | 'uz'): { title: string; subtitle: string } {\r\n  const now = new Date();\r\n\r\n  switch (request.status) {\r\n    case 'new':\r\n      return {\r\n        title: language === 'ru' ? '–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞' : 'Ariza yaratildi',\r\n        subtitle: language === 'ru'\r\n          ? '–û–∂–∏–¥–∞–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è'\r\n          : 'Ijrochi tayinlanishini kutmoqdamiz'\r\n      };\r\n    case 'assigned':\r\n      return {\r\n        title: language === 'ru' ? '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω' : 'Ijrochi tayinlandi',\r\n        subtitle: language === 'ru'\r\n          ? '–û–∂–∏–¥–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –º–∞—Å—Ç–µ—Ä–∞'\r\n          : 'Ustadan tasdiqni kutmoqdamiz'\r\n      };\r\n    case 'accepted':\r\n      if (request.scheduledDate && request.scheduledTime) {\r\n        const scheduled = new Date(request.scheduledDate);\r\n        const [hours] = request.scheduledTime.split(':').map(Number);\r\n        scheduled.setHours(hours, 0, 0, 0);\r\n\r\n        const diffMs = scheduled.getTime() - now.getTime();\r\n        const diffMins = Math.floor(diffMs / 60000);\r\n        const diffHours = Math.floor(diffMins / 60);\r\n\r\n        if (diffMs > 0 && diffMins < 60) {\r\n          return {\r\n            title: language === 'ru' ? `–ú–∞—Å—Ç–µ—Ä –ø—Ä–∏–µ–¥–µ—Ç —á–µ—Ä–µ–∑ ~${diffMins} –º–∏–Ω` : `Usta ~${diffMins} daqiqada keladi`,\r\n            subtitle: language === 'ru' ? '–°–∫–æ—Ä–æ –±—É–¥–µ—Ç —É –≤–∞—Å' : 'Tez orada sizda bo\\'ladi'\r\n          };\r\n        } else if (diffMs > 0 && diffHours < 24) {\r\n          return {\r\n            title: language === 'ru' ? `–ú–∞—Å—Ç–µ—Ä –ø—Ä–∏–µ–¥–µ—Ç —á–µ—Ä–µ–∑ ~${diffHours} —á` : `Usta ~${diffHours} soatda keladi`,\r\n            subtitle: language === 'ru'\r\n              ? `–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ ${scheduled.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' })}`\r\n              : `${scheduled.toLocaleTimeString('uz-UZ', { hour: '2-digit', minute: '2-digit' })} ga rejalashtirilgan`\r\n          };\r\n        }\r\n      }\r\n      return {\r\n        title: language === 'ru' ? '–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞' : 'Ariza qabul qilindi',\r\n        subtitle: language === 'ru'\r\n          ? '–ú–∞—Å—Ç–µ—Ä —Å–∫–æ—Ä–æ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏'\r\n          : 'Usta tez orada siz bilan bog\\'lanadi'\r\n      };\r\n    case 'in_progress':\r\n      return {\r\n        title: language === 'ru' ? '–†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è' : 'Ish bajarilmoqda',\r\n        subtitle: language === 'ru'\r\n          ? '–ú–∞—Å—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ –≤–∞—à–µ–π –∑–∞—è–≤–∫–æ–π'\r\n          : 'Usta arizangiz ustida ishlayapti'\r\n      };\r\n    case 'pending_approval':\r\n      return {\r\n        title: language === 'ru' ? '–†–∞–±–æ—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞' : 'Ish tugallandi',\r\n        subtitle: language === 'ru'\r\n          ? '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ'\r\n          : 'Iltimos, bajarilganini tasdiqlang'\r\n      };\r\n    case 'completed':\r\n      return {\r\n        title: language === 'ru' ? '–ó–∞—è–≤–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞' : 'Ariza bajarildi',\r\n        subtitle: language === 'ru' ? '–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É!' : 'Baholashingiz uchun rahmat!'\r\n      };\r\n    case 'cancelled':\r\n      return {\r\n        title: language === 'ru' ? '–ó–∞—è–≤–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞' : 'Ariza bekor qilindi',\r\n        subtitle: request.cancellationReason || (language === 'ru' ? '–ü—Ä–∏—á–∏–Ω–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞' : 'Sabab ko\\'rsatilmagan')\r\n      };\r\n    default:\r\n      return { title: '', subtitle: '' };\r\n  }\r\n}\r\n\r\nexport function RequestStatusTracker({\r\n  request,\r\n  executorName,\r\n  language,\r\n  onCancel,\r\n  showActions = true,\r\n  hasRescheduleRequest = false,\r\n  rescheduleInfo,\r\n  hasConfirmedReschedule = false,\r\n  confirmedRescheduleInfo,\r\n}: RequestStatusTrackerProps) {\r\n  const currentStageIndex = getStageIndex(request.status);\r\n  const isCancelled = request.status === 'cancelled';\r\n  const statusMessage = getStatusMessage(request, language);\r\n\r\n  // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏\r\n  const categoryInfo = getCategoryInfo(request.category);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-lg overflow-hidden\">\r\n      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–∫–æ–Ω–∫–æ–π —É—Å–ª—É–≥–∏ */}\r\n      <div className=\"p-4 bg-gradient-to-r from-primary-500 to-orange-400\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-xl\">\r\n            {categoryInfo.icon}\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <div className=\"font-bold text-gray-900\">\r\n              {language === 'ru' ? categoryInfo.name : categoryInfo.nameUz}\r\n            </div>\r\n            <div className=\"text-sm text-gray-700 opacity-80\">\r\n              #{request.id.slice(-6).toUpperCase()}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Å—Ç–∞—Ç—É—Å–µ */}\r\n      <div className=\"p-6 text-center border-b\">\r\n        <h2 className=\"text-xl font-bold text-gray-900 mb-1\">\r\n          {statusMessage.title}\r\n        </h2>\r\n        <p className=\"text-gray-500 text-sm\">\r\n          {statusMessage.subtitle}\r\n        </p>\r\n      </div>\r\n\r\n      {/* –í–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å */}\r\n      <div className=\"p-6\">\r\n        <div className=\"flex items-center justify-between relative\">\r\n          {/* –õ–∏–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ */}\r\n          <div className=\"absolute top-5 left-0 right-0 h-1 bg-gray-200 rounded-full\" />\r\n          <div\r\n            className=\"absolute top-5 left-0 h-1 bg-primary-500 rounded-full transition-all duration-500\"\r\n            style={{\r\n              width: isCancelled ? '0%' : `${Math.min((currentStageIndex / (STAGES.length - 1)) * 100, 100)}%`\r\n            }}\r\n          />\r\n\r\n          {/* –≠—Ç–∞–ø—ã */}\r\n          {STAGES.map((stage, index) => {\r\n            const isCompleted = !isCancelled && currentStageIndex >= index;\r\n            const isCurrent = !isCancelled && currentStageIndex === index;\r\n            const StageIcon = stage.icon;\r\n\r\n            return (\r\n              <div key={stage.id} className=\"relative z-10 flex flex-col items-center\">\r\n                <div\r\n                  className={`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 ${\r\n                    isCancelled\r\n                      ? 'bg-gray-200 text-gray-400'\r\n                      : isCompleted\r\n                        ? isCurrent\r\n                          ? 'bg-primary-500 text-gray-900 ring-4 ring-primary-200 animate-pulse'\r\n                          : 'bg-primary-500 text-gray-900'\r\n                        : 'bg-gray-200 text-gray-400'\r\n                  }`}\r\n                >\r\n                  <StageIcon className=\"w-5 h-5\" />\r\n                </div>\r\n                <span className={`text-xs mt-2 font-medium text-center max-w-[70px] ${\r\n                  isCompleted && !isCancelled ? 'text-gray-900' : 'text-gray-400'\r\n                }`}>\r\n                  {language === 'ru' ? stage.labelRu : stage.labelUz}\r\n                </span>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* –û—Ç–º–µ–Ω–∞ */}\r\n        {isCancelled && (\r\n          <div className=\"mt-6 p-4 bg-red-50 rounded-xl flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center\">\r\n              <XCircle className=\"w-5 h-5 text-red-500\" />\r\n            </div>\r\n            <div>\r\n              <div className=\"font-medium text-red-700\">\r\n                {language === 'ru' ? '–ó–∞—è–≤–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞' : 'Ariza bekor qilindi'}\r\n              </div>\r\n              {request.cancellationReason && (\r\n                <div className=\"text-sm text-red-600\">{request.cancellationReason}</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—Ä–µ–Ω–æ—Å–∞ - –æ–∂–∏–¥–∞–Ω–∏–µ */}\r\n        {hasRescheduleRequest && rescheduleInfo && !isCancelled && (\r\n          <div className=\"mt-6 p-4 bg-amber-50 border-2 border-amber-400 rounded-xl\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 bg-amber-500 rounded-full flex items-center justify-center animate-pulse\">\r\n                <RefreshCw className=\"w-5 h-5 text-white\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <div className=\"font-semibold text-amber-800\">\r\n                  {language === 'ru' ? '–ó–∞–ø—Ä–æ—à–µ–Ω –ø–µ—Ä–µ–Ω–æ—Å' : 'Ko\\'chirish so\\'raldi'}\r\n                </div>\r\n                <div className=\"text-sm text-amber-700\">\r\n                  {language === 'ru' ? '–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–æ: ' : 'Taklif: '}\r\n                  <span className=\"font-medium\">\r\n                    {rescheduleInfo.proposedDate} {language === 'ru' ? '–≤' : ''} {rescheduleInfo.proposedTime}\r\n                  </span>\r\n                </div>\r\n                <div className=\"text-xs text-amber-600 mt-1\">\r\n                  {rescheduleInfo.initiator === 'resident'\r\n                    ? (language === 'ru' ? '–û–∂–∏–¥–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è' : 'Ijrochi javobini kutmoqda')\r\n                    : (language === 'ru' ? '–û–∂–∏–¥–∞–µ—Ç—Å—è –≤–∞—à –æ—Ç–≤–µ—Ç' : 'Sizning javobingiz kutilmoqda')\r\n                  }\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—Ä–µ–Ω–æ—Å–∞ - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω */}\r\n        {hasConfirmedReschedule && confirmedRescheduleInfo && !isCancelled && !hasRescheduleRequest && (\r\n          <div className=\"mt-6 p-4 bg-green-50 border-2 border-green-400 rounded-xl\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center\">\r\n                <CheckCircle className=\"w-5 h-5 text-white\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <div className=\"font-semibold text-green-800\">\r\n                  {language === 'ru' ? '–ü–µ—Ä–µ–Ω–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω' : 'Ko\\'chirish tasdiqlandi'}\r\n                </div>\r\n                <div className=\"text-sm text-green-700\">\r\n                  {language === 'ru' ? '–ù–æ–≤–æ–µ –≤—Ä–µ–º—è: ' : 'Yangi vaqt: '}\r\n                  <span className=\"font-medium\">\r\n                    {confirmedRescheduleInfo.proposedDate} {language === 'ru' ? '–≤' : ''} {confirmedRescheduleInfo.proposedTime}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ - –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç */}\r\n      {executorName && !isCancelled && currentStageIndex >= 1 && (\r\n        <div className=\"px-6 pb-4\">\r\n          <div className=\"p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-11 h-11 bg-blue-500 rounded-full flex items-center justify-center shadow-sm flex-shrink-0\">\r\n                <User className=\"w-5 h-5 text-white\" />\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"font-semibold text-gray-900 truncate\">{executorName}</div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-xs text-gray-500\">\r\n                    {language === 'ru' ? '–í–∞—à –º–∞—Å—Ç–µ—Ä' : 'Sizning ustangiz'}\r\n                  </span>\r\n                  {request.executorRating && (\r\n                    <div className=\"flex items-center gap-0.5 bg-yellow-100 px-1.5 py-0.5 rounded-full\">\r\n                      <Star className=\"w-3 h-3 text-yellow-500 fill-yellow-500\" />\r\n                      <span className=\"text-xs font-medium text-yellow-700\">{request.executorRating.toFixed(1)}</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              {/* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */}\r\n              {request.executorPhone && (\r\n                <div className=\"flex gap-2 flex-shrink-0\">\r\n                  <a\r\n                    href={`tel:${request.executorPhone}`}\r\n                    className=\"w-10 h-10 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center transition-colors shadow-sm\"\r\n                    title={language === 'ru' ? '–ü–æ–∑–≤–æ–Ω–∏—Ç—å' : 'Qo\\'ng\\'iroq qilish'}\r\n                  >\r\n                    <Phone className=\"w-4 h-4\" />\r\n                  </a>\r\n                  <a\r\n                    href={`sms:${request.executorPhone}`}\r\n                    className=\"w-10 h-10 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center transition-colors shadow-sm\"\r\n                    title={language === 'ru' ? '–ù–∞–ø–∏—Å–∞—Ç—å' : 'Yozish'}\r\n                  >\r\n                    <MessageCircle className=\"w-4 h-4\" />\r\n                  </a>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* –í—Ä–µ–º—è */}\r\n      {request.scheduledDate && request.scheduledTime && !isCancelled && (\r\n        <div className=\"px-6 pb-4\">\r\n          <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n            <Clock className=\"w-4 h-4\" />\r\n            <span>\r\n              {language === 'ru' ? '–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ: ' : 'Rejalashtirilgan: '}\r\n              {new Date(request.scheduledDate).toLocaleDateString(language === 'ru' ? 'ru-RU' : 'uz-UZ', {\r\n                day: 'numeric',\r\n                month: 'short'\r\n              })}, {request.scheduledTime}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* –î–µ–π—Å—Ç–≤–∏—è */}\r\n      {showActions && !isCancelled && request.status !== 'completed' && (\r\n        <div className=\"p-4 border-t flex gap-3\">\r\n          {onCancel && ['new', 'assigned', 'accepted'].includes(request.status) && (\r\n            <button\r\n              onClick={onCancel}\r\n              className=\"flex-1 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl text-gray-600 font-medium transition-colors\"\r\n            >\r\n              {language === 'ru' ? '–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É' : 'Arizani bekor qilish'}\r\n            </button>\r\n          )}\r\n          {request.status === 'pending_approval' && (\r\n            <button\r\n              className=\"flex-1 py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-bold transition-colors\"\r\n            >\r\n              {language === 'ru' ? '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ' : 'Bajarilganini tasdiqlash'}\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —Å–ø–∏—Å–∫–∞ —Å –∏–∫–æ–Ω–∫–∞–º–∏ —ç—Ç–∞–ø–æ–≤ –∫–∞–∫ –≤ –Ø–Ω–¥–µ–∫—Å.–ï–¥–∞\r\nexport function RequestStatusTrackerCompact({\r\n  request,\r\n  executorName,\r\n  language,\r\n  onClick,\r\n  hasRescheduleRequest = false,\r\n  rescheduleInfo,\r\n  hasConfirmedReschedule = false,\r\n  confirmedRescheduleInfo,\r\n}: {\r\n  request: Request;\r\n  executorName?: string;\r\n  language: 'ru' | 'uz';\r\n  onClick?: () => void;\r\n  hasRescheduleRequest?: boolean;\r\n  rescheduleInfo?: {\r\n    proposedDate: string;\r\n    proposedTime: string;\r\n    initiator: 'resident' | 'executor';\r\n  };\r\n  hasConfirmedReschedule?: boolean;\r\n  confirmedRescheduleInfo?: {\r\n    proposedDate: string;\r\n    proposedTime: string;\r\n  };\r\n}) {\r\n  const currentStageIndex = getStageIndex(request.status);\r\n  const isCancelled = request.status === 'cancelled';\r\n  const statusMessage = getStatusMessage(request, language);\r\n  const categoryInfo = getCategoryInfo(request.category);\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      className=\"w-full bg-white rounded-2xl shadow-sm overflow-hidden text-left hover:shadow-md transition-shadow active:scale-[0.99]\"\r\n    >\r\n      {/* Header —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º */}\r\n      <div className=\"p-4 bg-gradient-to-r from-primary-500/10 to-orange-400/10\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-12 h-12 bg-primary-500 rounded-xl flex items-center justify-center text-xl flex-shrink-0 shadow-sm\">\r\n            {categoryInfo.icon}\r\n          </div>\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"flex items-center justify-between gap-2\">\r\n              <span className=\"font-bold text-gray-900 truncate\">\r\n                {language === 'ru' ? categoryInfo.name : categoryInfo.nameUz}\r\n              </span>\r\n              <span className=\"text-xs text-gray-400 bg-white/50 px-2 py-0.5 rounded-full\">\r\n                #{request.id.slice(-6).toUpperCase()}\r\n              </span>\r\n            </div>\r\n            <div className=\"text-sm text-gray-700 mt-1 font-semibold\">\r\n              {statusMessage.title}\r\n            </div>\r\n            <div className=\"text-xs text-gray-500 mt-0.5\">\r\n              {statusMessage.subtitle}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* –≠—Ç–∞–ø—ã —Å –∏–∫–æ–Ω–∫–∞–º–∏ –∫–∞–∫ –≤ –Ø–Ω–¥–µ–∫—Å.–ï–¥–∞ */}\r\n      <div className=\"px-4 py-3 bg-gray-50 border-t border-gray-100\">\r\n        <div className=\"flex items-center justify-between relative\">\r\n          {/* –õ–∏–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ */}\r\n          <div className=\"absolute top-4 left-5 right-5 h-0.5 bg-gray-200\" />\r\n          <div\r\n            className=\"absolute top-4 left-5 h-0.5 bg-primary-500 transition-all duration-500\"\r\n            style={{\r\n              width: isCancelled ? '0%' : `calc(${Math.min((currentStageIndex / (STAGES.length - 1)) * 100, 100)}% - 40px)`\r\n            }}\r\n          />\r\n\r\n          {/* –ò–∫–æ–Ω–∫–∏ —ç—Ç–∞–ø–æ–≤ */}\r\n          {STAGES.map((stage, index) => {\r\n            const isCompleted = !isCancelled && currentStageIndex >= index;\r\n            const isCurrent = !isCancelled && currentStageIndex === index;\r\n            const StageIcon = stage.icon;\r\n\r\n            return (\r\n              <div key={stage.id} className=\"relative z-10 flex flex-col items-center\">\r\n                <div\r\n                  className={`w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 ${\r\n                    isCancelled\r\n                      ? 'bg-gray-200 text-gray-400'\r\n                      : isCompleted\r\n                        ? isCurrent\r\n                          ? 'bg-primary-500 text-gray-900 ring-2 ring-primary-200 shadow-md'\r\n                          : 'bg-primary-500 text-gray-900'\r\n                        : 'bg-white border-2 border-gray-200 text-gray-400'\r\n                  }`}\r\n                >\r\n                  <StageIcon className=\"w-4 h-4\" />\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º */}\r\n        {executorName && currentStageIndex >= 1 && !isCancelled && (\r\n          <div className=\"mt-3 p-2 bg-white rounded-xl border border-gray-100\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                  <User className=\"w-4 h-4 text-blue-600\" />\r\n                </div>\r\n                <div>\r\n                  <div className=\"font-medium text-sm text-gray-900\">{executorName}</div>\r\n                  {request.executorRating && (\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <Star className=\"w-3 h-3 text-yellow-500 fill-yellow-500\" />\r\n                      <span className=\"text-xs text-gray-500\">{request.executorRating.toFixed(1)}</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              {request.executorPhone && (\r\n                <a\r\n                  href={`tel:${request.executorPhone}`}\r\n                  onClick={(e) => e.stopPropagation()}\r\n                  className=\"w-9 h-9 bg-green-100 hover:bg-green-200 rounded-full flex items-center justify-center transition-colors\"\r\n                >\r\n                  <Phone className=\"w-4 h-4 text-green-600\" />\r\n                </a>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—Ä–µ–Ω–æ—Å–∞ - –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π - –æ–∂–∏–¥–∞–Ω–∏–µ */}\r\n        {hasRescheduleRequest && rescheduleInfo && !isCancelled && (\r\n          <div className=\"mt-3 p-2 bg-amber-50 border border-amber-300 rounded-xl\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <RefreshCw className=\"w-4 h-4 text-amber-600 animate-spin\" style={{ animationDuration: '3s' }} />\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"text-xs font-semibold text-amber-800\">\r\n                  {language === 'ru' ? '–ü–µ—Ä–µ–Ω–æ—Å –Ω–∞:' : 'Ko\\'chirish:'} {rescheduleInfo.proposedDate} {rescheduleInfo.proposedTime}\r\n                </div>\r\n                <div className=\"text-[10px] text-amber-600\">\r\n                  {rescheduleInfo.initiator === 'resident'\r\n                    ? (language === 'ru' ? '–û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è' : 'Tasdiqlash kutilmoqda')\r\n                    : (language === 'ru' ? '–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–∞—à –æ—Ç–≤–µ—Ç' : 'Javobingiz kerak')\r\n                  }\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—Ä–µ–Ω–æ—Å–∞ - –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω */}\r\n        {hasConfirmedReschedule && confirmedRescheduleInfo && !isCancelled && !hasRescheduleRequest && (\r\n          <div className=\"mt-3 p-2 bg-green-50 border border-green-300 rounded-xl\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <CheckCircle className=\"w-4 h-4 text-green-600\" />\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"text-xs font-semibold text-green-800\">\r\n                  {language === 'ru' ? '–ü–µ—Ä–µ–Ω–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω:' : 'Ko\\'chirish tasdiqlandi:'} {confirmedRescheduleInfo.proposedDate} {confirmedRescheduleInfo.proposedTime}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </button>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport {\r\n  Home, Plus, FileText, Clock, CheckCircle, Star, X,\r\n  User, Calendar, AlertTriangle, History, ChevronRight, MapPin, Ban, RefreshCw, Send\r\n} from 'lucide-react';\r\nimport { useAuthStore } from '../stores/authStore';\r\nimport { useDataStore } from '../stores/dataStore';\r\nimport { useLanguageStore } from '../stores/languageStore';\r\nimport { SERVICE_CATEGORIES, PRIORITY_LABELS, RESCHEDULE_REASON_LABELS } from '../types';\r\nimport type { Request, ExecutorSpecialization, RequestPriority, RescheduleReason, RescheduleRequest } from '../types';\r\nimport { RequestStatusTracker, RequestStatusTrackerCompact } from '../components/RequestStatusTracker';\r\nimport { formatAddress } from '../utils/formatAddress';\r\n\r\nexport function ResidentDashboard() {\r\n  const { user } = useAuthStore();\r\n  const { requests, addRequest, approveRequest, rejectRequest, cancelRequest, notifications, createRescheduleRequest, respondToRescheduleRequest, getPendingRescheduleForUser, getActiveRescheduleForRequest, fetchRequests, fetchPendingReschedules } = useDataStore();\r\n\r\n  // Fetch requests and reschedules from D1 database on mount\r\n  useEffect(() => {\r\n    fetchRequests();\r\n    fetchPendingReschedules();\r\n    // Poll for reschedules every 15 seconds for better responsiveness\r\n    const interval = setInterval(() => {\r\n      fetchPendingReschedules();\r\n    }, 15000);\r\n    return () => clearInterval(interval);\r\n  }, [fetchRequests, fetchPendingReschedules]);\r\n\r\n  // Listen for openRatingModal event from popup notifications\r\n  useEffect(() => {\r\n    const handleOpenRatingModal = (event: CustomEvent<{ requestId: string }>) => {\r\n      const { requestId } = event.detail;\r\n      const request = requests.find(r => r.id === requestId);\r\n      if (request && request.status === 'pending_approval') {\r\n        setSelectedRequest(request);\r\n        setShowApproveModal(true);\r\n        sessionStorage.removeItem('open_rating_for_request');\r\n      }\r\n    };\r\n\r\n    window.addEventListener('openRatingModal', handleOpenRatingModal as EventListener);\r\n    return () => {\r\n      window.removeEventListener('openRatingModal', handleOpenRatingModal as EventListener);\r\n    };\r\n  }, [requests]);\r\n\r\n  // Check sessionStorage for pending rating modal (after navigation or page load)\r\n  useEffect(() => {\r\n    // Only check when requests are loaded\r\n    if (requests.length === 0) return;\r\n\r\n    const pendingRequestId = sessionStorage.getItem('open_rating_for_request');\r\n    if (pendingRequestId) {\r\n      const request = requests.find(r => r.id === pendingRequestId);\r\n      if (request && request.status === 'pending_approval') {\r\n        setSelectedRequest(request);\r\n        setShowApproveModal(true);\r\n        sessionStorage.removeItem('open_rating_for_request');\r\n      } else {\r\n        // Request not found or not pending approval - might not be loaded yet\r\n        // Keep checking on next requests update\r\n        console.log('[ResidentDashboard] Waiting for request', pendingRequestId, 'status:', request?.status);\r\n      }\r\n    }\r\n  }, [requests]);\r\n  const { language } = useLanguageStore();\r\n  const [activeTab, setActiveTab] = useState<'services' | 'my_requests' | 'pending' | 'history'>('services');\r\n  const [showNewRequestModal, setShowNewRequestModal] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState<ExecutorSpecialization | null>(null);\r\n  const [selectedRequest, setSelectedRequest] = useState<Request | null>(null);\r\n  const [showApproveModal, setShowApproveModal] = useState(false);\r\n  const [showCancelModal, setShowCancelModal] = useState(false);\r\n  const [requestToCancel, setRequestToCancel] = useState<Request | null>(null);\r\n  const [showRescheduleModal, setShowRescheduleModal] = useState(false);\r\n  const [requestToReschedule, setRequestToReschedule] = useState<Request | null>(null);\r\n  const [showRescheduleResponseModal, setShowRescheduleResponseModal] = useState(false);\r\n  const [rescheduleToRespond, setRescheduleToRespond] = useState<RescheduleRequest | null>(null);\r\n\r\n  // Filter requests for this resident\r\n  const myRequests = requests.filter(r => r.residentId === user?.id);\r\n  const pendingApproval = myRequests.filter(r => r.status === 'pending_approval');\r\n\r\n  // Get pending reschedule requests for this user\r\n  const pendingReschedules = user ? getPendingRescheduleForUser(user.id) : [];\r\n  const activeRequests = myRequests.filter(r => ['new', 'assigned', 'accepted', 'in_progress'].includes(r.status));\r\n  const completedRequests = myRequests.filter(r => r.status === 'completed');\r\n  const cancelledRequests = myRequests.filter(r => r.status === 'cancelled');\r\n  const historyRequests = [...completedRequests, ...cancelledRequests].sort(\r\n    (a, b) => new Date(b.completedAt || b.cancelledAt || b.createdAt).getTime() -\r\n              new Date(a.completedAt || a.cancelledAt || a.createdAt).getTime()\r\n  );\r\n\r\n  // Unread notifications for this user\r\n  const myNotifications = notifications.filter(n => n.userId === user?.id && !n.read);\r\n\r\n  const tabs = [\r\n    { id: 'services' as const, label: language === 'ru' ? '–£—Å–ª—É–≥–∏' : 'Xizmatlar', icon: Home },\r\n    { id: 'my_requests' as const, label: language === 'ru' ? '–ú–æ–∏ –∑–∞—è–≤–∫–∏' : 'Arizalarim', icon: FileText, count: activeRequests.length },\r\n    { id: 'pending' as const, label: language === 'ru' ? '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å' : 'Tasdiqlash', icon: CheckCircle, count: pendingApproval.length },\r\n    { id: 'history' as const, label: language === 'ru' ? '–ò—Å—Ç–æ—Ä–∏—è' : 'Tarix', icon: History, count: historyRequests.length },\r\n  ];\r\n\r\n  const handleCategorySelect = (category: ExecutorSpecialization) => {\r\n    setSelectedCategory(category);\r\n    setShowNewRequestModal(true);\r\n  };\r\n\r\n  const handleApproveClick = (request: Request) => {\r\n    setSelectedRequest(request);\r\n    setShowApproveModal(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6 pb-20 md:pb-0\">\r\n      {/* Header - Mobile optimized */}\r\n      <div className=\"flex items-start justify-between gap-3\">\r\n        <div className=\"flex-1 min-w-0\">\r\n          <h1 className=\"text-xl md:text-2xl font-bold text-gray-900\">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>\r\n          <div className=\"flex items-center gap-2 mt-1 text-sm md:text-base text-gray-500\">\r\n            <User className=\"w-4 h-4 flex-shrink-0\" />\r\n            <span className=\"truncate\">{user?.name}</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2 mt-0.5 text-sm text-gray-400\">\r\n            <MapPin className=\"w-3.5 h-3.5 flex-shrink-0\" />\r\n            <span className=\"truncate\">{formatAddress(user?.address, user?.apartment)}</span>\r\n          </div>\r\n        </div>\r\n        {myNotifications.length > 0 && (\r\n          <div className=\"relative flex-shrink-0\">\r\n            <div className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-xs flex items-center justify-center font-medium\">\r\n              {myNotifications.length}\r\n            </div>\r\n            <button className=\"p-3 bg-white/50 rounded-xl active:bg-white/70 transition-colors touch-manipulation\">\r\n              <AlertTriangle className=\"w-5 h-5 text-amber-600\" />\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Pending Approval Alert - Mobile touch friendly */}\r\n      {pendingApproval.length > 0 && (\r\n        <button\r\n          onClick={() => setActiveTab('pending')}\r\n          className=\"glass-card p-4 border-2 border-purple-400 bg-purple-50/50 w-full text-left active:scale-[0.98] transition-transform touch-manipulation\"\r\n        >\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-12 h-12 md:w-10 md:h-10 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0\">\r\n              <CheckCircle className=\"w-6 h-6 md:w-5 md:h-5 text-white\" />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <div className=\"font-semibold text-purple-800\">\r\n                {pendingApproval.length} {pendingApproval.length === 1 ? '–∑–∞—è–≤–∫–∞ –æ–∂–∏–¥–∞–µ—Ç' : '–∑–∞—è–≤–∫–∏ –æ–∂–∏–¥–∞—é—Ç'} –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è\r\n              </div>\r\n              <div className=\"text-sm text-purple-600\">\r\n                –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å\r\n              </div>\r\n            </div>\r\n            <ChevronRight className=\"w-5 h-5 text-purple-500 flex-shrink-0\" />\r\n          </div>\r\n        </button>\r\n      )}\r\n\r\n      {/* Pending Reschedule Requests Alert */}\r\n      {pendingReschedules.length > 0 && (\r\n        <div className=\"glass-card p-4 border-2 border-amber-400 bg-amber-50/50 space-y-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 bg-amber-500 rounded-full flex items-center justify-center flex-shrink-0\">\r\n              <RefreshCw className=\"w-5 h-5 text-white\" />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <div className=\"font-semibold text-amber-800\">\r\n                {language === 'ru' ? '–ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å –≤—Ä–µ–º–µ–Ω–∏' : 'Vaqtni o\\'zgartirish so\\'rovi'}\r\n              </div>\r\n              <div className=\"text-sm text-amber-600\">\r\n                {language === 'ru' ? '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞—è–≤–∫—É' : 'Ijrochi arizani ko\\'chirishni taklif qiladi'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {pendingReschedules.map((reschedule) => (\r\n            <button\r\n              key={reschedule.id}\r\n              onClick={() => {\r\n                setRescheduleToRespond(reschedule);\r\n                setShowRescheduleResponseModal(true);\r\n              }}\r\n              className=\"w-full p-3 bg-white/60 rounded-xl text-left flex items-center justify-between active:bg-white/80 transition-colors\"\r\n            >\r\n              <div>\r\n                <div className=\"font-medium text-gray-800\">\r\n                  {language === 'ru' ? '–ó–∞—è–≤–∫–∞' : 'Ariza'} #{reschedule.requestNumber}\r\n                </div>\r\n                <div className=\"text-sm text-gray-600\">\r\n                  {language === 'ru' ? '–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–æ:' : 'Taklif:'} {reschedule.proposedDate} {reschedule.proposedTime}\r\n                </div>\r\n              </div>\r\n              <ChevronRight className=\"w-5 h-5 text-amber-500\" />\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* –ê–∫—Ç–∏–≤–Ω–∞—è –∑–∞—è–≤–∫–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞—è–≤–∫—É –ø–æ—Å–ª–µ —Ñ–∏–æ–ª–µ—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ */}\r\n      {activeRequests.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h2 className=\"text-sm font-semibold text-gray-600\">\r\n              {language === 'ru' ? '–ê–∫—Ç–∏–≤–Ω–∞—è –∑–∞—è–≤–∫–∞' : 'Faol ariza'}\r\n            </h2>\r\n            {activeRequests.length > 1 && (\r\n              <button\r\n                onClick={() => setActiveTab('my_requests')}\r\n                className=\"text-xs text-primary-600 font-medium flex items-center gap-1\"\r\n              >\r\n                {language === 'ru' ? `–ï—â—ë ${activeRequests.length - 1}` : `Yana ${activeRequests.length - 1}`}\r\n                <ChevronRight className=\"w-3.5 h-3.5\" />\r\n              </button>\r\n            )}\r\n          </div>\r\n          <RequestStatusTrackerCompact\r\n            request={activeRequests[0]}\r\n            executorName={activeRequests[0].executorName}\r\n            language={language}\r\n            onClick={() => setSelectedRequest(activeRequests[0])}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Stats - Mobile optimized with larger touch targets */}\r\n      <div className=\"grid grid-cols-3 gap-2 md:gap-4\">\r\n        <button\r\n          onClick={() => setActiveTab('my_requests')}\r\n          className=\"glass-card p-3 md:p-4 text-center active:scale-95 transition-transform touch-manipulation\"\r\n        >\r\n          <div className=\"text-2xl md:text-3xl font-bold text-blue-600\">{activeRequests.length}</div>\r\n          <div className=\"text-xs md:text-sm text-gray-500\">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('pending')}\r\n          className=\"glass-card p-3 md:p-4 text-center active:scale-95 transition-transform touch-manipulation\"\r\n        >\r\n          <div className=\"text-2xl md:text-3xl font-bold text-purple-600\">{pendingApproval.length}</div>\r\n          <div className=\"text-xs md:text-sm text-gray-500 leading-tight\">–û–∂–∏–¥–∞—é—Ç</div>\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('history')}\r\n          className=\"glass-card p-3 md:p-4 text-center active:scale-95 transition-transform touch-manipulation\"\r\n        >\r\n          <div className=\"text-2xl md:text-3xl font-bold text-green-600\">{completedRequests.length}</div>\r\n          <div className=\"text-xs md:text-sm text-gray-500\">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tabs - Mobile optimized horizontal scroll */}\r\n      <div className=\"glass-card p-1.5 md:p-1 overflow-x-auto scrollbar-hide -mx-4 px-4 md:mx-0 md:px-0\">\r\n        <div className=\"flex gap-1 md:inline-flex min-w-max\">\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              className={`px-4 py-3 md:py-2 rounded-xl font-medium transition-all flex items-center gap-2 whitespace-nowrap touch-manipulation ${\r\n                activeTab === tab.id\r\n                  ? 'bg-primary-500 text-gray-900 shadow-md'\r\n                  : 'hover:bg-white/30 active:bg-white/50 text-gray-600'\r\n              }`}\r\n            >\r\n              <tab.icon className=\"w-5 h-5 md:w-4 md:h-4\" />\r\n              <span className=\"text-sm md:text-base\">{tab.label}</span>\r\n              {tab.count !== undefined && tab.count > 0 && (\r\n                <span className={`px-2 py-0.5 rounded-full text-xs text-white font-medium ${\r\n                  tab.id === 'pending' ? 'bg-purple-500' : 'bg-blue-500'\r\n                }`}>\r\n                  {tab.count}\r\n                </span>\r\n              )}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content - Services Grid - Interactive Mobile-friendly UI */}\r\n      {activeTab === 'services' && (\r\n        <div className=\"space-y-4\">\r\n          {/* Popular Services - Top 4 with colorful gradients */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-gray-500 mb-3 px-1\">\r\n              {language === 'ru' ? '‚≠ê –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —É—Å–ª—É–≥–∏' : '‚≠ê Mashhur xizmatlar'}\r\n            </h3>\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              {SERVICE_CATEGORIES.slice(0, 4).map((category, index) => {\r\n                // Color schemes for each category\r\n                const colorSchemes = [\r\n                  { bg: 'from-blue-500 to-cyan-400', light: 'from-blue-50 to-cyan-50', text: 'text-blue-600' },\r\n                  { bg: 'from-amber-500 to-yellow-400', light: 'from-amber-50 to-yellow-50', text: 'text-amber-600' },\r\n                  { bg: 'from-emerald-500 to-teal-400', light: 'from-emerald-50 to-teal-50', text: 'text-emerald-600' },\r\n                  { bg: 'from-violet-500 to-purple-400', light: 'from-violet-50 to-purple-50', text: 'text-violet-600' },\r\n                ];\r\n                const colors = colorSchemes[index % colorSchemes.length];\r\n\r\n                return (\r\n                  <button\r\n                    key={category.id}\r\n                    onClick={() => handleCategorySelect(category.id)}\r\n                    className={`relative overflow-hidden rounded-2xl p-4 text-left hover:shadow-xl active:scale-[0.97] transition-all group touch-manipulation bg-gradient-to-br ${colors.light} border border-white/50`}\r\n                    style={{\r\n                      animation: `fadeInUp 0.3s ease-out ${index * 0.08}s both`\r\n                    }}\r\n                  >\r\n                    {/* Animated background glow */}\r\n                    <div className={`absolute -top-4 -right-4 w-24 h-24 bg-gradient-to-br ${colors.bg} rounded-full opacity-20 group-hover:opacity-40 group-hover:scale-125 transition-all duration-300`} />\r\n\r\n                    <div className=\"relative\">\r\n                      <div className={`w-14 h-14 bg-gradient-to-br ${colors.bg} rounded-2xl flex items-center justify-center mb-3 shadow-lg group-hover:scale-110 group-hover:rotate-3 transition-all duration-300`}>\r\n                        <span className=\"text-2xl filter drop-shadow-sm\">{category.icon}</span>\r\n                      </div>\r\n                      <h3 className={`font-bold text-gray-800 group-hover:${colors.text} transition-colors`}>\r\n                        {category.name}\r\n                      </h3>\r\n                      <p className=\"text-xs text-gray-500 mt-1 line-clamp-2 group-hover:text-gray-600 transition-colors\">{category.description}</p>\r\n                    </div>\r\n\r\n                    {/* Hover arrow indicator */}\r\n                    <div className={`absolute bottom-3 right-3 w-8 h-8 bg-gradient-to-br ${colors.bg} rounded-xl flex items-center justify-center opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-300 shadow-lg`}>\r\n                      <ChevronRight className=\"w-5 h-5 text-white\" />\r\n                    </div>\r\n\r\n                    {/* Touch ripple effect */}\r\n                    <div className=\"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none\">\r\n                      <div className=\"absolute inset-0 bg-white/30 opacity-0 active:opacity-100 transition-opacity\" />\r\n                    </div>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          {/* All Services - Compact colorful grid */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-gray-500 mb-3 px-1\">\r\n              {language === 'ru' ? 'üìã –î—Ä—É–≥–∏–µ —É—Å–ª—É–≥–∏' : 'üìã Boshqa xizmatlar'}\r\n            </h3>\r\n            <div className=\"grid grid-cols-3 gap-2\">\r\n              {SERVICE_CATEGORIES.slice(4).map((category, index) => {\r\n                const miniColors = [\r\n                  'from-rose-400 to-pink-400',\r\n                  'from-orange-400 to-amber-400',\r\n                  'from-lime-400 to-green-400',\r\n                  'from-cyan-400 to-blue-400',\r\n                  'from-indigo-400 to-violet-400',\r\n                  'from-gray-400 to-slate-400',\r\n                ];\r\n                const bgColor = miniColors[index % miniColors.length];\r\n\r\n                return (\r\n                  <button\r\n                    key={category.id}\r\n                    onClick={() => handleCategorySelect(category.id)}\r\n                    className=\"relative bg-white/70 backdrop-blur-sm border border-gray-100 rounded-xl p-3 text-center hover:bg-white hover:shadow-lg active:scale-[0.95] transition-all group touch-manipulation overflow-hidden\"\r\n                    style={{\r\n                      animation: `fadeInUp 0.3s ease-out ${(index + 4) * 0.06}s both`\r\n                    }}\r\n                  >\r\n                    {/* Hover glow */}\r\n                    <div className={`absolute inset-0 bg-gradient-to-br ${bgColor} opacity-0 group-hover:opacity-10 transition-opacity`} />\r\n\r\n                    <div className={`w-11 h-11 bg-gradient-to-br ${bgColor} rounded-xl flex items-center justify-center mx-auto mb-2 group-hover:scale-110 group-hover:shadow-md transition-all duration-200`}>\r\n                      <span className=\"text-lg filter drop-shadow-sm\">{category.icon}</span>\r\n                    </div>\r\n                    <h3 className=\"font-medium text-xs text-gray-700 group-hover:text-gray-900 transition-colors leading-tight\">\r\n                      {category.name}\r\n                    </h3>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Info Banner */}\r\n          <div className=\"glass-card p-4 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-100\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <AlertTriangle className=\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\" />\r\n              <div className=\"text-sm\">\r\n                <p className=\"text-amber-800 font-medium\">\r\n                  {language === 'ru' ? '–°—Ä–æ—á–Ω—ã–π –≤—ã–∑–æ–≤?' : 'Shoshilinch chaqiriqmi?'}\r\n                </p>\r\n                <p className=\"text-amber-600 mt-1\">\r\n                  {language === 'ru'\r\n                    ? '–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏ —É–∫–∞–∂–∏—Ç–µ –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è'\r\n                    : 'Tez javob olish uchun arizada yuqori muhimlikni belgilang'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'my_requests' && (\r\n        <div className=\"space-y-3\">\r\n          {[...activeRequests, ...completedRequests].length === 0 ? (\r\n            <div className=\"glass-card p-8 text-center\">\r\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <FileText className=\"w-8 h-8 text-gray-400\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-medium text-gray-600\">–ù–µ—Ç –∑–∞—è–≤–æ–∫</h3>\r\n              <p className=\"text-gray-400 mt-1\">–°–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É, –≤—ã–±—Ä–∞–≤ —É—Å–ª—É–≥—É</p>\r\n              <button\r\n                onClick={() => setActiveTab('services')}\r\n                className=\"btn-primary mt-4\"\r\n              >\r\n                <Plus className=\"w-4 h-4 mr-2 inline\" />\r\n                –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            activeRequests.map((request) => (\r\n              <RequestStatusTrackerCompact\r\n                key={request.id}\r\n                request={request}\r\n                executorName={request.executorName}\r\n                language={language}\r\n                onClick={() => setSelectedRequest(request)}\r\n              />\r\n            ))\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'pending' && (\r\n        <div className=\"space-y-3\">\r\n          {pendingApproval.length === 0 ? (\r\n            <div className=\"glass-card p-8 text-center\">\r\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <CheckCircle className=\"w-8 h-8 text-green-500\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-medium text-gray-600\">–í—Å–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ</h3>\r\n              <p className=\"text-gray-400 mt-1\">–ù–µ—Ç –∑–∞—è–≤–æ–∫, –æ–∂–∏–¥–∞—é—â–∏—Ö –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</p>\r\n            </div>\r\n          ) : (\r\n            pendingApproval.map((request) => (\r\n              <PendingApprovalCard\r\n                key={request.id}\r\n                request={request}\r\n                onApprove={() => handleApproveClick(request)}\r\n              />\r\n            ))\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'history' && (\r\n        <div className=\"space-y-3\">\r\n          {historyRequests.length === 0 ? (\r\n            <div className=\"glass-card p-8 text-center\">\r\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <History className=\"w-8 h-8 text-gray-400\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-medium text-gray-600\">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</h3>\r\n              <p className=\"text-gray-400 mt-1\">–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∏ –æ—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏</p>\r\n            </div>\r\n          ) : (\r\n            historyRequests.map((request) => (\r\n              <HistoryRequestCard\r\n                key={request.id}\r\n                request={request}\r\n                onClick={() => setSelectedRequest(request)}\r\n              />\r\n            ))\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n\r\n      {/* New Request Modal */}\r\n      {showNewRequestModal && selectedCategory && (\r\n        <NewRequestModal\r\n          category={selectedCategory}\r\n          user={user}\r\n          onClose={() => {\r\n            setShowNewRequestModal(false);\r\n            setSelectedCategory(null);\r\n          }}\r\n          onSubmit={(data) => {\r\n            addRequest({\r\n              ...data,\r\n              residentId: user?.id || 'resident1',\r\n              residentName: user?.name || '–ñ–∏—Ç–µ–ª—å',\r\n              residentPhone: user?.phone || '+998 90 000 00 00',\r\n              address: user?.address || '–ê–¥—Ä–µ—Å –Ω–µ —É–∫–∞–∑–∞–Ω',\r\n              apartment: user?.apartment || '0',\r\n            });\r\n            setShowNewRequestModal(false);\r\n            setSelectedCategory(null);\r\n            setActiveTab('my_requests');\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Approve Modal */}\r\n      {showApproveModal && selectedRequest && (\r\n        <ApproveModal\r\n          request={selectedRequest}\r\n          onClose={() => {\r\n            setShowApproveModal(false);\r\n            setSelectedRequest(null);\r\n          }}\r\n          onApprove={(rating, feedback) => {\r\n            approveRequest(selectedRequest.id, rating, feedback);\r\n            setShowApproveModal(false);\r\n            setSelectedRequest(null);\r\n          }}\r\n          onReject={(reason) => {\r\n            rejectRequest(selectedRequest.id, reason);\r\n            setShowApproveModal(false);\r\n            setSelectedRequest(null);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Request Details Modal */}\r\n      {selectedRequest && !showApproveModal && !showCancelModal && !showRescheduleModal && (\r\n        <RequestDetailsModal\r\n          request={selectedRequest}\r\n          onClose={() => setSelectedRequest(null)}\r\n          onApprove={() => {\r\n            setShowApproveModal(true);\r\n          }}\r\n          onCancel={() => {\r\n            setRequestToCancel(selectedRequest);\r\n            setShowCancelModal(true);\r\n          }}\r\n          onReschedule={() => {\r\n            setRequestToReschedule(selectedRequest);\r\n            setShowRescheduleModal(true);\r\n          }}\r\n          hasActiveReschedule={!!getActiveRescheduleForRequest(selectedRequest.id)}\r\n        />\r\n      )}\r\n\r\n      {/* Cancel Request Modal */}\r\n      {showCancelModal && requestToCancel && (\r\n        <CancelRequestModal\r\n          request={requestToCancel}\r\n          onClose={() => {\r\n            setShowCancelModal(false);\r\n            setRequestToCancel(null);\r\n          }}\r\n          onConfirm={(reason) => {\r\n            cancelRequest(requestToCancel.id, 'resident', reason);\r\n            setShowCancelModal(false);\r\n            setRequestToCancel(null);\r\n            setSelectedRequest(null);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Reschedule Request Modal */}\r\n      {showRescheduleModal && requestToReschedule && (\r\n        <RescheduleModal\r\n          request={requestToReschedule}\r\n          onClose={() => {\r\n            setShowRescheduleModal(false);\r\n            setRequestToReschedule(null);\r\n          }}\r\n          onSubmit={(data) => {\r\n            createRescheduleRequest({\r\n              requestId: requestToReschedule.id,\r\n              ...data\r\n            });\r\n            setShowRescheduleModal(false);\r\n            setRequestToReschedule(null);\r\n            setSelectedRequest(null);\r\n          }}\r\n          language={language}\r\n        />\r\n      )}\r\n\r\n      {/* Reschedule Response Modal */}\r\n      {showRescheduleResponseModal && rescheduleToRespond && (\r\n        <RescheduleResponseModal\r\n          reschedule={rescheduleToRespond}\r\n          onClose={() => {\r\n            setShowRescheduleResponseModal(false);\r\n            setRescheduleToRespond(null);\r\n          }}\r\n          onAccept={() => {\r\n            respondToRescheduleRequest(rescheduleToRespond.id, true);\r\n            setShowRescheduleResponseModal(false);\r\n            setRescheduleToRespond(null);\r\n          }}\r\n          onReject={(note) => {\r\n            respondToRescheduleRequest(rescheduleToRespond.id, false, note);\r\n            setShowRescheduleResponseModal(false);\r\n            setRescheduleToRespond(null);\r\n          }}\r\n          language={language}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// History Request Card Component\r\nfunction HistoryRequestCard({\r\n  request,\r\n  onClick\r\n}: {\r\n  request: Request;\r\n  onClick: () => void;\r\n}) {\r\n  const formatDate = (dateStr: string) => {\r\n    return new Date(dateStr).toLocaleString('ru-RU', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const isCancelled = request.status === 'cancelled';\r\n\r\n  const getCancelledByLabel = (cancelledBy?: string) => {\r\n    switch (cancelledBy) {\r\n      case 'resident': return '–í–∞–º–∏';\r\n      case 'executor': return '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º';\r\n      case 'manager': return '–ú–µ–Ω–µ–¥–∂–µ—Ä–æ–º';\r\n      case 'admin': return '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º';\r\n      default: return '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`glass-card p-4 cursor-pointer hover:bg-white/40 transition-colors ${\r\n        isCancelled ? 'border-l-4 border-red-400' : 'border-l-4 border-green-400'\r\n      }`}\r\n      onClick={onClick}\r\n    >\r\n      <div className=\"flex items-start justify-between\">\r\n        <div className=\"flex-1\">\r\n          <div className=\"flex items-center gap-3 flex-wrap\">\r\n            <span className=\"text-sm text-gray-500\">#{request.number}</span>\r\n            <h3 className={`font-semibold ${isCancelled ? 'text-gray-500' : ''}`}>{request.title}</h3>\r\n            {isCancelled ? (\r\n              <span className=\"badge bg-red-100 text-red-700 flex items-center gap-1\">\r\n                <Ban className=\"w-3 h-3\" />\r\n                –û—Ç–º–µ–Ω–µ–Ω–∞\r\n              </span>\r\n            ) : (\r\n              <span className=\"badge badge-done\">–í—ã–ø–æ–ª–Ω–µ–Ω–∞</span>\r\n            )}\r\n          </div>\r\n          <p className=\"text-gray-600 text-sm mt-1\">{request.description}</p>\r\n\r\n          {isCancelled ? (\r\n            <div className=\"mt-3 p-3 bg-red-50 rounded-lg\">\r\n              <div className=\"text-sm text-red-700\">\r\n                <span className=\"font-medium\">–û—Ç–º–µ–Ω–µ–Ω–∞ {getCancelledByLabel(request.cancelledBy)}</span>\r\n                {request.cancellationReason && (\r\n                  <p className=\"mt-1 text-red-600\">{request.cancellationReason}</p>\r\n                )}\r\n              </div>\r\n              <div className=\"text-xs text-red-500 mt-1\">\r\n                {request.cancelledAt && formatDate(request.cancelledAt)}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"flex items-center gap-4 mt-2 text-sm text-gray-500\">\r\n                <span className=\"flex items-center gap-1\">\r\n                  <Calendar className=\"w-4 h-4\" />\r\n                  {formatDate(request.approvedAt || request.completedAt || request.createdAt)}\r\n                </span>\r\n                {request.executorName && (\r\n                  <span className=\"flex items-center gap-1\">\r\n                    <User className=\"w-4 h-4\" />\r\n                    {request.executorName}\r\n                  </span>\r\n                )}\r\n              </div>\r\n              {request.rating && (\r\n                <div className=\"flex items-center gap-1 mt-2\">\r\n                  {[1, 2, 3, 4, 5].map(star => (\r\n                    <Star\r\n                      key={star}\r\n                      className={`w-4 h-4 ${star <= request.rating! ? 'text-yellow-500 fill-yellow-500' : 'text-gray-300'}`}\r\n                    />\r\n                  ))}\r\n                  {request.feedback && (\r\n                    <span className=\"text-sm text-gray-500 ml-2\">\"{request.feedback}\"</span>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Pending Approval Card - Mobile optimized\r\nfunction PendingApprovalCard({\r\n  request,\r\n  onApprove\r\n}: {\r\n  request: Request;\r\n  onApprove: () => void;\r\n}) {\r\n  const formatDuration = (seconds?: number) => {\r\n    if (!seconds) return '–ù–µ —É–∫–∞–∑–∞–Ω–æ';\r\n    const mins = Math.floor(seconds / 60);\r\n    return `${mins} –º–∏–Ω`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"glass-card p-4 md:p-5 border-2 border-purple-300 bg-purple-50/30\">\r\n      {/* Header with icon */}\r\n      <div className=\"flex items-center gap-3 mb-3\">\r\n        <div className=\"w-10 h-10 md:w-12 md:h-12 bg-purple-500 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n          <CheckCircle className=\"w-5 h-5 md:w-6 md:h-6 text-white\" />\r\n        </div>\r\n        <div className=\"flex-1 min-w-0\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-xs text-gray-500\">#{request.number}</span>\r\n          </div>\r\n          <h3 className=\"font-semibold text-base md:text-lg truncate\">{request.title}</h3>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Description */}\r\n      <p className=\"text-gray-600 text-sm line-clamp-2 mb-3\">{request.description}</p>\r\n\r\n      {/* Info cards - stacked on mobile */}\r\n      <div className=\"grid grid-cols-2 gap-2 mb-4\">\r\n        <div className=\"bg-white/60 rounded-lg p-3\">\r\n          <div className=\"text-xs text-gray-500 mb-0.5\">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</div>\r\n          <div className=\"font-medium text-sm flex items-center gap-1\">\r\n            <User className=\"w-3.5 h-3.5 text-gray-400\" />\r\n            <span className=\"truncate\">{request.executorName}</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-white/60 rounded-lg p-3\">\r\n          <div className=\"text-xs text-gray-500 mb-0.5\">–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã</div>\r\n          <div className=\"font-medium text-sm flex items-center gap-1\">\r\n            <Clock className=\"w-3.5 h-3.5 text-gray-400\" />\r\n            {formatDuration(request.workDuration)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Large touch-friendly button */}\r\n      <button\r\n        onClick={onApprove}\r\n        className=\"w-full py-4 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation shadow-lg\"\r\n        style={{ background: 'linear-gradient(135deg, #8b5cf6, #7c3aed)' }}\r\n      >\r\n        <CheckCircle className=\"w-5 h-5\" />\r\n        –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Time slots for scheduling\r\nconst TIME_SLOTS = [\r\n  { value: '08:00-10:00', label: '08:00 - 10:00' },\r\n  { value: '10:00-12:00', label: '10:00 - 12:00' },\r\n  { value: '12:00-14:00', label: '12:00 - 14:00' },\r\n  { value: '14:00-16:00', label: '14:00 - 16:00' },\r\n  { value: '16:00-18:00', label: '16:00 - 18:00' },\r\n  { value: '18:00-20:00', label: '18:00 - 20:00' },\r\n];\r\n\r\n// New Request Modal - Mobile full-screen optimized\r\nfunction NewRequestModal({\r\n  category,\r\n  user,\r\n  onClose,\r\n  onSubmit\r\n}: {\r\n  category: ExecutorSpecialization;\r\n  user: any;\r\n  onClose: () => void;\r\n  onSubmit: (data: {\r\n    title: string;\r\n    description: string;\r\n    category: ExecutorSpecialization;\r\n    priority: RequestPriority;\r\n    scheduledDate?: string;\r\n    scheduledTime?: string;\r\n  }) => void;\r\n}) {\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [priority, setPriority] = useState<RequestPriority>('medium');\r\n  const [scheduledDate, setScheduledDate] = useState('');\r\n  const [scheduledTime, setScheduledTime] = useState('');\r\n\r\n  const categoryInfo = SERVICE_CATEGORIES.find(c => c.id === category);\r\n\r\n  // Get minimum date (today)\r\n  const getMinDate = () => {\r\n    const today = new Date();\r\n    return today.toISOString().split('T')[0];\r\n  };\r\n\r\n  // Get maximum date (30 days from now)\r\n  const getMaxDate = () => {\r\n    const maxDate = new Date();\r\n    maxDate.setDate(maxDate.getDate() + 30);\r\n    return maxDate.toISOString().split('T')[0];\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!title.trim() || !description.trim()) return;\r\n    onSubmit({\r\n      title,\r\n      description,\r\n      category,\r\n      priority,\r\n      scheduledDate: scheduledDate || undefined,\r\n      scheduledTime: scheduledTime || undefined\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 z-50 md:flex md:items-center md:justify-center\">\r\n      {/* Full screen on mobile, centered modal on desktop */}\r\n      <div className=\"h-full md:h-auto md:max-h-[90vh] w-full md:max-w-lg md:mx-4 bg-white md:rounded-2xl flex flex-col overflow-hidden\">\r\n        {/* Header - Fixed on mobile */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 bg-white sticky top-0 z-10\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <span className=\"text-2xl md:text-3xl\">{categoryInfo?.icon}</span>\r\n            <div>\r\n              <h2 className=\"text-lg md:text-xl font-bold\">–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞</h2>\r\n              <p className=\"text-sm text-gray-500\">{categoryInfo?.name}</p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-3 hover:bg-gray-100 active:bg-gray-200 rounded-xl transition-colors touch-manipulation\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Scrollable form content */}\r\n        <form onSubmit={handleSubmit} className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              –ó–∞–≥–æ–ª–æ–≤–æ–∫ *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              className=\"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white focus:ring-2 focus:ring-primary-500 focus:border-transparent text-base\"\r\n              placeholder=\"–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              –û–ø–∏—Å–∞–Ω–∏–µ *\r\n            </label>\r\n            <textarea\r\n              value={description}\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              className=\"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white focus:ring-2 focus:ring-primary-500 focus:border-transparent min-h-[120px] text-base resize-none\"\r\n              placeholder=\"–ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç\r\n            </label>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2\">\r\n              {(['low', 'medium', 'high', 'urgent'] as RequestPriority[]).map((p) => (\r\n                <button\r\n                  key={p}\r\n                  type=\"button\"\r\n                  onClick={() => setPriority(p)}\r\n                  className={`py-3 px-4 rounded-xl text-sm font-medium transition-all touch-manipulation ${\r\n                    priority === p\r\n                      ? p === 'urgent' ? 'bg-red-500 text-white shadow-md' :\r\n                        p === 'high' ? 'bg-orange-500 text-white shadow-md' :\r\n                        p === 'medium' ? 'bg-amber-500 text-white shadow-md' :\r\n                        'bg-gray-500 text-white shadow-md'\r\n                      : 'bg-gray-100 hover:bg-gray-200 active:bg-gray-300'\r\n                  }`}\r\n                >\r\n                  {PRIORITY_LABELS[p]}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Scheduled Date and Time */}\r\n          <div className=\"bg-blue-50 rounded-xl p-4 border border-blue-200\">\r\n            <label className=\"block text-sm font-medium text-blue-700 mb-3 flex items-center gap-2\">\r\n              <Calendar className=\"w-4 h-4\" />\r\n              –ñ–µ–ª–∞–µ–º–æ–µ –≤—Ä–µ–º—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)\r\n            </label>\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              <div>\r\n                <label className=\"block text-xs text-gray-500 mb-1\">–î–∞—Ç–∞</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={scheduledDate}\r\n                  onChange={(e) => setScheduledDate(e.target.value)}\r\n                  min={getMinDate()}\r\n                  max={getMaxDate()}\r\n                  className=\"w-full px-3 py-3 rounded-xl border border-gray-200 bg-white text-base\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-xs text-gray-500 mb-1\">–í—Ä–µ–º—è</label>\r\n                <select\r\n                  value={scheduledTime}\r\n                  onChange={(e) => setScheduledTime(e.target.value)}\r\n                  className=\"w-full px-3 py-3 rounded-xl border border-gray-200 bg-white text-base\"\r\n                  disabled={!scheduledDate}\r\n                >\r\n                  <option value=\"\">–õ—é–±–æ–µ</option>\r\n                  {TIME_SLOTS.map((slot) => (\r\n                    <option key={slot.value} value={slot.value}>\r\n                      {slot.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n            {scheduledDate && (\r\n              <p className=\"text-xs text-blue-600 mt-2\">\r\n                –ú—ã –ø–æ—Å—Ç–∞—Ä–∞–µ–º—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞—è–≤–∫—É –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Address info */}\r\n          <div className=\"bg-gray-50 rounded-xl p-4 flex items-center gap-3\">\r\n            <MapPin className=\"w-5 h-5 text-gray-400 flex-shrink-0\" />\r\n            <div>\r\n              <div className=\"text-xs text-gray-500\">–ê–¥—Ä–µ—Å</div>\r\n              <div className=\"font-medium text-sm\">{formatAddress(user?.address, user?.apartment)}</div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        {/* Fixed footer buttons */}\r\n        <div className=\"p-4 border-t border-gray-100 bg-white safe-area-bottom\">\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"flex-1 py-4 px-4 rounded-xl font-medium bg-gray-100 hover:bg-gray-200 active:bg-gray-300 transition-colors touch-manipulation\"\r\n            >\r\n              –û—Ç–º–µ–Ω–∞\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              onClick={handleSubmit}\r\n              className=\"flex-1 py-4 px-4 rounded-xl font-semibold text-gray-900 flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\r\n              style={{ background: 'linear-gradient(135deg, #FFE500, #FFC700)' }}\r\n            >\r\n              <Plus className=\"w-5 h-5\" />\r\n              –°–æ–∑–¥–∞—Ç—å\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Approve Modal - Mobile full-screen optimized\r\nfunction ApproveModal({\r\n  request,\r\n  onClose,\r\n  onApprove,\r\n  onReject\r\n}: {\r\n  request: Request;\r\n  onClose: () => void;\r\n  onApprove: (rating: number, feedback?: string) => void;\r\n  onReject: (reason: string) => void;\r\n}) {\r\n  const [rating, setRating] = useState(5);\r\n  const [feedback, setFeedback] = useState('');\r\n  const [showReject, setShowReject] = useState(false);\r\n  const [rejectReason, setRejectReason] = useState('');\r\n\r\n  const formatDuration = (seconds?: number) => {\r\n    if (!seconds) return '–ù–µ —É–∫–∞–∑–∞–Ω–æ';\r\n    const hrs = Math.floor(seconds / 3600);\r\n    const mins = Math.floor((seconds % 3600) / 60);\r\n    if (hrs > 0) return `${hrs} —á ${mins} –º–∏–Ω`;\r\n    return `${mins} –º–∏–Ω`;\r\n  };\r\n\r\n  if (showReject) {\r\n    return (\r\n      <div className=\"fixed inset-0 bg-black/50 z-50 md:flex md:items-center md:justify-center\">\r\n        <div className=\"h-full md:h-auto w-full md:max-w-md md:mx-4 bg-white md:rounded-2xl flex flex-col overflow-hidden\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-100 bg-white\">\r\n            <h2 className=\"text-lg md:text-xl font-bold text-red-600\">–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ä–∞–±–æ—Ç—É</h2>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-3 hover:bg-gray-100 active:bg-gray-200 rounded-xl transition-colors touch-manipulation\"\r\n            >\r\n              <X className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"flex-1 overflow-y-auto p-4\">\r\n            <p className=\"text-gray-600 mb-4 text-sm\">\r\n              –£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É, –ø–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ.\r\n              –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.\r\n            </p>\r\n\r\n            <textarea\r\n              value={rejectReason}\r\n              onChange={(e) => setRejectReason(e.target.value)}\r\n              className=\"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white min-h-[150px] text-base resize-none\"\r\n              placeholder=\"–û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –Ω–µ —Ç–∞–∫...\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Footer buttons */}\r\n          <div className=\"p-4 border-t border-gray-100 bg-white safe-area-bottom\">\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => setShowReject(false)}\r\n                className=\"flex-1 py-4 px-4 rounded-xl font-medium bg-gray-100 hover:bg-gray-200 active:bg-gray-300 transition-colors touch-manipulation\"\r\n              >\r\n                –ù–∞–∑–∞–¥\r\n              </button>\r\n              <button\r\n                onClick={() => rejectReason.trim() && onReject(rejectReason)}\r\n                className=\"flex-1 py-4 px-4 rounded-xl font-semibold text-white bg-red-500 active:bg-red-600 disabled:opacity-50 transition-colors touch-manipulation\"\r\n                disabled={!rejectReason.trim()}\r\n              >\r\n                –û—Ç–∫–ª–æ–Ω–∏—Ç—å\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 z-50 md:flex md:items-center md:justify-center\">\r\n      <div className=\"h-full md:h-auto w-full md:max-w-md md:mx-4 bg-white md:rounded-2xl flex flex-col overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 bg-white\">\r\n          <h2 className=\"text-lg md:text-xl font-bold\">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-3 hover:bg-gray-100 active:bg-gray-200 rounded-xl transition-colors touch-manipulation\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Scrollable content */}\r\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n          {/* Request Info */}\r\n          <div className=\"bg-gray-50 rounded-xl p-4\">\r\n            <div className=\"text-xs text-gray-500 mb-1\">–ó–∞—è–≤–∫–∞ #{request.number}</div>\r\n            <div className=\"font-semibold text-base mb-2\">{request.title}</div>\r\n            <div className=\"flex flex-wrap gap-3 text-sm\">\r\n              <span className=\"flex items-center gap-1.5 text-gray-600 bg-white px-3 py-1.5 rounded-lg\">\r\n                <User className=\"w-4 h-4\" />\r\n                {request.executorName}\r\n              </span>\r\n              <span className=\"flex items-center gap-1.5 text-gray-600 bg-white px-3 py-1.5 rounded-lg\">\r\n                <Clock className=\"w-4 h-4\" />\r\n                {formatDuration(request.workDuration)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Rating - Large touch targets */}\r\n          <div className=\"text-center\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-4\">\r\n              –û—Ü–µ–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç—É –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è\r\n            </label>\r\n            <div className=\"flex justify-center gap-2\">\r\n              {[1, 2, 3, 4, 5].map((star) => (\r\n                <button\r\n                  key={star}\r\n                  type=\"button\"\r\n                  onClick={() => setRating(star)}\r\n                  className=\"p-2 active:scale-90 transition-transform touch-manipulation\"\r\n                >\r\n                  <Star\r\n                    className={`w-12 h-12 md:w-10 md:h-10 ${\r\n                      star <= rating\r\n                        ? 'text-yellow-500 fill-yellow-500'\r\n                        : 'text-gray-300'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              ))}\r\n            </div>\r\n            <div className=\"text-sm text-gray-500 mt-2 font-medium\">\r\n              {rating === 5 && '–û—Ç–ª–∏—á–Ω–æ!'}\r\n              {rating === 4 && '–•–æ—Ä–æ—à–æ'}\r\n              {rating === 3 && '–ù–æ—Ä–º–∞–ª—å–Ω–æ'}\r\n              {rating === 2 && '–ü–ª–æ—Ö–æ'}\r\n              {rating === 1 && '–û—á–µ–Ω—å –ø–ª–æ—Ö–æ'}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Feedback */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              –û—Ç–∑—ã–≤ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)\r\n            </label>\r\n            <textarea\r\n              value={feedback}\r\n              onChange={(e) => setFeedback(e.target.value)}\r\n              className=\"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white min-h-[100px] text-base resize-none\"\r\n              placeholder=\"–ù–∞–ø–∏—à–∏—Ç–µ –æ—Ç–∑—ã–≤ –æ —Ä–∞–±–æ—Ç–µ...\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Fixed footer buttons */}\r\n        <div className=\"p-4 border-t border-gray-100 bg-white safe-area-bottom\">\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={() => setShowReject(true)}\r\n              className=\"flex-1 py-4 px-4 rounded-xl font-medium text-red-600 bg-red-50 hover:bg-red-100 active:bg-red-200 transition-colors touch-manipulation flex items-center justify-center gap-2\"\r\n            >\r\n              <X className=\"w-5 h-5\" />\r\n              –û—Ç–∫–ª–æ–Ω–∏—Ç—å\r\n            </button>\r\n            <button\r\n              onClick={() => onApprove(rating, feedback || undefined)}\r\n              className=\"flex-1 py-4 px-4 rounded-xl font-semibold text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform touch-manipulation\"\r\n              style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}\r\n            >\r\n              <CheckCircle className=\"w-5 h-5\" />\r\n              –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Request Details Modal with Status Tracker\r\nfunction RequestDetailsModal({\r\n  request,\r\n  onClose,\r\n  onApprove,\r\n  onCancel,\r\n  onReschedule,\r\n  hasActiveReschedule\r\n}: {\r\n  request: Request;\r\n  onClose: () => void;\r\n  onApprove: () => void;\r\n  onCancel: () => void;\r\n  onReschedule: () => void;\r\n  hasActiveReschedule: boolean;\r\n}) {\r\n  const { language } = useLanguageStore();\r\n  // Reschedule is available for assigned/accepted/in_progress/pending_approval requests with an executor\r\n  const canReschedule = ['assigned', 'accepted', 'in_progress', 'pending_approval'].includes(request.status) && request.executorId && !hasActiveReschedule;\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto\">\r\n        {/* Close button */}\r\n        <div className=\"flex justify-end mb-2\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 bg-white/80 hover:bg-white rounded-full shadow-lg\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Status Tracker */}\r\n        <RequestStatusTracker\r\n          request={request}\r\n          executorName={request.executorName}\r\n          language={language}\r\n          onCancel={['new', 'assigned', 'accepted'].includes(request.status) ? onCancel : undefined}\r\n          showActions={true}\r\n        />\r\n\r\n        {/* Additional Details */}\r\n        <div className=\"mt-4 bg-white rounded-2xl shadow-lg p-4 space-y-4\">\r\n          {/* Description */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-gray-500 mb-1\">\r\n              {language === 'ru' ? '–û–ø–∏—Å–∞–Ω–∏–µ' : 'Tavsif'}\r\n            </h3>\r\n            <p className=\"text-gray-900\">{request.description}</p>\r\n          </div>\r\n\r\n          {/* Priority */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-sm text-gray-500\">\r\n              {language === 'ru' ? '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:' : 'Muhimlik:'}\r\n            </span>\r\n            <span className={`px-2 py-1 rounded-lg text-xs font-medium ${\r\n              request.priority === 'urgent' ? 'bg-red-100 text-red-700' :\r\n              request.priority === 'high' ? 'bg-orange-100 text-orange-700' :\r\n              request.priority === 'medium' ? 'bg-yellow-100 text-yellow-700' :\r\n              'bg-gray-100 text-gray-700'\r\n            }`}>\r\n              {PRIORITY_LABELS[request.priority]}\r\n            </span>\r\n          </div>\r\n\r\n          {/* Rating if completed */}\r\n          {request.status === 'completed' && request.rating && (\r\n            <div className=\"p-4 bg-yellow-50 rounded-xl\">\r\n              <h3 className=\"font-medium mb-2\">\r\n                {language === 'ru' ? '–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞' : 'Sizning bahoyingiz'}\r\n              </h3>\r\n              <div className=\"flex items-center gap-2\">\r\n                {[1, 2, 3, 4, 5].map(star => (\r\n                  <Star\r\n                    key={star}\r\n                    className={`w-6 h-6 ${star <= request.rating! ? 'text-yellow-500 fill-yellow-500' : 'text-gray-300'}`}\r\n                  />\r\n                ))}\r\n                <span className=\"ml-2 text-lg font-semibold\">{request.rating}/5</span>\r\n              </div>\r\n              {request.feedback && (\r\n                <p className=\"mt-2 text-gray-600 italic\">\"{request.feedback}\"</p>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Approve button for pending_approval */}\r\n          {request.status === 'pending_approval' && (\r\n            <button\r\n              onClick={onApprove}\r\n              className=\"w-full py-4 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-all\"\r\n            >\r\n              <CheckCircle className=\"w-5 h-5\" />\r\n              {language === 'ru' ? '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ' : 'Bajarilganini tasdiqlash'}\r\n            </button>\r\n          )}\r\n\r\n          {/* Reschedule button for active requests */}\r\n          {canReschedule && (\r\n            <button\r\n              onClick={onReschedule}\r\n              className=\"w-full py-3 bg-amber-100 hover:bg-amber-200 text-amber-700 rounded-xl font-medium flex items-center justify-center gap-2 transition-all\"\r\n            >\r\n              <RefreshCw className=\"w-4 h-4\" />\r\n              {language === 'ru' ? '–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è' : 'Boshqa vaqtga ko\\'chirish'}\r\n            </button>\r\n          )}\r\n\r\n          {/* Show if there's an active reschedule request */}\r\n          {hasActiveReschedule && (\r\n            <div className=\"p-3 bg-amber-50 border border-amber-200 rounded-xl flex items-center gap-2 text-amber-700\">\r\n              <RefreshCw className=\"w-4 h-4\" />\r\n              <span className=\"text-sm\">\r\n                {language === 'ru' ? '–û–∂–∏–¥–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å –æ –ø–µ—Ä–µ–Ω–æ—Å–µ' : 'Ko\\'chirish so\\'roviga javob kutilmoqda'}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Close button at bottom */}\r\n        <button\r\n          onClick={onClose}\r\n          className=\"w-full mt-4 py-3 bg-white/80 hover:bg-white rounded-xl font-medium text-gray-600 transition-colors\"\r\n        >\r\n          {language === 'ru' ? '–ó–∞–∫—Ä—ã—Ç—å' : 'Yopish'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Cancel Request Modal\r\nfunction CancelRequestModal({\r\n  request,\r\n  onClose,\r\n  onConfirm\r\n}: {\r\n  request: Request;\r\n  onClose: () => void;\r\n  onConfirm: (reason: string) => void;\r\n}) {\r\n  const [reason, setReason] = useState('');\r\n\r\n  const predefinedReasons = [\r\n    '–ü–µ—Ä–µ–¥—É–º–∞–ª/–ù–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ',\r\n    '–ù–∞—à—ë–ª –¥—Ä—É–≥–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è',\r\n    '–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–∏–ª–∞—Å—å —Å–∞–º–∞',\r\n    '–û—à–∏–±—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏',\r\n    '–°–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ',\r\n  ];\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"glass-card p-6 w-full max-w-md mx-4\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold text-red-600 flex items-center gap-2\">\r\n            <Ban className=\"w-5 h-5\" />\r\n            –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg\">\r\n          <p className=\"text-sm text-amber-800\">\r\n            –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É <strong>#{request.number}</strong>?\r\n            –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã\r\n            </label>\r\n            <div className=\"flex flex-wrap gap-2 mb-3\">\r\n              {predefinedReasons.map((r) => (\r\n                <button\r\n                  key={r}\r\n                  type=\"button\"\r\n                  onClick={() => setReason(r)}\r\n                  className={`px-3 py-1.5 text-sm rounded-lg transition-colors ${\r\n                    reason === r\r\n                      ? 'bg-red-500 text-white'\r\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-700'\r\n                  }`}\r\n                >\r\n                  {r}\r\n                </button>\r\n              ))}\r\n            </div>\r\n            <textarea\r\n              value={reason}\r\n              onChange={(e) => setReason(e.target.value)}\r\n              className=\"input-field min-h-[80px]\"\r\n              placeholder=\"–ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ—é –ø—Ä–∏—á–∏–Ω—É...\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-3\">\r\n            <button onClick={onClose} className=\"btn-secondary flex-1\">\r\n              –ù–µ –æ—Ç–º–µ–Ω—è—Ç—å\r\n            </button>\r\n            <button\r\n              onClick={() => reason.trim() && onConfirm(reason)}\r\n              className=\"flex-1 py-2 px-4 rounded-xl font-medium bg-red-500 text-white hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              disabled={!reason.trim()}\r\n            >\r\n              <Ban className=\"w-4 h-4 mr-2 inline\" />\r\n              –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Reschedule Request Modal\r\nfunction RescheduleModal({\r\n  request,\r\n  onClose,\r\n  onSubmit,\r\n  language\r\n}: {\r\n  request: Request;\r\n  onClose: () => void;\r\n  onSubmit: (data: { proposedDate: string; proposedTime: string; reason: RescheduleReason; reasonText?: string }) => void;\r\n  language: 'ru' | 'uz';\r\n}) {\r\n  const [proposedDate, setProposedDate] = useState('');\r\n  const [proposedTime, setProposedTime] = useState('');\r\n  const [reason, setReason] = useState<RescheduleReason>('not_at_home');\r\n  const [reasonText, setReasonText] = useState('');\r\n\r\n  const today = new Date().toISOString().split('T')[0];\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"glass-card p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold text-amber-600 flex items-center gap-2\">\r\n            <RefreshCw className=\"w-5 h-5\" />\r\n            {language === 'ru' ? '–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞—è–≤–∫—É' : 'Arizani ko\\'chirish'}\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n          <p className=\"text-sm text-blue-800\">\r\n            {language === 'ru'\r\n              ? `–ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ –Ω–æ–≤–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∑–∞—è–≤–∫–∏ #${request.number}. –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.`\r\n              : `#${request.number} ariza uchun yangi vaqt taklif qiling.`}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              {language === 'ru' ? '–ü—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞' : 'Ko\\'chirish sababi'}\r\n            </label>\r\n            <div className=\"grid grid-cols-1 gap-2\">\r\n              {(Object.keys(RESCHEDULE_REASON_LABELS) as RescheduleReason[]).map((r) => (\r\n                <button\r\n                  key={r}\r\n                  type=\"button\"\r\n                  onClick={() => setReason(r)}\r\n                  className={`px-3 py-2.5 text-sm rounded-xl transition-colors text-left ${\r\n                    reason === r\r\n                      ? 'bg-amber-500 text-white'\r\n                      : 'bg-gray-100 hover:bg-gray-200 text-gray-700'\r\n                  }`}\r\n                >\r\n                  {language === 'ru' ? RESCHEDULE_REASON_LABELS[r].label : RESCHEDULE_REASON_LABELS[r].labelUz}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {reason === 'other' && (\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {language === 'ru' ? '–£—Ç–æ—á–Ω–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É' : 'Sababni aniqlashtiring'}\r\n              </label>\r\n              <textarea\r\n                value={reasonText}\r\n                onChange={(e) => setReasonText(e.target.value)}\r\n                className=\"input-field min-h-[80px]\"\r\n                placeholder={language === 'ru' ? '–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É...' : 'Sababni yozing...'}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {language === 'ru' ? '–ù–æ–≤–∞—è –¥–∞—Ç–∞' : 'Yangi sana'}\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                min={today}\r\n                value={proposedDate}\r\n                onChange={(e) => setProposedDate(e.target.value)}\r\n                className=\"input-field\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                {language === 'ru' ? '–í—Ä–µ–º—è' : 'Vaqt'}\r\n              </label>\r\n              <input\r\n                type=\"time\"\r\n                value={proposedTime}\r\n                onChange={(e) => setProposedTime(e.target.value)}\r\n                className=\"input-field\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 pt-2\">\r\n            <button onClick={onClose} className=\"btn-secondary flex-1\">\r\n              {language === 'ru' ? '–û—Ç–º–µ–Ω–∞' : 'Bekor qilish'}\r\n            </button>\r\n            <button\r\n              onClick={() => proposedDate && proposedTime && onSubmit({ proposedDate, proposedTime, reason, reasonText: reason === 'other' ? reasonText : undefined })}\r\n              className=\"flex-1 py-2.5 px-4 rounded-xl font-medium bg-amber-500 text-white hover:bg-amber-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n              disabled={!proposedDate || !proposedTime || (reason === 'other' && !reasonText.trim())}\r\n            >\r\n              <Send className=\"w-4 h-4\" />\r\n              {language === 'ru' ? '–û—Ç–ø—Ä–∞–≤–∏—Ç—å' : 'Yuborish'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Reschedule Response Modal\r\nfunction RescheduleResponseModal({\r\n  reschedule,\r\n  onClose,\r\n  onAccept,\r\n  onReject,\r\n  language\r\n}: {\r\n  reschedule: RescheduleRequest;\r\n  onClose: () => void;\r\n  onAccept: () => void;\r\n  onReject: (note?: string) => void;\r\n  language: 'ru' | 'uz';\r\n}) {\r\n  const [rejectNote, setRejectNote] = useState('');\r\n  const [showRejectForm, setShowRejectForm] = useState(false);\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"glass-card p-6 w-full max-w-md mx-4\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-xl font-bold text-amber-600 flex items-center gap-2\">\r\n            <RefreshCw className=\"w-5 h-5\" />\r\n            {language === 'ru' ? '–ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å' : 'Ko\\'chirish so\\'rovi'}\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-white/30 rounded-lg\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div className=\"p-4 bg-amber-50 border border-amber-200 rounded-xl\">\r\n            <div className=\"text-sm text-gray-600 mb-1\">\r\n              {language === 'ru' ? '–ó–∞—è–≤–∫–∞' : 'Ariza'} #{reschedule.requestNumber}\r\n            </div>\r\n            <div className=\"font-medium text-gray-800\">\r\n              {reschedule.initiatorName} {language === 'ru' ? '–ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞:' : 'taklif qiladi:'}\r\n            </div>\r\n            <div className=\"text-xl font-bold text-amber-600 mt-2\">\r\n              {reschedule.proposedDate} –≤ {reschedule.proposedTime}\r\n            </div>\r\n            <div className=\"text-sm text-gray-600 mt-2\">\r\n              <strong>{language === 'ru' ? '–ü—Ä–∏—á–∏–Ω–∞:' : 'Sabab:'}</strong>{' '}\r\n              {language === 'ru'\r\n                ? RESCHEDULE_REASON_LABELS[reschedule.reason].label\r\n                : RESCHEDULE_REASON_LABELS[reschedule.reason].labelUz}\r\n              {reschedule.reasonText && ` - ${reschedule.reasonText}`}\r\n            </div>\r\n          </div>\r\n\r\n          {reschedule.currentDate && (\r\n            <div className=\"text-sm text-gray-600 text-center\">\r\n              {language === 'ru' ? '–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:' : 'Hozirgi vaqt:'} {reschedule.currentDate} {reschedule.currentTime}\r\n            </div>\r\n          )}\r\n\r\n          {showRejectForm ? (\r\n            <div className=\"space-y-3\">\r\n              <label className=\"block text-sm font-medium text-gray-700\">\r\n                {language === 'ru' ? '–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞–∑–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)' : 'Rad etish sababi (ixtiyoriy)'}\r\n              </label>\r\n              <textarea\r\n                value={rejectNote}\r\n                onChange={(e) => setRejectNote(e.target.value)}\r\n                className=\"input-field min-h-[80px]\"\r\n                placeholder={language === 'ru' ? '–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É...' : 'Sababni yozing...'}\r\n              />\r\n              <div className=\"flex gap-3\">\r\n                <button onClick={() => setShowRejectForm(false)} className=\"btn-secondary flex-1\">\r\n                  {language === 'ru' ? '–ù–∞–∑–∞–¥' : 'Orqaga'}\r\n                </button>\r\n                <button\r\n                  onClick={() => onReject(rejectNote || undefined)}\r\n                  className=\"flex-1 py-2.5 px-4 rounded-xl font-medium bg-red-500 text-white hover:bg-red-600 transition-colors\"\r\n                >\r\n                  {language === 'ru' ? '–û—Ç–∫–ª–æ–Ω–∏—Ç—å' : 'Rad etish'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => setShowRejectForm(true)}\r\n                className=\"flex-1 py-3 px-4 rounded-xl font-medium bg-red-100 text-red-600 hover:bg-red-200 transition-colors\"\r\n              >\r\n                {language === 'ru' ? '–û—Ç–∫–ª–æ–Ω–∏—Ç—å' : 'Rad etish'}\r\n              </button>\r\n              <button\r\n                onClick={onAccept}\r\n                className=\"flex-1 py-3 px-4 rounded-xl font-medium bg-green-500 text-white hover:bg-green-600 transition-colors flex items-center justify-center gap-2\"\r\n              >\r\n                <CheckCircle className=\"w-4 h-4\" />\r\n                {language === 'ru' ? '–ü—Ä–∏–Ω—è—Ç—å' : 'Qabul qilish'}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["getCategoryInfo","category","cat","SERVICE_CATEGORIES","c","SPECIALIZATION_LABELS","STAGES","CheckCircle","User","Wrench","Star","getStageIndex","status","i","getStatusMessage","request","language","now","scheduled","hours","diffMs","diffMins","diffHours","RequestStatusTracker","executorName","onCancel","showActions","hasRescheduleRequest","rescheduleInfo","hasConfirmedReschedule","confirmedRescheduleInfo","currentStageIndex","isCancelled","statusMessage","categoryInfo","jsxs","jsx","stage","index","isCompleted","isCurrent","StageIcon","XCircle","RefreshCw","Phone","MessageCircle","Clock","RequestStatusTrackerCompact","onClick","e","ResidentDashboard","user","useAuthStore","requests","addRequest","approveRequest","rejectRequest","cancelRequest","notifications","createRescheduleRequest","respondToRescheduleRequest","getPendingRescheduleForUser","getActiveRescheduleForRequest","fetchRequests","fetchPendingReschedules","useDataStore","useEffect","interval","handleOpenRatingModal","event","requestId","r","setSelectedRequest","setShowApproveModal","pendingRequestId","useLanguageStore","activeTab","setActiveTab","useState","showNewRequestModal","setShowNewRequestModal","selectedCategory","setSelectedCategory","selectedRequest","showApproveModal","showCancelModal","setShowCancelModal","requestToCancel","setRequestToCancel","showRescheduleModal","setShowRescheduleModal","requestToReschedule","setRequestToReschedule","showRescheduleResponseModal","setShowRescheduleResponseModal","rescheduleToRespond","setRescheduleToRespond","myRequests","pendingApproval","pendingReschedules","activeRequests","completedRequests","cancelledRequests","historyRequests","a","b","myNotifications","n","tabs","Home","FileText","History","handleCategorySelect","handleApproveClick","MapPin","AlertTriangle","ChevronRight","reschedule","tab","colorSchemes","colors","miniColors","bgColor","Plus","PendingApprovalCard","HistoryRequestCard","NewRequestModal","data","ApproveModal","rating","feedback","reason","RequestDetailsModal","CancelRequestModal","RescheduleModal","RescheduleResponseModal","note","formatDate","dateStr","getCancelledByLabel","cancelledBy","Ban","Fragment","Calendar","star","onApprove","formatDuration","seconds","TIME_SLOTS","onClose","onSubmit","title","setTitle","description","setDescription","priority","setPriority","scheduledDate","setScheduledDate","scheduledTime","setScheduledTime","getMinDate","getMaxDate","maxDate","handleSubmit","X","p","slot","onReject","setRating","setFeedback","showReject","setShowReject","rejectReason","setRejectReason","hrs","mins","onReschedule","hasActiveReschedule","canReschedule","PRIORITY_LABELS","onConfirm","setReason","predefinedReasons","proposedDate","setProposedDate","proposedTime","setProposedTime","reasonText","setReasonText","today","RESCHEDULE_REASON_LABELS","Send","onAccept","rejectNote","setRejectNote","showRejectForm","setShowRejectForm"],"mappings":"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"}