{"version":3,"file":"MonitoringPage-1768651145376-CN7rG5RA.js","sources":["../../src/pages/admin/MonitoringPage.tsx"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react';\r\nimport { AlertCircle, CheckCircle, Clock, Database, Server, Wifi, X, BarChart, TrendingUp, Activity, Zap, Users, FileText, RefreshCw } from 'lucide-react';\r\nimport {\r\n  LineChart, Line, BarChart as RechartsBarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend,\r\n  ResponsiveContainer, PieChart, Pie, Cell\r\n} from '../../components/LazyCharts';\r\nimport { useDataStore } from '../../stores/dataStore';\r\nimport type { Request } from '../../types';\r\n\r\ninterface HealthCheck {\r\n  status: 'healthy' | 'degraded' | 'down';\r\n  timestamp: number;\r\n  checks: {\r\n    database: boolean;\r\n    cache: boolean;\r\n    websocket: boolean;\r\n  };\r\n  metrics: {\r\n    avgResponseTime: number;\r\n    errorRate: number;\r\n    activeConnections: number;\r\n  };\r\n}\r\n\r\ninterface PerformanceStats {\r\n  period: string;\r\n  totalRequests: number;\r\n  errorCount: number;\r\n  errorRate: number;\r\n  avgResponseTime: number;\r\n  p95ResponseTime: number;\r\n  p99ResponseTime: number;\r\n  endpointStats: Array<{\r\n    endpoint: string;\r\n    count: number;\r\n    avgTime: number;\r\n    errorRate: number;\r\n  }>;\r\n  recentErrors: Array<{\r\n    message: string;\r\n    endpoint: string;\r\n    timestamp: string;\r\n  }>;\r\n}\r\n\r\ninterface CacheStats {\r\n  memory: {\r\n    size: number;\r\n    hits: number;\r\n    misses: number;\r\n    hitRate: number;\r\n  };\r\n  kv: {\r\n    operations: number;\r\n    estimatedSize: string;\r\n  };\r\n}\r\n\r\n// Chart colors\r\nconst CHART_COLORS = {\r\n  primary: '#3B82F6',\r\n  success: '#10B981',\r\n  warning: '#F59E0B',\r\n  danger: '#EF4444',\r\n  purple: '#8B5CF6',\r\n  cyan: '#06B6D4',\r\n};\r\n\r\nconst STATUS_COLORS: Record<string, string> = {\r\n  new: '#3B82F6',\r\n  assigned: '#8B5CF6',\r\n  in_progress: '#F59E0B',\r\n  pending_approval: '#A855F7',\r\n  completed: '#10B981',\r\n  cancelled: '#EF4444',\r\n};\r\n\r\nexport function MonitoringPage() {\r\n  const [health, setHealth] = useState<HealthCheck | null>(null);\r\n  const [performance, setPerformance] = useState<PerformanceStats | null>(null);\r\n  const [cache, setCache] = useState<CacheStats | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [autoRefresh, setAutoRefresh] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<'overview' | 'performance' | 'requests'>('overview');\r\n\r\n  const { requests, executors, getStats } = useDataStore();\r\n  const stats = getStats();\r\n\r\n  // Generate mock response time history for chart\r\n  const responseTimeHistory = useMemo(() => {\r\n    const data = [];\r\n    for (let i = 23; i >= 0; i--) {\r\n      const hour = new Date();\r\n      hour.setHours(hour.getHours() - i);\r\n      data.push({\r\n        time: hour.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }),\r\n        avgTime: Math.floor(Math.random() * 150) + 50,\r\n        requests: Math.floor(Math.random() * 100) + 20,\r\n      });\r\n    }\r\n    return data;\r\n  }, []);\r\n\r\n  // Request statistics by status\r\n  const requestsByStatus = useMemo(() => {\r\n    const statusCounts: Record<string, number> = {};\r\n    requests.forEach((r: Request) => {\r\n      statusCounts[r.status] = (statusCounts[r.status] || 0) + 1;\r\n    });\r\n\r\n    return Object.entries(statusCounts).map(([status, count]) => ({\r\n      name: status === 'new' ? 'Новые' :\r\n            status === 'assigned' ? 'Назначены' :\r\n            status === 'in_progress' ? 'В работе' :\r\n            status === 'pending_approval' ? 'На проверке' :\r\n            status === 'completed' ? 'Выполнены' :\r\n            status === 'cancelled' ? 'Отменены' : status,\r\n      value: count,\r\n      color: STATUS_COLORS[status] || '#9CA3AF',\r\n    }));\r\n  }, [requests]);\r\n\r\n  // Requests by category for bar chart\r\n  const requestsByCategory = useMemo(() => {\r\n    const categoryCounts: Record<string, number> = {};\r\n    requests.forEach((r: Request) => {\r\n      categoryCounts[r.category] = (categoryCounts[r.category] || 0) + 1;\r\n    });\r\n\r\n    const categoryLabels: Record<string, string> = {\r\n      plumber: 'Сантехник',\r\n      electrician: 'Электрик',\r\n      security: 'Охрана',\r\n      cleaning: 'Уборка',\r\n      elevator: 'Лифт',\r\n      intercom: 'Домофон',\r\n      carpenter: 'Плотник',\r\n      locksmith: 'Слесарь',\r\n      other: 'Другое',\r\n    };\r\n\r\n    return Object.entries(categoryCounts)\r\n      .map(([category, count]) => ({\r\n        category: categoryLabels[category] || category,\r\n        count,\r\n      }))\r\n      .sort((a, b) => b.count - a.count)\r\n      .slice(0, 8);\r\n  }, [requests]);\r\n\r\n  // Requests by day of week\r\n  const requestsByDay = useMemo(() => {\r\n    const days = ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'];\r\n    const dayCounts = new Array(7).fill(0);\r\n\r\n    requests.forEach((r: Request) => {\r\n      const day = new Date(r.createdAt).getDay();\r\n      dayCounts[day]++;\r\n    });\r\n\r\n    return days.map((name, i) => ({\r\n      day: name,\r\n      count: dayCounts[i],\r\n    }));\r\n  }, [requests]);\r\n\r\n  // Executor performance\r\n  const executorPerformance = useMemo(() => {\r\n    return [...executors]\r\n      .sort((a, b) => b.completedCount - a.completedCount)\r\n      .slice(0, 6)\r\n      .map(e => ({\r\n        name: e.name.split(' ')[0],\r\n        completed: e.completedCount,\r\n        active: e.activeRequests,\r\n        rating: e.rating,\r\n      }));\r\n  }, [executors]);\r\n\r\n  const fetchMetrics = async () => {\r\n    try {\r\n      const token = localStorage.getItem('auth_token');\r\n      const response = await fetch('/api/admin/metrics', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch metrics');\r\n      }\r\n\r\n      const data = await response.json();\r\n      setHealth(data.health);\r\n      setPerformance(data.performance);\r\n      setCache(data.cache);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Failed to fetch metrics:', error);\r\n      // Set mock data for demo\r\n      setHealth({\r\n        status: 'healthy',\r\n        timestamp: Date.now(),\r\n        checks: { database: true, cache: true, websocket: true },\r\n        metrics: { avgResponseTime: 85, errorRate: 0.5, activeConnections: 24 }\r\n      });\r\n      setPerformance({\r\n        period: '24h',\r\n        totalRequests: 1247,\r\n        errorCount: 6,\r\n        errorRate: 0.48,\r\n        avgResponseTime: 85,\r\n        p95ResponseTime: 180,\r\n        p99ResponseTime: 320,\r\n        endpointStats: [\r\n          { endpoint: '/api/requests', count: 450, avgTime: 65, errorRate: 0.2 },\r\n          { endpoint: '/api/executors', count: 280, avgTime: 45, errorRate: 0 },\r\n          { endpoint: '/api/auth/login', count: 156, avgTime: 120, errorRate: 1.2 },\r\n          { endpoint: '/api/buildings', count: 98, avgTime: 35, errorRate: 0 },\r\n        ],\r\n        recentErrors: []\r\n      });\r\n      setCache({\r\n        memory: { size: 156, hits: 2450, misses: 180, hitRate: 93.2 },\r\n        kv: { operations: 890, estimatedSize: '2.4 MB' }\r\n      });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchMetrics();\r\n\r\n    if (autoRefresh) {\r\n      const interval = setInterval(fetchMetrics, 10000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [autoRefresh]);\r\n\r\n  const getStatusColor = (status: 'healthy' | 'degraded' | 'down') => {\r\n    switch (status) {\r\n      case 'healthy':\r\n        return 'text-green-500 bg-green-50 border-green-200';\r\n      case 'degraded':\r\n        return 'text-yellow-500 bg-yellow-50 border-yellow-200';\r\n      case 'down':\r\n        return 'text-red-500 bg-red-50 border-red-200';\r\n    }\r\n  };\r\n\r\n  const getMetricColor = (value: number, thresholds: { good: number; warning: number }) => {\r\n    if (value <= thresholds.good) return 'text-green-600';\r\n    if (value <= thresholds.warning) return 'text-yellow-600';\r\n    return 'text-red-600';\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-96\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">Мониторинг Системы</h1>\r\n          <p className=\"text-gray-600 mt-1\">Real-time производительность и аналитика</p>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          <label className=\"flex items-center gap-2 text-sm text-gray-700\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={autoRefresh}\r\n              onChange={(e) => setAutoRefresh(e.target.checked)}\r\n              className=\"rounded border-gray-300 text-primary-500 focus:ring-primary-500\"\r\n            />\r\n            Авто (10s)\r\n          </label>\r\n\r\n          <button\r\n            onClick={fetchMetrics}\r\n            className=\"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors flex items-center gap-2\"\r\n          >\r\n            <RefreshCw className=\"w-4 h-4\" />\r\n            Обновить\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex gap-2\">\r\n        {[\r\n          { id: 'overview', label: 'Обзор', icon: Activity },\r\n          { id: 'performance', label: 'Производительность', icon: Zap },\r\n          { id: 'requests', label: 'Аналитика заявок', icon: FileText },\r\n        ].map(tab => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => setActiveTab(tab.id as typeof activeTab)}\r\n            className={`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-colors ${\r\n              activeTab === tab.id\r\n                ? 'bg-orange-400 text-gray-900'\r\n                : 'bg-white text-gray-600 hover:bg-gray-100'\r\n            }`}\r\n          >\r\n            <tab.icon className=\"w-4 h-4\" />\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Overview Tab */}\r\n      {activeTab === 'overview' && (\r\n        <>\r\n          {/* Health Status */}\r\n          {health && (\r\n            <div className={`glass-card p-6 border-2 ${getStatusColor(health.status)}`}>\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {health.status === 'healthy' ? (\r\n                    <CheckCircle className=\"w-8 h-8\" />\r\n                  ) : (\r\n                    <AlertCircle className=\"w-8 h-8\" />\r\n                  )}\r\n                  <div>\r\n                    <h2 className=\"text-xl font-bold\">\r\n                      Статус: {health.status === 'healthy' ? 'Здорово' : health.status === 'degraded' ? 'Ухудшено' : 'Не работает'}\r\n                    </h2>\r\n                    <p className=\"text-sm opacity-75\">\r\n                      Обновлено: {new Date(health.timestamp).toLocaleString('ru-RU')}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-3 gap-4\">\r\n                  <div className=\"text-center\">\r\n                    <Database className={`w-6 h-6 mx-auto mb-1 ${health.checks.database ? 'text-green-500' : 'text-red-500'}`} />\r\n                    <p className=\"text-xs\">Database</p>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <Server className={`w-6 h-6 mx-auto mb-1 ${health.checks.cache ? 'text-green-500' : 'text-red-500'}`} />\r\n                    <p className=\"text-xs\">Cache</p>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <Wifi className={`w-6 h-6 mx-auto mb-1 ${health.checks.websocket ? 'text-green-500' : 'text-red-500'}`} />\r\n                    <p className=\"text-xs\">WebSocket</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Quick Stats */}\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            <div className=\"glass-card p-5\">\r\n              <div className=\"flex items-center gap-3 mb-2\">\r\n                <div className=\"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center\">\r\n                  <FileText className=\"w-5 h-5 text-blue-600\" />\r\n                </div>\r\n                <span className=\"text-sm text-gray-600\">Всего заявок</span>\r\n              </div>\r\n              <div className=\"text-3xl font-bold text-gray-900\">{stats.totalRequests}</div>\r\n            </div>\r\n\r\n            <div className=\"glass-card p-5\">\r\n              <div className=\"flex items-center gap-3 mb-2\">\r\n                <div className=\"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center\">\r\n                  <Users className=\"w-5 h-5 text-green-600\" />\r\n                </div>\r\n                <span className=\"text-sm text-gray-600\">Исполнителей</span>\r\n              </div>\r\n              <div className=\"text-3xl font-bold text-gray-900\">{executors.length}</div>\r\n              <p className=\"text-xs text-gray-500 mt-1\">{stats.executorsOnline} онлайн</p>\r\n            </div>\r\n\r\n            <div className=\"glass-card p-5\">\r\n              <div className=\"flex items-center gap-3 mb-2\">\r\n                <div className=\"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center\">\r\n                  <Clock className=\"w-5 h-5 text-amber-600\" />\r\n                </div>\r\n                <span className=\"text-sm text-gray-600\">В работе</span>\r\n              </div>\r\n              <div className=\"text-3xl font-bold text-amber-600\">{stats.inProgress}</div>\r\n            </div>\r\n\r\n            <div className=\"glass-card p-5\">\r\n              <div className=\"flex items-center gap-3 mb-2\">\r\n                <div className=\"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center\">\r\n                  <TrendingUp className=\"w-5 h-5 text-purple-600\" />\r\n                </div>\r\n                <span className=\"text-sm text-gray-600\">За неделю</span>\r\n              </div>\r\n              <div className=\"text-3xl font-bold text-green-600\">{stats.completedWeek}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Charts Row */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            {/* Request Status Pie Chart */}\r\n            <div className=\"glass-card p-5\">\r\n              <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n                <BarChart className=\"w-5 h-5 text-purple-500\" />\r\n                Заявки по статусам\r\n              </h3>\r\n              <ResponsiveContainer width=\"100%\" height={280}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={requestsByStatus}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={false}\r\n                    outerRadius={100}\r\n                    dataKey=\"value\"\r\n                    label={({ name, percent }: { name: string; percent: number }) =>\r\n                      `${name} ${(percent * 100).toFixed(0)}%`\r\n                    }\r\n                  >\r\n                    {requestsByStatus.map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={entry.color} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Tooltip />\r\n                  <Legend />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n\r\n            {/* Requests by Category */}\r\n            <div className=\"glass-card p-5\">\r\n              <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n                <Activity className=\"w-5 h-5 text-blue-500\" />\r\n                По категориям\r\n              </h3>\r\n              <ResponsiveContainer width=\"100%\" height={280}>\r\n                <RechartsBarChart data={requestsByCategory} layout=\"vertical\">\r\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\r\n                  <XAxis type=\"number\" tick={{ fontSize: 12 }} />\r\n                  <YAxis dataKey=\"category\" type=\"category\" tick={{ fontSize: 11 }} width={80} />\r\n                  <Tooltip />\r\n                  <Bar dataKey=\"count\" fill={CHART_COLORS.primary} radius={[0, 4, 4, 0]} />\r\n                </RechartsBarChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {/* Performance Tab */}\r\n      {activeTab === 'performance' && performance && (\r\n        <>\r\n          {/* Performance Metrics */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n            <div className=\"glass-card p-5\">\r\n              <div className=\"flex items-center gap-3 mb-2\">\r\n                <BarChart className=\"w-5 h-5 text-blue-500\" />\r\n                <span className=\"text-sm text-gray-600\">API Запросов</span>\r\n              </div>\r\n              <div className=\"text-3xl font-bold text-gray-900\">{performance.totalRequests}</div>\r\n              <p className=\"text-xs text-gray-500 mt-1\">За {performance.period}</p>\r\n            </div>\r\n\r\n            <div className=\"glass-card p-5\">\r\n              <div className=\"flex items-center gap-3 mb-2\">\r\n                <Clock className=\"w-5 h-5 text-green-500\" />\r\n                <span className=\"text-sm text-gray-600\">Ср. отклик</span>\r\n              </div>\r\n              <div className={`text-3xl font-bold ${getMetricColor(performance.avgResponseTime, { good: 200, warning: 500 })}`}>\r\n                {performance.avgResponseTime}ms\r\n              </div>\r\n              <p className=\"text-xs text-gray-500 mt-1\">\r\n                P95: {performance.p95ResponseTime}ms\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"glass-card p-5\">\r\n              <div className=\"flex items-center gap-3 mb-2\">\r\n                <AlertCircle className=\"w-5 h-5 text-red-500\" />\r\n                <span className=\"text-sm text-gray-600\">Ошибок</span>\r\n              </div>\r\n              <div className={`text-3xl font-bold ${getMetricColor(performance.errorRate, { good: 1, warning: 5 })}`}>\r\n                {performance.errorCount}\r\n              </div>\r\n              <p className=\"text-xs text-gray-500 mt-1\">Уровень: {performance.errorRate}%</p>\r\n            </div>\r\n\r\n            <div className=\"glass-card p-5\">\r\n              <div className=\"flex items-center gap-3 mb-2\">\r\n                <Server className=\"w-5 h-5 text-purple-500\" />\r\n                <span className=\"text-sm text-gray-600\">Cache Hit</span>\r\n              </div>\r\n              <div className=\"text-3xl font-bold text-gray-900\">\r\n                {cache ? Math.round(cache.memory.hitRate) : 0}%\r\n              </div>\r\n              <p className=\"text-xs text-gray-500 mt-1\">\r\n                {cache ? `${cache.memory.hits} hits` : 'N/A'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Response Time Chart */}\r\n          <div className=\"glass-card p-5\">\r\n            <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n              <TrendingUp className=\"w-5 h-5 text-green-500\" />\r\n              Время отклика (24 часа)\r\n            </h3>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <LineChart data={responseTimeHistory}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\r\n                <XAxis dataKey=\"time\" tick={{ fontSize: 10 }} />\r\n                <YAxis tick={{ fontSize: 12 }} />\r\n                <Tooltip />\r\n                <Legend />\r\n                <Line\r\n                  type=\"monotone\"\r\n                  dataKey=\"avgTime\"\r\n                  stroke={CHART_COLORS.primary}\r\n                  strokeWidth={2}\r\n                  name=\"Время отклика (ms)\"\r\n                  dot={false}\r\n                />\r\n                <Line\r\n                  type=\"monotone\"\r\n                  dataKey=\"requests\"\r\n                  stroke={CHART_COLORS.success}\r\n                  strokeWidth={2}\r\n                  name=\"Запросов\"\r\n                  dot={false}\r\n                />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n\r\n          {/* Endpoint Statistics */}\r\n          {performance.endpointStats.length > 0 && (\r\n            <div className=\"glass-card p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Статистика Endpoints</h3>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full\">\r\n                  <thead>\r\n                    <tr className=\"border-b border-gray-200\">\r\n                      <th className=\"text-left py-3 px-4 text-sm font-medium text-gray-700\">Endpoint</th>\r\n                      <th className=\"text-right py-3 px-4 text-sm font-medium text-gray-700\">Запросов</th>\r\n                      <th className=\"text-right py-3 px-4 text-sm font-medium text-gray-700\">Ср. время</th>\r\n                      <th className=\"text-right py-3 px-4 text-sm font-medium text-gray-700\">Ошибок</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {performance.endpointStats.map((stat, idx) => (\r\n                      <tr key={idx} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                        <td className=\"py-3 px-4 text-sm text-gray-900 font-mono\">{stat.endpoint}</td>\r\n                        <td className=\"py-3 px-4 text-sm text-gray-600 text-right\">{stat.count}</td>\r\n                        <td className={`py-3 px-4 text-sm text-right font-medium ${getMetricColor(stat.avgTime, { good: 200, warning: 500 })}`}>\r\n                          {stat.avgTime}ms\r\n                        </td>\r\n                        <td className={`py-3 px-4 text-sm text-right font-medium ${getMetricColor(stat.errorRate, { good: 1, warning: 5 })}`}>\r\n                          {stat.errorRate}%\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Cache Statistics */}\r\n          {cache && (\r\n            <div className=\"glass-card p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Статистика Кэша</h3>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                <div className=\"bg-white/50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-gray-600\">Memory Size</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900 mt-1\">{cache.memory.size}</p>\r\n                </div>\r\n                <div className=\"bg-white/50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-gray-600\">Hits</p>\r\n                  <p className=\"text-2xl font-bold text-green-600 mt-1\">{cache.memory.hits}</p>\r\n                </div>\r\n                <div className=\"bg-white/50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-gray-600\">Misses</p>\r\n                  <p className=\"text-2xl font-bold text-red-600 mt-1\">{cache.memory.misses}</p>\r\n                </div>\r\n                <div className=\"bg-white/50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-gray-600\">Hit Rate</p>\r\n                  <p className=\"text-2xl font-bold text-blue-600 mt-1\">{Math.round(cache.memory.hitRate)}%</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Requests Analytics Tab */}\r\n      {activeTab === 'requests' && (\r\n        <>\r\n          {/* Requests by Day */}\r\n          <div className=\"glass-card p-5\">\r\n            <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n              <Activity className=\"w-5 h-5 text-blue-500\" />\r\n              Заявки по дням недели\r\n            </h3>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <RechartsBarChart data={requestsByDay}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\r\n                <XAxis dataKey=\"day\" tick={{ fontSize: 12 }} />\r\n                <YAxis tick={{ fontSize: 12 }} />\r\n                <Tooltip />\r\n                <Bar dataKey=\"count\" fill={CHART_COLORS.primary} radius={[4, 4, 0, 0]} name=\"Заявок\" />\r\n              </RechartsBarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n\r\n          {/* Executor Performance */}\r\n          <div className=\"glass-card p-5\">\r\n            <h3 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\r\n              <Users className=\"w-5 h-5 text-green-500\" />\r\n              Производительность исполнителей\r\n            </h3>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <RechartsBarChart data={executorPerformance}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\r\n                <XAxis dataKey=\"name\" tick={{ fontSize: 11 }} />\r\n                <YAxis tick={{ fontSize: 12 }} />\r\n                <Tooltip />\r\n                <Legend />\r\n                <Bar dataKey=\"completed\" fill={CHART_COLORS.success} name=\"Выполнено\" stackId=\"a\" />\r\n                <Bar dataKey=\"active\" fill={CHART_COLORS.warning} name=\"Активных\" stackId=\"a\" />\r\n              </RechartsBarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n\r\n          {/* Request Status Distribution */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            <div className=\"glass-card p-5\">\r\n              <h3 className=\"font-semibold text-lg mb-4\">Распределение по статусам</h3>\r\n              <div className=\"space-y-3\">\r\n                {requestsByStatus.map((item, idx) => {\r\n                  const percentage = stats.totalRequests > 0 ? (item.value / stats.totalRequests) * 100 : 0;\r\n                  return (\r\n                    <div key={idx}>\r\n                      <div className=\"flex justify-between text-sm mb-1\">\r\n                        <span className=\"text-gray-700\">{item.name}</span>\r\n                        <span className=\"font-medium\">{item.value} ({percentage.toFixed(1)}%)</span>\r\n                      </div>\r\n                      <div className=\"h-2 bg-gray-200 rounded-full overflow-hidden\">\r\n                        <div\r\n                          className=\"h-full transition-all duration-500\"\r\n                          style={{ width: `${percentage}%`, backgroundColor: item.color }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"glass-card p-5\">\r\n              <h3 className=\"font-semibold text-lg mb-4\">Статистика за неделю</h3>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"bg-blue-50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-blue-600\">Новых заявок</p>\r\n                  <p className=\"text-3xl font-bold text-blue-700 mt-1\">{stats.newRequests}</p>\r\n                </div>\r\n                <div className=\"bg-amber-50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-amber-600\">В работе</p>\r\n                  <p className=\"text-3xl font-bold text-amber-700 mt-1\">{stats.inProgress}</p>\r\n                </div>\r\n                <div className=\"bg-purple-50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-purple-600\">На проверке</p>\r\n                  <p className=\"text-3xl font-bold text-purple-700 mt-1\">{stats.pendingApproval}</p>\r\n                </div>\r\n                <div className=\"bg-green-50 rounded-lg p-4\">\r\n                  <p className=\"text-sm text-green-600\">Выполнено</p>\r\n                  <p className=\"text-3xl font-bold text-green-700 mt-1\">{stats.completedWeek}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {/* Recent Errors */}\r\n      {performance && performance.recentErrors.length > 0 && (\r\n        <div className=\"glass-card p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Последние Ошибки</h3>\r\n          <div className=\"space-y-3\">\r\n            {performance.recentErrors.map((error, idx) => (\r\n              <div key={idx} className=\"flex items-start gap-3 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n                <X className=\"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0\" />\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"text-sm font-medium text-red-900\">{error.message}</p>\r\n                  <div className=\"flex items-center gap-3 mt-1 text-xs text-red-700\">\r\n                    <span className=\"font-mono\">{error.endpoint}</span>\r\n                    <span>•</span>\r\n                    <span>{new Date(error.timestamp).toLocaleString('ru-RU')}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CHART_COLORS","STATUS_COLORS","MonitoringPage","health","setHealth","useState","performance","setPerformance","cache","setCache","loading","setLoading","autoRefresh","setAutoRefresh","activeTab","setActiveTab","requests","executors","getStats","useDataStore","stats","responseTimeHistory","useMemo","data","i","hour","requestsByStatus","statusCounts","r","status","count","requestsByCategory","categoryCounts","categoryLabels","category","b","requestsByDay","days","dayCounts","day","name","executorPerformance","a","e","fetchMetrics","token","response","useEffect","interval","getStatusColor","getMetricColor","value","thresholds","jsx","jsxs","RefreshCw","Activity","Zap","FileText","tab","Fragment","CheckCircle","AlertCircle","Database","Server","Wifi","Users","Clock","TrendingUp","BarChart","ResponsiveContainer","PieChart","Pie","percent","entry","index","Cell","Tooltip","Legend","RechartsBarChart","CartesianGrid","XAxis","YAxis","Bar","LineChart","Line","stat","idx","item","percentage","error","X"],"mappings":"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"}