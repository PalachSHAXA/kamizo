{"version":3,"file":"ExecutorsPage-1770493083576-Bqn6iblR.js","sources":["../../src/pages/shared/ExecutorsPage.tsx"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react';\r\nimport { Phone, Star, X, Eye, EyeOff, Copy, Check, Edit3, Save, Clock, Award, Loader2, RefreshCw } from 'lucide-react';\r\nimport { useDataStore } from '../../stores/dataStore';\r\nimport { useAuthStore } from '../../stores/authStore';\r\nimport { executorsApi } from '../../services/api';\r\nimport { SPECIALIZATION_LABELS } from '../../types';\r\nimport type { Executor, ExecutorSpecialization } from '../../types';\r\n\r\nexport function ExecutorsPage() {\r\n  const { user } = useAuthStore();\r\n  const { executors, addExecutor, updateExecutor, deleteExecutor, fetchExecutors, isLoadingExecutors } = useDataStore();\r\n\r\n  // Check if user is department head - they can only see and manage their department's executors\r\n  const isDepartmentHead = user?.role === 'department_head';\r\n  const userSpecialization = user?.specialization;\r\n\r\n  // Filter executors by department if user is department head\r\n  const filteredExecutors = useMemo(() => {\r\n    if (isDepartmentHead && userSpecialization) {\r\n      return executors.filter(e => e.specialization === userSpecialization);\r\n    }\r\n    return executors;\r\n  }, [executors, isDepartmentHead, userSpecialization]);\r\n\r\n  // Fetch executors from API on mount\r\n  useEffect(() => {\r\n    fetchExecutors();\r\n  }, [fetchExecutors]);\r\n\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [selectedExecutor, setSelectedExecutor] = useState<Executor | null>(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [copiedField, setCopiedField] = useState<string | null>(null);\r\n  const [createdPasswords, setCreatedPasswords] = useState<Record<string, string>>({});\r\n  // @ts-ignore - used in modal\r\n  const [showCredentialsModal, setShowCredentialsModal] = useState<{ login: string; password: string } | null>(null);\r\n  const [editForm, setEditForm] = useState({\r\n    name: '',\r\n    phone: '',\r\n    login: '',\r\n    password: '',\r\n    specialization: 'plumber' as ExecutorSpecialization,\r\n  });\r\n  const [newExecutor, setNewExecutor] = useState<{\r\n    name: string;\r\n    phone: string;\r\n    login: string;\r\n    password: string;\r\n    specialization: ExecutorSpecialization;\r\n    role: 'executor' | 'department_head';\r\n  }>({\r\n    name: '',\r\n    phone: '',\r\n    login: '',\r\n    password: '',\r\n    specialization: 'plumber',\r\n    role: 'executor',\r\n  });\r\n  const [isAdding, setIsAdding] = useState(false);\r\n  const [addError, setAddError] = useState<string | null>(null);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [isLoadingDetails, setIsLoadingDetails] = useState(false);\r\n\r\n  const handleOpenDetails = async (executor: Executor) => {\r\n    console.log('=== OPENING EXECUTOR DETAILS ===');\r\n    // Show modal immediately with cached data\r\n    setSelectedExecutor(executor);\r\n    setEditForm({\r\n      name: executor.name,\r\n      phone: executor.phone,\r\n      login: executor.login,\r\n      password: executor.password || '',\r\n      specialization: executor.specialization,\r\n    });\r\n    setIsEditing(false);\r\n    setShowPassword(false);\r\n\r\n    // Then fetch fresh data from API (including password)\r\n    setIsLoadingDetails(true);\r\n    try {\r\n      const response = await executorsApi.getById(executor.id);\r\n      if (response.executor) {\r\n        const freshData = {\r\n          ...executor,\r\n          ...response.executor,\r\n          // Map API field names to frontend field names\r\n          createdAt: response.executor.created_at || executor.createdAt,\r\n        };\r\n        setSelectedExecutor(freshData);\r\n        setEditForm({\r\n          name: freshData.name,\r\n          phone: freshData.phone,\r\n          login: freshData.login,\r\n          password: freshData.password || '',\r\n          specialization: freshData.specialization,\r\n        });\r\n        console.log('Fresh executor data loaded:', freshData.name, 'password:', freshData.password ? 'YES' : 'NO');\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch executor details:', err);\r\n    } finally {\r\n      setIsLoadingDetails(false);\r\n    }\r\n  };\r\n\r\n  const handleCloseDetails = () => {\r\n    setSelectedExecutor(null);\r\n    setIsEditing(false);\r\n    setShowPassword(false);\r\n  };\r\n\r\n  const handleCopy = (text: string, field: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    setCopiedField(field);\r\n    setTimeout(() => setCopiedField(null), 2000);\r\n  };\r\n\r\n  const handleSaveChanges = () => {\r\n    if (!selectedExecutor) return;\r\n    updateExecutor(selectedExecutor.id, editForm);\r\n\r\n    // Save password locally if it was changed\r\n    if (editForm.password) {\r\n      setCreatedPasswords(prev => ({\r\n        ...prev,\r\n        [selectedExecutor.id]: editForm.password\r\n      }));\r\n    }\r\n\r\n    setSelectedExecutor({ ...selectedExecutor, ...editForm });\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleDeleteExecutor = async () => {\r\n    if (!selectedExecutor) return;\r\n    if (confirm('Вы уверены, что хотите удалить этого исполнителя?')) {\r\n      setIsDeleting(true);\r\n      try {\r\n        await deleteExecutor(selectedExecutor.id);\r\n        handleCloseDetails();\r\n      } catch (error: any) {\r\n        alert(error.message || 'Ошибка при удалении');\r\n      } finally {\r\n        setIsDeleting(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'available': return <span className=\"badge badge-done\">Доступен</span>;\r\n      case 'busy': return <span className=\"badge badge-progress\">Занят</span>;\r\n      case 'offline': return <span className=\"badge bg-gray-100 text-gray-600\">Не в сети</span>;\r\n      default: return <span className=\"badge\">{status}</span>;\r\n    }\r\n  };\r\n\r\n  const handleAddExecutor = async () => {\r\n    if (!newExecutor.name || !newExecutor.phone || !newExecutor.login || !newExecutor.password) {\r\n      setAddError('Заполните все обязательные поля');\r\n      return;\r\n    }\r\n    setIsAdding(true);\r\n    setAddError(null);\r\n    try {\r\n      const result = await addExecutor(newExecutor);\r\n\r\n      // Save password locally for this user\r\n      if (result?.id) {\r\n        setCreatedPasswords(prev => ({ ...prev, [result.id]: newExecutor.password }));\r\n      }\r\n\r\n      // Show credentials modal\r\n      setShowCredentialsModal({\r\n        login: newExecutor.login,\r\n        password: newExecutor.password,\r\n      });\r\n\r\n      setNewExecutor({ name: '', phone: '', login: '', password: '', specialization: 'plumber', role: 'executor' });\r\n      setShowAddModal(false);\r\n      // Refresh the list\r\n      fetchExecutors();\r\n    } catch (error: any) {\r\n      setAddError(error.message || 'Ошибка при добавлении исполнителя');\r\n    } finally {\r\n      setIsAdding(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">\r\n            {isDepartmentHead ? 'Мои сотрудники' : 'Исполнители'}\r\n          </h1>\r\n          {isDepartmentHead && userSpecialization && (\r\n            <p className=\"text-gray-500 text-sm mt-1\">\r\n              Отдел: {SPECIALIZATION_LABELS[userSpecialization as ExecutorSpecialization]}\r\n            </p>\r\n          )}\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => fetchExecutors()}\r\n            className=\"btn-secondary p-2\"\r\n            title=\"Обновить\"\r\n            disabled={isLoadingExecutors}\r\n          >\r\n            <RefreshCw className={`w-5 h-5 ${isLoadingExecutors ? 'animate-spin' : ''}`} />\r\n          </button>\r\n          {/* Department heads can add executors of their department */}\r\n          <button\r\n            onClick={() => {\r\n              // For department heads, pre-set specialization to their department\r\n              if (isDepartmentHead && userSpecialization) {\r\n                setNewExecutor(prev => ({\r\n                  ...prev,\r\n                  specialization: userSpecialization as ExecutorSpecialization,\r\n                  role: 'executor' // Department heads can only add executors, not other roles\r\n                }));\r\n              }\r\n              setShowAddModal(true);\r\n            }}\r\n            className=\"btn-primary\"\r\n          >\r\n            + Добавить исполнителя\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {isLoadingExecutors ? (\r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary-500\" />\r\n        </div>\r\n      ) : (\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n        {filteredExecutors.map((executor) => (\r\n          <div\r\n            key={executor.id}\r\n            className=\"glass-card p-5 hover:shadow-lg transition-shadow\"\r\n          >\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center text-lg font-medium text-primary-700\">\r\n                  {executor.name.split(' ').map(n => n[0]).join('').slice(0, 2)}\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"font-semibold\">{executor.name}</h3>\r\n                  <div className=\"text-sm text-gray-500\">{SPECIALIZATION_LABELS[executor.specialization] || 'Не указана'}</div>\r\n                </div>\r\n              </div>\r\n              {getStatusBadge(executor.status)}\r\n            </div>\r\n            <div className=\"space-y-2 text-sm text-gray-600 mb-3\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Phone className=\"w-4 h-4\" />\r\n                {executor.phone}\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Star className=\"w-4 h-4 text-amber-400\" />\r\n                {executor.rating} • {executor.completedCount} выполнено\r\n              </div>\r\n            </div>\r\n            <button\r\n              type=\"button\"\r\n              className=\"w-full btn-secondary text-sm py-2\"\r\n              onClick={() => handleOpenDetails(executor)}\r\n            >\r\n              Подробнее\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      )}\r\n\r\n      {/* Add Executor Modal */}\r\n      {showAddModal && (\r\n        <div className=\"modal-backdrop\">\r\n          <div className=\"modal-content p-6 w-full max-w-md mx-4\">\r\n            <h2 className=\"text-xl font-bold mb-4\">\r\n              {isDepartmentHead ? 'Добавить сотрудника в отдел' : 'Добавить сотрудника'}\r\n            </h2>\r\n            {isDepartmentHead && userSpecialization && (\r\n              <div className=\"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg mb-4\">\r\n                Отдел: <strong>{SPECIALIZATION_LABELS[userSpecialization as ExecutorSpecialization]}</strong>\r\n              </div>\r\n            )}\r\n            {addError && (\r\n              <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4\">\r\n                {addError}\r\n              </div>\r\n            )}\r\n            <div className=\"space-y-4\">\r\n              {/* Role selector - only for admins/managers, not for department heads */}\r\n              {!isDepartmentHead && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Роль *</label>\r\n                  <select\r\n                    value={newExecutor.role}\r\n                    onChange={(e) => setNewExecutor({ ...newExecutor, role: e.target.value as any })}\r\n                    className=\"input-field\"\r\n                  >\r\n                    <option value=\"executor\">Исполнитель</option>\r\n                    <option value=\"department_head\">Начальник отдела</option>\r\n                  </select>\r\n                </div>\r\n              )}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">ФИО *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newExecutor.name}\r\n                  onChange={(e) => setNewExecutor({ ...newExecutor, name: e.target.value })}\r\n                  className=\"input-field\"\r\n                  placeholder=\"Фамилия Имя Отчество\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Телефон *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newExecutor.phone}\r\n                  onChange={(e) => setNewExecutor({ ...newExecutor, phone: e.target.value })}\r\n                  className=\"input-field\"\r\n                  placeholder=\"+998 90 123 45 67\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Логин *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newExecutor.login}\r\n                  onChange={(e) => setNewExecutor({ ...newExecutor, login: e.target.value })}\r\n                  className=\"input-field\"\r\n                  placeholder=\"login\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Пароль *</label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={newExecutor.password}\r\n                  onChange={(e) => setNewExecutor({ ...newExecutor, password: e.target.value })}\r\n                  className=\"input-field\"\r\n                  placeholder=\"••••••••\"\r\n                />\r\n              </div>\r\n              {/* Specialization selector - only for admins/managers, not for department heads */}\r\n              {!isDepartmentHead && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Специализация/Отдел *</label>\r\n                  <select\r\n                    value={newExecutor.specialization}\r\n                    onChange={(e) => setNewExecutor({ ...newExecutor, specialization: e.target.value as any })}\r\n                    className=\"input-field\"\r\n                  >\r\n                    <option value=\"plumber\">Сантехник</option>\r\n                    <option value=\"electrician\">Электрик</option>\r\n                    <option value=\"elevator\">Лифтёр</option>\r\n                    <option value=\"intercom\">Домофон</option>\r\n                    <option value=\"cleaning\">Уборщица</option>\r\n                    <option value=\"gardener\">Садовник</option>\r\n                    <option value=\"security\">Охранник</option>\r\n                    <option value=\"carpenter\">Столяр</option>\r\n                    <option value=\"boiler\">Котельщик</option>\r\n                    <option value=\"ac\">Кондиционерщик</option>\r\n                    <option value=\"courier\">Курьер</option>\r\n                    <option value=\"other\">Другое</option>\r\n                  </select>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"flex gap-3 mt-6\">\r\n              <button\r\n                onClick={() => { setShowAddModal(false); setAddError(null); }}\r\n                className=\"btn-secondary flex-1\"\r\n                disabled={isAdding}\r\n              >\r\n                Отмена\r\n              </button>\r\n              <button\r\n                onClick={handleAddExecutor}\r\n                className=\"btn-primary flex-1 flex items-center justify-center gap-2\"\r\n                disabled={isAdding}\r\n              >\r\n                {isAdding ? (\r\n                  <>\r\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                    Добавление...\r\n                  </>\r\n                ) : (\r\n                  'Добавить'\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Executor Details Modal */}\r\n      {selectedExecutor && (\r\n        <div className=\"modal-backdrop\" onClick={handleCloseDetails}>\r\n          <div className=\"modal-content p-6 w-full max-w-lg mx-4\" onClick={(e) => e.stopPropagation()}>\r\n            {/* Header */}\r\n            <div className=\"flex items-start justify-between mb-6\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <div className=\"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center text-2xl font-medium text-primary-700\">\r\n                  {selectedExecutor.name.split(' ').map(n => n[0]).join('').slice(0, 2)}\r\n                </div>\r\n                <div>\r\n                  <h2 className=\"text-xl font-bold\">{selectedExecutor.name}</h2>\r\n                  <div className=\"text-gray-500\">{SPECIALIZATION_LABELS[selectedExecutor.specialization] || 'Не указана'}</div>\r\n                  {getStatusBadge(selectedExecutor.status)}\r\n                </div>\r\n              </div>\r\n              <button onClick={handleCloseDetails} className=\"p-2 hover:bg-gray-100 rounded-lg\">\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Stats */}\r\n            <div className=\"grid grid-cols-3 gap-3 mb-6\">\r\n              <div className=\"bg-amber-50 rounded-xl p-3 text-center\">\r\n                <div className=\"flex items-center justify-center gap-1 text-amber-600 mb-1\">\r\n                  <Star className=\"w-4 h-4\" />\r\n                  <span className=\"font-bold text-lg\">{selectedExecutor.rating}</span>\r\n                </div>\r\n                <div className=\"text-xs text-gray-500\">Рейтинг</div>\r\n              </div>\r\n              <div className=\"bg-green-50 rounded-xl p-3 text-center\">\r\n                <div className=\"flex items-center justify-center gap-1 text-green-600 mb-1\">\r\n                  <Award className=\"w-4 h-4\" />\r\n                  <span className=\"font-bold text-lg\">{selectedExecutor.completedCount}</span>\r\n                </div>\r\n                <div className=\"text-xs text-gray-500\">Выполнено</div>\r\n              </div>\r\n              <div className=\"bg-blue-50 rounded-xl p-3 text-center\">\r\n                <div className=\"flex items-center justify-center gap-1 text-blue-600 mb-1\">\r\n                  <Clock className=\"w-4 h-4\" />\r\n                  <span className=\"font-bold text-lg\">{selectedExecutor.activeRequests || 0}</span>\r\n                </div>\r\n                <div className=\"text-xs text-gray-500\">Активных</div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Info / Edit Form */}\r\n            {isEditing ? (\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">ФИО</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editForm.name}\r\n                    onChange={(e) => setEditForm({ ...editForm, name: e.target.value })}\r\n                    className=\"input-field\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Телефон</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editForm.phone}\r\n                    onChange={(e) => setEditForm({ ...editForm, phone: e.target.value })}\r\n                    className=\"input-field\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Логин</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editForm.login}\r\n                    onChange={(e) => setEditForm({ ...editForm, login: e.target.value })}\r\n                    className=\"input-field\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Новый пароль</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editForm.password}\r\n                    onChange={(e) => setEditForm({ ...editForm, password: e.target.value })}\r\n                    className=\"input-field\"\r\n                    placeholder=\"Оставьте пустым, чтобы не менять\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Специализация</label>\r\n                  <select\r\n                    value={editForm.specialization}\r\n                    onChange={(e) => setEditForm({ ...editForm, specialization: e.target.value as ExecutorSpecialization })}\r\n                    className=\"input-field\"\r\n                  >\r\n                    <option value=\"plumber\">Сантехник</option>\r\n                    <option value=\"electrician\">Электрик</option>\r\n                    <option value=\"elevator\">Лифтёр</option>\r\n                    <option value=\"intercom\">Домофон</option>\r\n                    <option value=\"cleaning\">Уборщица</option>\r\n                    <option value=\"gardener\">Садовник</option>\r\n                    <option value=\"security\">Охранник</option>\r\n                    <option value=\"carpenter\">Столяр</option>\r\n                    <option value=\"boiler\">Котельщик</option>\r\n                    <option value=\"ac\">Кондиционерщик</option>\r\n                    <option value=\"courier\">Курьер</option>\r\n                    <option value=\"other\">Другое</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {/* Contact Info */}\r\n                <div className=\"bg-gray-50 rounded-xl p-4 space-y-3\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-2 text-gray-600\">\r\n                      <Phone className=\"w-4 h-4\" />\r\n                      <span className=\"text-sm\">Телефон</span>\r\n                    </div>\r\n                    <span className=\"font-medium\">{selectedExecutor.phone}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Credentials */}\r\n                <div className=\"bg-blue-50 rounded-xl p-4 space-y-3\">\r\n                  <div className=\"text-sm font-medium text-blue-800 mb-2\">Данные для входа</div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm text-gray-600\">Логин</span>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <code className=\"bg-white px-2 py-1 rounded text-sm font-mono\">{selectedExecutor.login}</code>\r\n                      <button\r\n                        onClick={() => handleCopy(selectedExecutor.login, 'login')}\r\n                        className=\"p-1 hover:bg-blue-100 rounded\"\r\n                        title=\"Копировать\"\r\n                      >\r\n                        {copiedField === 'login' ? <Check className=\"w-4 h-4 text-green-500\" /> : <Copy className=\"w-4 h-4 text-gray-400\" />}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm text-gray-600\">Пароль</span>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      {isLoadingDetails ? (\r\n                        <span className=\"flex items-center gap-2 text-sm text-gray-400\">\r\n                          <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                          Загрузка...\r\n                        </span>\r\n                      ) : (selectedExecutor.password || createdPasswords[selectedExecutor.id]) ? (\r\n                        <>\r\n                          <code className=\"bg-white px-2 py-1 rounded text-sm font-mono\">\r\n                            {showPassword ? (selectedExecutor.password || createdPasswords[selectedExecutor.id]) : '••••••••'}\r\n                          </code>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              e.stopPropagation();\r\n                              setShowPassword(!showPassword);\r\n                            }}\r\n                            className=\"p-2 hover:bg-blue-100 active:bg-blue-200 rounded touch-manipulation z-10\"\r\n                            title={showPassword ? 'Скрыть' : 'Показать'}\r\n                          >\r\n                            {showPassword ? <EyeOff className=\"w-4 h-4 text-gray-400\" /> : <Eye className=\"w-4 h-4 text-gray-400\" />}\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleCopy(selectedExecutor.password || createdPasswords[selectedExecutor.id] || '', 'password')}\r\n                            className=\"p-1 hover:bg-blue-100 rounded\"\r\n                            title=\"Копировать\"\r\n                          >\r\n                            {copiedField === 'password' ? <Check className=\"w-4 h-4 text-green-500\" /> : <Copy className=\"w-4 h-4 text-gray-400\" />}\r\n                          </button>\r\n                        </>\r\n                      ) : (\r\n                        <span className=\"text-sm text-gray-400 italic\">Сбросить через \"Редактировать\"</span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Created date */}\r\n                <div className=\"text-sm text-gray-500 text-center\">\r\n                  Добавлен: {new Date(selectedExecutor.createdAt).toLocaleDateString('ru-RU')}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex gap-3 mt-6\">\r\n              {isEditing ? (\r\n                <>\r\n                  <button onClick={() => setIsEditing(false)} className=\"btn-secondary flex-1\">\r\n                    Отмена\r\n                  </button>\r\n                  <button onClick={handleSaveChanges} className=\"btn-primary flex-1 flex items-center justify-center gap-2\">\r\n                    <Save className=\"w-4 h-4\" />\r\n                    Сохранить\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  {/* Department heads can't delete executors - only admins/managers */}\r\n                  {!isDepartmentHead && (\r\n                    <button\r\n                      onClick={handleDeleteExecutor}\r\n                      className=\"btn-secondary text-red-600 hover:bg-red-50 flex-1 flex items-center justify-center gap-2\"\r\n                      disabled={isDeleting}\r\n                    >\r\n                      {isDeleting ? (\r\n                        <>\r\n                          <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                          Удаление...\r\n                        </>\r\n                      ) : (\r\n                        'Удалить'\r\n                      )}\r\n                    </button>\r\n                  )}\r\n                  <button onClick={() => setIsEditing(true)} className={`btn-primary flex items-center justify-center gap-2 ${isDepartmentHead ? 'w-full' : 'flex-1'}`}>\r\n                    <Edit3 className=\"w-4 h-4\" />\r\n                    Редактировать\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Credentials Modal - shows after creating new executor */}\r\n      {showCredentialsModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-fade-in\">\r\n            <div className=\"text-center mb-6\">\r\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <Check className=\"w-8 h-8 text-green-600\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-bold text-gray-900\">Исполнитель создан!</h3>\r\n              <p className=\"text-gray-500 mt-2\">Сохраните учетные данные для входа</p>\r\n            </div>\r\n\r\n            <div className=\"space-y-4 bg-gray-50 rounded-xl p-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-sm text-gray-600\">Логин</span>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <code className=\"bg-white px-3 py-1.5 rounded-lg text-sm font-mono font-medium\">\r\n                    {showCredentialsModal.login}\r\n                  </code>\r\n                  <button\r\n                    onClick={() => {\r\n                      navigator.clipboard.writeText(showCredentialsModal.login);\r\n                      setCopiedField('cred-login');\r\n                      setTimeout(() => setCopiedField(null), 2000);\r\n                    }}\r\n                    className=\"p-1.5 hover:bg-gray-200 rounded-lg transition-colors\"\r\n                  >\r\n                    {copiedField === 'cred-login' ? <Check className=\"w-4 h-4 text-green-500\" /> : <Copy className=\"w-4 h-4 text-gray-400\" />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-sm text-gray-600\">Пароль</span>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <code className=\"bg-white px-3 py-1.5 rounded-lg text-sm font-mono font-medium\">\r\n                    {showCredentialsModal.password}\r\n                  </code>\r\n                  <button\r\n                    onClick={() => {\r\n                      navigator.clipboard.writeText(showCredentialsModal.password);\r\n                      setCopiedField('cred-password');\r\n                      setTimeout(() => setCopiedField(null), 2000);\r\n                    }}\r\n                    className=\"p-1.5 hover:bg-gray-200 rounded-lg transition-colors\"\r\n                  >\r\n                    {copiedField === 'cred-password' ? <Check className=\"w-4 h-4 text-green-500\" /> : <Copy className=\"w-4 h-4 text-gray-400\" />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mt-6 p-3 bg-yellow-50 rounded-xl border border-yellow-200\">\r\n              <p className=\"text-sm text-yellow-800\">\r\n                ⚠️ Сохраните эти данные! Пароль показывается только один раз.\r\n              </p>\r\n            </div>\r\n\r\n            <button\r\n              onClick={() => setShowCredentialsModal(null)}\r\n              className=\"btn-primary w-full mt-6\"\r\n            >\r\n              Готово\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ExecutorsPage","user","useAuthStore","executors","addExecutor","updateExecutor","deleteExecutor","fetchExecutors","isLoadingExecutors","useDataStore","isDepartmentHead","userSpecialization","filteredExecutors","useMemo","e","useEffect","showAddModal","setShowAddModal","useState","selectedExecutor","setSelectedExecutor","isEditing","setIsEditing","showPassword","setShowPassword","copiedField","setCopiedField","createdPasswords","setCreatedPasswords","showCredentialsModal","setShowCredentialsModal","editForm","setEditForm","newExecutor","setNewExecutor","isAdding","setIsAdding","addError","setAddError","isDeleting","setIsDeleting","isLoadingDetails","setIsLoadingDetails","handleOpenDetails","executor","response","executorsApi","freshData","handleCloseDetails","handleCopy","text","field","handleSaveChanges","prev","handleDeleteExecutor","error","getStatusBadge","status","jsx","handleAddExecutor","result","jsxs","SPECIALIZATION_LABELS","RefreshCw","Loader2","n","Phone","Star","Fragment","X","Award","Clock","Check","Copy","EyeOff","Eye","Save","Edit3"],"mappings":"mYAQO,SAASA,IAAgB,CAC9B,KAAM,CAAE,KAAAC,CAAA,EAASC,GAAA,EACX,CAAE,UAAAC,EAAW,YAAAC,EAAa,eAAAC,EAAgB,eAAAC,EAAgB,eAAAC,EAAgB,mBAAAC,CAAA,EAAuBC,GAAA,EAGjGC,EAAmBT,GAAM,OAAS,kBAClCU,EAAqBV,GAAM,eAG3BW,EAAoBC,EAAAA,QAAQ,IAC5BH,GAAoBC,EACfR,EAAU,OAAOW,GAAKA,EAAE,iBAAmBH,CAAkB,EAE/DR,EACN,CAACA,EAAWO,EAAkBC,CAAkB,CAAC,EAGpDI,EAAAA,UAAU,IAAM,CACdR,EAAA,CACF,EAAG,CAACA,CAAc,CAAC,EAEnB,KAAM,CAACS,EAAcC,CAAe,EAAIC,EAAAA,SAAS,EAAK,EAChD,CAACC,EAAkBC,CAAmB,EAAIF,EAAAA,SAA0B,IAAI,EACxE,CAACG,EAAWC,CAAY,EAAIJ,EAAAA,SAAS,EAAK,EAC1C,CAACK,EAAcC,CAAe,EAAIN,EAAAA,SAAS,EAAK,EAChD,CAACO,EAAaC,CAAc,EAAIR,EAAAA,SAAwB,IAAI,EAC5D,CAACS,EAAkBC,CAAmB,EAAIV,EAAAA,SAAiC,CAAA,CAAE,EAE7E,CAACW,EAAsBC,CAAuB,EAAIZ,EAAAA,SAAqD,IAAI,EAC3G,CAACa,EAAUC,CAAW,EAAId,WAAS,CACvC,KAAM,GACN,MAAO,GACP,MAAO,GACP,SAAU,GACV,eAAgB,SAAA,CACjB,EACK,CAACe,EAAaC,CAAc,EAAIhB,WAOnC,CACD,KAAM,GACN,MAAO,GACP,MAAO,GACP,SAAU,GACV,eAAgB,UAChB,KAAM,UAAA,CACP,EACK,CAACiB,EAAUC,CAAW,EAAIlB,EAAAA,SAAS,EAAK,EACxC,CAACmB,EAAUC,CAAW,EAAIpB,EAAAA,SAAwB,IAAI,EACtD,CAACqB,EAAYC,CAAa,EAAItB,EAAAA,SAAS,EAAK,EAC5C,CAACuB,EAAkBC,CAAmB,EAAIxB,EAAAA,SAAS,EAAK,EAExDyB,EAAoB,MAAOC,GAAuB,CAGtDxB,EAAoBwB,CAAQ,EAC5BZ,EAAY,CACV,KAAMY,EAAS,KACf,MAAOA,EAAS,MAChB,MAAOA,EAAS,MAChB,SAAUA,EAAS,UAAY,GAC/B,eAAgBA,EAAS,cAAA,CAC1B,EACDtB,EAAa,EAAK,EAClBE,EAAgB,EAAK,EAGrBkB,EAAoB,EAAI,EACxB,GAAI,CACF,MAAMG,EAAW,MAAMC,GAAa,QAAQF,EAAS,EAAE,EACvD,GAAIC,EAAS,SAAU,CACrB,MAAME,EAAY,CAChB,GAAGH,EACH,GAAGC,EAAS,SAEZ,UAAWA,EAAS,SAAS,YAAcD,EAAS,SAAA,EAEtDxB,EAAoB2B,CAAS,EAC7Bf,EAAY,CACV,KAAMe,EAAU,KAChB,MAAOA,EAAU,MACjB,MAAOA,EAAU,MACjB,SAAUA,EAAU,UAAY,GAChC,eAAgBA,EAAU,cAAA,CAC3B,CAEH,CACF,MAAc,CAEd,QAAA,CACEL,EAAoB,EAAK,CAC3B,CACF,EAEMM,EAAqB,IAAM,CAC/B5B,EAAoB,IAAI,EACxBE,EAAa,EAAK,EAClBE,EAAgB,EAAK,CACvB,EAEMyB,EAAa,CAACC,EAAcC,IAAkB,CAClD,UAAU,UAAU,UAAUD,CAAI,EAClCxB,EAAeyB,CAAK,EACpB,WAAW,IAAMzB,EAAe,IAAI,EAAG,GAAI,CAC7C,EAEM0B,EAAoB,IAAM,CACzBjC,IACLd,EAAec,EAAiB,GAAIY,CAAQ,EAGxCA,EAAS,UACXH,EAAoByB,IAAS,CAC3B,GAAGA,EACH,CAAClC,EAAiB,EAAE,EAAGY,EAAS,QAAA,EAChC,EAGJX,EAAoB,CAAE,GAAGD,EAAkB,GAAGY,EAAU,EACxDT,EAAa,EAAK,EACpB,EAEMgC,EAAuB,SAAY,CACvC,GAAKnC,GACD,QAAQ,mDAAmD,EAAG,CAChEqB,EAAc,EAAI,EAClB,GAAI,CACF,MAAMlC,EAAea,EAAiB,EAAE,EACxC6B,EAAA,CACF,OAASO,EAAY,CACnB,MAAMA,EAAM,SAAW,qBAAqB,CAC9C,QAAA,CACEf,EAAc,EAAK,CACrB,CACF,CACF,EAEMgB,EAAkBC,GAAmB,CACzC,OAAQA,EAAA,CACN,IAAK,YAAa,OAAOC,EAAAA,IAAC,OAAA,CAAK,UAAU,mBAAmB,SAAA,WAAQ,EACpE,IAAK,OAAQ,OAAOA,EAAAA,IAAC,OAAA,CAAK,UAAU,uBAAuB,SAAA,QAAK,EAChE,IAAK,UAAW,OAAOA,EAAAA,IAAC,OAAA,CAAK,UAAU,kCAAkC,SAAA,YAAS,EAClF,QAAS,OAAOA,EAAAA,IAAC,OAAA,CAAK,UAAU,QAAS,SAAAD,EAAO,CAAA,CAEpD,EAEME,EAAoB,SAAY,CACpC,GAAI,CAAC1B,EAAY,MAAQ,CAACA,EAAY,OAAS,CAACA,EAAY,OAAS,CAACA,EAAY,SAAU,CAC1FK,EAAY,iCAAiC,EAC7C,MACF,CACAF,EAAY,EAAI,EAChBE,EAAY,IAAI,EAChB,GAAI,CACF,MAAMsB,EAAS,MAAMxD,EAAY6B,CAAW,EAGxC2B,GAAQ,IACVhC,EAAoByB,IAAS,CAAE,GAAGA,EAAM,CAACO,EAAO,EAAE,EAAG3B,EAAY,QAAA,EAAW,EAI9EH,EAAwB,CACtB,MAAOG,EAAY,MACnB,SAAUA,EAAY,QAAA,CACvB,EAEDC,EAAe,CAAE,KAAM,GAAI,MAAO,GAAI,MAAO,GAAI,SAAU,GAAI,eAAgB,UAAW,KAAM,WAAY,EAC5GjB,EAAgB,EAAK,EAErBV,EAAA,CACF,OAASgD,EAAY,CACnBjB,EAAYiB,EAAM,SAAW,mCAAmC,CAClE,QAAA,CACEnB,EAAY,EAAK,CACnB,CACF,EAEA,OACEyB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAH,MAAC,KAAA,CAAG,UAAU,mCACX,SAAAhD,EAAmB,iBAAmB,cACzC,EACCA,GAAoBC,GACnBkD,OAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,UAChCC,EAAsBnD,CAA4C,CAAA,CAAA,CAC5E,CAAA,EAEJ,EACAkD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMnD,EAAA,EACf,UAAU,oBACV,MAAM,WACN,SAAUC,EAEV,eAACuD,GAAA,CAAU,UAAW,WAAWvD,EAAqB,eAAiB,EAAE,EAAA,CAAI,CAAA,CAAA,EAG/EkD,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CAEThD,GAAoBC,GACtBuB,EAAemB,IAAS,CACtB,GAAGA,EACH,eAAgB1C,EAChB,KAAM,UAAA,EACN,EAEJM,EAAgB,EAAI,CACtB,EACA,UAAU,cACX,SAAA,wBAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,EACCT,EACCkD,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,SAAAA,MAACM,GAAQ,UAAU,uCAAA,CAAwC,CAAA,CAC7D,QAED,MAAA,CAAI,UAAU,uDACZ,SAAApD,EAAkB,IAAKgC,GACtBiB,EAAAA,KAAC,MAAA,CAEC,UAAU,mDAEV,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,MAAC,MAAA,CAAI,UAAU,8GACZ,SAAAd,EAAS,KAAK,MAAM,GAAG,EAAE,IAAIqB,GAAKA,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,MAAM,EAAG,CAAC,EAC9D,SACC,MAAA,CACC,SAAA,CAAAP,EAAAA,IAAC,KAAA,CAAG,UAAU,gBAAiB,SAAAd,EAAS,KAAK,EAC7Cc,MAAC,OAAI,UAAU,wBAAyB,WAAsBd,EAAS,cAAc,GAAK,YAAA,CAAa,CAAA,CAAA,CACzG,CAAA,EACF,EACCY,EAAeZ,EAAS,MAAM,CAAA,EACjC,EACAiB,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAACQ,EAAA,CAAM,UAAU,SAAA,CAAU,EAC1BtB,EAAS,KAAA,EACZ,EACAiB,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAACS,EAAA,CAAK,UAAU,wBAAA,CAAyB,EACxCvB,EAAS,OAAO,MAAIA,EAAS,eAAe,YAAA,CAAA,CAC/C,CAAA,EACF,EACAc,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAU,oCACV,QAAS,IAAMf,EAAkBC,CAAQ,EAC1C,SAAA,WAAA,CAAA,CAED,CAAA,EA/BKA,EAAS,EAAA,CAiCjB,EACH,EAIC5B,SACE,MAAA,CAAI,UAAU,iBACb,SAAA6C,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAH,MAAC,KAAA,CAAG,UAAU,yBACX,SAAAhD,EAAmB,8BAAgC,sBACtD,EACCA,GAAoBC,GACnBkD,OAAC,MAAA,CAAI,UAAU,4EAA4E,SAAA,CAAA,UAClFH,EAAAA,IAAC,SAAA,CAAQ,SAAAI,EAAsBnD,CAA4C,CAAA,CAAE,CAAA,EACtF,EAED0B,GACCqB,EAAAA,IAAC,MAAA,CAAI,UAAU,yEACZ,SAAArB,EACH,EAEFwB,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEZ,SAAA,CAAA,CAACnD,UACC,MAAA,CACC,SAAA,CAAAgD,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,SAAM,EACtEG,EAAAA,KAAC,SAAA,CACC,MAAO5B,EAAY,KACnB,SAAWnB,GAAMoB,EAAe,CAAE,GAAGD,EAAa,KAAMnB,EAAE,OAAO,MAAc,EAC/E,UAAU,cAEV,SAAA,CAAA4C,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,cAAW,EACpCA,EAAAA,IAAC,SAAA,CAAO,MAAM,kBAAkB,SAAA,kBAAA,CAAgB,CAAA,CAAA,CAAA,CAClD,EACF,SAED,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,QAAK,EACrEA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOzB,EAAY,KACnB,SAAWnB,GAAMoB,EAAe,CAAE,GAAGD,EAAa,KAAMnB,EAAE,OAAO,MAAO,EACxE,UAAU,cACV,YAAY,sBAAA,CAAA,CACd,EACF,SACC,MAAA,CACC,SAAA,CAAA4C,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,YAAS,EACzEA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOzB,EAAY,MACnB,SAAWnB,GAAMoB,EAAe,CAAE,GAAGD,EAAa,MAAOnB,EAAE,OAAO,MAAO,EACzE,UAAU,cACV,YAAY,mBAAA,CAAA,CACd,EACF,SACC,MAAA,CACC,SAAA,CAAA4C,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,UAAO,EACvEA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOzB,EAAY,MACnB,SAAWnB,GAAMoB,EAAe,CAAE,GAAGD,EAAa,MAAOnB,EAAE,OAAO,MAAO,EACzE,UAAU,cACV,YAAY,OAAA,CAAA,CACd,EACF,SACC,MAAA,CACC,SAAA,CAAA4C,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,WAAQ,EACxEA,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,MAAOzB,EAAY,SACnB,SAAWnB,GAAMoB,EAAe,CAAE,GAAGD,EAAa,SAAUnB,EAAE,OAAO,MAAO,EAC5E,UAAU,cACV,YAAY,UAAA,CAAA,CACd,EACF,EAEC,CAACJ,GACAmD,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAH,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,wBAAqB,EACrFG,EAAAA,KAAC,SAAA,CACC,MAAO5B,EAAY,eACnB,SAAWnB,GAAMoB,EAAe,CAAE,GAAGD,EAAa,eAAgBnB,EAAE,OAAO,MAAc,EACzF,UAAU,cAEV,SAAA,CAAA4C,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,YAAS,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,cAAc,SAAA,WAAQ,EACpCA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,SAAM,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,UAAO,EAChCA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,WAAQ,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,WAAQ,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,WAAQ,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,YAAY,SAAA,SAAM,EAChCA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,YAAS,EAChCA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,iBAAc,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,SAAM,EAC9BA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,CAC9B,CAAA,CACF,CAAA,EAEJ,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAH,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CAAEzC,EAAgB,EAAK,EAAGqB,EAAY,IAAI,CAAG,EAC5D,UAAU,uBACV,SAAUH,EACX,SAAA,QAAA,CAAA,EAGDuB,EAAAA,IAAC,SAAA,CACC,QAASC,EACT,UAAU,4DACV,SAAUxB,EAET,WACC0B,EAAAA,KAAAO,EAAAA,SAAA,CACE,SAAA,CAAAV,EAAAA,IAACM,EAAA,CAAQ,UAAU,sBAAA,CAAuB,EAAE,eAAA,CAAA,CAE9C,EAEA,UAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAID7C,GACCuC,EAAAA,IAAC,MAAA,CAAI,UAAU,iBAAiB,QAASV,EACvC,SAAAa,EAAAA,KAAC,MAAA,CAAI,UAAU,yCAAyC,QAAU/C,GAAMA,EAAE,kBAExE,SAAA,CAAA+C,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,MAAC,MAAA,CAAI,UAAU,+GACZ,SAAAvC,EAAiB,KAAK,MAAM,GAAG,EAAE,IAAI8C,GAAKA,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,MAAM,EAAG,CAAC,EACtE,SACC,MAAA,CACC,SAAA,CAAAP,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAqB,SAAAvC,EAAiB,KAAK,EACzDuC,EAAAA,IAAC,OAAI,UAAU,gBAAiB,WAAsBvC,EAAiB,cAAc,GAAK,aAAa,EACtGqC,EAAerC,EAAiB,MAAM,CAAA,CAAA,CACzC,CAAA,EACF,EACAuC,EAAAA,IAAC,SAAA,CAAO,QAASV,EAAoB,UAAU,mCAC7C,SAAAU,EAAAA,IAACW,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CACzB,CAAA,EACF,EAGAR,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6DACb,SAAA,CAAAH,EAAAA,IAACS,EAAA,CAAK,UAAU,SAAA,CAAU,EAC1BT,EAAAA,IAAC,OAAA,CAAK,UAAU,oBAAqB,WAAiB,MAAA,CAAO,CAAA,EAC/D,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,SAAA,CAAO,CAAA,EAChD,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6DACb,SAAA,CAAAH,EAAAA,IAACY,GAAA,CAAM,UAAU,SAAA,CAAU,EAC3BZ,EAAAA,IAAC,OAAA,CAAK,UAAU,oBAAqB,WAAiB,cAAA,CAAe,CAAA,EACvE,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,WAAA,CAAS,CAAA,EAClD,EACAG,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAH,EAAAA,IAACa,GAAA,CAAM,UAAU,SAAA,CAAU,QAC1B,OAAA,CAAK,UAAU,oBAAqB,SAAApD,EAAiB,gBAAkB,CAAA,CAAE,CAAA,EAC5E,EACAuC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,UAAA,CAAQ,CAAA,CAAA,CACjD,CAAA,EACF,EAGCrC,EACCwC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAH,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,MAAG,EACnEA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO3B,EAAS,KAChB,SAAWjB,GAAMkB,EAAY,CAAE,GAAGD,EAAU,KAAMjB,EAAE,OAAO,MAAO,EAClE,UAAU,aAAA,CAAA,CACZ,EACF,SACC,MAAA,CACC,SAAA,CAAA4C,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,UAAO,EACvEA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO3B,EAAS,MAChB,SAAWjB,GAAMkB,EAAY,CAAE,GAAGD,EAAU,MAAOjB,EAAE,OAAO,MAAO,EACnE,UAAU,aAAA,CAAA,CACZ,EACF,SACC,MAAA,CACC,SAAA,CAAA4C,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,QAAK,EACrEA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO3B,EAAS,MAChB,SAAWjB,GAAMkB,EAAY,CAAE,GAAGD,EAAU,MAAOjB,EAAE,OAAO,MAAO,EACnE,UAAU,aAAA,CAAA,CACZ,EACF,SACC,MAAA,CACC,SAAA,CAAA4C,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,eAAY,EAC5EA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO3B,EAAS,SAChB,SAAWjB,GAAMkB,EAAY,CAAE,GAAGD,EAAU,SAAUjB,EAAE,OAAO,MAAO,EACtE,UAAU,cACV,YAAY,kCAAA,CAAA,CACd,EACF,SACC,MAAA,CACC,SAAA,CAAA4C,EAAAA,IAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,gBAAa,EAC7EG,EAAAA,KAAC,SAAA,CACC,MAAO9B,EAAS,eAChB,SAAWjB,GAAMkB,EAAY,CAAE,GAAGD,EAAU,eAAgBjB,EAAE,OAAO,MAAiC,EACtG,UAAU,cAEV,SAAA,CAAA4C,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,YAAS,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,cAAc,SAAA,WAAQ,EACpCA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,SAAM,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,UAAO,EAChCA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,WAAQ,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,WAAQ,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,WAAQ,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,YAAY,SAAA,SAAM,EAChCA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,YAAS,EAChCA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,iBAAc,EACjCA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,SAAM,EAC9BA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,CAC9B,CAAA,CACF,CAAA,CAAA,CACF,EAEAG,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAH,EAAAA,IAAC,OAAI,UAAU,sCACb,SAAAG,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAH,EAAAA,IAACQ,EAAA,CAAM,UAAU,SAAA,CAAU,EAC3BR,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,SAAA,CAAO,CAAA,EACnC,EACAA,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAe,WAAiB,KAAA,CAAM,CAAA,CAAA,CACxD,CAAA,CACF,EAGAG,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAH,EAAAA,IAAC,MAAA,CAAI,UAAU,yCAAyC,SAAA,mBAAgB,EAExEG,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,QAAK,EAC7CG,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,+CAAgD,SAAAvC,EAAiB,MAAM,EACvFuC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMT,EAAW9B,EAAiB,MAAO,OAAO,EACzD,UAAU,gCACV,MAAM,aAEL,SAAAM,IAAgB,QAAUiC,EAAAA,IAACc,EAAA,CAAM,UAAU,yBAAyB,EAAKd,EAAAA,IAACe,EAAA,CAAK,UAAU,uBAAA,CAAwB,CAAA,CAAA,CACpH,CAAA,CACF,CAAA,EACF,EAEAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,SAAM,EAC9CA,EAAAA,IAAC,OAAI,UAAU,0BACZ,WACCG,EAAAA,KAAC,OAAA,CAAK,UAAU,gDACd,SAAA,CAAAH,EAAAA,IAACM,EAAA,CAAQ,UAAU,sBAAA,CAAuB,EAAE,aAAA,CAAA,CAE9C,EACG7C,EAAiB,UAAYQ,EAAiBR,EAAiB,EAAE,EACpE0C,EAAAA,KAAAO,WAAA,CACE,SAAA,CAAAV,EAAAA,IAAC,OAAA,CAAK,UAAU,+CACb,SAAAnC,EAAgBJ,EAAiB,UAAYQ,EAAiBR,EAAiB,EAAE,EAAK,UAAA,CACzF,EACAuC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAU5C,GAAM,CACdA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACFU,EAAgB,CAACD,CAAY,CAC/B,EACA,UAAU,2EACV,MAAOA,EAAe,SAAW,WAEhC,SAAAA,QAAgBmD,GAAA,CAAO,UAAU,wBAAwB,EAAKhB,EAAAA,IAACiB,GAAA,CAAI,UAAU,uBAAA,CAAwB,CAAA,CAAA,EAExGjB,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMT,EAAW9B,EAAiB,UAAYQ,EAAiBR,EAAiB,EAAE,GAAK,GAAI,UAAU,EAC9G,UAAU,gCACV,MAAM,aAEL,SAAAM,IAAgB,WAAaiC,EAAAA,IAACc,EAAA,CAAM,UAAU,yBAAyB,EAAKd,EAAAA,IAACe,EAAA,CAAK,UAAU,uBAAA,CAAwB,CAAA,CAAA,CACvH,EACF,EAEAf,EAAAA,IAAC,OAAA,CAAK,UAAU,+BAA+B,0CAA8B,CAAA,CAEjF,CAAA,CAAA,CACF,CAAA,EACF,EAGAG,EAAAA,KAAC,MAAA,CAAI,UAAU,oCAAoC,SAAA,CAAA,aACtC,IAAI,KAAK1C,EAAiB,SAAS,EAAE,mBAAmB,OAAO,CAAA,CAAA,CAC5E,CAAA,EACF,EAIFuC,MAAC,MAAA,CAAI,UAAU,kBACZ,WACCG,EAAAA,KAAAO,WAAA,CACE,SAAA,CAAAV,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMpC,EAAa,EAAK,EAAG,UAAU,uBAAuB,SAAA,QAAA,CAE7E,EACAuC,EAAAA,KAAC,SAAA,CAAO,QAAST,EAAmB,UAAU,4DAC5C,SAAA,CAAAM,EAAAA,IAACkB,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,WAAA,CAAA,CAE9B,CAAA,CAAA,CACF,EAEAf,EAAAA,KAAAO,EAAAA,SAAA,CAEG,SAAA,CAAA,CAAC1D,GACAgD,EAAAA,IAAC,SAAA,CACC,QAASJ,EACT,UAAU,2FACV,SAAUf,EAET,WACCsB,EAAAA,KAAAO,EAAAA,SAAA,CACE,SAAA,CAAAV,EAAAA,IAACM,EAAA,CAAQ,UAAU,sBAAA,CAAuB,EAAE,aAAA,CAAA,CAE9C,EAEA,SAAA,CAAA,EAINH,EAAAA,KAAC,SAAA,CAAO,QAAS,IAAMvC,EAAa,EAAI,EAAG,UAAW,sDAAsDZ,EAAmB,SAAW,QAAQ,GAChJ,SAAA,CAAAgD,EAAAA,IAACmB,GAAA,CAAM,UAAU,SAAA,CAAU,EAAE,eAAA,CAAA,CAE/B,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,EAIDhD,SACE,MAAA,CAAI,UAAU,sEACb,SAAAgC,EAAAA,KAAC,MAAA,CAAI,UAAU,sEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAH,EAAAA,IAAC,OAAI,UAAU,oFACb,eAACc,EAAA,CAAM,UAAU,yBAAyB,CAAA,CAC5C,EACAd,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,sBAAmB,EACnEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,oCAAA,CAAkC,CAAA,EACtE,EAEAG,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,QAAK,EAC7CG,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,gEACb,SAAA7B,EAAqB,MACxB,EACA6B,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACb,UAAU,UAAU,UAAU7B,EAAqB,KAAK,EACxDH,EAAe,YAAY,EAC3B,WAAW,IAAMA,EAAe,IAAI,EAAG,GAAI,CAC7C,EACA,UAAU,uDAET,SAAAD,IAAgB,aAAeiC,EAAAA,IAACc,EAAA,CAAM,UAAU,yBAAyB,EAAKd,EAAAA,IAACe,EAAA,CAAK,UAAU,uBAAA,CAAwB,CAAA,CAAA,CACzH,CAAA,CACF,CAAA,EACF,EAEAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,SAAM,EAC9CG,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,gEACb,SAAA7B,EAAqB,SACxB,EACA6B,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACb,UAAU,UAAU,UAAU7B,EAAqB,QAAQ,EAC3DH,EAAe,eAAe,EAC9B,WAAW,IAAMA,EAAe,IAAI,EAAG,GAAI,CAC7C,EACA,UAAU,uDAET,SAAAD,IAAgB,gBAAkBiC,EAAAA,IAACc,EAAA,CAAM,UAAU,yBAAyB,EAAKd,EAAAA,IAACe,EAAA,CAAK,UAAU,uBAAA,CAAwB,CAAA,CAAA,CAC5H,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEAf,EAAAA,IAAC,OAAI,UAAU,4DACb,eAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,+DAAA,CAEvC,CAAA,CACF,EAEAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM5B,EAAwB,IAAI,EAC3C,UAAU,0BACX,SAAA,QAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,CAAA,EAEJ,CAEJ"}