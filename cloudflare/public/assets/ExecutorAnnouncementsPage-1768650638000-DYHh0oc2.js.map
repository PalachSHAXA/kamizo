{"version":3,"file":"ExecutorAnnouncementsPage-1768650638000-DYHh0oc2.js","sources":["../../src/pages/ExecutorAnnouncementsPage.tsx"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { Megaphone, AlertTriangle, AlertCircle, Info, Clock } from 'lucide-react';\r\nimport { useAuthStore } from '../stores/authStore';\r\nimport { useDataStore } from '../stores/dataStore';\r\nimport { useLanguageStore } from '../stores/languageStore';\r\nimport type { Announcement, AnnouncementPriority } from '../types';\r\n\r\nexport function ExecutorAnnouncementsPage() {\r\n  const { user } = useAuthStore();\r\n  const { getAnnouncementsForEmployees, markAnnouncementAsViewed, fetchAnnouncements } = useDataStore();\r\n  const { language } = useLanguageStore();\r\n\r\n  // Fetch announcements on component mount\r\n  useEffect(() => {\r\n    fetchAnnouncements();\r\n  }, [fetchAnnouncements]);\r\n\r\n  const employeeAnnouncements = getAnnouncementsForEmployees();\r\n  const unreadCount = employeeAnnouncements.filter((a: Announcement) => !a.viewedBy.includes(user?.id || '')).length;\r\n\r\n  const getPriorityIcon = (priority: AnnouncementPriority) => {\r\n    switch (priority) {\r\n      case 'urgent':\r\n        return <AlertTriangle className=\"w-4 h-4 text-red-500\" />;\r\n      case 'important':\r\n        return <AlertCircle className=\"w-4 h-4 text-amber-500\" />;\r\n      default:\r\n        return <Info className=\"w-4 h-4 text-blue-500\" />;\r\n    }\r\n  };\r\n\r\n  const getPriorityBadge = (priority: AnnouncementPriority) => {\r\n    switch (priority) {\r\n      case 'urgent':\r\n        return 'bg-red-100 text-red-700 border-red-200';\r\n      case 'important':\r\n        return 'bg-amber-100 text-amber-700 border-amber-200';\r\n      default:\r\n        return 'bg-blue-100 text-blue-700 border-blue-200';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateStr: string) => {\r\n    const date = new Date(dateStr);\r\n    return date.toLocaleDateString(language === 'ru' ? 'ru-RU' : 'uz-UZ', {\r\n      day: '2-digit',\r\n      month: 'short',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n    });\r\n  };\r\n\r\n  const handleView = (announcement: Announcement) => {\r\n    if (user && !announcement.viewedBy.includes(user.id)) {\r\n      markAnnouncementAsViewed(announcement.id, user.id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6 pb-20 md:pb-0\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-xl md:text-2xl font-bold flex items-center gap-3\">\r\n          <Megaphone className=\"w-7 h-7 text-purple-500\" />\r\n          {language === 'ru' ? 'Объявления для сотрудников' : 'Xodimlar uchun e\\'lonlar'}\r\n        </h1>\r\n        {unreadCount > 0 && (\r\n          <span className=\"px-3 py-1 rounded-full bg-purple-100 text-purple-700 text-sm font-medium\">\r\n            {unreadCount} {language === 'ru' ? 'новых' : 'yangi'}\r\n          </span>\r\n        )}\r\n      </div>\r\n\r\n      {/* Info Card */}\r\n      <div className=\"glass-card p-4 bg-purple-50 border-purple-200\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <Info className=\"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5\" />\r\n          <p className=\"text-sm text-purple-700\">\r\n            {language === 'ru'\r\n              ? 'Здесь вы найдете важную информацию от руководства. Не забывайте читать объявления регулярно.'\r\n              : 'Bu yerda rahbariyatdan muhim ma\\'lumotlarni topasiz. E\\'lonlarni muntazam o\\'qishni unutmang.'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Announcements List */}\r\n      {employeeAnnouncements.length === 0 ? (\r\n        <div className=\"glass-card p-12 text-center\">\r\n          <Megaphone className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-gray-600 mb-2\">\r\n            {language === 'ru' ? 'Нет объявлений' : 'E\\'lonlar yo\\'q'}\r\n          </h3>\r\n          <p className=\"text-gray-400\">\r\n            {language === 'ru' ? 'Новые объявления появятся здесь' : 'Yangi e\\'lonlar bu yerda paydo bo\\'ladi'}\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          {employeeAnnouncements.map((announcement: Announcement) => {\r\n            const isUnread = !announcement.viewedBy.includes(user?.id || '');\r\n\r\n            return (\r\n              <div\r\n                key={announcement.id}\r\n                className={`glass-card p-5 cursor-pointer transition-all hover:shadow-md ${\r\n                  isUnread ? 'ring-2 ring-purple-400 bg-purple-50/50' : ''\r\n                }`}\r\n                onClick={() => handleView(announcement)}\r\n              >\r\n                <div className=\"flex items-start gap-4\">\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    {/* Header */}\r\n                    <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\r\n                      {isUnread && (\r\n                        <span className=\"px-2 py-0.5 rounded-full bg-purple-500 text-white text-xs font-medium\">\r\n                          {language === 'ru' ? 'Новое' : 'Yangi'}\r\n                        </span>\r\n                      )}\r\n                      <span className={`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium border ${getPriorityBadge(announcement.priority)}`}>\r\n                        {getPriorityIcon(announcement.priority)}\r\n                        {announcement.priority === 'urgent'\r\n                          ? (language === 'ru' ? 'Срочно' : 'Shoshilinch')\r\n                          : announcement.priority === 'important'\r\n                          ? (language === 'ru' ? 'Важно' : 'Muhim')\r\n                          : (language === 'ru' ? 'Обычное' : 'Oddiy')}\r\n                      </span>\r\n                    </div>\r\n\r\n                    {/* Title */}\r\n                    <h3 className=\"font-semibold text-lg text-gray-900 mb-2\">{announcement.title}</h3>\r\n\r\n                    {/* Content */}\r\n                    <p className=\"text-gray-600 whitespace-pre-wrap\">{announcement.content}</p>\r\n\r\n                    {/* Meta */}\r\n                    <div className=\"flex items-center gap-4 mt-4 text-sm text-gray-500\">\r\n                      <span className=\"flex items-center gap-1\">\r\n                        <Clock className=\"w-4 h-4\" />\r\n                        {formatDate(announcement.createdAt)}\r\n                      </span>\r\n                      <span>\r\n                        {language === 'ru' ? 'Автор' : 'Muallif'}: {announcement.authorName}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ExecutorAnnouncementsPage","user","useAuthStore","getAnnouncementsForEmployees","markAnnouncementAsViewed","fetchAnnouncements","useDataStore","language","useLanguageStore","useEffect","employeeAnnouncements","unreadCount","a","getPriorityIcon","priority","jsx","AlertTriangle","AlertCircle","Info","getPriorityBadge","formatDate","dateStr","handleView","announcement","jsxs","Megaphone","isUnread","Clock"],"mappings":"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"}